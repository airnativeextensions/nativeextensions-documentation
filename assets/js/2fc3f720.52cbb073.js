"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[55450],{28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var s=n(96540);const i={},o=s.createContext(i);function r(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:t},e.children)}},96302:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"detectscreenshot/authorisation","title":"Authorisation","description":"On Android there is no direct way to detect screenshots so instead this extension uses a common technique of observing the user\'s media library","source":"@site/docs/detectscreenshot/authorisation.md","sourceDirName":"detectscreenshot","slug":"/detectscreenshot/authorisation","permalink":"/docs/detectscreenshot/authorisation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Authorisation","sidebar_label":"Authorisation"},"sidebar":"detectscreenshot","previous":{"title":"AIR","permalink":"/docs/detectscreenshot/add-the-extension"},"next":{"title":"Usage","permalink":"/docs/detectscreenshot/usage"}}');var i=n(74848),o=n(28453);const r={title:"Authorisation",sidebar_label:"Authorisation"},a=void 0,c={},d=[{value:"Requesting Authorisation",id:"requesting-authorisation",level:2},{value:"Event based",id:"event-based",level:3},{value:"Callback based",id:"callback-based",level:3},{value:"Imports",id:"imports",level:2}];function h(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"On Android there is no direct way to detect screenshots so instead this extension uses a common technique of observing the user's media library\nand watching for additions to places where screenshots are normally stored. This approach however requires authorisation to read the user's media."}),"\n",(0,i.jsx)(t.p,{children:"On iOS this process is not needed and it will always return authorised."}),"\n",(0,i.jsx)(t.h2,{id:"requesting-authorisation",children:"Requesting Authorisation"}),"\n",(0,i.jsx)(t.p,{children:"To this end the extension provides several helpers to check and request authorisation."}),"\n",(0,i.jsx)(t.p,{children:"On Android these permissions are listed through the manifest additions.\nOn older versions of Android these permissions are accepted when the user installs the application.\nMore modern versions (Marshmallow 6 [v23]+) require that you request the user grants the permissions.\nYou will need to list the permissions in your manifest and then follow the code below."}),"\n",(0,i.jsxs)(t.p,{children:["You should respect the ",(0,i.jsx)(t.code,{children:"SHOULD_EXPLAIN"})," status by displaying additional information to your user about why you require this functionality."]}),"\n",(0,i.jsx)(t.h3,{id:"event-based",children:"Event based"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-actionscript",children:'DetectScreenshot.instance.addEventListener( AuthorisationEvent.CHANGED, authorisationStatus_changedHandler );\n\nswitch (DetectScreenshot.instance.authorisationStatus())\n{\n\tcase AuthorisationStatus.SHOULD_EXPLAIN:\n\tcase AuthorisationStatus.NOT_DETERMINED:\n\t\t// REQUEST ACCESS: This will display the permission dialog\n\t\tDetectScreenshot.instance.requestAuthorisation();\n\t\treturn;\n\t\n\tcase AuthorisationStatus.DENIED:\n\tcase AuthorisationStatus.UNKNOWN:\n\tcase AuthorisationStatus.RESTRICTED:\n\t\t// ACCESS DENIED: You should inform your user appropriately\n\t\treturn;\n\t\t\n\tcase AuthorisationStatus.AUTHORISED:\n\t\t// AUTHORISED\n\t\tbreak;\t\t\t\t\t\t\n}\n\nfunction authorisationStatus_changedHandler( event:AuthorisationEvent ):void\n{\n\ttrace( "authorisationStatus_changedHandler: "+event.status );\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"callback-based",children:"Callback based"}),"\n",(0,i.jsxs)(t.p,{children:["Alternatively you can use a callback function for the ",(0,i.jsx)(t.code,{children:"requestAuthorisation()"})," method:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-actionscript",children:'DetectScreenshot.instance.requestAuthorisation(\n    function ( status:String ):void\n    {\n        trace( "requestAuthorisation(): status=" + status );\n    } );\n'})}),"\n",(0,i.jsx)(t.h2,{id:"imports",children:"Imports"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-actionscript",children:"import com.distriqt.extension.detectscreenshot.DetectScreenshot;\nimport com.distriqt.extension.detectscreenshot.AuthorisationStatus;\n"})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);