"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[38371],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return h}});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),u=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=u(e.components);return i.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),c=u(n),h=a,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||o;return n?i.createElement(m,r(r({ref:t},s),{},{components:n})):i.createElement(m,r({ref:t},s))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=c;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:a,r[1]=p;for(var u=2;u<o;u++)r[u]=n[u];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},13519:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return p},metadata:function(){return u},toc:function(){return d}});var i=n(87462),a=n(63366),o=(n(67294),n(3905)),r=["components"],p={title:"Add the Plugin",sidebar_label:"Unity"},l=void 0,u={unversionedId:"appgroupdefaults/add-the-plugin",id:"appgroupdefaults/add-the-plugin",title:"Add the Plugin",description:"First step is always to add the plugin to your development environment.",source:"@site/docs/appgroupdefaults/add-the-plugin.md",sourceDirName:"appgroupdefaults",slug:"/appgroupdefaults/add-the-plugin",permalink:"/docs/appgroupdefaults/add-the-plugin",draft:!1,tags:[],version:"current",frontMatter:{title:"Add the Plugin",sidebar_label:"Unity"},sidebar:"appgroupdefaults",previous:{title:"AIR",permalink:"/docs/appgroupdefaults/add-the-extension"},next:{title:"Usage",permalink:"/docs/appgroupdefaults/usage"}},s={},d=[{value:"Asset Store",id:"asset-store",level:2},{value:"Manual Installation",id:"manual-installation",level:2},{value:"Import the Plugin",id:"import-the-plugin",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Manifest Additions",id:"manifest-additions",level:4},{value:"Queries",id:"queries",level:5},{value:"Checking for Support",id:"checking-for-support",level:2},{value:"Configuration",id:"configuration",level:2},{value:"iOS",id:"ios-1",level:3},{value:"Android",id:"android-1",level:3}],c={toc:d};function h(e){var t=e.components,p=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},c,p,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"First step is always to add the plugin to your development environment. "),(0,o.kt)("h2",{id:"asset-store"},"Asset Store"),(0,o.kt)("p",null,"Open the Asset Store in your browser and add the plugin to your assets."),(0,o.kt)("p",null,'Open the Package Manager (Window > Package Manager) in the Unity Editor and select the "My Assets" section. Select the plugin, and click Import in the bottom right.'),(0,o.kt)("h2",{id:"manual-installation"},"Manual Installation"),(0,o.kt)("p",null,"In unity you import the package by selecting ",(0,o.kt)("inlineCode",{parentName:"p"},"Assets / Import Package / Custom Package ...")," and then browsing to the unity plugin package file: ",(0,o.kt)("inlineCode",{parentName:"p"},"com.distriqt.AppGroupDefaults.unitypackage"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(6179).Z,width:"408",height:"268"})),(0,o.kt)("p",null,"You can manually download the extension from our repository:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-Share"},"https://github.com/distriqt/ANE-Share"))),(0,o.kt)("h2",{id:"import-the-plugin"},"Import the Plugin"),(0,o.kt)("p",null,"This will present the import dialog and display all the files for the plugin, make sure all the files are selected."),(0,o.kt)("p",null,"The plugin will be added to your project and you can now use the plugins functionality in your application."),(0,o.kt)("h3",{id:"ios"},"iOS"),(0,o.kt)("p",null,"In unity you can add the application groups either through scripts or through the Xcode project generated from the build."),(0,o.kt)("p",null,"To do it through Xcode simply select ",(0,o.kt)("strong",{parentName:"p"},"Capabilities")," in your project settings and enable the App Group capability. Then select your application groups you plan to use in this application. "),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(25883).Z,width:"846",height:"257"})),(0,o.kt)("p",null,"However we suggest use the automatic configuration method by setting your values in the ",(0,o.kt)("inlineCode",{parentName:"p"},"/Assets/distriqt/AppGroupDefaultsUnity/AppGroupDefaults/Editor/AppGroupDefaultsConfig.cs")," script."),(0,o.kt)("p",null,"This script will be run when your application's Xcode project is built and automatically enable the app group capability and insert the app groups specified. Using this script means you won't have to update each time you build the Xcode project. See the ",(0,o.kt)("a",{parentName:"p",href:"#configuration"},"configuration")," information later as to how to set the group identifier in these scripts."),(0,o.kt)("h3",{id:"android"},"Android"),(0,o.kt)("admonition",{title:"Proguard",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you are using a custom proguard configuration you may need to add the following line to ensure the interface class for the plugin is accessible to unity at runtime."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre"},"-keep class com.distriqt.extension.appgroupdefaults.AppGroupDefaultsUnityPlugin {*;}\n"))),(0,o.kt)("h4",{id:"manifest-additions"},"Manifest Additions"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"For standard unity builds these additions will be automatically added to your build. "),(0,o.kt)("p",{parentName:"admonition"},"However if you manually control your manifest then you should follow the documentation below to place these additions in your custom application ",(0,o.kt)("inlineCode",{parentName:"p"},"AndroidManifest.xml")," file. ")),(0,o.kt)("p",null,"You should place the following in your manifests ",(0,o.kt)("inlineCode",{parentName:"p"},"application")," tag:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- For the content provider and broadcast receiver method --\x3e\n<application>\n                \n    <meta-data android:name="app_group" android:value="[APPGROUP]" />\n    <meta-data android:name="app_authority" android:value="group.[APPID].provider" />\n    <meta-data android:name="app_authority_matcher" android:value="group\\\\.(?:[a-z,1-9]{1,}\\\\.)*provider" />\n\n    <provider\n        android:name="com.distriqt.extension.appgroupdefaults.provider.SharedProvider"\n        android:authorities="group.[APPID].provider"\n        android:exported="true" >\n    </provider>\n        \n    <receiver\n        android:name="com.distriqt.extension.appgroupdefaults.provider.SharedContentChangedReceiver"\n        android:enabled="true"\n        android:exported="true" >\n        <intent-filter>\n            <action android:name="[APPGROUP]"/>\n        </intent-filter>\n    </receiver>\n\n</application>\n')),(0,o.kt)("p",null,"You should replace ",(0,o.kt)("inlineCode",{parentName:"p"},"[APPGROUP]")," with your application group.\nThis must be done in the meta-data tag and in the receiver.\nFor example: ",(0,o.kt)("inlineCode",{parentName:"p"},"group.com.distriqt.test")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'    <meta-data android:name="app_group" android:value="group.com.distriqt.test" />\n')),(0,o.kt)("p",null,"You also need to define an ",(0,o.kt)("strong",{parentName:"p"},"application authority"),", this must be different for\neach of your applications but must be matchable using the matcher. We suggest using\nthe example above replacing ",(0,o.kt)("inlineCode",{parentName:"p"},"[APPID]")," with your application id, for example an app_authority\nmay be, ",(0,o.kt)("inlineCode",{parentName:"p"},"group.com.distriqt.test.app1.provider")," as below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'    <meta-data android:name="app_authority" android:value="group.com.distriqt.test.app1.provider" />\n')),(0,o.kt)("p",null,"You must place the application authority both in the meta-data tag and in the provider."),(0,o.kt)("h5",{id:"queries"},"Queries"),(0,o.kt)("p",null,"Since Android API v30, Google has limited the ability to discover other applications via use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"<queries>")," tag in your manifest. You must specify the applications you wish to access in this area otherwise the application won't be able to discover other applications."),(0,o.kt)("p",null,"Add the following to your manifest:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'<queries>\n    <provider android:authorities="app_authority" />\n</queries>\n')),(0,o.kt)("p",null,"You should add a provider line for each application you are communicating with and replacing ",(0,o.kt)("inlineCode",{parentName:"p"},"app_authority")," with the ",(0,o.kt)("inlineCode",{parentName:"p"},"app_authority")," value for that application."),(0,o.kt)("p",null,"Alternatively you can add the ",(0,o.kt)("inlineCode",{parentName:"p"},"QUERY_ALL_PACKAGES")," permission, however this is discouraged."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="android.permission.QUERY_ALL_PACKAGES"/>\n')),(0,o.kt)("h2",{id:"checking-for-support"},"Checking for Support"),(0,o.kt)("p",null,"You can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"isSupported")," flag to determine if this extension is supported on the current platform and device."),(0,o.kt)("p",null,"This allows you to react to whether the functionality is available on the device and provide an alternative solution if not."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csharp"},"if (AppGroupDefaults.isSupported)\n{\n    // Functionality here\n}\n")),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"To configure your application open the ",(0,o.kt)("inlineCode",{parentName:"p"},"AppGroupDefaultsConfig.cs")," file and change the configuration values for your application. (This file is located at ",(0,o.kt)("inlineCode",{parentName:"p"},"/Assets/distriqt/AppGroupDefaultsUnity/AppGroupDefaults/Editor/AppGroupDefaultsConfig.cs"),")."),(0,o.kt)("p",null,"This file has 2 important configuration values:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"groupIdentifier")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"applicationAuthority"))),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"These values are used to configure the iOS Xcode project and the Android manifest. There are some additional configuration values supplied at runtime.")),(0,o.kt)("h3",{id:"ios-1"},"iOS"),(0,o.kt)("p",null,"For iOS the ",(0,o.kt)("inlineCode",{parentName:"p"},"groupIdentifier")," is the identifier for the group you created in the developer console, eg ",(0,o.kt)("inlineCode",{parentName:"p"},"group.com.distriqt.test"),". "),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"applicationAuthority")," value is not used on iOS."),(0,o.kt)("p",null,"To confirm this was done successfully (or to do it manually) you can open the Xcode project after your build and simply select ",(0,o.kt)("strong",{parentName:"p"},"Capabilities")," in your project settings and ensure the App Group capability is enabled. Then select your application groups you plan to use in this application. "),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(25883).Z,width:"846",height:"257"})),(0,o.kt)("h3",{id:"android-1"},"Android"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"groupIdentifier")," can be anything you require, generally for simplicity we suggest leaving it as the same identifier as for the iOS group. This value should be the same for every application you use inside this group."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"applicationAuthority")," uniquely identifies this application content provider, while being in a specific pattern that the plugin uses to identify other providers that it can potentially synchronise with. To this end we suggest using ",(0,o.kt)("inlineCode",{parentName:"p"},"group.COMMON.UNIQUE.provider")," as this value, replacing ",(0,o.kt)("inlineCode",{parentName:"p"},"COMMON")," with some common value used across all your applications and ",(0,o.kt)("inlineCode",{parentName:"p"},"UNIQUE")," with something unique for this application, for example:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"group.com.distriqt.authority.unity1.provider")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"group.com.distriqt.authority.unity2.provider")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"group.com.distriqt.authority.unity3.provider"))),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"If you are manually managing the manifest for your Android application make sure you set these values directly in the manifest as described above")))}h.isMDXComponent=!0},6179:function(e,t,n){t.Z=n.p+"assets/images/unity-import-package-b85c051a845ff354a7a93475c2d8e06a.png"},25883:function(e,t,n){t.Z=n.p+"assets/images/unity-xcode-capabilities-5eaa0522a219e66b1d6a75e4d4bec002.png"}}]);