<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Billing Service | air native extensions</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" property="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for air native extensions"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Billing Service | air native extensions"><meta data-react-helmet="true" name="description" content="Setting up a Billing Service"><meta data-react-helmet="true" property="og:description" content="Setting up a Billing Service"><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/inappbilling/billing-service"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/inappbilling/billing-service"><link rel="stylesheet" href="/styles.df1bea85.css">
<link rel="preload" href="/styles.ad507435.js" as="script">
<link rel="preload" href="/runtime~main.d2eedcde.js" as="script">
<link rel="preload" href="/main.8c1a2657.js" as="script">
<link rel="preload" href="/1.383d313e.js" as="script">
<link rel="preload" href="/2.79c603f0.js" as="script">
<link rel="preload" href="/716.a5f42a2e.js" as="script">
<link rel="preload" href="/719.ee0b5ffc.js" as="script">
<link rel="preload" href="/935f2afb.7090bbf5.js" as="script">
<link rel="preload" href="/17896441.82c8a9a1.js" as="script">
<link rel="preload" href="/cdd3f1f6.125d2d80.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="announcementBar_1l0Z" style="background-color:#880000;color:#FFF" role="banner"><div class="announcementBarContent_1xni">This is the new airnativeextensions documentation site and is currently under development. <a href="https://github.com/airnativeextensions/nativeextensions-documentation/issues">Please let us know if you find any issues.</a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ane-icon-black.png" alt="AIR Native Extensions"><strong class="navbar__title">AIR Native Extensions</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx"> </span></div><div class="react-toggle-track-x"><span class="toggle_BsTx"> </span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ane-icon-black.png" alt="AIR Native Extensions"><strong class="navbar__title">AIR Native Extensions</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/news/">News</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/inappbilling">InAppBilling</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Setup your Billing Service</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/apple.apple-in-app-purchases">apple.Apple In-App Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/google.google-play-inapp-billing">google.Google Play InApp Billing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/amazon.amazon-in-app-purchasing">amazon.Amazon In-App Purchasing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/huawei.huawei-appgallery">huawei.Huawei AppGallery</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Setup the Extension</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/add-the-extension">Add the Extension</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/inappbilling/billing-service">Billing Service</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Usage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/products">Products</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/make-a-purchase">Make a Purchase</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/pending-purchases">Pending Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/restore-purchases">Restore Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/get-purchases">Get Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/consuming-purchases">Consuming Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/change-a-purchase">Change a Purchase</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/promotions">Promotions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Subscription Discounts and Offers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/discounts">Discounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/introductory-prices">Introductory Prices</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">In-App Updates</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/in-app-updates">In App Updates</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Help</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/migration">Migration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/apple.testing-ios-subscriptions">apple.Testing iOS Subscriptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/amazon.testing-amazon-in-app-purchasing">amazon.Testing Amazon In-App Purchasing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/huawei.testing-huawei-appgallery-purchases">huawei.Testing Huawei AppGallery Purchases</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/server-side-verification">Server Side Verification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/user-data">User Data</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/inappbilling/changelog">changelog</a></li><li class="menu__list-item"><a href="https://docs.airnativeextensions.com/asdocs/inappbilling/" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">asdocs</a></li><li class="menu__list-item"><a href="http://github.com/distriqt/ANE-InAppBilling/issues/new" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Contact Support</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Billing Service</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setting-up-a-billing-service"></a>Setting up a Billing Service<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-up-a-billing-service" title="Direct link to heading">#</a></h2><p>Before starting here you should make sure you have already setup the service for your application
as outlined in earlier sections.
This is where you would have added products to your application in the appropriate developer console.</p><p>The next step to using the functionality in this extension is to setup a billing (or purchasing) service.
This simply requires you to set the service you plan on using and calling <code>setup</code> with the service key (if required).</p><p>The following uses the default for the current platform and specifies the Google Play Billing Public License key:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-actionscript codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">BillingService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BillingService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setGooglePlayPublicKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">GOOGLE_PLAY_INAPP_BILLING_KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> success</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Boolean </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> service </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>This call performs a few things internally </p><ul><li>Initialises the billing service</li><li>Initialises the purchase queue </li><li>Adds appropriate purchase handlers</li><li>Checks the state of any pending purchases</li></ul><p>The return value of the <code>setup</code> function indicates if the configured service type is supported on
the current device. This may return <code>false</code> if you have for example requests Apple In-App Purchases on
an Android device. </p><p>Once this is complete the <code>InAppBillingEvent.SETUP_SUCCESS</code> event will be dispatched and the service
is available for queries.</p><p>If an error occurred then the <code>InAppBillingEvent.SETUP_FAILURE</code> event will be dispatched. This is a fatal
event and will stop any other functionality from working successfully. Generally this only occurs due
to a misconfiguration and is to help you get an application working correctly however you should make
sure that you handle the event appropriately.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="events"></a>Events<a aria-hidden="true" tabindex="-1" class="hash-link" href="#events" title="Direct link to heading">#</a></h3><p>We suggest you listen to the following four events before calling setup:</p><ul><li><code>InAppBillingEvent.SETUP_SUCCESS</code>: Dispatched when setup is successfully completed;</li><li><code>InAppBillingEvent.SETUP_FAILURE</code>: Dispatched when there was an error during setup;</li><li><code>PurchaseEvent.PURCHASES_UPDATED</code>: Dispatched if there are pending purchases needing to be processed;</li><li><code>PurchaseRequestEvent.SHOULD_ADD_PURCHASE</code>: Dispatched if the app was launched from an AppStore promotional purchase (see <a href="/docs/inappbilling/promotions">Promotions</a>).</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-actionscript codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> InAppBillingEvent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SETUP_SUCCESS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setup_successHandler </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> InAppBillingEvent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SETUP_FAILURE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setup_failureHandler </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> PurchaseEvent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">PURCHASES_UPDATED</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchases_updatedHandler </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> PurchaseRequestEvent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SHOULD_ADD_PURCHASE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchaseRequest_shouldAddPurchaseHandler </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                        </span></div><div class="token-line" style="color:#393A34"><span class="token plain">InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BillingService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setGooglePlayPublicKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">GOOGLE_PLAY_INAPP_BILLING_KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="service-type"></a>Service Type<a aria-hidden="true" tabindex="-1" class="hash-link" href="#service-type" title="Direct link to heading">#</a></h3><p>The billing service type will be automatically selected based on the default of the current device platform. However if you wish to specify you can set a particular type in the <code>BillingService</code> constructor to specify a particular platform:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-actionscript codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">BillingService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BillingService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setGooglePlayPublicKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">GOOGLE_PLAY_INAPP_BILLING_KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> success</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Boolean </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> service </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Set the required service type and call setup</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">InAppBilling</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setServiceType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> InAppBillingServiceTypes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">GOOGLE_PLAY_INAPP_BILLING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p><strong>This must be called before <code>setup()</code>.</strong> Calling it after <code>setup()</code> will have no affect.</p><blockquote><p>Note: </p><p>You do not need to call <code>setServiceType</code>.
If you do not call it then the default for the current platform will be used,
i.e. Apple InApp Purchases on iOS and Google&#x27;s Play InApp Billing on Android.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pending-purchases"></a>Pending Purchases<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pending-purchases" title="Direct link to heading">#</a></h3><p>Note that the pending purchases may not be available to you at the  <code>InAppBillingEvent.SETUP_SUCCESS</code> event, as they may be updated after setup has completed. This is particularly true on iOS/tvOS where the payment queue update (which populates the pending purchases) will occur a short time after setup succeeds.</p><p>This update will be indicated by a <code>PurchaseEvent.PURCHASES_UPDATED</code>, indicating there are purchases to process.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/inappbilling/add-the-extension"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Add the Extension</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/inappbilling/products"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Products Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-a-billing-service" class="table-of-contents__link">Setting up a Billing Service</a><ul><li><a href="#events" class="table-of-contents__link">Events</a></li><li><a href="#service-type" class="table-of-contents__link">Service Type</a></li><li><a href="#pending-purchases" class="table-of-contents__link">Pending Purchases</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">twitter</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">stack overflow</a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">starling</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">privacy</a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item">license</a></li></ul></div></div><div class="text--center"><div><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright Â© 2020 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/styles.ad507435.js"></script>
<script src="/runtime~main.d2eedcde.js"></script>
<script src="/main.8c1a2657.js"></script>
<script src="/1.383d313e.js"></script>
<script src="/2.79c603f0.js"></script>
<script src="/716.a5f42a2e.js"></script>
<script src="/719.ee0b5ffc.js"></script>
<script src="/935f2afb.7090bbf5.js"></script>
<script src="/17896441.82c8a9a1.js"></script>
<script src="/cdd3f1f6.125d2d80.js"></script>
</body>
</html>