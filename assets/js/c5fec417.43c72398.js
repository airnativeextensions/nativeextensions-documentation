"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[19374],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>v});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),c=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=c(e.components);return i.createElement(s.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(t),m=a,v=p["".concat(s,".").concat(m)]||p[m]||u[m]||r;return t?i.createElement(v,o(o({ref:n},d),{},{components:t})):i.createElement(v,o({ref:n},d))}));function v(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<r;c++)o[c]=t[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7793:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var i=t(87462),a=(t(67294),t(3905));const r={title:"Sign In",sidebar_label:"Sign In"},o=void 0,l={unversionedId:"gameservices/sign-in",id:"gameservices/sign-in",title:"Sign In",description:"The following code demonstrates how to initiate a player sign in. You should perform the sign in",source:"@site/docs/gameservices/sign-in.md",sourceDirName:"gameservices",slug:"/gameservices/sign-in",permalink:"/docs/gameservices/sign-in",draft:!1,tags:[],version:"current",frontMatter:{title:"Sign In",sidebar_label:"Sign In"},sidebar:"gameservices",previous:{title:"Initialise the Service",permalink:"/docs/gameservices/initialise-the-service"},next:{title:"Leaderboards",permalink:"/docs/gameservices/leaderboards"}},s={},c=[{value:"Sign Out",id:"sign-out",level:2},{value:"Disconnect",id:"disconnect",level:2},{value:"Player Information",id:"player-information",level:2},{value:"Identifiers",id:"identifiers",level:3},{value:"Images",id:"images",level:3},{value:"Advanced",id:"advanced",level:2},{value:"Android",id:"android",level:3}],d={toc:c},p="wrapper";function u(e){let{components:n,...t}=e;return(0,a.kt)(p,(0,i.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The following code demonstrates how to initiate a player sign in. You should perform the sign in\naction on some user input (button) in your game. The process is fairly straight forward, you call\n",(0,a.kt)("inlineCode",{parentName:"p"},"signIn")," and await the ",(0,a.kt)("inlineCode",{parentName:"p"},"GameServicesEvent.SIGN_IN_SUCCESS")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"GameServicesEvent.SIGN_IN_FAILED"),"\nevents."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.addEventListener( GameServicesEvent.SIGN_IN_SUCCESS,   signInSuccessHandler );\nGameServices.service.addEventListener( GameServicesEvent.SIGN_IN_FAILED,    signInFailedHandler );\n\nif (!GameServices.service.isSignedIn())\n{\n    GameServices.service.signIn();\n}\n")),(0,a.kt)("p",null,"Then await the events:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'function signInSuccessHandler( event:GameServicesEvent ):void\n{\n    var player:Player = GameServices.service.getPlayer();\n    if (player != null)\n    {\n        trace( "player :: "+ "["+player.id+"]" +player.displayName + "(" + player.alias + ")" );\n    }\n    \n    //\n    // If you are using multiplayer functionality then this \n    // is the best time to register for notifications from\n    // multiplayer game invitations and match updates.\n    GameServices.service.register();\n}\n\nfunction signInFailedHandler( event:GameServicesEvent ):void\n{\n    // Handle the error\n}\n')),(0,a.kt)("h2",{id:"sign-out"},"Sign Out"),(0,a.kt)("p",null,"You can sign out a user by calling the ",(0,a.kt)("inlineCode",{parentName:"p"},"signOut()")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.signOut();\n")),(0,a.kt)("p",null,"When a user is signed out the extension will dispatch the ",(0,a.kt)("inlineCode",{parentName:"p"},"GameServicesEvent.SIGN_OUT_SUCCESS")," event."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.addEventListener( GameServicesEvent.SIGN_OUT_SUCCESS,  gameServices_signOutSuccessHandler );\n\nfunction gameServices_signOutSuccessHandler( event:GameServicesEvent ):void\n{\n    // User signed out\n}\n")),(0,a.kt)("p",null,"There are also UI driven methods provided for the user to sign out, for example, the leaderboard UI provides the facility for a user to log out. When this occurs you will similarly receive the ",(0,a.kt)("inlineCode",{parentName:"p"},"GameServicesEvent.SIGN_OUT_SUCCESS")," event. "),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"It is very important that you handle these ",(0,a.kt)("inlineCode",{parentName:"p"},"GameServicesEvent.SIGN_OUT_SUCCESS")," events to update your UI accordingly.")),(0,a.kt)("p",null,"Once a user has signed out, ",(0,a.kt)("inlineCode",{parentName:"p"},"isSignedIn()")," will return ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," and all user functionality will fail. "),(0,a.kt)("h2",{id:"disconnect"},"Disconnect"),(0,a.kt)("p",null,"It is a requirement for most services that you provide a facility for a user to revoke or disconnect their account from your game. This means that if the player logs in at a later point, they will be required to authorise your application again for any additional permissions your application requests."),(0,a.kt)("p",null,"To disconnect your user, call the ",(0,a.kt)("inlineCode",{parentName:"p"},"disconnect()")," function. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (GameServices.service.isSignedIn())\n{\n    GameServices.service.disconnect();\n}\n")),(0,a.kt)("p",null,"This process will also trigger the ",(0,a.kt)("inlineCode",{parentName:"p"},"GameServicesEvent.SIGN_OUT_SUCCESS")," event indicating that the current user was signed out. "),(0,a.kt)("p",null,"Some services may not support this functionality and will return ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," (eg Game Center), you may wish to just sign out users on these platforms. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (GameServices.service.isSignedIn())\n{\n    if (!GameServices.service.disconnect())\n    {\n        GameServices.service.signOut();\n    }\n}\n")),(0,a.kt)("h2",{id:"player-information"},"Player Information"),(0,a.kt)("p",null,"Once signed in you will be able to retrieve information about the player using the ",(0,a.kt)("inlineCode",{parentName:"p"},"loadPlayer()")," function.\nThis will load information into a ",(0,a.kt)("inlineCode",{parentName:"p"},"Player")," object to give you information about the player such as ",(0,a.kt)("inlineCode",{parentName:"p"},"alias"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"displayName")," and a player identifier (ID). "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'GameServices.service.addEventListener( PlayerEvent.LOADED, loadPlayer_loadedHandler );\nGameServices.service.addEventListener( PlayerEvent.ERROR, loadPlayer_errorHandler );\nGameServices.service.loadPlayer();\n\nfunction loadPlayer_loadedHandler( event:PlayerEvent ):void\n{\n    var player:Player = event.player;\n\n    trace( "player :: "+ "["+player.id+"]" +player.displayName + "(" + player.alias + ")" );\n}\n\nfunction loadPlayer_errorHandler( event:PlayerEvent ):void\n{\n    trace( "loadPlayer_errorHandler(): " + event.error );\n}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: The ",(0,a.kt)("inlineCode",{parentName:"p"},"getPlayer()")," function has been ",(0,a.kt)("strong",{parentName:"p"},"deprecated")," as the process to retrieve player information is now asynchronous.\nUsing ",(0,a.kt)("inlineCode",{parentName:"p"},"getPlayer()")," will only return the previously retrieved information and may be out of date or ",(0,a.kt)("inlineCode",{parentName:"p"},"null"),".\nCalling it will trigger a load of the player information so it will become available shortly after."),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"var player:Player = GameServices.service.getPlayer();\n"))),(0,a.kt)("h3",{id:"identifiers"},"Identifiers"),(0,a.kt)("p",null,"There are several identifiers that can be used to identify a player."),(0,a.kt)("p",null,"The simplest is the ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," field on the ",(0,a.kt)("inlineCode",{parentName:"p"},"Player")," object. This identifier will be unique for a player for your game and will likely not represent the same player in another game. If you only need to identify users within your application then this is the best identifier to use. "),(0,a.kt)("p",null,"If you need to identify players across multiple games that you develop you will need to use the ",(0,a.kt)("inlineCode",{parentName:"p"},"teamPlayerId"),". Services that support team identifiers will return an identifier that will be consistent across all games provided through your developer account (on iOS this mean using the same developer Team ID)."),(0,a.kt)("admonition",{title:"GameCenter",type:"note"},(0,a.kt)("p",{parentName:"admonition"},'Versions prior to 8.4 used a now deprecated "playerId" value for the ',(0,a.kt)("inlineCode",{parentName:"p"},"id")," field. If you need to compare identifiers from the legacy implementation you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"playerId")," field. This value will be equivalent to the ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," field in versions 8.3 and earlier.")),(0,a.kt)("h3",{id:"images"},"Images"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Player")," also contains image and icon / avatar urls, however as they may be represented as content providers on Android we don't suggest you attempt to access them directly instead use the ",(0,a.kt)("inlineCode",{parentName:"p"},"loadPlayerIcon()")," function: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'GameServices.service.addEventListener( PlayerIconEvent.LOADED, playerIconLoadedHandler );\nGameServices.service.addEventListener( PlayerIconEvent.ERROR,  playerIconErrorHandler );\n                    \nGameServices.service.loadPlayerIcon( player );\n\nfunction playerIconLoadedHandler( event:PlayerIconEvent ):void\n{\n    // event.icon will contain the BitmapData of the player\'s icon\n\n    // Starling example\n    var texture:Texture = Texture.fromBitmapData( event.icon );\n}\n\nprivate function playerIconErrorHandler( event:PlayerIconEvent ):void\n{\n    trace( "Error: " event.error );\n}\n')),(0,a.kt)("h2",{id:"advanced"},"Advanced"),(0,a.kt)("h3",{id:"android"},"Android"),(0,a.kt)("p",null,"We highly recommend utilising the ",(0,a.kt)("a",{parentName:"p",href:"https://airnativeextensions.com/extension/com.distriqt.GoogleIdentity"},"Google Identity ANE")," for advanced sign-in options. It is much more complete, providing additional controls over the sign in process and user authentication options. If you are looking for additional scopes and permissions please utilise that ANE."),(0,a.kt)("p",null,"With Google Play Games if you require advanced user information such as requesting additional scopes you firstly setup the ANE with the ",(0,a.kt)("inlineCode",{parentName:"p"},"GoogleIdentityOptions.DEFAULT_GAMES_SIGN_IN")," option:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'var options:GoogleIdentityOptions = new GoogleIdentityOptionsBuilder( GoogleIdentityOptions.DEFAULT_GAMES_SIGN_IN )\n        .requestProfile()\n        .requestEmail()\n        .setIOSClientID( Config.googlePlayClientID )\n        .addScope( "additional/required/scope" )\n        .build();\n\nGoogleIdentity.service.setup( options );\n')),(0,a.kt)("p",null,"Then use the Google Identity sign in call instead of the Game Services:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"GoogleIdentity.service.addEventListener( GoogleIdentityEvent.SIGN_IN, signInHandler );\n\nGoogleIdentity.service.signIn();\n\n\nfunction signInHandler( event:GoogleIdentityEvent ):void \n{\n    // Sign in complete\n}\n")),(0,a.kt)("p",null,"Once complete the ",(0,a.kt)("inlineCode",{parentName:"p"},"GameServices.service.isSignedIn()")," will correctly return the status as though the Game Services ANE was used directly."))}u.isMDXComponent=!0}}]);