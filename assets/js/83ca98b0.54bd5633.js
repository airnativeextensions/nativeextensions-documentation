"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[89253],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var a=t(96540);const i={},r=a.createContext(i);function s(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:n},e.children)}},69536:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"application/general-helpers","title":"General Helpers","description":"This section details the available ANE work arounds for current issues","source":"@site/docs/application/general-helpers.md","sourceDirName":"application","slug":"/application/general-helpers","permalink":"/docs/application/general-helpers","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"General Helpers","sidebar_label":"General Helpers"},"sidebar":"application","previous":{"title":"Settings","permalink":"/docs/application/settings"},"next":{"title":"Migrating to v8.0","permalink":"/docs/application/migrating-to-v8.0"}}');var i=t(74848),r=t(28453);const s={title:"General Helpers",sidebar_label:"General Helpers"},o=void 0,l={},c=[{value:"Android Black Screen",id:"android-black-screen",level:2},{value:"Usage",id:"usage",level:3},{value:"Starling Context Loss Overlay",id:"starling-context-loss-overlay",level:2},{value:"AIR Android SDK 28 Back Button",id:"air-android-sdk-28-back-button",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"This section details the available ANE work arounds for current issues\nwith Adobe AIR"}),"\n",(0,i.jsx)(n.h2,{id:"android-black-screen",children:"Android Black Screen"}),"\n",(0,i.jsx)(n.p,{children:"While developing Android applications you may have run into an issue where\nthe screen doesn't correctly render after an deactivate / activate cycle,\nfor example, when another activity was launched and returned for your application."}),"\n",(0,i.jsx)(n.p,{children:"This is quite common on Android 4.x when using Starling / Stage 3D"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://forum.starling-framework.org/topic/starling-turns-into-black-screen",children:"https://forum.starling-framework.org/topic/starling-turns-into-black-screen"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://forum.starling-framework.org/topic/maybe-context-loss",children:"https://forum.starling-framework.org/topic/maybe-context-loss"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://forum.starling-framework.org/topic/resuming-using-eventactivate",children:"https://forum.starling-framework.org/topic/resuming-using-eventactivate"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"These appear to be related to context loss however often they are not and for\nsome reason the rendering of the 3D content just hasn't correctly resumed."}),"\n",(0,i.jsx)(n.p,{children:"There are many hacks and solutions around, eg using a native extension to\nstart and finish another activity:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://forum.starling-framework.org/topic/ane-fix-for-blackblank-screen-bug-when-returning-to-air-android-apps",children:"https://forum.starling-framework.org/topic/ane-fix-for-blackblank-screen-bug-when-returning-to-air-android-apps"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"however we found these to be a bit hacky."}),"\n",(0,i.jsx)(n.p,{children:"Our solution is clean and will only result in a small delay of resuming from\nthe activate event. It simply clears the AIR application and forces it to\nstart rendering again."}),"\n",(0,i.jsx)(n.p,{children:"We have used this in several applications with great success so we hope it\nworks for your application."}),"\n",(0,i.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.p,{children:"To apply this fix, simply call the following in your application where\nyou wish to apply the fix:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"Application.service.blackScreenHelper();\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Generally this is best placed in your applications ",(0,i.jsx)(n.code,{children:"ACTIVATE"})," handler.\nHowever it is important to only call this after the AIR application is initialised\nso ",(0,i.jsxs)(n.strong,{children:["do not call it on the first ",(0,i.jsx)(n.code,{children:"ACTIVATE"})," event"]}),", however any subsequent\n",(0,i.jsx)(n.code,{children:"ACTIVATE"})," events will be fine."]}),"\n",(0,i.jsx)(n.p,{children:"We normally use a flag to only call it when an activate event was preceeded\nby a deactivate event, eg:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"private var _deactivated:Boolean = false;\n\nprivate function deactivateHandler( event:Event ):void \n{\n\t_deactivated = true;\n}\n\nprivate function activateHandler( event:Event ):void \n{\n\tif (_deactivated)\n\t{\n\t\t_deactivated = false;\n\t\tApplication.service.blackScreenHelper();\n\t}\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"starling-context-loss-overlay",children:"Starling Context Loss Overlay"}),"\n",(0,i.jsx)(n.p,{children:"This functionality gives you the ability to add a screenshot over the application\nwhile you rebuild a context loss or something similar."}),"\n",(0,i.jsx)(n.p,{children:"The functionality simply allows you to add a bitmap overlay over the AIR application"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"overlay = Starling.current.stage.drawToBitmapData();\n\t\t\t\nApplication.service.addBitmapOverlay( overlay );\n"})}),"\n",(0,i.jsx)(n.p,{children:"To remove the overlay:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"Application.service.removeBitmapOverlay();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"air-android-sdk-28-back-button",children:"AIR Android SDK 28 Back Button"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"If you are using AIR 33 latest release or higher this issue has been fixed."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"AIR for Android when targeting SDK 28 caused an issue where the back button Keyboard Event failed to be dispatched."}),"\n",(0,i.jsx)(n.p,{children:"This affects AIR 32 and early releases of AIR 33 from Harman when setting the target SDK to 28."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<uses-sdk android:targetSdkVersion="28" />\n'})}),"\n",(0,i.jsx)(n.p,{children:"This can be resolved by calling the following early in your application:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"Application.service.backButtonHelper();\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then the back button event should dispatch correctly:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"NativeApplication.nativeApplication.addEventListener( KeyboardEvent.KEY_DOWN, keyDownHandler );\n\nfunction keyDownHandler( event:KeyboardEvent ):void\n{\n\ttrace( event.keyCode );\n\tif (event.keyCode == Keyboard.BACK)\n\t{\n\t\tevent.preventDefault();\n\t}\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);