"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[64604],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return d}});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=o.createContext({}),c=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=c(e.components);return o.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=c(n),d=i,m=h["".concat(u,".").concat(d)]||h[d]||p[d]||r;return n?o.createElement(m,a(a({ref:t},l),{},{components:n})):o.createElement(m,a({ref:t},l))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=h;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var c=2;c<r;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},86673:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var o=n(83117),i=n(80102),r=(n(67294),n(3905)),a=["components"],s={title:"Request Authorisation",sidebar_label:"Request Authorisation"},u=void 0,c={unversionedId:"compass/request-authorisation",id:"compass/request-authorisation",title:"Request Authorisation",description:'If you are going to be using the "true heading" on iOS then you are going to be accessing the user\'s location.',source:"@site/docs/compass/request-authorisation.md",sourceDirName:"compass",slug:"/compass/request-authorisation",permalink:"/docs/compass/request-authorisation",draft:!1,tags:[],version:"current",frontMatter:{title:"Request Authorisation",sidebar_label:"Request Authorisation"},sidebar:"compass",previous:{title:"Heading",permalink:"/docs/compass/heading"},next:{title:"Magnetic Field Sensor",permalink:"/docs/compass/magnetic-field-sensor"}},l={},p=[{value:"Usage Description",id:"usage-description",level:2}],h={toc:p};function d(e){var t=e.components,s=(0,i.Z)(e,a);return(0,r.kt)("wrapper",(0,o.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,'If you are going to be using the "true heading" on iOS then you are going to be accessing the user\'s location.'),(0,r.kt)("p",null,"When you are going to be accessing the user's location you must check that your application has been allowed access. To this end the extension provides several helpers to check and request access to the location services."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"On iOS you will only be able to display the authorisation request dialog once! Hence it is very important that you inform your users why they should grant authorisation before requesting authorisation. To request authorisation you call ",(0,r.kt)("inlineCode",{parentName:"p"},"requestAuthorisation()"),". This function will trigger the native dialog asking the user for authorisation.")),(0,r.kt)("p",null,"You can check if you currently have permission using the ",(0,r.kt)("inlineCode",{parentName:"p"},"hasAuthorisation()")," function:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Compass.service.hasAuthorisation())\n{\n    // Application has permission to access trueHeading\n}\n")),(0,r.kt)("p",null,"If this returns false you should expect a ",(0,r.kt)("inlineCode",{parentName:"p"},"-1")," value for true heading."),(0,r.kt)("p",null,"To request authorisation at runtime, you call the ",(0,r.kt)("inlineCode",{parentName:"p"},"requestAuthorisation()")," function.\nThe following code will work across both platforms:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'switch (Compass.service.authorisationStatus())\n{\n    case AuthorisationStatus.ALWAYS:\n    case AuthorisationStatus.IN_USE:\n        trace( "User allowed access: " + Compass.service.authorisationStatus() );\n        break;\n    \n    case AuthorisationStatus.NOT_DETERMINED:\n    case AuthorisationStatus.SHOULD_EXPLAIN:\n        Compass.service.addEventListener( AuthorisationEvent.CHANGED, authorisationChangedHandler );\n        Compass.service.requestAuthorisation( AuthorisationStatus.ALWAYS );\n        break;\n    \n    case AuthorisationStatus.RESTRICTED:\n    case AuthorisationStatus.DENIED:\n    case AuthorisationStatus.UNKNOWN:\n        trace( "User denied access" );\n        break;\n}\n\nfunction authorisationChangedHandler( event:AuthorisationEvent ):void\n{\n    //\n}\n')),(0,r.kt)("h2",{id:"usage-description"},"Usage Description"),(0,r.kt)("p",null,"You can customise the usage description messages as you see fit to suit your application. These messages are displayed in the main body area of the iOS authorisation dialog with the title and buttons being standard (and not customisable)."),(0,r.kt)("p",null,"The image below is an example of the authorisation dialog. The content ",(0,r.kt)("em",{parentName:"p"},'"Access to photo library is required to save images."')," is the usage description message you can set."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(82811).Z,width:"573",height:"357"})),(0,r.kt)("p",null,"You set these values through adding the usage description keys to your info additions or simply by setting up your configuration options in your ",(0,r.kt)("inlineCode",{parentName:"p"},"apm")," project."))}d.isMDXComponent=!0},82811:function(e,t,n){t.Z=n.p+"assets/images/ios-permission-dialog-fb435e911b1ce9d2619a0dff5db7e237.png"}}]);