"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[46284],{25694:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/ios-permission-dialog-selection-4bfec4b7f8c3640b584ba25152cc293b.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var s=n(96540);const i={},o=s.createContext(i);function a(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:t},e.children)}},89665:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"camerarollextended/browse-for-an-asset","title":"Browse for an Asset","description":"To ask the user to select an asset (or multiple assets) you will need to call the browseForAsset() function.","source":"@site/docs/camerarollextended/browse-for-an-asset.md","sourceDirName":"camerarollextended","slug":"/camerarollextended/browse-for-an-asset","permalink":"/docs/camerarollextended/browse-for-an-asset","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Browse for an Asset","sidebar_label":"Browse for an Asset"},"sidebar":"camerarollextended","previous":{"title":"Request Authorisation","permalink":"/docs/camerarollextended/request-authorisation"},"next":{"title":"Loading an Asset","permalink":"/docs/camerarollextended/loading-an-asset"}}');var i=n(74848),o=n(28453);const a={title:"Browse for an Asset",sidebar_label:"Browse for an Asset"},r=void 0,l={},c=[{value:"iOS",id:"ios",level:2},{value:"Limited Authorisation",id:"limited-authorisation",level:3},{value:"Android",id:"android",level:2},{value:"Permissionless Picker",id:"permissionless-picker",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["To ask the user to select an asset (or multiple assets) you will need to call the ",(0,i.jsx)(t.code,{children:"browseForAsset()"})," function.\nThis will present the user interface and allow the user to select an asset from their device. In the following events you will get information about the selected items as ",(0,i.jsx)(t.code,{children:"Asset"})," objects which you can use to load the asset as you require."]}),"\n",(0,i.jsxs)(t.p,{children:["You can limit what the user is presented with and allowed to select by changing the options in the ",(0,i.jsx)(t.code,{children:"CameraRollExtendedBrowseOptions"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"The extension will dispatch one of two events to determine the result of the browse,"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"CameraRollExtendedEvent.CANCEL"}),": Indicates the user cancelled the browsing operation and no assets where selected"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"CameraRollExtendedEvent.SELECT"}),": Indicates the user selected an asset(s) and the details of the assets will be attached to the event"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The following example shows selection of up to 5 images:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-actionscript",children:'CameraRollExtended.service.addEventListener( CameraRollExtendedEvent.CANCEL, cancelHandler );\nCameraRollExtended.service.addEventListener( CameraRollExtendedEvent.SELECT, selectHandler );\n\nvar options:CameraRollExtendedBrowseOptions = new CameraRollExtendedBrowseOptions();\n\noptions.maximumCount = 5;\noptions.type = Asset.IMAGE;\n\nCameraRollExtended.service.browseForAsset( options );\n\n\n\nfunction cancelHandler( event:CameraRollExtendedEvent ):void\n{\n\ttrace( "camera roll cancelled" );\n}\n\nfunction selectHandler( event:CameraRollExtendedEvent ):void\n{\n\ttrace( "camera roll select" );\n\tfor each (var asset:Asset in event.assets)\n\t{\n\t\ttrace( asset.toString() );\n\t}\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"ios",children:"iOS"}),"\n",(0,i.jsxs)(t.p,{children:["From iOS 14, Apple provides a very functional native picker (",(0,i.jsx)(t.code,{children:"PHPickerViewController"}),") which will now be used when available."]}),"\n",(0,i.jsx)(t.p,{children:"Previous versions of iOS will use a custom UI asset picker."}),"\n",(0,i.jsx)(t.p,{children:'The functionality in the native implementation is slightly different in that the "auto close on count reached" feature will only work when only one asset is being selected and cannot be disabled in this case.'}),"\n",(0,i.jsx)(t.h3,{id:"limited-authorisation",children:"Limited Authorisation"}),"\n",(0,i.jsxs)(t.p,{children:["When presenting the photo picker unfortunately iOS does not apply this limitation to the assets the user can select. So your ",(0,i.jsx)(t.strong,{children:"user may select assets that you don't have access to"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["In order to identify this situation you can access a ",(0,i.jsx)(t.code,{children:"limited"})," property on the ",(0,i.jsx)(t.code,{children:"SELECT"})," event that informs you that the user selected some assets that your application cannot access."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-as3",children:"CameraRollExtended.service.addEventListener( CameraRollExtendedEvent.SELECT, selectHandler );\n\nfunction selectHandler( event:CameraRollExtendedEvent ):void\n{\n\tif (event.limited)\n\t{\n\t\t// User selected assets that cannot be accessed\n\t}\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"You then can inform your user of the situation and if allow them to change their limitation by changing the selection of the limited assets or by changing the permissions."}),"\n",(0,i.jsxs)(t.p,{children:["To present a dialog to change the selection of limited assets you can call ",(0,i.jsx)(t.code,{children:"requestAuthorisation()"}),'. When the authorisation status is "limited" this method will display the selection dialog:']}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(25694).A+"",width:"370",height:"800"})}),"\n",(0,i.jsx)(t.p,{children:"You will receive an authorisation changed event on completion and can use that to proceed to browse for an asset again."}),"\n",(0,i.jsxs)(t.p,{children:["Alternatively you may ask the user to change the permission level through the ",(0,i.jsx)(t.a,{href:"/docs/camerarollextended/request-authorisation#device-settings",children:"device settings"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"android",children:"Android"}),"\n",(0,i.jsx)(t.p,{children:"With Android there are a two distinct implementations, a custom UI built to provide similar functionality as on iOS, and the native implementation."}),"\n",(0,i.jsx)(t.p,{children:"The native implementation has the advantage of being closely integrated with the system allowing a user to select an image from a range of media. However this varies betweens versions of Android and does not support most of the browse options."}),"\n",(0,i.jsx)(t.p,{children:"The custom implementation is a little more limited in that it can only select from media that the application can access through the system content provider. However this implementation allows you to control the number of images and other options more easily."}),"\n",(0,i.jsxs)(t.p,{children:["To switch between these methods you set the ",(0,i.jsx)(t.code,{children:"useNativePicker"})," option on the ",(0,i.jsx)(t.code,{children:"CameraRollExtendedBrowseOptions"})," instance:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-actionscript",children:"var options:CameraRollExtendedBrowseOptions = new CameraRollExtendedBrowseOptions();\n\noptions.useNativePicker = true;\n\nCameraRollExtended.service.browseForAsset( options );\n"})}),"\n",(0,i.jsx)(t.p,{children:"We highly recommend using the native picker however feel free to try the custom implementation and see if it suits your needs."}),"\n",(0,i.jsx)(t.h2,{id:"permissionless-picker",children:"Permissionless Picker"}),"\n",(0,i.jsxs)(t.p,{children:["The permissionless picker allows you a way to limit the permissions your application requires when the only operation it needs is to select and load images. This picker has slightly different call process but still results in the same events being dispatched as the normal ",(0,i.jsx)(t.code,{children:"browseForAsset()"})," operation above."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-actionscript",children:"var options:PermissionlessPickerOptions = new PermissionlessPickerOptions()\n\t\t.setMaximumCount( 2 )\n\t\t.setType( Asset.IMAGE );\n\nCameraRollExtended.service.permissionlessPicker.browse( options );\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Once the user selects the image you will be able to load it using the ",(0,i.jsx)(t.code,{children:"assets"})," functionality for a period of time after the selection. I.e. don't hold onto a reference to the selected items and expect to be able to load them at a subsequent launch of your application. The browse operation in this process will give you the ability to access it for a reasonable amount of time after the selection."]}),"\n",(0,i.jsxs)(t.admonition,{title:"Variant",type:"note",children:[(0,i.jsxs)(t.p,{children:["If the permissionless picker or adding images are the only actions you need from this extension we suggest you use the ",(0,i.jsx)(t.code,{children:"permissionless"})," variant of the extension. This variant removes the additional permissions from the manifest and allows you less scrutiny when going through the app review process."]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"apm install com.distriqt.CameraRollExtended-permissionless\n"})})]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);