"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[62170],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return u}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=s(n),u=r,y=p["".concat(c,".").concat(u)]||p[u]||d[u]||a;return n?o.createElement(y,i(i({ref:t},m),{},{components:n})):o.createElement(y,i({ref:t},m))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},97820:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return m},default:function(){return p}});var o=n(87462),r=n(63366),a=(n(67294),n(3905)),i=["components"],l={title:"Remote Command Center",sidebar_label:"Remote Command Center"},c=void 0,s={unversionedId:"mediaplayer/remote-command-center",id:"mediaplayer/remote-command-center",title:"Remote Command Center",description:"The Remote Command Center represents a common interface to access areas of the operating system that display information about the currently playing media and access to the playback controls.",source:"@site/docs/mediaplayer/remote-command-center.md",sourceDirName:"mediaplayer",slug:"/mediaplayer/remote-command-center",permalink:"/docs/mediaplayer/remote-command-center",tags:[],version:"current",frontMatter:{title:"Remote Command Center",sidebar_label:"Remote Command Center"},sidebar:"mediaplayer",previous:{title:"Sound Pool",permalink:"/docs/mediaplayer/sound-pool"},next:{title:"System Control",permalink:"/docs/mediaplayer/system-control"}},m=[{value:"Media Information",id:"media-information",children:[{value:"Android Icon",id:"android-icon",children:[],level:3}],level:2},{value:"Remote Control Events",id:"remote-control-events",children:[{value:"Example",id:"example",children:[],level:3},{value:"Notes",id:"notes",children:[],level:3}],level:2}],d={toc:m};function p(e){var t=e.components,l=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The Remote Command Center represents a common interface to access areas of the operating system that display information about the currently playing media and access to the playback controls.  "),(0,a.kt)("p",null,"This object provides the ability to set the media information displayed to the user and for your application to receive events from the controls in these areas."),(0,a.kt)("p",null,'With iOS this is represented by an area in the control panel and on the lock screen called the "Remote Command Center".\nOn Android it is represented by an ongoing media notification in the notification panel and lock screen. '),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(49722).Z,width:"1240",height:"930"})),(0,a.kt)("p",null,"The functionality of the Remote Command Center is available through the ",(0,a.kt)("inlineCode",{parentName:"p"},"MediaPlayer.service.remoteCommandCenter")," property."),(0,a.kt)("h2",{id:"media-information"},"Media Information"),(0,a.kt)("p",null,"The lock screen, control center and notification areas can contain information about the currently playing media. This should be used when you are using background audio to inform the user outside of your application about the media that your application is currently playing."),(0,a.kt)("p",null,"In order to update this information you use the ",(0,a.kt)("inlineCode",{parentName:"p"},"setNowPlayingInfo")," function passing an instance of the ",(0,a.kt)("inlineCode",{parentName:"p"},"MediaInfo")," class specifying the current state of the media."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'var info:MediaInfo = new MediaInfo()\n    .setTitle( "Australian National Anthem" )\n    .setArtwork( artworkImageBitmapData )\n    .setCurrentTime( 1 )\n    .setDuration( 155 );\n\nMediaPlayer.service.remoteCommandCenter.setNowPlayingInfo( info );\n')),(0,a.kt)("p",null,"The artwork can be any ",(0,a.kt)("inlineCode",{parentName:"p"},"BitmapData")," and will be scaled to fit appropriately but it is recommended to be a minimum of 600x600 pixels to best present on all devices.  "),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: Android automatically syncs the duration and time with the playing media so values passed in the\nmedia info will be ignored on Android. Title, artist and artwork are all still available.")),(0,a.kt)("h3",{id:"android-icon"},"Android Icon"),(0,a.kt)("p",null,"On Android the notification has an icon displayed in the status bar. By default this is a play arrow icon, which is the default icon for Android media notifications. "),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(7439).Z,width:"800",height:"225"})),(0,a.kt)("p",null,"This can be customised by packaging a custom resource notification icon with your application (in a custom resources ANE) and specifying the name of the resource in the media info."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'info.setIcon( "ic_custom_resource_icon_name" )\n')),(0,a.kt)("p",null,"If you don't provide a value the default icon will be used."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"For information on creating a custom resources ANE see the script available here:\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-CustomResources"},"https://github.com/distriqt/ANE-CustomResources"))),(0,a.kt)("h2",{id:"remote-control-events"},"Remote Control Events"),(0,a.kt)("p",null,"The lock screen, control center and notification areas can contain buttons to control the media playback."),(0,a.kt)("p",null,"Generally these are only appropriate for when you are background playing media.\nIn these cases you should listen for these control events and appropriately pause / play your media. "),(0,a.kt)("p",null,"You listen for ",(0,a.kt)("inlineCode",{parentName:"p"},"RemoteCommandCenterEvent"),"s on the ",(0,a.kt)("inlineCode",{parentName:"p"},"MediaPlayer.service.remoteCommandCenter")," property, however they will only be dispatched after you call ",(0,a.kt)("inlineCode",{parentName:"p"},"registerForControlEvents()"),". This registration process makes your application the registered receiver for these control events."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"MediaPlayer.service.remoteCommandCenter.registerForControlEvents();\n")),(0,a.kt)("p",null,"You can similarly stop the events by calling ",(0,a.kt)("inlineCode",{parentName:"p"},"unregisterForControlEvents()"),"."),(0,a.kt)("h3",{id:"example"},"Example"),(0,a.kt)("p",null,"For example if we are using an ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioPlayer")," to background play music:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"var options:AudioPlayerOptions = new AudioPlayerOptions()\n    .enableBackgroundAudio();\n\nvar player:AudioPlayer = MediaPlayer.service.createAudioPlayer( options );\nplayer.play();\n")),(0,a.kt)("p",null,"We can then listen for control events and appropriately change the state of the player:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"MediaPlayer.service.remoteCommandCenter.addEventListener( RemoteCommandCenterEvent.PAUSE, remoteCommandCenter_pauseHandler );\nMediaPlayer.service.remoteCommandCenter.addEventListener( RemoteCommandCenterEvent.PLAY, remoteCommandCenter_playHandler );\n\nMediaPlayer.service.remoteCommandCenter.registerForControlEvents();\n\nfunction remoteCommandCenter_pauseHandler( event:RemoteCommandCenterEvent ):void\n{\n    player.pause();\n}\n\nfunction remoteCommandCenter_playHandler( event:RemoteCommandCenterEvent ):void\n{\n    player.play();\n}\n")),(0,a.kt)("h3",{id:"notes"},"Notes"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You should have enabled background audio in your application for control center events to work correctly;"),(0,a.kt)("li",{parentName:"ul"},"Your player must have enabled the background mode;"),(0,a.kt)("li",{parentName:"ul"},"You must ensure you call ",(0,a.kt)("inlineCode",{parentName:"li"},"registerForControlEvents"),";")))}p.isMDXComponent=!0},7439:function(e,t,n){t.Z=n.p+"assets/images/android_audio_notification-ef03d1127932bc396229d4972b4b3863.png"},49722:function(e,t,n){t.Z=n.p+"assets/images/notification-b83ff2a3e57d7b80c123aba4bbe855fc.png"}}]);