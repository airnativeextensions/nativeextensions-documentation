(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{175:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"metadata",(function(){return c})),r.d(t,"rightToc",(function(){return s})),r.d(t,"default",(function(){return d}));var n=r(2),a=r(6),i=(r(0),r(885)),o={title:"Referral Credits",sidebar_label:"Referral Credits"},c={unversionedId:"branch/referral-credits",id:"branch/referral-credits",isDocsHomePage:!1,title:"Referral Credits",description:"Referral system rewarding functionality",source:"@site/docs/branch/referral-credits.md",slug:"/branch/referral-credits",permalink:"/docs/branch/referral-credits",version:"current",sidebar_label:"Referral Credits",sidebar:"branch",previous:{title:"Link Parameters",permalink:"/docs/branch/link-parameters"},next:{title:"Event Tracking",permalink:"/docs/branch/event-tracking"}},s=[{value:"Referral system rewarding functionality",id:"referral-system-rewarding-functionality",children:[{value:"Get reward balance",id:"get-reward-balance",children:[]},{value:"Redeem all or some of the reward balance (store state)",id:"redeem-all-or-some-of-the-reward-balance-store-state",children:[]},{value:"Get credit history",id:"get-credit-history",children:[]}]}],l={rightToc:s};function d(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"referral-system-rewarding-functionality"},"Referral system rewarding functionality"),Object(i.b)("p",null,"In a standard referral system, you have 2 parties: the original user and the invitee. Our system is flexible enough to handle rewards for all users. Here are a couple example scenarios:"),Object(i.b)("p",null,"1) Reward the original user for taking action (eg. inviting, purchasing, etc)"),Object(i.b)("p",null,"2) Reward the invitee for installing the app from the original user's referral link"),Object(i.b)("p",null,"3) Reward the original user when the invitee takes action (eg. give the original user credit when their the invitee buys something)"),Object(i.b)("p",null,"These reward definitions are created on the dashboard, under the 'Reward Rules' section in the 'Referrals' tab on the dashboard."),Object(i.b)("p",null,"Warning: For a referral program, you should not use unique awards for custom events and redeem pre-identify call. This can allow users to cheat the system."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Branch Referral Documentation: ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.branch.io/pages/dashboard/analytics/#referrals"}),"https://docs.branch.io/pages/dashboard/analytics/#referrals"))),Object(i.b)("h3",{id:"get-reward-balance"},"Get reward balance"),Object(i.b)("p",null,"Reward balances change randomly on the backend when certain actions are taken (defined by your rules), so you'll need to make an asynchronous call to retrieve the balance. Here is the syntax:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),"Branch.instance.addEventListener( BranchCreditsEvent.GET_CREDITS_SUCCESS, getCreditsEvent );\nBranch.instance.addEventListener( BranchCreditsEvent.GET_CREDITS_FAILED, getCreditsEvent );\n\nfunction getCreditsEvent( event:BranchCreditsEvent ):void \n{\n    trace( event.data );\n}\n\nBranch.instance.getCredits();\n")),Object(i.b)("h3",{id:"redeem-all-or-some-of-the-reward-balance-store-state"},"Redeem all or some of the reward balance (store state)"),Object(i.b)("p",null,"We will store how many of the rewards have been deployed so that you don't have to track it on your end. In order to save that you gave the credits to the user, you can call redeem. Redemptions will reduce the balance of outstanding credits permanently."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),"Branch.instance.redeemRewards(5);\n")),Object(i.b)("h3",{id:"get-credit-history"},"Get credit history"),Object(i.b)("p",null,"This call will retrieve the entire history of credits and redemptions from the individual user. To use this call, implement like so:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),"Branch.instance.addEventListener( BranchCreditsEvent.GET_CREDITS_HISTORY_SUCCESS, getCreditsHistoryEvent );\nBranch.instance.addEventListener( BranchCreditsEvent.GET_CREDITS_HISTORY_FAILED, getCreditsHistoryEvent );\n\nfunction getCreditsHistoryEvent( event:BranchCreditsEvent ):void \n{\n    trace( event.data );\n}\n\nBranch.instance.getCreditsHistory();\n")),Object(i.b)("p",null,"The response will return an array that has been parsed from the following JSON:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'[\n    {\n        "transaction": {\n                           "date": "2014-10-14T01:54:40.425Z",\n                           "id": "50388077461373184",\n                           "bucket": "default",\n                           "type": 0,\n                           "amount": 5\n                       },\n        "event" : {\n            "name": "event name",\n            "metadata": { your event metadata if present }\n        },\n        "referrer": "12345678",\n        "referree": null\n    },\n    {\n        "transaction": {\n                           "date": "2014-10-14T01:55:09.474Z",\n                           "id": "50388199301710081",\n                           "bucket": "default",\n                           "type": 2,\n                           "amount": -3\n                       },\n        "event" : {\n            "name": "event name",\n            "metadata": { your event metadata if present }\n        },\n        "referrer": null,\n        "referree": "12345678"\n    }\n]\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"referrer"),"\n: The id of the referring user for this credit transaction. Returns null if no referrer is involved. Note this id is the user id in developer's own system that's previously passed to Branch's identify user API call."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"referree"),"\n: The id of the user who was referred for this credit transaction. Returns null if no referree is involved. Note this id is the user id in developer's own system that's previously passed to Branch's identify user API call."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"type"),"\n: This is the type of credit transaction"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("em",{parentName:"li"},"0")," - A reward that was added automatically by the user completing an action or referral"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("em",{parentName:"li"},"1")," - A reward that was added manually"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("em",{parentName:"li"},"2")," - A redemption of credits that occurred through our API or SDKs"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("em",{parentName:"li"},"3")," - This is a very unique case where we will subtract credits automatically when we detect fraud")))}d.isMDXComponent=!0},885:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return h}));var n=r(0),a=r.n(n);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=a.a.createContext({}),d=function(e){var t=a.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},u=function(e){var t=d(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=a.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=d(r),p=n,h=u["".concat(o,".").concat(p)]||u[p]||b[p]||i;return r?a.a.createElement(h,c(c({ref:t},l),{},{components:r})):a.a.createElement(h,c({ref:t},l))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,o[1]=c;for(var l=2;l<i;l++)o[l]=r[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,r)}p.displayName="MDXCreateElement"}}]);