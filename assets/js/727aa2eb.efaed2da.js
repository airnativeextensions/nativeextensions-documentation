"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[39212],{3905:function(e,n,i){i.d(n,{Zo:function(){return c},kt:function(){return u}});var o=i(67294);function a(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function t(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,o)}return i}function r(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(n){a(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function d(e,n){if(null==e)return{};var i,o,a=function(e,n){if(null==e)return{};var i,o,a={},t=Object.keys(e);for(o=0;o<t.length;o++)i=t[o],n.indexOf(i)>=0||(a[i]=e[i]);return a}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(o=0;o<t.length;o++)i=t[o],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var s=o.createContext({}),l=function(e){var n=o.useContext(s),i=n;return e&&(i="function"==typeof e?e(n):r(r({},n),e)),i},c=function(e){var n=l(e.components);return o.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},p=o.forwardRef((function(e,n){var i=e.components,a=e.mdxType,t=e.originalType,s=e.parentName,c=d(e,["components","mdxType","originalType","parentName"]),p=l(i),u=a,g=p["".concat(s,".").concat(u)]||p[u]||m[u]||t;return i?o.createElement(g,r(r({ref:n},c),{},{components:i})):o.createElement(g,r({ref:n},c))}));function u(e,n){var i=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var t=i.length,r=new Array(t);r[0]=p;var d={};for(var s in n)hasOwnProperty.call(n,s)&&(d[s]=n[s]);d.originalType=e,d.mdxType="string"==typeof e?e:a,r[1]=d;for(var l=2;l<t;l++)r[l]=i[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,i)}p.displayName="MDXCreateElement"},10393:function(e,n,i){i.r(n),i.d(n,{frontMatter:function(){return r},contentTitle:function(){return d},metadata:function(){return s},toc:function(){return l},default:function(){return m}});var o=i(87462),a=i(63366),t=(i(67294),i(3905)),r={title:"OneSignal",sidebar_label:"Add the Extension"},d=void 0,s={unversionedId:"pushnotifications/onesignal/onesignal",id:"pushnotifications/onesignal/onesignal",isDocsHomePage:!1,title:"OneSignal",description:"This ANE implements the OneSignal iOS and Android SDKs for usage in your mobile AIR applications.",source:"@site/docs/pushnotifications/onesignal/onesignal.md",sourceDirName:"pushnotifications/onesignal",slug:"/pushnotifications/onesignal/onesignal",permalink:"/docs/pushnotifications/onesignal/onesignal",tags:[],version:"current",frontMatter:{title:"OneSignal",sidebar_label:"Add the Extension"},sidebar:"pushnotifications",previous:{title:"Quick Start",permalink:"/docs/pushnotifications/onesignal/quick-start"},next:{title:"Migrating to v10.2",permalink:"/docs/pushnotifications/migrating-to-v10.2"}},l=[{value:"Required For Setup",id:"required-for-setup",children:[]},{value:"Required ANEs",id:"required-anes",children:[{value:"Android Support",id:"android-support",children:[]},{value:"Google Play Services",id:"google-play-services",children:[]},{value:"Firebase",id:"firebase",children:[]}]},{value:"Extension IDs",id:"extension-ids",children:[]},{value:"Info Additions and Entitlements",id:"info-additions-and-entitlements",children:[]},{value:"Manifest Additions",id:"manifest-additions",children:[{value:"MultiDex Applications",id:"multidex-applications",children:[]}]},{value:"Amazon",id:"amazon",children:[]}],c={toc:l};function m(e){var n=e.components,i=(0,a.Z)(e,["components"]);return(0,t.kt)("wrapper",(0,o.Z)({},c,i,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"This ANE implements the OneSignal iOS and Android SDKs for usage in your mobile AIR applications."),(0,t.kt)("p",null,"OneSignal is a high volume and reliable push notification service for websites and mobile applications. They support all major native and mobile platforms by providing dedicated SDKs for each platform, a RESTful server API, and an online dashboard for marketers to design and send push notifications."),(0,t.kt)("p",null,"OneSignal provides a simple interface to push notifications, letting content creators focus on quality user engagement instead of complex implementation."),(0,t.kt)("h2",{id:"required-for-setup"},"Required For Setup"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://onesignal.com/"},"A OneSignal Account")," if you do not already have one"),(0,t.kt)("li",{parentName:"ul"},"Your OneSignal App ID, available in ",(0,t.kt)("a",{parentName:"li",href:"https://documentation.onesignal.com/docs/accounts-and-keys#section-app-id"},"Keys & IDs"))),(0,t.kt)("h2",{id:"required-anes"},"Required ANEs"),(0,t.kt)("p",null,"To use this service add the ",(0,t.kt)("inlineCode",{parentName:"p"},"com.distriqt.PushNotifications.OneSignal.ane")," variant of the extension to your project in place of ",(0,t.kt)("inlineCode",{parentName:"p"},"com.distriqt.PushNotifications.ane"),". You should only add one of the variants to your project. If you need to support multiple services please use the All Services variant."),(0,t.kt)("p",null,"All variants of the Push Notifications extension have the same extension id: ",(0,t.kt)("inlineCode",{parentName:"p"},"com.distriqt.PushNotifications")," so you should add this to your extensions list in your application descriptor:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},"<extensions>\n    ...\n\n    <extensionID>com.distriqt.PushNotifications</extensionID>\n\n    ...\n</extensions>\n")),(0,t.kt)("p",null,"Make sure you have added the common ANEs from the ",(0,t.kt)("a",{parentName:"p",href:"../add-the-extension"},"Add the Extension")," section first. This includes the Core and AndroidX ANEs."),(0,t.kt)("h3",{id:"android-support"},"Android Support"),(0,t.kt)("p",null,"The Android Support libraries encompass the Android Support, Android X and common Google libraries."),(0,t.kt)("p",null,"These libraries are specific to Android. There are no issues including these on all platforms, they are just ",(0,t.kt)("strong",{parentName:"p"},"required")," for Android."),(0,t.kt)("p",null,"This extension requires the following extensions:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.appcompat.ane"},"androidx.appcompat")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.browser.ane"},"androidx.browser")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.cardview.ane"},"androidx.cardview")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.core.ane"},"androidx.core")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.concurrent.ane"},"androidx.concurrent")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.recyclerview.ane"},"androidx.recyclerview")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.room.ane"},"androidx.room")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.vectordrawable.ane"},"androidx.vectordrawable")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.work.ane"},"androidx.work")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.cardview.ane"},"androidx.cardview")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.jetbrains.kotlin.ane"},"com.jetbrains.kotlin")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.android.datatransport.ane"},"com.google.android.datatransport")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.dagger.ane"},"com.google.dagger")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.guava.ane"},"com.google.guava"))),(0,t.kt)("p",null,"You can access these extensions here: ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-AndroidSupport"},"https://github.com/distriqt/ANE-AndroidSupport"),"."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},(0,t.kt)("strong",{parentName:"p"},"Note"),": if you have been using the older ",(0,t.kt)("inlineCode",{parentName:"p"},"com.distriqt.androidsupport.*")," (Android Support) extensions you should remove these extensions and replace it with the ",(0,t.kt)("inlineCode",{parentName:"p"},"androidx")," extensions listed above. This is the new version of the android support libraries and moving forward all our extensions will require AndroidX.")),(0,t.kt)("h3",{id:"google-play-services"},"Google Play Services"),(0,t.kt)("p",null,"This ANE requires usage of certain aspects of the Google Play Services client library.\nThe client library is available as a series of ANEs that you add into your applications packaging options.\nEach separate ANE provides a component from the Play Services client library and are used by different ANEs.\nThese client libraries aren't packaged with this ANE as they are used by multiple ANEs and separating them\nwill avoid conflicts, allowing you to use multiple ANEs in the one application."),(0,t.kt)("p",null,"This ANE requires the following Google Play Services:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-GooglePlayServices/raw/master/lib/com.distriqt.playservices.Base.ane"},"com.distriqt.playservices.Base")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-GooglePlayServices/raw/master/lib/com.distriqt.playservices.AdsIdentifier.ane"},"com.distriqt.playservices.AdsIdentifier")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-GooglePlayServices/raw/master/lib/com.distriqt.playservices.CloudMessaging.ane"},"com.distriqt.playservices.CloudMessaging"))),(0,t.kt)("p",null,"Optional:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-GooglePlayServices/raw/master/lib/com.distriqt.playservices.Location.ane"},"com.distriqt.playservices.Location"))),(0,t.kt)("p",null,"You must include the above native extensions in your application along with this extension,\nand you need to ensure they are packaged with your application."),(0,t.kt)("p",null,"You can access the Google Play Services client library extensions here: ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-GooglePlayServices"},"https://github.com/distriqt/ANE-GooglePlayServices"),"."),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"If you have used an older version of this ANE you should remove the Play Services GCM ANE. It is no longer required.")),(0,t.kt)("h3",{id:"firebase"},"Firebase"),(0,t.kt)("p",null,"To use Firebase Cloud Messaging you must include the core Firebase libraries. The core libraries are available in the ",(0,t.kt)("inlineCode",{parentName:"p"},"com.google.firebase.core")," extension alongside the Google Play Services:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-GooglePlayServices/raw/master/lib/com.google.firebase.core.ane"},"com.google.firebase.core.ane"))),(0,t.kt)("p",null,"You do not need to initialise or configure this."),(0,t.kt)("h2",{id:"extension-ids"},"Extension IDs"),(0,t.kt)("p",null,"The following should be added to your ",(0,t.kt)("inlineCode",{parentName:"p"},"extensions")," node in your application descriptor to identify all the required ANEs in your application:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},"<extensions>\n    <extensionID>com.distriqt.PushNotifications</extensionID>\n    <extensionID>com.distriqt.Core</extensionID>\n\n    <extensionID>com.google.firebase.core</extensionID>\n    <extensionID>com.google.android.datatransport</extensionID>\n    <extensionID>com.google.dagger</extensionID>\n    <extensionID>com.google.guava</extensionID>\n\n    <extensionID>androidx.appcompat</extensionID>\n    <extensionID>androidx.browser</extensionID>\n    <extensionID>androidx.cardview</extensionID>\n    <extensionID>androidx.core</extensionID>\n    <extensionID>androidx.concurrent</extensionID>\n    <extensionID>androidx.recyclerview</extensionID>\n    <extensionID>androidx.room</extensionID>\n    <extensionID>androidx.vectordrawable</extensionID>\n    <extensionID>androidx.work</extensionID>\n\n    <extensionID>com.jetbrains.kotlin</extensionID>\n\n    <extensionID>com.distriqt.playservices.Base</extensionID>\n    <extensionID>com.distriqt.playservices.AdsIdentifier</extensionID>\n    <extensionID>com.distriqt.playservices.CloudMessaging</extensionID>\n</extensions>\n")),(0,t.kt)("h1",{id:"ios"},"iOS"),(0,t.kt)("p",null,"Firstly make sure you have generated your iOS Push Certificates. You can follow the guide by OneSignal:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://documentation.onesignal.com/docs/generate-an-ios-push-certificate"},"Generate an iOS Push Certificate"))),(0,t.kt)("h2",{id:"info-additions-and-entitlements"},"Info Additions and Entitlements"),(0,t.kt)("p",null,"Push notifications require a few additions to the Info plist and Entitlements section\nof your application to correctly configure your application for push notifications."),(0,t.kt)("p",null,"You should add the listing below to application descriptor iPhone node."),(0,t.kt)("p",null,"You must replace the ",(0,t.kt)("inlineCode",{parentName:"p"},"BUNDLE_SEED_ID")," and ",(0,t.kt)("inlineCode",{parentName:"p"},"BUNDLE_IDENTIFIER")," with the information you\ngathered when setting up your application. Also make sure you set the environment\ncorrectly either using production or development, both are shown in the example\nbelow with the production version commented out. More on this below."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},"<iPhone>\n    <InfoAdditions><![CDATA[\n\n        <key>UIBackgroundModes</key>\n        <array>\n            <string>remote-notification</string>\n        </array>\n\n    ]]></InfoAdditions>\n    <requestedDisplayResolution>high</requestedDisplayResolution>\n    <Entitlements><![CDATA[\n\n        \x3c!-- DEVELOPMENT --\x3e\n        <key>get-task-allow</key>\n        <true/>\n        <key>aps-environment</key>\n        <string>development</string>\n\n        \x3c!-- PRODUCTION --\x3e\n        \x3c!--\n        <key>get-task-allow</key>\n        <false/>\n        <key>aps-environment</key>\n        <string>production</string>\n        --\x3e\n\n        <key>application-identifier</key>\n        <string>BUNDLE_SEED_ID.BUNDLE_IDENTIFIER</string>\n        <key>keychain-access-groups</key>\n        <array>\n            <string>BUNDLE_SEED_ID.*</string>\n        </array>\n\n    ]]></Entitlements>\n</iPhone>\n")),(0,t.kt)("p",null,"The first entitlement field is the ",(0,t.kt)("inlineCode",{parentName:"p"},"aps-environment"),". This field indicates whether\nwe are using the development or the production environment. It must be either\n",(0,t.kt)("inlineCode",{parentName:"p"},"development")," or ",(0,t.kt)("inlineCode",{parentName:"p"},"production")," and depends on which configuration you are using.\nIf you are running a debug build you should use development. If you are looking\nto publish the application to the AppStore, you should use production."),(0,t.kt)("p",null,"You should have noted the ",(0,t.kt)("inlineCode",{parentName:"p"},"BUNDLE_SEED_ID")," (or App ID Prefix) and ",(0,t.kt)("inlineCode",{parentName:"p"},"BUNDLE_IDENTIFIER"),"\nwhen you were setting up your application in the iOS developer center.\nThe seed id should be a unique ten character string and the identifier should be\nsimilar to your AIR application id."),(0,t.kt)("h1",{id:"android"},"Android"),(0,t.kt)("p",null,"Firstly make sure you have generated your Google Service API Key. You can follow the guide by OneSignal:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://documentation.onesignal.com/docs/generate-a-google-server-api-key"},"Generate a Google Server API Key")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("a",{parentName:"li",href:"https://documentation.onesignal.com/docs/firebase-cloud-messaging-fcm#section-sender-id-server-key"},"Use an existing Firebase project"))),(0,t.kt)("h2",{id:"manifest-additions"},"Manifest Additions"),(0,t.kt)("p",null,"You must add all the OneSignal related manifest additions along with several additions for Cloud Messaging. This includes all the manifest additions required for Firebase core / analytics implementation."),(0,t.kt)("p",null,"The following shows the complete manifest additions node. You must replace ",(0,t.kt)("inlineCode",{parentName:"p"},"APPLICATION_PACKAGE")," with your AIR application's Java package name, something like ",(0,t.kt)("inlineCode",{parentName:"p"},"air.com.distriqt.test"),".\nGenerally this is your AIR application id prefixed by ",(0,t.kt)("inlineCode",{parentName:"p"},"air.")," unless you have specified no air flair in your build options."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest android:installLocation="auto">\n    <uses-sdk android:targetSdkVersion="29" />\n\n    <uses-permission android:name="android.permission.INTERNET" />\n    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />\n    <uses-permission android:name="android.permission.WAKE_LOCK" />\n    <uses-permission android:name="android.permission.VIBRATE" />\n    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />\n\n    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />\n    <permission android:name="APPLICATION_PACKAGE.permission.C2D_MESSAGE" android:protectionLevel="signature" />\n    <uses-permission android:name="APPLICATION_PACKAGE.permission.C2D_MESSAGE" />\n    <uses-permission android:name="com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE" />\n\n    \x3c!-- BADGE --\x3e\n    <uses-permission android:name="com.sec.android.provider.badge.permission.READ" />\n    <uses-permission android:name="com.sec.android.provider.badge.permission.WRITE" />\n    <uses-permission android:name="com.htc.launcher.permission.READ_SETTINGS" />\n    <uses-permission android:name="com.htc.launcher.permission.UPDATE_SHORTCUT" />\n    <uses-permission android:name="com.sonyericsson.home.permission.BROADCAST_BADGE" />\n    <uses-permission android:name="com.sonymobile.home.permission.PROVIDER_INSERT_BADGE" />\n    <uses-permission android:name="com.anddoes.launcher.permission.UPDATE_COUNT" />\n    <uses-permission android:name="com.majeur.launcher.permission.UPDATE_BADGE" />\n    <uses-permission android:name="com.huawei.android.launcher.permission.CHANGE_BADGE" />\n    <uses-permission android:name="com.huawei.android.launcher.permission.READ_SETTINGS" />\n    <uses-permission android:name="com.huawei.android.launcher.permission.WRITE_SETTINGS" />\n    <uses-permission android:name="android.permission.READ_APP_BADGE" />\n    <uses-permission android:name="com.oppo.launcher.permission.READ_SETTINGS" />\n    <uses-permission android:name="com.oppo.launcher.permission.WRITE_SETTINGS" />\n    <uses-permission android:name="me.everything.badger.permission.BADGE_COUNT_READ" />\n    <uses-permission android:name="me.everything.badger.permission.BADGE_COUNT_WRITE" />\n\n\n    <application android:appComponentFactory="androidx.core.app.CoreComponentFactory">\n        <meta-data android:name="com.google.android.gms.version" android:value="@integer/google_play_services_version" />\n\n        <activity android:name="com.google.android.gms.common.api.GoogleApiActivity"\n            android:theme="@android:style/Theme.Translucent.NoTitleBar"\n            android:exported="false"/>\n\n\n        <provider\n            android:name="com.distriqt.extension.pushnotifications.content.FileProvider"\n            android:authorities="APPLICATION_PACKAGE.pushnotificationsfileprovider"\n            android:grantUriPermissions="true"\n            android:exported="false">\n            <meta-data\n                android:name="android.support.FILE_PROVIDER_PATHS"\n                android:resource="@xml/distriqt_pushnotifications_paths" />\n        </provider>\n\n\n        \x3c!-- ONE SIGNAL --\x3e\n        <meta-data android:name="com.onesignal.NotificationServiceExtension" android:value="com.distriqt.extension.pushnotifications.onesignal.NotificationServiceExtension" />\n\n        <receiver\n            android:name="com.onesignal.FCMBroadcastReceiver"\n            android:permission="com.google.android.c2dm.permission.SEND" >\n\n            \x3c!-- High priority so OneSignal payloads can be filtered from other FCM receivers --\x3e\n            <intent-filter android:priority="999" >\n                <action android:name="com.google.android.c2dm.intent.RECEIVE" />\n                <category android:name="APPLICATION_PACKAGE" />\n            </intent-filter>\n        </receiver>\n\n        <service\n            android:name="com.onesignal.HmsMessageServiceOneSignal"\n            android:exported="false" >\n            <intent-filter>\n                <action android:name="com.huawei.push.action.MESSAGING_EVENT" />\n            </intent-filter>\n        </service>\n\n        <activity\n            android:name="com.onesignal.NotificationOpenedActivityHMS"\n            android:noHistory="true"\n            android:theme="@android:style/Theme.Translucent.NoTitleBar" >\n            <intent-filter>\n                <action android:name="android.intent.action.VIEW" />\n            </intent-filter>\n        </activity>\n\n        <service android:name="com.onesignal.FCMIntentService" />\n        <service\n            android:name="com.onesignal.FCMIntentJobService"\n            android:permission="android.permission.BIND_JOB_SERVICE" />\n        <service\n            android:name="com.onesignal.FocusDelaySyncService"\n            android:stopWithTask="true" />\n        <service\n            android:name="com.onesignal.FocusDelaySyncJobService"\n            android:permission="android.permission.BIND_JOB_SERVICE" />\n        <service\n            android:name="com.onesignal.SyncService"\n            android:stopWithTask="true" />\n        <service\n            android:name="com.onesignal.SyncJobService"\n            android:permission="android.permission.BIND_JOB_SERVICE" />\n\n        <activity\n            android:name="com.onesignal.PermissionsActivity"\n            android:theme="@android:style/Theme.Translucent.NoTitleBar" />\n\n        <receiver android:name="com.onesignal.NotificationDismissReceiver" />\n        <receiver android:name="com.onesignal.BootUpReceiver" >\n            <intent-filter>\n                <action android:name="android.intent.action.BOOT_COMPLETED" />\n                <action android:name="android.intent.action.QUICKBOOT_POWERON" />\n            </intent-filter>\n        </receiver>\n        <receiver android:name="com.onesignal.UpgradeReceiver" >\n            <intent-filter>\n                <action android:name="android.intent.action.MY_PACKAGE_REPLACED" />\n            </intent-filter>\n        </receiver>\n\n        <activity\n            android:name="com.onesignal.NotificationOpenedReceiver"\n            android:noHistory="true"\n            android:theme="@android:style/Theme.Translucent.NoTitleBar" />\n\n        \x3c!--\n                FirebaseMessagingService performs security checks at runtime,\n                but set to not exported to explicitly avoid allowing another app to call it.\n        --\x3e\n        <service\n            android:name="com.google.firebase.messaging.FirebaseMessagingService"\n            android:exported="false" >\n            <intent-filter android:priority="-500" >\n                <action android:name="com.google.firebase.MESSAGING_EVENT" />\n            </intent-filter>\n        </service>\n\n\n        \x3c!-- FIREBASE CORE --\x3e\n        \x3c!-- common --\x3e\n        <service\n            android:name="com.google.firebase.components.ComponentDiscoveryService"\n            android:directBootAware="true"\n            android:exported="false" >\n            <meta-data\n                android:name="com.google.firebase.components:com.google.firebase.installations.FirebaseInstallationsRegistrar"\n                android:value="com.google.firebase.components.ComponentRegistrar" />\n            <meta-data\n                android:name="com.google.firebase.components:com.google.firebase.iid.Registrar"\n                android:value="com.google.firebase.components.ComponentRegistrar" />\n            <meta-data\n                android:name="com.google.firebase.components:com.google.firebase.messaging.FirebaseMessagingRegistrar"\n                android:value="com.google.firebase.components.ComponentRegistrar" />\n            <meta-data\n                android:name="com.google.firebase.components:com.google.firebase.datatransport.TransportRegistrar"\n                android:value="com.google.firebase.components.ComponentRegistrar" />\n        </service>\n        <provider\n            android:name="com.google.firebase.provider.FirebaseInitProvider"\n            android:authorities="APPLICATION_PACKAGE.firebaseinitprovider"\n            android:exported="false"\n            android:initOrder="100" />\n\n\n        \x3c!-- iid --\x3e\n        <receiver\n            android:name="com.google.firebase.iid.FirebaseInstanceIdReceiver"\n            android:exported="true"\n            android:permission="com.google.android.c2dm.permission.SEND" >\n            <intent-filter>\n                <action android:name="com.google.android.c2dm.intent.RECEIVE" />\n            </intent-filter>\n        </receiver>\n\n\n        \x3c!-- androidx.work --\x3e\n        <provider\n            android:name="androidx.work.impl.WorkManagerInitializer"\n            android:authorities="APPLICATION_PACKAGE.workmanager-init"\n            android:directBootAware="false"\n            android:exported="false"\n            android:multiprocess="true" />\n\n        <service\n            android:name="androidx.work.impl.background.systemalarm.SystemAlarmService"\n            android:directBootAware="false"\n            android:enabled="@bool/enable_system_alarm_service_default"\n            android:exported="false" />\n        <service\n            android:name="androidx.work.impl.background.systemjob.SystemJobService"\n            android:directBootAware="false"\n            android:enabled="@bool/enable_system_job_service_default"\n            android:exported="true"\n            android:permission="android.permission.BIND_JOB_SERVICE" />\n        <service\n            android:name="androidx.work.impl.foreground.SystemForegroundService"\n            android:directBootAware="false"\n            android:enabled="@bool/enable_system_foreground_service_default"\n            android:exported="false" />\n\n        <receiver\n            android:name="androidx.work.impl.utils.ForceStopRunnable$BroadcastReceiver"\n            android:directBootAware="false"\n            android:enabled="true"\n            android:exported="false" />\n        <receiver\n            android:name="androidx.work.impl.background.systemalarm.ConstraintProxy$BatteryChargingProxy"\n            android:directBootAware="false"\n            android:enabled="false"\n            android:exported="false" >\n            <intent-filter>\n                <action android:name="android.intent.action.ACTION_POWER_CONNECTED" />\n                <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED" />\n            </intent-filter>\n        </receiver>\n        <receiver\n            android:name="androidx.work.impl.background.systemalarm.ConstraintProxy$BatteryNotLowProxy"\n            android:directBootAware="false"\n            android:enabled="false"\n            android:exported="false" >\n            <intent-filter>\n                <action android:name="android.intent.action.BATTERY_OKAY" />\n                <action android:name="android.intent.action.BATTERY_LOW" />\n            </intent-filter>\n        </receiver>\n        <receiver\n            android:name="androidx.work.impl.background.systemalarm.ConstraintProxy$StorageNotLowProxy"\n            android:directBootAware="false"\n            android:enabled="false"\n            android:exported="false" >\n            <intent-filter>\n                <action android:name="android.intent.action.DEVICE_STORAGE_LOW" />\n                <action android:name="android.intent.action.DEVICE_STORAGE_OK" />\n            </intent-filter>\n        </receiver>\n        <receiver\n            android:name="androidx.work.impl.background.systemalarm.ConstraintProxy$NetworkStateProxy"\n            android:directBootAware="false"\n            android:enabled="false"\n            android:exported="false" >\n            <intent-filter>\n                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />\n            </intent-filter>\n        </receiver>\n        <receiver\n            android:name="androidx.work.impl.background.systemalarm.RescheduleReceiver"\n            android:directBootAware="false"\n            android:enabled="false"\n            android:exported="false" >\n            <intent-filter>\n                <action android:name="android.intent.action.BOOT_COMPLETED" />\n                <action android:name="android.intent.action.TIME_SET" />\n                <action android:name="android.intent.action.TIMEZONE_CHANGED" />\n            </intent-filter>\n        </receiver>\n        <receiver\n            android:name="androidx.work.impl.background.systemalarm.ConstraintProxyUpdateReceiver"\n            android:directBootAware="false"\n            android:enabled="@bool/enable_system_alarm_service_default"\n            android:exported="false" >\n            <intent-filter>\n                <action android:name="androidx.work.impl.background.systemalarm.UpdateProxies" />\n            </intent-filter>\n        </receiver>\n        <receiver\n            android:name="androidx.work.impl.diagnostics.DiagnosticsReceiver"\n            android:directBootAware="false"\n            android:enabled="true"\n            android:exported="true"\n            android:permission="android.permission.DUMP" >\n            <intent-filter>\n                <action android:name="androidx.work.diagnostics.REQUEST_DIAGNOSTICS" />\n            </intent-filter>\n        </receiver>\n\n        \x3c!-- com.google.android.datatransport --\x3e\n        <service\n            android:name="com.google.android.datatransport.runtime.backends.TransportBackendDiscovery"\n            android:exported="false" >\n            <meta-data\n                android:name="backend:com.google.android.datatransport.cct.CctBackendFactory"\n                android:value="cct" />\n        </service>\n        <service\n            android:name="com.google.android.datatransport.runtime.scheduling.jobscheduling.JobInfoSchedulerService"\n            android:exported="false"\n            android:permission="android.permission.BIND_JOB_SERVICE" >\n        </service>\n\n        <receiver\n            android:name="com.google.android.datatransport.runtime.scheduling.jobscheduling.AlarmManagerSchedulerBroadcastReceiver"\n            android:exported="false" />\n\n        <service\n            android:name="androidx.room.MultiInstanceInvalidationService"\n            android:directBootAware="true"\n            android:exported="false" />\n\n\n    </application>\n\n</manifest>\n')),(0,t.kt)("h3",{id:"multidex-applications"},"MultiDex Applications"),(0,t.kt)("p",null,"If you have a large application and are supporting Android 4.x then you will need to ensure you enable your application to correctly support MultiDex to allow the application to be broken up into smaller dex packages."),(0,t.kt)("p",null,"This is enabled by default with releases of AIR v25+, except in the Android 4.x case where you need to change the manifest additions for the application tag to match the following and use the ",(0,t.kt)("inlineCode",{parentName:"p"},"MultiDexApplication"),"."),(0,t.kt)("h4",{id:"using-androidx"},"Using AndroidX"),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"Note: The ",(0,t.kt)("inlineCode",{parentName:"p"},"androidx.multidex")," extension is no longer required with recent AIR 33.1. AIR will include this library by default. If you have a conflict / duplicate class issue mentioning multidex make sure you have removed this extension.")),(0,t.kt)("p",null,"This will require the addition of the ",(0,t.kt)("inlineCode",{parentName:"p"},"androidx.multidex")," extension which contains the ",(0,t.kt)("inlineCode",{parentName:"p"},"androidx.multidex.MultiDexApplication")," implementation."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest android:installLocation="auto">\n    \x3c!-- PERMISSIONS --\x3e\n\n    <application android:name="androidx.multidex.MultiDexApplication">\n\n        \x3c!-- ACTIVITIES / RECEIVERS / SERVICES --\x3e\n\n    </application>\n</manifest>\n')),(0,t.kt)("h2",{id:"amazon"},"Amazon"),(0,t.kt)("p",null,"Amazon is a specific implementation of Android and requires some additional manifest additions if you are distributing your application via the Amazon AppStore."),(0,t.kt)("p",null,"Firstly add the amazon namespace to your manifest tag:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest android:installLocation="auto"\n    xmlns:amazon="http://schemas.amazon.com/apk/res/android"\n>\n')),(0,t.kt)("p",null,"Add the following permissions:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="com.amazon.device.messaging.permission.RECEIVE" />\n<permission android:name="APPLICATION_PACKAGE.permission.RECEIVE_ADM_MESSAGE" android:protectionLevel="signature" />\n<uses-permission android:name="APPLICATION_PACKAGE.permission.RECEIVE_ADM_MESSAGE" />\n')),(0,t.kt)("p",null,"In the ",(0,t.kt)("inlineCode",{parentName:"p"},"application")," tag, add the following:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-xml"},'<amazon:enable-feature android:name="com.amazon.device.messaging" android:required="false"/>\n<service android:name="com.onesignal.ADMMessageHandler" android:exported="false" />\n<service android:name="com.onesignal.ADMMessageHandlerJob"\n         android:permission="android.permission.BIND_JOB_SERVICE"\n         android:exported="false" />\n<receiver android:name="com.onesignal.ADMMessageHandler$Receiver"\n          android:permission="com.amazon.device.messaging.permission.SEND" >\n    <intent-filter>\n        <action android:name="com.amazon.device.messaging.intent.REGISTRATION" />\n        <action android:name="com.amazon.device.messaging.intent.RECEIVE" />\n        <category android:name="APPLICATION_PACKAGE" />\n    </intent-filter>\n</receiver>\n')),(0,t.kt)("p",null,"Follow the ",(0,t.kt)("a",{parentName:"p",href:"https://documentation.onesignal.com/docs/generate-an-amazon-api-key"},"guide here")," to generate your Amazon API Key. You should end up with a file (",(0,t.kt)("inlineCode",{parentName:"p"},"api_key.txt"),") that you will need to add to the root of your application and ensure it is packaged into your application."),(0,t.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,t.kt)("div",{parentName:"div",className:"admonition-heading"},(0,t.kt)("h5",{parentName:"div"},(0,t.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,t.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,t.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,t.kt)("div",{parentName:"div",className:"admonition-content"},(0,t.kt)("p",{parentName:"div"},"Do not place the ",(0,t.kt)("inlineCode",{parentName:"p"},"api_key.txt")," file in an ",(0,t.kt)("inlineCode",{parentName:"p"},"assets")," folder as mentioned in the OneSignal documentation. Any assets from AIR are automatically added into this directory."))),(0,t.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,t.kt)("div",{parentName:"div",className:"admonition-heading"},(0,t.kt)("h5",{parentName:"div"},(0,t.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,t.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,t.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,t.kt)("div",{parentName:"div",className:"admonition-content"},(0,t.kt)("p",{parentName:"div"},"You will need to be using a recent version of AIR to be able to support these additional manifest namespaces and tags."))))}m.isMDXComponent=!0}}]);