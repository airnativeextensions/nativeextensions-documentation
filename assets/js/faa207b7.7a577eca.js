"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[2044],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return g}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(n),g=a,m=d["".concat(s,".").concat(g)]||d[g]||c[g]||i;return n?r.createElement(m,l(l({ref:t},u),{},{components:n})):r.createElement(m,l({ref:t},u))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6181:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return c}});var r=n(87462),a=n(63366),i=(n(67294),n(3905)),l=["components"],o={title:"Get User Credentials",sidebar_label:"Get User Credentials"},s=void 0,p={unversionedId:"applesignin/get-user-credentials",id:"applesignin/get-user-credentials",title:"Get User Credentials",description:"This has proved highly unreliable on iOS and we currently don't recommend using this process. It seems to commonly return an error even though everything seems correct. We are waiting for feedback / updates from Apple on this",source:"@site/docs/applesignin/get-user-credentials.md",sourceDirName:"applesignin",slug:"/applesignin/get-user-credentials",permalink:"/docs/applesignin/get-user-credentials",draft:!1,tags:[],version:"current",frontMatter:{title:"Get User Credentials",sidebar_label:"Get User Credentials"},sidebar:"applesignin",previous:{title:"Login with Apple Id",permalink:"/docs/applesignin/login-with-apple-id"},next:{title:"changelog",permalink:"/docs/applesignin/changelog"}},u={},c=[{value:"State",id:"state",level:2},{value:"Events",id:"events",level:2},{value:"Returned State",id:"returned-state",level:2}],d={toc:c};function g(e){var t=e.components,n=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"This has proved highly unreliable on iOS and we currently don't recommend using this process. It seems to commonly return an error even though everything seems correct. We are waiting for feedback / updates from Apple on this"),(0,i.kt)("p",{parentName:"blockquote"},"Instead we recommend implementing a server to perform authentication checks using the auth code / tokens.")),(0,i.kt)("h2",{id:"state"},"State"),(0,i.kt)("p",null,"You can check the user credential state by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"getCredentialStateForUser()"),' and passing the "user" received when authentication succeeded.'),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: This is supported on ",(0,i.kt)("strong",{parentName:"p"},"iOS only"))),(0,i.kt)("p",null,"The user value is the ",(0,i.kt)("inlineCode",{parentName:"p"},"AppleIdCredential.user")," property and you should store this value as an identifier for your user."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"AppleSignIn.instance.getCredentialStateForUser( user );\n")),(0,i.kt)("h2",{id:"events"},"Events"),(0,i.kt)("p",null,"Calling ",(0,i.kt)("inlineCode",{parentName:"p"},"getCredentialStateForUser()")," will dispatch one of two events:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AppleSignInEvent.GET_CREDENTIAL_STATE_SUCCESS"),": If the credential state was successfully ;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AppleSignInErrorEvent.GET_CREDENTIAL_STATE_ERROR"),": If an error occurred;")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'AppleSignIn.instance.addEventListener( AppleSignInEvent.GET_CREDENTIAL_STATE_SUCCESS, getCredentials_successHandler );\nAppleSignIn.instance.addEventListener( AppleSignInErrorEvent.GET_CREDENTIAL_STATE_ERROR, getCredentials_errorHandler );\n\nAppleSignIn.instance.getCredentialStateForUser( user );\n\n\nfunction getCredentials_successHandler( event:AppleSignInEvent ):void\n{\n    trace( "getCredentials_successHandler(): " + event.state );\n}\n\nfunction getCredentials_errorHandler( event:AppleSignInErrorEvent ):void\n{\n    trace( "getCredentials_errorHandler(): [" + event.errorID + "] :: " + event.text  );\n} \n')),(0,i.kt)("h2",{id:"returned-state"},"Returned State"),(0,i.kt)("p",null,"The value of the ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," property in the returned event will be one of the ",(0,i.kt)("inlineCode",{parentName:"p"},"AppleIDCredentialState")," defined values:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AppleIDCredentialState.REVOKED")," : The user ID was revoked by the user;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AppleIDCredentialState.AUTHORIZED")," : The user ID is in good state;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AppleIDCredentialState.NOT_FOUND")," : The user ID was not found;")))}g.isMDXComponent=!0}}]);