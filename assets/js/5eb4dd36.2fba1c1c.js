"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[28152],{4547:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"inappbilling/apple/testing","title":"Testing Apple In-App Purchases","description":"iOS Subscriptions","source":"@site/docs/inappbilling/apple/testing.md","sourceDirName":"inappbilling/apple","slug":"/inappbilling/apple/testing","permalink":"/docs/inappbilling/apple/testing","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Testing Apple In-App Purchases","sidebar_label":"Testing"},"sidebar":"inappbilling","previous":{"title":"Server Side Verification","permalink":"/docs/inappbilling/apple/server-side-verification"},"next":{"title":"Troubleshooting","permalink":"/docs/inappbilling/apple/troubleshooting"}}');var n=i(74848),r=i(28453);const o={title:"Testing Apple In-App Purchases",sidebar_label:"Testing"},l=void 0,a={},c=[{value:"iOS Subscriptions",id:"ios-subscriptions",level:2},{value:"Duration",id:"duration",level:3},{value:"Suggested Tests",id:"suggested-tests",level:3},{value:"Renewals and Expiration",id:"renewals-and-expiration",level:4},{value:"Restoring after Expiration",id:"restoring-after-expiration",level:4},{value:"Restoring during Subscription",id:"restoring-during-subscription",level:4},{value:"Restoring during Subscription on multiple devices",id:"restoring-during-subscription-on-multiple-devices",level:4}];function d(e){const t={blockquote:"blockquote",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"ios-subscriptions",children:"iOS Subscriptions"}),"\n",(0,n.jsx)(t.p,{children:"When testing subscriptions, you should be aware that they work differently in the sandbox, TestFlight and on the App Store."}),"\n",(0,n.jsx)(t.p,{children:"In order to test correctly you will need to be aware of these differences."}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Importantly be aware that while running your application in sandbox or TestFlight you will not be able to use Touch / Face ID and that you will experience a much large number of password requests. Basically for every AppStore interaction the password dialog will be presented."}),"\n",(0,n.jsx)(t.p,{children:"You have to trust that this process is not how your live application will perform once deployed to production in the AppStore."}),"\n",(0,n.jsx)(t.p,{children:"We often advise developers to make a simple way for beta testers to switch between subscribed and unsubscribed otherwise you may find your subscribed state will get a lot less testing due to the number of password requests required (sometimes up to three to purchase a subscription)."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"duration",children:"Duration"}),"\n",(0,n.jsx)(t.p,{children:"Subscription durations are greatly reduced for testing purposes allowing you to quickly test multiple renewals and expirations via TestFlight and in the sandbox."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Subscription Duration"}),(0,n.jsx)(t.th,{children:"Test Duration"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"1 week"}),(0,n.jsx)(t.td,{children:"3 minutes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"1 month"}),(0,n.jsx)(t.td,{children:"5 minutes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"2 months"}),(0,n.jsx)(t.td,{children:"10 minutes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"3 months"}),(0,n.jsx)(t.td,{children:"15 minutes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"6 months"}),(0,n.jsx)(t.td,{children:"30 minutes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"1 year"}),(0,n.jsx)(t.td,{children:"1 hour"})]})]})]}),"\n",(0,n.jsx)(t.p,{children:"A subscription will automatically renew 6 times per account per 8 hour window, at which point the subscription will expire."}),"\n",(0,n.jsx)(t.p,{children:"There is no way to test cancellation directly as these renewals happen automatically."}),"\n",(0,n.jsx)(t.p,{children:"There is also no way to test subscription management while in the sandbox or TestFlight."}),"\n",(0,n.jsx)(t.h3,{id:"suggested-tests",children:"Suggested Tests"}),"\n",(0,n.jsx)(t.p,{children:"Note that with the notes above about the 8 hour window performing several of these tests within a short period may have unexpected results. You should be aware that every subscription may not renew 6 times within that window. Try to perform tests within the first subscription period (5 minutes for monthly)."}),"\n",(0,n.jsxs)(t.p,{children:["We suggest you test the ",(0,n.jsx)(t.strong,{children:"Renewals and Expiration"})," first as this is the main test that uses the renewal attempts."]}),"\n",(0,n.jsx)(t.p,{children:"Also it is helpful to test with multiple sandbox accounts as these restrictions are per account."}),"\n",(0,n.jsx)(t.h4,{id:"renewals-and-expiration",children:"Renewals and Expiration"}),"\n",(0,n.jsx)(t.p,{children:"This process is to test the the subscription, renewals and expiration process works correctly."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Subscribe to a monthly subscription"}),"\n",(0,n.jsx)(t.li,{children:"Close your app and wait 5 minutes"}),"\n",(0,n.jsx)(t.li,{children:"Launch your app"}),"\n",(0,n.jsx)(t.li,{children:"If a prompt is displayed enter the password"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Your application should still be subscribed at this point."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Repeat this process until 35 minutes have passed (6 renewal periods + original subscription period)"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Your application should now be in an un-subscribed state."}),"\n",(0,n.jsx)(t.h4,{id:"restoring-after-expiration",children:"Restoring after Expiration"}),"\n",(0,n.jsx)(t.p,{children:"This process is to test whether the restore purchases call correctly reports no active subscriptions after a subscription has expired."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Subscribe to a monthly subscription"}),"\n",(0,n.jsxs)(t.li,{children:["Perform the ",(0,n.jsx)(t.strong,{children:"Renewals and Expiration"})," test to expire the subscription or simply close the app and wait 35 minutes"]}),"\n",(0,n.jsx)(t.li,{children:"Launch the application (enter password if prompted)"}),"\n",(0,n.jsx)(t.li,{children:"Go through your restore purchases process"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"At this point it should report no active subscriptions were found and your application should be in the un-subscribed state."}),"\n",(0,n.jsx)(t.h4,{id:"restoring-during-subscription",children:"Restoring during Subscription"}),"\n",(0,n.jsx)(t.p,{children:"This process is to check the restoring of a subscription during an active subscription period."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Subscribe to a monthly subscription"}),"\n",(0,n.jsx)(t.li,{children:"Close and uninstall the application"}),"\n",(0,n.jsx)(t.li,{children:"Reinstall the application within 5 minutes"}),"\n",(0,n.jsx)(t.li,{children:"Go through your restore purchases process"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"At this point the application should have restored the active subscription and be in the subscribed state."}),"\n",(0,n.jsx)(t.h4,{id:"restoring-during-subscription-on-multiple-devices",children:"Restoring during Subscription on multiple devices"}),"\n",(0,n.jsx)(t.p,{children:"This process is to check the updating of the subscription state across a user's devices."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Subscribe to a monthly subscription"}),"\n",(0,n.jsx)(t.li,{children:"Install the application on another device before the expiration"}),"\n",(0,n.jsx)(t.li,{children:"Go through your restore purchases process using the same test user as on the first device"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"The restore process should have picked up the active subscription purchased on the first device and the second device should be in the subscribed state."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>l});var s=i(96540);const n={},r=s.createContext(n);function o(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);