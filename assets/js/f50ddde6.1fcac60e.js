"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[14593],{4823:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"image/migrating-to-v7.1","title":"Migrating to v7.1","description":"This version makes some changes to the Android implementation to support capturing screenshots.","source":"@site/docs/image/migrating-to-v7.1.mdx","sourceDirName":"image","slug":"/image/migrating-to-v7.1","permalink":"/docs/image/migrating-to-v7.1","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Migrating to v7.1"},"sidebar":"image","previous":{"title":"Capturing a Screenshot","permalink":"/docs/image/capturing-a-screenshot"},"next":{"title":"Migrating to v6.0","permalink":"/docs/image/migrating-to-v6.0"}}');var a=n(74848),o=n(28453);n(11470),n(19365);const i={title:"Migrating to v7.1"},s=void 0,l={},u=[];function c(e){const t={a:"a",code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"This version makes some changes to the Android implementation to support capturing screenshots."}),"\n",(0,a.jsx)(t.p,{children:"We have changed the default operation to use a new method that doesn't require user interaction for permissions but only captures the application window (similar to iOS).\nThe previous method that captures the full screen including other applications is still available and has been improved to support the new requirements of using a foreground service but continues to require user permission via a system dialog."}),"\n",(0,a.jsx)(t.p,{children:"This update requires some changes to the manifest additions, so you will need to update your application descriptor accordingly."}),"\n",(0,a.jsxs)(t.p,{children:["If you are using ",(0,a.jsx)(t.a,{href:"https://github.com/airsdk/apm",children:(0,a.jsx)(t.code,{children:"apm"})})," to manage your extensions you can update your application descriptor automatically by following the instructions below."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"apm update \napm generate app-descriptor \n"})}),"\n",(0,a.jsx)(t.p,{children:"If you are managing your application descriptor manually you will need to ensure your manifest additions contains the following:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.FOREGROUND_SERVICE"/>\n<uses-permission android:name="android.permission.FOREGROUND_SERVICE_MEDIA_PROJECTION"/>\n\n<application>\n    <service android:name="com.distriqt.extension.image.services.ScreenshotService"\n        android:foregroundServiceType="mediaProjection"\n        android:exported="false" />\n\n    <activity android:name="com.distriqt.core.auth.AuthorisationActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar" android:exported="false" />\n</application>\n'})}),"\n",(0,a.jsxs)(t.p,{children:["As the default operation has changed to the new method that doesn't require user interaction, if you wish to continue to capture the full screen including other applications you will need to pass ",(0,a.jsx)(t.code,{children:"false"})," to the second parameter of the ",(0,a.jsx)(t.code,{children:"captureScreenshot()"})," method."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"Image.service.captureScreenshot( callback, false );\n"})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},11470:(e,t,n)=>{n.d(t,{A:()=>I});var r=n(96540),a=n(34164),o=n(17559),i=n(23104),s=n(56347),l=n(205),u=n(57485),c=n(31682),d=n(70679);function p(e){var t,n;return null!=(t=null==(n=r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:n.filter(Boolean))?t:[]}function m(e){const{values:t,children:n}=e;return(0,r.useMemo)(()=>{const e=null!=t?t:function(e){return p(e).map(e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}})}(n);return function(e){const t=(0,c.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map(e=>e.value).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some(e=>e.value===t)}function f(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,u.aZ)(o),(0,r.useCallback)(e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace(Object.assign({},a.location,{search:t.toString()}))},[o,a])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=m(e),[i,s]=(0,r.useState)(()=>function(e){var t;let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+r.map(e=>e.value).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}const a=null!=(t=r.find(e=>e.default))?t:r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o})),[u,c]=f({queryString:n,groupId:a}),[p,g]=function(e){let{groupId:t}=e;const n=function(e){return e?"docusaurus.tab."+e:null}(t),[a,o]=(0,d.Dv)(n);return[a,(0,r.useCallback)(e=>{n&&o.set(e)},[n,o])]}({groupId:a}),v=(()=>{const e=null!=u?u:p;return h({value:e,tabValues:o})?e:null})();(0,l.A)(()=>{v&&s(v)},[v]);return{selectedValue:i,selectValue:(0,r.useCallback)(e=>{if(!h({value:e,tabValues:o}))throw new Error("Can't select invalid tab value="+e);s(e),c(e),g(e)},[c,g,o]),tabValues:o}}var v=n(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=n(74848);function x(e){let{className:t,block:n,selectedValue:r,selectValue:o,tabValues:s}=e;const l=[],{blockElementScrollPositionUntilNextRender:u}=(0,i.a_)(),c=e=>{const t=e.currentTarget,n=l.indexOf(t),a=s[n].value;a!==r&&(u(t),o(a))},d=e=>{var t;let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{var r;const t=l.indexOf(e.currentTarget)+1;n=null!=(r=l[t])?r:l[0];break}case"ArrowLeft":{var a;const t=l.indexOf(e.currentTarget)-1;n=null!=(a=l[t])?a:l[l.length-1];break}}null==(t=n)||t.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},t),children:s.map(e=>{let{value:t,label:n,attributes:o}=e;return(0,y.jsx)("li",Object.assign({role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>{l.push(e)},onKeyDown:d,onClick:c},o,{className:(0,a.A)("tabs__item",b.tabItem,null==o?void 0:o.className,{"tabs__item--active":r===t}),children:null!=n?n:t}),t)})})}function j(e){let{lazy:t,children:n,selectedValue:o}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find(e=>e.props.value===o);return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:i.map((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o}))})}function w(e){const t=g(e);return(0,y.jsxs)("div",{className:(0,a.A)(o.G.tabs.container,"tabs-container",b.tabList),children:[(0,y.jsx)(x,Object.assign({},t,e)),(0,y.jsx)(j,Object.assign({},t,e))]})}function I(e){const t=(0,v.A)();return(0,y.jsx)(w,Object.assign({},e,{children:p(e.children)}),String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>i});n(96540);var r=n(34164);const a={tabItem:"tabItem_Ymn6"};var o=n(74848);function i(e){let{children:t,hidden:n,className:i}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,i),hidden:n,children:t})}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>s});var r=n(96540);const a={},o=r.createContext(a);function i(e){const t=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);