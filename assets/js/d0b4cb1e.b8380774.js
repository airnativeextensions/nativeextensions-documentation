(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[74475],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return h}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,u=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),d=l(n),h=o,f=d["".concat(u,".").concat(h)]||d[h]||p[h]||i;return n?r.createElement(f,s(s({ref:t},c),{},{components:n})):r.createElement(f,s({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=d;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a.mdxType="string"==typeof e?e:o,s[1]=a;for(var l=2;l<i;l++)s[l]=n[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1718:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return a},toc:function(){return u},default:function(){return c}});var r=n(22122),o=n(19756),i=(n(67294),n(3905)),s={title:"Request Authorisation",sidebar_label:"Request Authorisation"},a={unversionedId:"expansionfiles/request-authorisation",id:"expansionfiles/request-authorisation",isDocsHomePage:!1,title:"Request Authorisation",description:"In order to save the downloaded expansion files you must check that your",source:"@site/docs/expansionfiles/request-authorisation.md",sourceDirName:"expansionfiles",slug:"/expansionfiles/request-authorisation",permalink:"/docs/expansionfiles/request-authorisation",version:"current",sidebar_label:"Request Authorisation",frontMatter:{title:"Request Authorisation",sidebar_label:"Request Authorisation"},sidebar:"expansionfiles",previous:{title:"Add the Extension",permalink:"/docs/expansionfiles/add-the-extension"},next:{title:"Setup Licensing",permalink:"/docs/expansionfiles/setup-licensing"}},u=[],l={toc:u};function c(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"In order to save the downloaded expansion files you must check that your\napplication has been allowed write access to the external storage."),(0,i.kt)("p",null,"ie. ",(0,i.kt)("inlineCode",{parentName:"p"},"android.permission.WRITE_EXTERNAL_STORAGE")),(0,i.kt)("p",null,"To this end the extension provides several helpers to check and request\naccess to the external storage. Normal permission rules apply here."),(0,i.kt)("p",null,"On Android these permissions are listed through the manifest additions.\nOn older versions of Android these permissions are accepted when the user\ninstalls the application. More modern versions (Marshmallow 6 ","[v23]","+) require\nthat you request the permissions similar to iOS. You will still need to list\nthem in your manifest and then follow the same code below."),(0,i.kt)("p",null,"You should respect the ",(0,i.kt)("inlineCode",{parentName:"p"},"SHOULD_EXPLAIN")," status by displaying additional\ninformation to your user about why you require this functionality."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"switch (ExpansionFiles.service.authorisationStatus())\n{\n    case AuthorisationStatus.AUTHORISED:\n        // This device has been authorised.\n        break;\n\n    case AuthorisationStatus.NOT_DETERMINED:\n    case AuthorisationStatus.SHOULD_EXPLAIN:\n        // You are yet to ask for authorisation \n        // At this point you should consider your strategy to get your \n        // user to authorise by explaining your need for the permissions\n        ExpansionFiles.service.addEventListener( AuthorisationEvent.CHANGED, authorisationChangedHandler );\n        ExpansionFiles.service.requestAuthorisation();\n        break;\n\n    case AuthorisationStatus.DENIED:\n    case AuthorisationStatus.UNKNOWN:\n    case AuthorisationStatus.RESTRICTED:\n        // The user has disabled the permissions\n        // Advise your user of the lack of permissions as you see fit\n        break;\n}\n")),(0,i.kt)("p",null,"You will then receive a change event if the user accepted your permission request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"private function authorisationChangedHandler( event:AuthorisationEvent ):void\n{\n    // Check the authorisation state again (as above)\n}\n")))}c.isMDXComponent=!0}}]);