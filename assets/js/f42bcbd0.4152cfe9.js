"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[14810],{28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>t});var a=r(96540);const i={},l=a.createContext(i);function s(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(l.Provider,{value:n},e.children)}},73069:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"mediaplayer/migrating-from-version-1","title":"Migrating from version 1","description":"Version 2 completely changes the way media players are created and displayed. Migration is simple as laid out below.","source":"@site/docs/mediaplayer/migrating-from-version-1.md","sourceDirName":"mediaplayer","slug":"/mediaplayer/migrating-from-version-1","permalink":"/docs/mediaplayer/migrating-from-version-1","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Migrating from version 1","sidebar_label":"Migrating from version 1"},"sidebar":"mediaplayer","previous":{"title":"Migrating to AndroidX","permalink":"/docs/mediaplayer/migrating-to-androidx"},"next":{"title":"changelog","permalink":"/docs/mediaplayer/changelog"}}');var i=r(74848),l=r(28453);const s={title:"Migrating from version 1",sidebar_label:"Migrating from version 1"},t=void 0,o={},c=[{value:"Dependencies",id:"dependencies",level:2},{value:"Creating a Player",id:"creating-a-player",level:2},{value:"Events",id:"events",level:2},{value:"Control",id:"control",level:2},{value:"Resize",id:"resize",level:2},{value:"Destroying the player",id:"destroying-the-player",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Version 2 completely changes the way media players are created and displayed. Migration is simple as laid out below."}),"\n",(0,i.jsxs)(n.p,{children:["The major difference is that you now will create an ",(0,i.jsx)(n.code,{children:"MediaPlayerView"})," instance and use this to configure, load and control media playback. Whereas you used to only have access to a single player, you can now create multiple and use as required. This means that you will need to hold onto an instance of your ",(0,i.jsx)(n.code,{children:"MediaPlayerView"})," to set properties, listen for events, load, and control media playback."]}),"\n",(0,i.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["There are new ANE dependencies with version 2. In particular the Android support libraries are now required. Check the details in the ",(0,i.jsx)(n.a,{href:"/docs/mediaplayer/add-the-extension",children:"Add the Extension"})," section."]}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-player",children:"Creating a Player"}),"\n",(0,i.jsxs)(n.p,{children:["Previously there was only one instance of a player handled internally to the ANE. You now have to retrieve a reference to a player and hold onto a reference, by changing any calls to ",(0,i.jsx)(n.code,{children:"createPlayer"})," to the new ",(0,i.jsx)(n.code,{children:"createPlayerView"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"So the following code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:'var path:String = "...";\nvar view:Rectangle = new Rectangle( 0, 0, stage.stageWidth, 480 );\n\nMediaPlayer.service.createPlayer(\n        path,\n        view.x,\n        view.y,\n        view.width,\n        view.height,\n        false,\n        MediaPlayer.CONTROLS_NONE,\n        false \n);\n'})}),"\n",(0,i.jsx)(n.p,{children:"becomes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:'var path:String = "...";\nvar view:Rectangle = new Rectangle( 0, 0, stage.stageWidth, 480 );\n\nvar player:MediaPlayerView = MediaPlayer.service.createPlayerView(\n        new MediaPlayerOptions()\n            .setViewport( view )\n            .showControls( false )\n);\nplayer.load( path );\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Note: we have separated the loading call (",(0,i.jsx)(n.code,{children:"load()"}),") from the creation (",(0,i.jsx)(n.code,{children:"createPlayerView()"}),"). This means you no longer need to pass the path when creating a player. However you can call load immediately if you wish initialise your player with media."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.p,{children:["Events are now dispatched by the ",(0,i.jsx)(n.code,{children:"MediaPlayerView"})," instance rather than from the extension ",(0,i.jsx)(n.code,{children:"service"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"So for example the following events listeners:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"MediaPlayer.service.addEventListener( MediaPlayerEvent.COMPLETE, completeHandler );\nMediaPlayer.service.addEventListener( MediaProgressEvent.PROGRESS, progressHandler );\nMediaPlayer.service.addEventListener( MediaErrorEvent.ERROR, errorHandler );\n"})}),"\n",(0,i.jsxs)(n.p,{children:["should now be attached to your ",(0,i.jsx)(n.code,{children:"player"})," instance:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"player.addEventListener( MediaPlayerEvent.COMPLETE, completeHandler );\nplayer.addEventListener( MediaProgressEvent.PROGRESS, progressHandler );\nplayer.addEventListener( MediaErrorEvent.ERROR, errorHandler );\n"})}),"\n",(0,i.jsx)(n.h2,{id:"control",children:"Control"}),"\n",(0,i.jsxs)(n.p,{children:["Playback control is now controlled through the ",(0,i.jsx)(n.code,{children:"player"})," instance."]}),"\n",(0,i.jsx)(n.p,{children:"To start playback of your video:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"MediaPlayer.service.play();\n"})}),"\n",(0,i.jsx)(n.p,{children:"becomes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"player.play();\n"})}),"\n",(0,i.jsx)(n.p,{children:"Similarly for the other playback controls such as:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pause()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"stop()"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"resize",children:"Resize"}),"\n",(0,i.jsxs)(n.p,{children:["Player resizing is now done with the ",(0,i.jsx)(n.code,{children:"resize"})," function on the player."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"MediaPlayer.service.resize( 0, 0, stage.stageWidth, 500 );\n"})}),"\n",(0,i.jsx)(n.p,{children:"Becomes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"player.resize( 0, 0, stage.stageWidth, 500 );\n"})}),"\n",(0,i.jsx)(n.h2,{id:"destroying-the-player",children:"Destroying the player"}),"\n",(0,i.jsxs)(n.p,{children:["Previously calling ",(0,i.jsx)(n.code,{children:"removePlayer()"})," would remove and destroy the player. This is now changed to the clearer ",(0,i.jsx)(n.code,{children:"destroy()"})," function on the player instance."]}),"\n",(0,i.jsx)(n.p,{children:"So"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"MediaPlayer.service.removePlayer();\n"})}),"\n",(0,i.jsx)(n.p,{children:"becomes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"player.destroy();\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After you call ",(0,i.jsx)(n.code,{children:"destroy()"})," on a player instance the player will no longer function. You should remove all event listeners and clear any references to this object. If you need to use a player again, then you'll need to call ",(0,i.jsx)(n.code,{children:"createPlayerView()"})," again to create a new player instance."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);