"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[25639],{777:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"firebase/storage/upload-files","title":"Storage - Upload Files","description":"Upload Files","source":"@site/docs/firebase/storage/upload-files.md","sourceDirName":"firebase/storage","slug":"/firebase/storage/upload-files","permalink":"/docs/firebase/storage/upload-files","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Storage - Upload Files","sidebar_label":"Upload Files"},"sidebar":"firebase","previous":{"title":"References","permalink":"/docs/firebase/storage/references"},"next":{"title":"Download Files","permalink":"/docs/firebase/storage/download-files"}}');var o=n(74848),s=n(28453);const r={title:"Storage - Upload Files",sidebar_label:"Upload Files"},l=void 0,i={},d=[{value:"Upload Files",id:"upload-files",level:2},{value:"Upload from data in memory",id:"upload-from-data-in-memory",level:2},{value:"Upload from a local file",id:"upload-from-a-local-file",level:2},{value:"Add File Metadata",id:"add-file-metadata",level:2},{value:"Manage Uploads",id:"manage-uploads",level:2},{value:"Monitor Upload Progress",id:"monitor-upload-progress",level:2}];function c(e){const a={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.h2,{id:"upload-files",children:"Upload Files"}),"\n",(0,o.jsx)(a.p,{children:"To upload a file to Firebase Storage, you first create a reference to the full path of the file, including the file name."}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-actionscript",children:'var reference:StorageReference = FirebaseStorage.service.getInstance().child( "images/upload.png" );\n'})}),"\n",(0,o.jsx)(a.p,{children:"Once you've created an appropriate reference, you then call the following to upload to Firebase Storage:"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.code,{children:"putBytes()"}),": Upload from data in memory"]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.code,{children:"putFile()"}),": Upload a file on the file system"]}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"upload-from-data-in-memory",children:"Upload from data in memory"}),"\n",(0,o.jsxs)(a.p,{children:["The ",(0,o.jsx)(a.code,{children:"putBytes()"})," method is the simplest way to upload a file to Firebase Storage.\n",(0,o.jsx)(a.code,{children:"putBytes()"})," takes a ",(0,o.jsx)(a.code,{children:"ByteArray"})," and returns an ",(0,o.jsx)(a.code,{children:"UploadTask"})," that you can use to\nmanage and monitor the status of the upload."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-actionscript",children:"// Data from some source, eg encoding bitmap data to jpg\nvar bytes:ByteArray = ...; \n\nvar task:UploadTask = reference.putBytes( bytes );\n"})}),"\n",(0,o.jsxs)(a.p,{children:["Because ",(0,o.jsx)(a.code,{children:"putBytes()"})," accepts a ",(0,o.jsx)(a.code,{children:"ByteArray"}),", it requires your app to hold the entire\ncontents of a file in memory at once."]}),"\n",(0,o.jsx)(a.h2,{id:"upload-from-a-local-file",children:"Upload from a local file"}),"\n",(0,o.jsxs)(a.p,{children:["You can upload local files on the device, such as photos and videos from the camera,\nwith the ",(0,o.jsx)(a.code,{children:"putFile()"})," method. ",(0,o.jsx)(a.code,{children:"putFile()"})," takes a File url and returns an ",(0,o.jsx)(a.code,{children:"UploadTask"}),"\nwhich you can use to manage and monitor the status of the upload."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-actionscript",children:'var file:File = File.applicationStorageDirectory.resolvePath( "plane.png" );\n\nvar task:UploadTask = reference.putFile( file );\n'})}),"\n",(0,o.jsx)(a.h2,{id:"add-file-metadata",children:"Add File Metadata"}),"\n",(0,o.jsxs)(a.p,{children:["You can also include metadata when you upload files. This metadata contains\ntypical file metadata properties such as ",(0,o.jsx)(a.code,{children:"name"}),", ",(0,o.jsx)(a.code,{children:"size"}),", and ",(0,o.jsx)(a.code,{children:"contentType"}),"\n(commonly referred to as MIME type). The ",(0,o.jsx)(a.code,{children:"putFile()"})," method automatically\ninfers the MIME type from the File extension, but you can override the\nauto-detected type by specifying ",(0,o.jsx)(a.code,{children:"contentType"})," in the metadata. If you do\nnot provide a ",(0,o.jsx)(a.code,{children:"contentType"})," and Firebase Storage cannot infer a default from\nthe file extension, Firebase Storage uses ",(0,o.jsx)(a.code,{children:"application/octet-stream"}),"."]}),"\n",(0,o.jsx)(a.p,{children:"See the [File Metadata|Storage - File Metadata] section for more information about file metadata."}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-actionscript",children:'var reference:StorageReference = FirebaseStorage.service.getReference().child( "images/test" );\n\nvar metadata:StorageMetadata = new StorageMetadata();\nmetadata.contentType = "image/jpg";\n\nvar task:UploadTask = reference.putFile( file, metadata );\n'})}),"\n",(0,o.jsx)(a.h2,{id:"manage-uploads",children:"Manage Uploads"}),"\n",(0,o.jsxs)(a.p,{children:["In addition to starting uploads, you can pause, resume, and cancel uploads\nusing the ",(0,o.jsx)(a.code,{children:"pause()"}),", ",(0,o.jsx)(a.code,{children:"resume()"}),", and ",(0,o.jsx)(a.code,{children:"cancel()"})," methods. Pause and resume\nevents raise pause and progress state changes respectively. Canceling an\nupload causes the upload to fail with an error indicating that the upload\nwas canceled."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-actionscript",children:"// Pause the upload\ntask.pause();\n\n// Resume the upload\ntask.resume();\n\n// Cancel the upload\ntask.cancel();\n"})}),"\n",(0,o.jsx)(a.h2,{id:"monitor-upload-progress",children:"Monitor Upload Progress"}),"\n",(0,o.jsxs)(a.p,{children:["An upload task dispatches ",(0,o.jsx)(a.code,{children:"UploadTaskEvent"}),"s to indicate completion, progress, and errors:"]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-actionscript",children:"task.addEventListener( UploadTaskEvent.SUCCESS, uploadSuccessHandler );\ntask.addEventListener( UploadTaskEvent.ERROR, uploadErrorHandler );\n"})}),"\n",(0,o.jsxs)(a.p,{children:["Events are dispatched with a ",(0,o.jsx)(a.code,{children:"UploadTaskSnapshot"})," object.\nThis object is an immutable view of the task at the time the event occurred."]}),"\n",(0,o.jsx)(a.pre,{children:(0,o.jsx)(a.code,{className:"language-actionscript",children:"private function uploadSuccessHandler( event:UploadTaskEvent ):void \n{\n\t// event.snapshot contains details about the completed upload\n}\n\nprivate function uploadErrorHandler( event:UploadTaskEvent ):void \n{\n\t// Handle unsuccessful uploads\n\t// event.errorMessage contains the reason for the error\n}\n"})})]})}function p(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>r,x:()=>l});var t=n(96540);const o={},s=t.createContext(o);function r(e){const a=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:a},e.children)}}}]);