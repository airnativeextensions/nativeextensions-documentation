<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Auth Utilities | air native extensions</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/gameservices/auth-utilities"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Auth Utilities | air native extensions"><meta data-react-helmet="true" name="description" content="AuthUtil provides static utility methods to:"><meta data-react-helmet="true" property="og:description" content="AuthUtil provides static utility methods to:"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/gameservices/auth-utilities"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/gameservices/auth-utilities" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/gameservices/auth-utilities" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f49ec264.css">
<link rel="preload" href="/assets/js/runtime~main.30b0cb3e.js" as="script">
<link rel="preload" href="/assets/js/main.820293b7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--light_3ouy navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--dark_3zJb navbar__logo"><b class="navbar__title">AIR Native Extensions</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2ySP react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_2iFN"> </span></div><div class="react-toggle-track-x"><span class="toggle_2iFN"> </span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3zOJ"><button class="clean-btn backToTopButton_DkI0" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><main class="docMainContainer_3Zec docMainContainerEnhanced_3hdE"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><div class="tocCollapsible_3moT tocMobile_2bxg"><button type="button" class="clean-btn tocCollapsibleButton_3OYu">On this page</button></div><div class="markdown"><header><h1>Auth Utilities</h1></header><p>AuthUtil provides static utility methods to:</p><ul><li>Acquire ClientLogin, OAuth2, ID, or offline access tokens for Google accounts;</li><li>Identity Verification Signature for Game Center;</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="service-configuration"></a>Service Configuration<a class="hash-link" href="#service-configuration" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="google-play-game-services"></a>Google Play Game Services<a class="hash-link" href="#google-play-game-services" title="Direct link to heading">#</a></h3><p>In order to retrieve the server authorisation tokens you need to include the server client id in your service configuration. </p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var service:Service;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (GameServices.service.isServiceSupported( Service.GOOGLE_PLAY_GAME_SERVICES ))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    service = new Service( Service.GOOGLE_PLAY_GAME_SERVICES );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    service.serverClientId = &quot;googlePlayServerClientID&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><blockquote><p>The server client id for Google Play Game Services is the <strong>Web application</strong> Client ID and will be of the form <code>XXXXXXXXXXXX-yyyyyyyyyyyyyyyyyyyyyyyyyyyyy.apps.googleusercontent.com</code>.</p></blockquote><blockquote><p><strong>Note</strong>: We highly recommend utilising the <a href="https://airnativeextensions.com/extension/com.distriqt.GoogleIdentity" target="_blank" rel="noopener noreferrer">Google Identity ANE</a> for advanced sign-in options. It is much more complete, providing additional controls over the sign in process and user authentication options. If you are looking for additional scopes and permissions please utilise that ANE.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="game-center"></a>Game Center<a class="hash-link" href="#game-center" title="Direct link to heading">#</a></h3><p>Nothing additional is required.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="get-authorisation-token"></a>Get Authorisation Token<a class="hash-link" href="#get-authorisation-token" title="Direct link to heading">#</a></h2><p>You may wish to perform actions on behalf of a user using an API query or other such service.
This will generally require a token or authorisation to be consumed by some other service
on behalf of a specified user account. </p><p>To retrieve a token you call the <code>getToken</code> function with the scopes you require. The scopes
define how the token can be consumed, ie. the services that you will have access to. </p><p>For example:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">if (GameServices.service.authUtil.isSupported)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    GameServices.service.authUtil.addEventListener( AuthUtilEvent.AUTH_TOKEN_SUCCESS, authTokenSuccessHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    GameServices.service.authUtil.addEventListener( AuthUtilEvent.AUTH_TOKEN_ERROR, authTokenErrorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    GameServices.service.authUtil.getToken();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Then your event handlers:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">private function authTokenSuccessHandler( event:AuthUtilEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;AUTH UTIL TOKEN: &quot; + JSON.stringify( event.data ));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">private function authTokenErrorHandler( event:AuthUtilEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;AUTH UTIL ERROR: &quot; + event.data );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="google-play-game-services-1"></a>Google Play Game Services<a class="hash-link" href="#google-play-game-services-1" title="Direct link to heading">#</a></h3><p>With Google Play Game Services this process will retrieve the current Google user&#x27;s <strong>Server Auth Code</strong> and the <strong>ID Token</strong> from the <code>GoogleSignInAccount</code>.</p><p>If available the following will be returned in the <code>event.data</code> object:</p><ul><li><code>authCode</code>: A one-time server auth code to send to your web server which can be exchanged for access token and sometimes refresh token if server client id is provided in your service</li><li><code>idToken</code>: An ID token that you can send to your server if server client id is provided in your service</li></ul><p>You will get an error event if you haven&#x27;t specified the <code>serverClientId</code> in your service.</p><blockquote><p>Once you have the auth code you can send the server auth code to your backend server to exchange for access and refresh tokens.
Use the access token to call the Google Play Games Services API on behalf of the player and, optionally, store the refresh token to acquire a new access token when the access token expires.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="game-center-1"></a>Game Center<a class="hash-link" href="#game-center-1" title="Direct link to heading">#</a></h3><p>For GameCenter this returns the <strong>Identity Verification Signature</strong> from the <code>generateIdentityVerificationSignatureWithCompletionHandler</code> function. </p><p>The following will be returned in the <code>event.data</code> object:</p><ul><li><code>url</code>: The URL for the public encryption key</li><li><code>salt</code>: A random NSString used to compute the hash and keep it randomized (Base64 encoded)</li><li><code>signature</code> The verification signature data generated (Base64 encoded)</li><li><code>timestamp</code>: The date and time that the signature was created</li></ul><p><a href="http://developer.apple.com/reference/gamekit/gklocalplayer/1515407-generateidentityverificationsign" target="_blank" rel="noopener noreferrer">More information</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#service-configuration" class="table-of-contents__link">Service Configuration</a><ul><li><a href="#google-play-game-services" class="table-of-contents__link">Google Play Game Services</a></li><li><a href="#game-center" class="table-of-contents__link">Game Center</a></li></ul></li><li><a href="#get-authorisation-token" class="table-of-contents__link">Get Authorisation Token</a><ul><li><a href="#google-play-game-services-1" class="table-of-contents__link">Google Play Game Services</a></li><li><a href="#game-center-1" class="table-of-contents__link">Game Center</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>AIR discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>starling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>stack overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>license<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2021 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.30b0cb3e.js"></script>
<script src="/assets/js/main.820293b7.js"></script>
</body>
</html>