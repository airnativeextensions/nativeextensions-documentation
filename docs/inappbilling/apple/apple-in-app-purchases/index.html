<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Apple In-App Purchases | air native extensions</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/inappbilling/apple/apple-in-app-purchases"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Apple In-App Purchases | air native extensions"><meta data-react-helmet="true" name="description" content="Creating Your Products"><meta data-react-helmet="true" property="og:description" content="Creating Your Products"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/inappbilling/apple/apple-in-app-purchases"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/inappbilling/apple/apple-in-app-purchases" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/inappbilling/apple/apple-in-app-purchases" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f49ec264.css">
<link rel="preload" href="/assets/js/runtime~main.e513ec09.js" as="script">
<link rel="preload" href="/assets/js/main.843e3a71.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--light_3ouy navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--dark_3zJb navbar__logo"><b class="navbar__title">AIR Native Extensions</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2ySP react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_2iFN"> </span></div><div class="react-toggle-track-x"><span class="toggle_2iFN"> </span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3zOJ"><button class="clean-btn backToTopButton_DkI0" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_G8MK"><div class="sidebar_1tWv"><nav class="menu thin-scrollbar menu_1Iah menuWithAnnouncementBar_3acx"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/inappbilling/">InAppBilling</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/inappbilling/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Billing Services</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Apple In-App Purchases</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/inappbilling/apple/apple-in-app-purchases">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/apple/server-side-verification">Server Side Verification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/apple/testing-subscriptions">Testing Subscriptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/apple/troubleshooting">Troubleshooting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Google Play Billing</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Amazon In-App Purchasing</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Huawei AppGallery</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Samsung In-App Purchases</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Setup the Extension</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/add-the-extension">Add the Extension</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/billing-service">Billing Service</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Usage</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/products">Products</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/make-a-purchase">Make a Purchase</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/pending-purchases">Pending Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/restore-purchases">Restore Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/get-purchases">Get Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/consuming-purchases">Consuming Purchases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/change-a-purchase">Change a Purchase</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/promotions">Promotions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Subscription Discounts and Offers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/inappbilling/testing">Testing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">In-App Updates</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Help</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Advanced</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Other</a></li></ul></nav></div></aside><main class="docMainContainer_3Zec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><div class="tocCollapsible_3moT tocMobile_2bxg"><button type="button" class="clean-btn tocCollapsibleButton_3OYu">On this page</button></div><div class="markdown"><header><h1>Apple In-App Purchases</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="creating-your-products"></a>Creating Your Products<a class="hash-link" href="#creating-your-products" title="Direct link to heading">#</a></h2><p>The first step to setting up purchases is to create your products.</p><p>This is done through the iTunes Connect configuration for your application. Before starting make sure you understand what you can sell using in-app purchases.</p><p>From the Apple <a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Products.html#//apple_ref/doc/uid/TP40008267-CH2-SW2" target="_blank" rel="noopener noreferrer">documentation</a>: </p><blockquote><p>You can use In-App Purchase to sell content, app functionality, and services.</p><ul><li><strong>Content</strong>. Deliver digital content or assets, such as magazines, photos, and artwork. Content can also be used by the app itself—for example, additional characters and levels in a game, filters in a camera app, and stationery in a word processor.</li><li><strong>App functionality</strong>. Unlock behavior and expand features you’ve already delivered. Examples include a free game that offers multiplayer mode as an in-app purchase and a free weather app that lets users make a one-time purchase to remove ads.</li><li><strong>Services</strong>. Have users pay for one-time services such as voice transcription and for ongoing services such as access to a collection of data.</li></ul><p>You can’t use In-App Purchase to sell real-world goods and services or to sell unsuitable content.</p><ul><li><strong>Real-world goods and services</strong>. You must deliver a digital good or service within your app when using In-App Purchase. Use a different payment mechanism to let your users buy real-world goods and services in your app, such as a credit card or payment service.</li><li><strong>Unsuitable content</strong>. Don’t use In-App Purchase to sell content that the isn’t allowed by the App Review Guidelines—for example, pornography, hate speech, or defamation.</li></ul><p>For detailed information about what you can offer using In-App Purchase, see your license agreement and the App Review Guidelines. Reviewing the guidelines carefully before you start coding helps you avoid delays and rejection during the review process. If the guidelines don’t address your case in sufficient detail, you can ask the App Review team specific questions using the online contact form.</p></blockquote><p>Once you are certain you can sell your product log in to <a href="https://itunesconnect.apple.com" target="_blank" rel="noopener noreferrer">iTunes Connect</a> and select your application.</p><p>Under <strong>Features</strong> you will see the <strong>In-App Purchases</strong> section.</p><p>Every product you create is only available to one particular application and cannot be shared amongst other applications.</p><p>To create a product (the following is adapted from the <a href="https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnectInAppPurchase_Guide/Chapters/CreatingInAppPurchaseProducts.html#//apple_ref/doc/uid/TP40013727-CH3-SW1" target="_blank" rel="noopener noreferrer">Apple documentation</a>):</p><ul><li>Click the Add button (+) as highlighted in the screenshot below:</li></ul><p><img src="/assets/images/AppDetails-menu-4_2x-50c5ca0b4f0b37d394455dff8bc18985.png"></p><ul><li><p>In the section for the type of in-app purchase you want to create, click Create. </p><p>The in-app purchase product type cannot be changed once your in-app purchase has been created.</p></li><li><p>In the Reference Name field, enter an internal name for the product.</p></li><li><p>In the Product ID field, enter an alphanumeric identifier for the product.</p><p>In iTunes Connect, you identify the in-app purchase product using a string called a <strong>product identifier</strong>.
For example, com.company.app_name.productid.
When your app uses the extension to communicate with the App Store, it uses product identifiers
to the <code>getProducts</code> function to retrieve the configuration data you provided for the products.
Later, when a user wants to purchase a product, your app identifies the product to be purchased
using its product identifier.</p></li><li><p>For auto-renewable subscriptions, create a New Subscription Group, or add it to an existing group.
All auto-renewable subscriptions must be part of a group.
You can learn more in Understanding Subscription Groups and Durations.</p></li><li><p>Specify whether the product is cleared for sale.</p></li><li><p>Choose a price tier. The price tier determines both the customer price and your proceeds.</p></li><li><p>Configure the product display text for at least one language.</p></li><li><p>In the Review Notes section, enter information that can help Apple review the product.</p></li><li><p>Upload a screenshot of the product as it appears on the device.</p><p>This screenshot is used for Apple’s review only and is not displayed on the App Store.</p></li><li><p>Click Save.</p></li></ul><p>Your in-app purchase product appears on the app’s In-App Purchases page. </p><p>If the product is Ready to Submit, the product’s configuration is complete and ready for you to test the product with your app.
You should now be able to use the extension to query and make test purchases of your products.</p><p>You will need to have your product reviewed and release your application in order to have your products available to your users.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="testing"></a>Testing<a class="hash-link" href="#testing" title="Direct link to heading">#</a></h2><p>Each platform has slightly different test environments that you will need to be aware of and setup to be able to
correctly implement and test purchases.</p><ul><li>Create a test user in the sandbox environment: <a href="https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/SettingUpUserAccounts.html#//apple_ref/doc/uid/TP40011225-CH25-SW10" target="_blank" rel="noopener noreferrer">Setting Up User Accounts</a></li><li>Log out from your iTunes account on the test iOS device</li><li>Do not sign in with your test account in the Settings</li><li>Launch your application, you&#x27;ll be asked to sign into the store while you are testing</li></ul><p>Test each part of your code to verify that you’ve implemented it correctly.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="security-recommendation"></a>Security Recommendation<a class="hash-link" href="#security-recommendation" title="Direct link to heading">#</a></h2><p>When you send a purchase request, create a <code>String</code> token that identifies the user making this purchase request
and include this token in the <code>applicationUsername</code>. You can use a randomly generated string as the token. </p><p>By way of illustration, consider the following two examples. In the normal
case, many different users on your server each buy coins to
use in your game, and each user pays for the purchase from a different
App Store account. In contrast, it would be very unusual for a single
user on your server to buy coins multiple times, paying for each
purchase from a different App Store account. The App Store can&#x27;t
detect this kind of irregular activity on its own—it needs information
from your app about which account on your server is associated with
the transaction.</p><p><a href="https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html</a></p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="further-information"></a>Further information<a class="hash-link" href="#further-information" title="Direct link to heading">#</a></h2><p>Apple provides a guide for setting up InApp Purchases.
It can be quite a complex process so make sure you follow the guide exactly and complete each step: </p><p><a href="http://developer.apple.com/library/ios/#technotes/tn2259/_index.html" target="_blank" rel="noopener noreferrer">Adding In-App Purchase to your iOS and Mac Applications</a></p><p>You can also see the Apple FAQs <a href="http://developer.apple.com/library/ios/#technotes/tn2259/_index.html#//apple_ref/doc/uid/DTS40009578-CH1-FREQUENTLY_ASKED_QUESTIONS" target="_blank" rel="noopener noreferrer">here</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/inappbilling/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/inappbilling/apple/server-side-verification"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Server Side Verification »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-your-products" class="table-of-contents__link">Creating Your Products</a></li><li><a href="#testing" class="table-of-contents__link">Testing</a></li><li><a href="#security-recommendation" class="table-of-contents__link">Security Recommendation</a></li><li><a href="#further-information" class="table-of-contents__link">Further information</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>AIR discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>starling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>stack overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>license<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2021 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.e513ec09.js"></script>
<script src="/assets/js/main.843e3a71.js"></script>
</body>
</html>