"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[89219],{11470:(e,n,t)=>{t.d(n,{A:()=>A});var i=t(96540),r=t(34164),a=t(17559),s=t(23104),o=t(56347),l=t(205),d=t(57485),u=t(31682),c=t(70679);function h(e){var n,t;return null!=(n=null==(t=i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:t.filter(Boolean))?n:[]}function p(e){const{values:n,children:t}=e;return(0,i.useMemo)(()=>{const e=null!=n?n:function(e){return h(e).map(e=>{let{props:{value:n,label:t,attributes:i,default:r}}=e;return{value:n,label:t,attributes:i,default:r}})}(t);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map(e=>e.value).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some(e=>e.value===n)}function f(e){let{queryString:n=!1,groupId:t}=e;const r=(0,o.W6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:n,groupId:t});return[(0,d.aZ)(a),(0,i.useCallback)(e=>{if(!a)return;const n=new URLSearchParams(r.location.search);n.set(a,e),r.replace(Object.assign({},r.location,{search:n.toString()}))},[a,r])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=p(e),[s,o]=(0,i.useState)(()=>function(e){var n;let{defaultValue:t,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:i}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+i.map(e=>e.value).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}const r=null!=(n=i.find(e=>e.default))?n:i[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a})),[d,u]=f({queryString:t,groupId:r}),[h,g]=function(e){let{groupId:n}=e;const t=function(e){return e?"docusaurus.tab."+e:null}(n),[r,a]=(0,c.Dv)(t);return[r,(0,i.useCallback)(e=>{t&&a.set(e)},[t,a])]}({groupId:r}),v=(()=>{const e=null!=d?d:h;return m({value:e,tabValues:a})?e:null})();(0,l.A)(()=>{v&&o(v)},[v]);return{selectedValue:s,selectValue:(0,i.useCallback)(e=>{if(!m({value:e,tabValues:a}))throw new Error("Can't select invalid tab value="+e);o(e),u(e),g(e)},[u,g,a]),tabValues:a}}var v=t(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(74848);function y(e){let{className:n,block:t,selectedValue:i,selectValue:a,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),u=e=>{const n=e.currentTarget,t=l.indexOf(n),r=o[t].value;r!==i&&(d(n),a(r))},c=e=>{var n;let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{var i;const n=l.indexOf(e.currentTarget)+1;t=null!=(i=l[n])?i:l[0];break}case"ArrowLeft":{var r;const n=l.indexOf(e.currentTarget)-1;t=null!=(r=l[n])?r:l[l.length-1];break}}null==(n=t)||n.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:o.map(e=>{let{value:n,label:t,attributes:a}=e;return(0,x.jsx)("li",Object.assign({role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>{l.push(e)},onKeyDown:c,onClick:u},a,{className:(0,r.A)("tabs__item",b.tabItem,null==a?void 0:a.className,{"tabs__item--active":i===n}),children:null!=t?t:n}),n)})})}function j(e){let{lazy:n,children:t,selectedValue:a}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find(e=>e.props.value===a);return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==a}))})}function w(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,r.A)(a.G.tabs.container,"tabs-container",b.tabList),children:[(0,x.jsx)(y,Object.assign({},n,e)),(0,x.jsx)(j,Object.assign({},n,e))]})}function A(e){const n=(0,v.A)();return(0,x.jsx)(w,Object.assign({},e,{children:h(e.children)}),String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var i=t(34164);const r={tabItem:"tabItem_Ymn6"};var a=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,s),hidden:t,children:n})}},21547:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"idfa/migrating","title":"Migrating","description":"Version 6.0","source":"@site/docs/idfa/migrating.mdx","sourceDirName":"idfa","slug":"/idfa/migrating","permalink":"/docs/idfa/migrating","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Migrating","sidebar_label":"Migrating"},"sidebar":"idfa","previous":{"title":"Get Advertising Identifier","permalink":"/docs/idfa/get-advertising-identifier"},"next":{"title":"Migrating to AndroidX","permalink":"/docs/idfa/migrating-to-androidx"}}');var r=t(74848),a=t(28453);t(11470),t(19365);const s={title:"Migrating",sidebar_label:"Migrating"},o=void 0,l={},d=[{value:"Version 6.0",id:"version-60",level:2},{value:"Android Integration",id:"android-integration",level:3},{value:"Gradle Dependencies",id:"gradle-dependencies",level:4},{value:"Updating code",id:"updating-code",level:4},{value:"Updating the manifest",id:"updating-the-manifest",level:4},{value:"Version 5",id:"version-5",level:2},{value:"Version 4",id:"version-4",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"version-60",children:"Version 6.0"}),"\n",(0,r.jsx)(n.p,{children:"This latest release brings a number of updates to the extension particularly around android integration."}),"\n",(0,r.jsx)(n.p,{children:"We have moved to using gradle dependencies within our extensions which will improve dependency resolution, reduce update times and improve compatibility with other extensions.\nThis also reduces the amount of work required to manually integrate the extensions, reducing the additions to the manifest (though we still highly recommend using apm for this purpose)."}),"\n",(0,r.jsx)(n.p,{children:"There should be no changes required to your code for this update."}),"\n",(0,r.jsx)(n.p,{children:"However we do suggest checking out the manifest additions for the latest version of the extension as you should be able to greatly simplify your application descriptor now."}),"\n",(0,r.jsx)(n.h3,{id:"android-integration",children:"Android Integration"}),"\n",(0,r.jsx)(n.h4,{id:"gradle-dependencies",children:"Gradle Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"We have moved to using gradle dependencies within our extensions which will improve dependency resolution, reduce update times and improve compatibility with other extensions."}),"\n",(0,r.jsx)(n.p,{children:"This also reduces the amount of work required to manually integrate the extensions, reducing the additions to the manifest in your application descriptor."}),"\n",(0,r.jsx)(n.h4,{id:"updating-code",children:"Updating code"}),"\n",(0,r.jsx)(n.p,{children:"There should be no changes required to your code for this update."}),"\n",(0,r.jsx)(n.h4,{id:"updating-the-manifest",children:"Updating the manifest"}),"\n",(0,r.jsxs)(n.p,{children:["You can simplify the manifest now as well as the gradle implementation will add a significant amount of the required manifest entries for you.\nIf you use the ",(0,r.jsx)(n.code,{children:"apm"})," tool to generate your application descriptor"]}),"\n",(0,r.jsxs)(n.p,{children:["We highly recommend using the ",(0,r.jsx)(n.a,{href:"https://airnativeextensions.com/docs/using-apm",children:"apm"})," tool to manage the integration of the extensions in your application and to generate your application descriptor:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"apm generate app-descriptor\n"})}),"\n",(0,r.jsx)(n.p,{children:"You will see the manifest entries are significantly reduced and simply running the commands above will update the manifest for you."}),"\n",(0,r.jsx)(n.p,{children:"However, you can still integrate the manifest additions manually if you prefer. With this update we recommend starting fresh as there have been a lot of entries to be removed."}),"\n",(0,r.jsx)(n.p,{children:"If you manually update the manifest then, we recommend starting fresh as there have been a lot of entries to be removed.\nThe minimum manifest additions now looks like the following:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<manifest android:installLocation="auto">\n\n\t<uses-sdk android:minSdkVersion="21" android:targetSdkVersion="34"/>\n\n\t<uses-permission android:name="android.permission.INTERNET"/>\n\t\n\t<application>\n\t\t\t\n\t\t<activity android:name="com.distriqt.core.auth.AuthorisationActivity" android:exported="false" android:theme="@android:style/Theme.Translucent.NoTitleBar"/>\n\t\n\t</application>\n\n</manifest>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"version-5",children:"Version 5"}),"\n",(0,r.jsx)(n.p,{children:"Version 5 brings the iOS 14 authorisation requests using the App Tracking Transparency framework."}),"\n",(0,r.jsx)(n.p,{children:"You will need to add the usage description to your info additions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<key>NSUserTrackingUsageDescription</key>\n<string>This identifier will be used to deliver personalized ads to you.</string>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["(",(0,r.jsx)(n.a,{href:"/docs/idfa/add-the-extension",children:"Reference"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"And to ensure you have authorisation before attempting to retrieve the IDFA:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"if (IDFA.service.authorisationStatus() == TrackingAuthorisationStatus.AUTHORISED)\n{\n    // You have permission to access the IDFA\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/docs/idfa/get-advertising-identifier#authorisation",children:"Reference"})}),"\n",(0,r.jsx)(n.h2,{id:"version-4",children:"Version 4"}),"\n",(0,r.jsx)(n.p,{children:"Version 4 changes the Google Play Services dependencies removing the dependency on the entire Ads library and replacing it with the much smaller AdsIdentifier library."}),"\n",(0,r.jsxs)(n.p,{children:["In order to support this change you will need to add the ",(0,r.jsx)(n.code,{children:"com.distriqt.playservices.AdsIdentifier"})," dependency and remove the ",(0,r.jsx)(n.code,{children:"com.distriqt.playservices.Ads"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Please note that other extensions may still need the ",(0,r.jsx)(n.code,{children:"com.distriqt.playservices.Ads"})," extension (mainly AdMob or related services) so ensure you check your other ANEs before removing it."]})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(96540);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);