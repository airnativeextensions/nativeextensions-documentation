<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pushnotifications/apple/apple-push-notification-service" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Setup | air native extensions</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-rh="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-rh="true" property="og:url" content="https://docs.airnativeextensions.com/docs/pushnotifications/apple/apple-push-notification-service"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Setup | air native extensions"><meta data-rh="true" name="description" content="Apple Push Notification Service (APNS) is the push notification system for use on"><meta data-rh="true" property="og:description" content="Apple Push Notification Service (APNS) is the push notification system for use on"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/pushnotifications/apple/apple-push-notification-service"><link data-rh="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/pushnotifications/apple/apple-push-notification-service" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/pushnotifications/apple/apple-push-notification-service" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WGX2M70X7C-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Atom Feed">
<link rel="alternate" type="application/json" href="/news/feed.json" title="air native extensions JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.20f0141b.css">
<link rel="preload" href="/assets/js/runtime~main.31cbe923.js" as="script">
<link rel="preload" href="/assets/js/main.f5e066fb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AIR Native Extensions</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pushnotifications/">PushNotifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pushnotifications/add-the-extension">Add the Extension</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/pushnotifications/apple/add-the-extension">Notification services</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/pushnotifications/apple/add-the-extension">Apple Push Notification Service</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pushnotifications/apple/add-the-extension">Add the extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pushnotifications/apple/apple-push-notification-service">Setup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/pushnotifications/firebase/add-the-extension">Firebase Messaging</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/pushnotifications/onesignal/add-the-extension">One Signal</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/pushnotifications/windows/add-the-extension">Windows</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pushnotifications/azure/azure-notifications">Azure Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pushnotifications/pushy/">Pushy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pushnotifications/setup-your-service">Setup, authorisation, and registration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pushnotifications/receiving-notifications">Notifications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pushnotifications/set-badge-number">Other features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pushnotifications/apple/ios-apns-payload">Payloads</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pushnotifications/apple/ios-apns-message">Sending Messages</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pushnotifications/migrating-to-v13.0">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pushnotifications/changelog">Other</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Notification services</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Apple Push Notification Service</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Setup</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Setup</h1><p>Apple Push Notification Service (APNS) is the push notification system for use on
iOS with iPhones, iPads and other such iOS devices.</p><p>The system is quite complex and has a lot of different components as you can see
in the diagram below.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-apns-f04624b845d50e0624d49fc3b45ef2a1.png" width="603" height="457" class="img_ev3q"></p><p>When the device finally receives the notification, the notification will be displayed
to the user (depending on the options specified in the notification, more about these
later). The user can then respond to the notification as they see fit, dismissing it
or opening your application.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-apns-remote_notif_simple-eb2c5f4d37a88b7a9680b9ad9f66a2fe.png" width="1212" height="202" class="img_ev3q"></p><p>Your server will be required to implement a solution to gather device tokens and to
send the notification to the APNS server with the required devices specified. This
solution will not be part of this tutorial but we will show you everything up to and
including sending a test notification.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2><p>Before we start, it’s important to check that you have all of the following:</p><ul><li>An iOS device (they do not work in the simulator)</li><li>An iOS Developer program membership</li><li>A server connected to the internet, ideally that can run background processes
(for testing this can simply be a local installation of Apache + PHP)</li><li>Access to a macOS machine.</li></ul><p>It is important that you have all of these organised before starting the APNS setup.
It is potentially possible to do parts of this without an macOS machine but we won’t be showing that in this tutorial.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="apns-data-packet">APNS Data Packet<a href="#apns-data-packet" class="hash-link" aria-label="Direct link to APNS Data Packet" title="Direct link to APNS Data Packet">​</a></h2><p>Firstly it is important to understand that at the very base of the APNS implementation is a very simple JSON packet. They are intended to be small, delivering only the simplest amount of information.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;aps&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;alert&quot;: &quot;A notification message&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sound&quot;: &quot;default&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The notification packet can contain a range of information that will determine what happens on the phone when the packet is received.</p><p>Details on the notification payload are best described in the <em>“Local and Push Notification Programming Guide”</em>
as part of the iOS Developer Library Documentation. </p><p>You can find this <a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CreatingtheNotificationPayload.html" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="caveats-and-characteristics">Caveats and Characteristics<a href="#caveats-and-characteristics" class="hash-link" aria-label="Direct link to Caveats and Characteristics" title="Direct link to Caveats and Characteristics">​</a></h2><p>Firstly and foremost, push notifications are not reliable and the APNS server does
not guarantee delivery of a notification that your server sends it. The delivery
time will also vary from a few seconds up to half an hour.</p><p>Additionally a device may not be able to receive a notification, for instance it
may be on a network that blocks the ports used for push notification communication.
Or it could be as simple as the device is switched off.</p><p>Push notifications will become expensive if you don’t prepare for it. You must take
care that your application when deployed to lots of users doesn’t quickly use your
notification quotas. Be aware of what notifications are being sent to your
applications and be prepared to pay if you don’t.</p><p>You must take these into consideration when designing your notifications system.</p><p>Lastly, you must abide by the Apple App Store Review Guidelines for Push Notifications.
They are all fairly reasonable but it’s always important to check before you design
your application requirements.</p><ul><li><a href="https://developer.apple.com/app-store/review/guidelines/" target="_blank" rel="noopener noreferrer">Review Guidelines</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="certificates">Certificates<a href="#certificates" class="hash-link" aria-label="Direct link to Certificates" title="Direct link to Certificates">​</a></h2><p>This is the painful part of the APNS setup, gathering all the required provisioning
profiles and certificates. Get a cup of coffee and take your time through the process
and you won’t end up pulling your hair out.</p><p>There are two different provisioning profiles associated with an application,
the <strong>development</strong> and the <strong>distribution</strong> (or production) profiles.
Similarly there are two types of certificates for your application server to use
to communicate with the APNS server:</p><ul><li>Development - for use when you’re running your application in debug mode and signed with the developer profile. With this certificate you can talk to the APNS sandbox environment to test your application.</li><li>Production - for use when you are distributing your application either as an ad-hoc application or through the AppStore.</li></ul><p>If you use the wrong certificate then the push notification will fail and your
application won’t receive the notification. The process for creating these certificates
is very similar for both cases so we’ll just concentrate on the development profiles
and certificates.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="certificate-signing-request-csr">Certificate Signing Request (CSR)<a href="#certificate-signing-request-csr" class="hash-link" aria-label="Direct link to Certificate Signing Request (CSR)" title="Direct link to Certificate Signing Request (CSR)">​</a></h3><p>This process is very similar to when you first created your developer account in the
iOS developer program. These certificates are based off the classic form of
public-private key cryptography, but don’t worry you don’t need to know anything
about them to make this work. Just be aware that you will be creating certificates
and exchanging them between the apple servers and yourself.</p><p>Most importantly you will create a certificate that is to be used to communicate from
your server to the APNS servers. This is different and separate from your developer
certificates you use to sign your applications. It is however “private” and you should
not share the certificate with anyone not related to the development of these
push notifications.</p><p>To create these certificates you create a <strong>“Certificate Signing Request” (CSR)</strong> and
send the CSR to a certificate issuing authority, in this case the APNS section of the
iOS developer portal. The authority then issues you with a certificate that you can
use to secure your communications.</p><p>On OSX you will create your CSR by using the <strong>Keychain Access</strong> application.
You will find this in the following location:</p><p><code>Applications / Utilities / Keychain Access</code></p><p>Choose the option under the main application menu (as shown in the screenshot below):</p><p><code>Keychain Access / Certificate Assistant / Request a Certificate From a Certificate Authority...</code></p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-csr1-5570fa59e18fa166e0b5b6ab17ca0bc2.png" width="791" height="327" class="img_ev3q"></p><p>You should then be presented with a window asking for some details about the certificate request.</p><p>Here you should enter your email address, it’s recommended you use the same email as
you use to sign up for the developer program but this is not essential, and a common
name for your certificate. The common name just needs to be something descriptive to
allow you to easily identify the certificate.</p><p>Make sure you’ve checked the Saved to disk option and then click Continue. Save the
file somewhere convenient, you will need it again soon. We suggest you change the name
of the file to something like <code>ApplicationPushNotifications.certSigningRequest</code>.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-csr2-67c2182a49ac34c778c4d4daac430f49.png" width="654" height="472" class="img_ev3q"></p><p>Next we need to export the private key as a p12 file. To do this return to the Keychain
Access program and open the keys category. You should be able to see a public and a
private key with the Common name you used in the previous step. You can also use the
search in the top left to locate them.</p><p>We export this certificate by right clicking on the private key and selecting export.</p><p>You will need to enter a passphrase, which will be used to protect your private key.
You should enter something that is secure but also that you can easily recall. Normal
rules with passwords apply here!</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-csr3-6984fdfe83a83aa6a007d73c2dd01cb0.png" width="1047" height="666" class="img_ev3q"></p><p>Now we move on to the provisioning in the iOS portal.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-provisioning-portal">iOS Provisioning Portal<a href="#ios-provisioning-portal" class="hash-link" aria-label="Direct link to iOS Provisioning Portal" title="Direct link to iOS Provisioning Portal">​</a></h3><p>Now you will need to log into your iOS Provisioning Portal with your iOS developer Apple ID: </p><ul><li><a href="https://developer.apple.com/account/ios/profile/profileList.action" target="_blank" rel="noopener noreferrer">https://developer.apple.com/account/ios/profile/profileList.action</a></li></ul><p>Here we are going to make a new application ID and use the CSR to create an SSL certificate
for your application server communications.</p><p>You can update an existing application ID to include push notifications, as long as you
follow the steps after creating the application ID to enable push notifications in your
application and make sure you download the provisioning profile for the application again!
It will have changed and won’t work if you don’t update your profile.</p><p>To make a new application ID, go to the App IDs section on the left and click the New App ID button.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile1-e9696778529364d10d9f338d2d0d10fd.png" width="1003" height="439" class="img_ev3q"></p><p>You will then be presented with the “Create App ID” form. Enter your application details, for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Description:               Distriqt Test Application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bundle Identifier:         com.distriqt.test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Take note of the <strong>Bundle Seed ID (App ID Prefix)</strong> and the <strong>Bundle Identifier (App ID Suffix)</strong>.
We will need these later.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile2-1d4181af9aa9bf6366cb16ec882c522b.png" width="1006" height="808" class="img_ev3q"></p><p>After you have created the application it will appear in your App ID list, with something like the following beside it. Note that Push Notifications are listed as “Configurable”, both for development and production.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile3-c0d3b6fd88aee14988f0a577458f3bf4.png" width="563" height="147" class="img_ev3q"></p><p>Click Configure. You should then be presented with the Configure App ID page. Look for the section as shown below and click the checkbox to enable the App ID for Apple Push Notification service. This should activate the Configure actions on the right. Click the button beside the Development Push SSL Certificate. (You can come back to this same place to configure the production certificate at a later date).</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile4-d283160387c3c426b09516f2ae827633.png" width="800" height="201" class="img_ev3q"></p><p>This will now ask you to upload the CSR file we created earlier. This is the ApplicationPushNotifications.certSigningRequest file not the p12 file. Choose the file and click Generate.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile5-1f91b37effff30195b3ca12755621432.png" width="774" height="774" class="img_ev3q"></p><p>Your certificate should now get generated and after a while you&#x27;ll get a message saying &quot;Your APNs SSL Certificate has been generated. Please continue to the next step&quot;.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile6-227da6560b055322d74eebb518adf7e1.png" width="662" height="608" class="img_ev3q"></p><p>You will now get to download the SSL certificate. Click download and save the certificate somewhere safe. It should be called aps_development.cer. We suggest you rename it to something matching the application that it’s associated with.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile7-ea964f6a3237596bbcd6b9f08d2bc8cf.png" width="648" height="592" class="img_ev3q"></p><p>You should now see the Status for the Development Push SSL Certificate is green and labelled as Enabled.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile8-eb5e536a16e9ad60eb190b5d51e7666d.png" width="787" height="192" class="img_ev3q"></p><p>You should see the expiration date of the certificate listed. It is very important that you note this date and make sure you return and update the certificate before the date is reached. Otherwise you will experience a period where notifications will not work in your application!</p><p>Lastly while we’re still in the Provisioning Portal lets create a provisioning profile for the application. Go to the Provisioning section and on the Development tab, click New Profile.</p><p><img loading="lazy" src="/assets/images/pushnotifications-tutorial-profile9-f9958c259b55c6adc033e91472906320.png" width="991" height="641" class="img_ev3q"></p><p>Give the profile a name and select the App ID you’ve just created, along with any devices you wish to test on. Make sure you select your developer certificate from the Certificates section. Click Submit and the profile will be generated.</p><p>This is no different from any other provisioning profile, all we are doing is making sure we retrieve the profile after the application has been setup for push notifications.</p><p>You may need to refresh the page if the profile still is in the Pending state.</p><p>Click the Download action and save the provisioning profile file along with all your other development files. You won’t need to use this file on your application server, you simply have to use this to develop your application.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-certificate">Using the Certificate<a href="#using-the-certificate" class="hash-link" aria-label="Direct link to Using the Certificate" title="Direct link to Using the Certificate">​</a></h3><p>You should have 3 files saved somewhere at this point (ignoring the mobile provisioning file):</p><ul><li>the Certificate Signing Request (CSR)</li><li>the private key - exported as a <code>p12</code> file</li><li>the SSL certificate downloaded from the iOS provisioning portal (<code>aps_development.cer</code>)</li></ul><p>These files are very important in the communication between your application server
and the APNS servers. It’s suggested you keep them in a safe place. You can throw
the CSR away if you wish but we’ve always kept them. If you need to renew the
certificates at a later date you can use the same CSR and skip a few of the
earlier steps.</p><p>What we need to do now is convert the certificate and private key into a format that
we can use easily.</p><p>Our test notification example for APNS uses PHP so we will convert them into a
single file in the PEM format. We will use this PEM file later when we are sending
test notifications but here we will show you how to create it.</p><p>We will be using the OpenSSL tools for this. Place the <code>p12</code> and <code>cer</code> files into a
directory and open a Terminal window in that directory. We are going to create <code>pem</code>
files from each of the <code>p12</code> and <code>cer</code> files and then combine them into a single file.</p><p>Convert the <code>cer</code> file to <code>pem</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -in aps_developer_identity.cer -inform der -out YOUR_CERTIFICATE.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Convert the <code>p12</code> file into a <code>pem</code> file. </p><p>It will ask you for the password to the private key. This is the password you used
when you exported the key from your Keychain. It should then ask you for a new
“PEM pass phrase”, this is a separate password to the PEM file you are creating so
again use something secure. You must enter a passphrase. If you don’t your private
key may not get included correctly in the final PEM.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl pkcs12 -nocerts -out YOUR_PRIVATE_KEY.pem -in YOUR_PRIVATE_KEY.p12</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, combine the two files:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat YOUR_CERTIFICATE.pem YOUR_PRIVATE_KEY.pem &gt; ck.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This <code>ck.pem</code> file is what we will use in the php script later so keep this file handy.</p><p>You can test the connection to the APNS sandbox (sandbox as we created the development
certificate through this process) at this point if you wish with the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert YOUR_CERTIFICATE.pem -key YOUR_PRIVATE_KEY.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This should connect to the server and dump out a whole heap of information about
the process. Eventually after the successful connection you should be able to
type a few characters and the server should disconnect.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pushnotifications/apple/add-the-extension"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Add the extension</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pushnotifications/firebase/add-the-extension"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Add the extension</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#apns-data-packet" class="table-of-contents__link toc-highlight">APNS Data Packet</a></li><li><a href="#caveats-and-characteristics" class="table-of-contents__link toc-highlight">Caveats and Characteristics</a></li><li><a href="#certificates" class="table-of-contents__link toc-highlight">Certificates</a><ul><li><a href="#certificate-signing-request-csr" class="table-of-contents__link toc-highlight">Certificate Signing Request (CSR)</a></li><li><a href="#ios-provisioning-portal" class="table-of-contents__link toc-highlight">iOS Provisioning Portal</a></li><li><a href="#using-the-certificate" class="table-of-contents__link toc-highlight">Using the Certificate</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">AIR discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">starling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">stack overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item">license<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2024 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.31cbe923.js"></script>
<script src="/assets/js/main.f5e066fb.js"></script>
</body>
</html>