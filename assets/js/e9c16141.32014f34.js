"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[2447],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=a.createContext({}),s=function(e){var n=a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=s(e.components);return a.createElement(d.Provider,{value:n},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,l=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=s(t),m=o,f=u["".concat(d,".").concat(m)]||u[m]||c[m]||l;return t?a.createElement(f,r(r({ref:n},p),{},{components:t})):a.createElement(f,r({ref:n},p))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=t.length,r=new Array(l);r[0]=m;var i={};for(var d in n)hasOwnProperty.call(n,d)&&(i[d]=n[d]);i.originalType=e,i[u]="string"==typeof e?e:o,r[1]=i;for(var s=2;s<l;s++)r[s]=t[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},72468:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=t(87462),o=(t(67294),t(3905));const l={title:"Sound Pool",sidebar_label:"Sound Pool"},r=void 0,i={unversionedId:"mediaplayer/sound-pool",id:"mediaplayer/sound-pool",title:"Sound Pool",description:"A SoundPool is a collection of samples that can be loaded into memory. It allows you to play short sound effects and samples. The sounds are loaded into memory for low-latency playback.",source:"@site/docs/mediaplayer/sound-pool.md",sourceDirName:"mediaplayer",slug:"/mediaplayer/sound-pool",permalink:"/docs/mediaplayer/sound-pool",draft:!1,tags:[],version:"current",frontMatter:{title:"Sound Pool",sidebar_label:"Sound Pool"},sidebar:"mediaplayer",previous:{title:"Audio Player - Background Audio",permalink:"/docs/mediaplayer/audio-player---background-audio"},next:{title:"Remote Command Center",permalink:"/docs/mediaplayer/remote-command-center"}},d={},s=[{value:"Creating Sounds",id:"creating-sounds",level:2},{value:"Loading",id:"loading",level:2},{value:"Controlling Playback",id:"controlling-playback",level:2},{value:"Unloading",id:"unloading",level:2},{value:"Fallback",id:"fallback",level:2},{value:"Migrating from flash.media.Sound",id:"migrating-from-flashmediasound",level:2},{value:"Loading",id:"loading-1",level:3},{value:"Playback",id:"playback",level:3},{value:"Stopping",id:"stopping",level:3},{value:"Events",id:"events",level:3}],p={toc:s},u="wrapper";function c(e){let{components:n,...t}=e;return(0,o.kt)(u,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"A SoundPool is a collection of samples that can be loaded into memory. It allows you to play short sound effects and samples. The sounds are loaded into memory for low-latency playback."),(0,o.kt)("p",null,"This is well suited to short sound effects and playback where trigger time is important.\nIf you want to playback longer sounds and music look at the ",(0,o.kt)("a",{parentName:"p",href:"/docs/mediaplayer/audio-player"},"AudioPlayer")," class for a more complete audio playback solution.\nSounds played through the sound pool may not complete if they are too long. "),(0,o.kt)("h2",{id:"creating-sounds"},"Creating Sounds"),(0,o.kt)("p",null,"When dealing with the sound pool you will use the ",(0,o.kt)("inlineCode",{parentName:"p"},"SoundPool")," functionality to create instances of a ",(0,o.kt)("inlineCode",{parentName:"p"},"Sound")," and use this to load and play sounds."),(0,o.kt)("p",null,"To create a ",(0,o.kt)("inlineCode",{parentName:"p"},"Sound")," call ",(0,o.kt)("inlineCode",{parentName:"p"},"createSound()"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var sound:Sound = MediaPlayer.service.soundPool.createSound();\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note: This is the ",(0,o.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.mediaplayer.sound.Sound")," class and not ",(0,o.kt)("inlineCode",{parentName:"p"},"flash.media.Sound"),".\nWe have used the same name to be able to quickly replace sounds in your application with the native equivalent.")),(0,o.kt)("h2",{id:"loading"},"Loading"),(0,o.kt)("p",null,"To load a sound you call the ",(0,o.kt)("inlineCode",{parentName:"p"},"loadFile")," function and pass a reference to a file on the device."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'var soundFile:File = File.applicationDirectory.resolvePath("assets/explosion.mp3");\n\nsound.loadFile( soundFile );\n')),(0,o.kt)("p",null,"Loading a file will dispatch one of two events:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Event.COMPLETE"),": If the load was completed successfully and the sound is now available in memory for playback;"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"IOErrorEvent.IO_ERROR"),": If the load failed either due to format or other issues with the file.")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"loadFile")," call may also throw an ",(0,o.kt)("inlineCode",{parentName:"p"},"Error")," if the file doesn't exist."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'var soundFile:File = File.applicationDirectory.resolvePath("assets/explosion.mp3");\n\nsound.addEventListener( Event.COMPLETE, sound_completeHandler );\nsound.addEventListener( IOErrorEvent.IO_ERROR, sound_errorHandler );\nsound.loadFile( soundFile );\n\nfunction sound_completeHandler( event:Event ):void \n{\n    // Sound is loaded and ready for playback\n}\n\nfunction sound_errorHandler( event:IOErrorEvent ):void \n{\n    // An error occurred\n}\n')),(0,o.kt)("h2",{id:"controlling-playback"},"Controlling Playback"),(0,o.kt)("p",null,"Once a sound is loaded you can call ",(0,o.kt)("inlineCode",{parentName:"p"},"play()")," to play the sound:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"sound.play();\n")),(0,o.kt)("p",null,"To stop a sound call ",(0,o.kt)("inlineCode",{parentName:"p"},"stop()"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"sound.stop();\n")),(0,o.kt)("h2",{id:"unloading"},"Unloading"),(0,o.kt)("p",null,"Once you have finished with a sound and never plan to use it again or if you wish to clear memory resources associated with a sound you can call ",(0,o.kt)("inlineCode",{parentName:"p"},"unload()"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"sound.unload();\n")),(0,o.kt)("p",null,"Once a sound has been unloaded the ",(0,o.kt)("inlineCode",{parentName:"p"},"Sound")," instance is no longer valid. You will need to create a new sound and load a file again."),(0,o.kt)("h2",{id:"fallback"},"Fallback"),(0,o.kt)("p",null,"If the device doesn't support native sound pool implementation a fallback implementation will be used which uses the ",(0,o.kt)("inlineCode",{parentName:"p"},"flash.media.Sound")," implementation to playback sounds."),(0,o.kt)("p",null,"You can check what implementation will be used by checking the ",(0,o.kt)("inlineCode",{parentName:"p"},"isSupportedNatively")," flag on the sound pool. If this is ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," then the native implementation will be used and if it is ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," then the ",(0,o.kt)("inlineCode",{parentName:"p"},"flash.media.Sound")," implementation will be used. "),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Currently only Android has a native implementation ")),(0,o.kt)("h2",{id:"migrating-from-flashmediasound"},"Migrating from flash.media.Sound"),(0,o.kt)("h3",{id:"loading-1"},"Loading"),(0,o.kt)("p",null,"Loading a sound using the flash.media.Sound class:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'var effect:Sound = new Sound();\neffect.addEventListener( Event.COMPLETE, sound_loadCompleteHandler );\neffect.addEventListener( IOErrorEvent.IO_ERROR, sound_errorHandler );\neffect.load( new URLRequest( "sounds/effect.mp3" ));\n\nfunction sound_loadCompleteHandler( event:Event ):void \n{\n    effect.play();\n}\n')),(0,o.kt)("p",null,"Becomes the following using the ",(0,o.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.mediaplayer.sound.Sound")," class:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'var effect:Sound = MediaPlayer.service.soundPool.createSound();\neffect.addEventListener( Event.COMPLETE, sound_loadCompleteHandler );\neffect.addEventListener( IOErrorEvent.IO_ERROR, sound_loadErrorHandler );\neffect.loadFile( File.applicationDirectory.resolvePath("sounds/effect.mp3"));\n\nfunction sound_loadCompleteHandler( event:Event ):void \n{\n    effect.play();\n}\n')),(0,o.kt)("h3",{id:"playback"},"Playback"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var loops:int = 1;\nvar transform:SoundTransform = new SoundTransform();\n\nvar channel:SoundChannel = effect.play( 0, loops, transform );\n")),(0,o.kt)("p",null,"becomes (still using flash.media.SoundTransform):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var loops:int = 1;\nvar transform:SoundTransform = new SoundTransform();\n\neffect.play( loops, transform );\n")),(0,o.kt)("h3",{id:"stopping"},"Stopping"),(0,o.kt)("p",null,"Stopping a sound using flash requires the sound channel:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"channel.stop();\n")),(0,o.kt)("p",null,"This is simplified to using the sound instance:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"effect.stop();\n")),(0,o.kt)("h3",{id:"events"},"Events"),(0,o.kt)("p",null,"The Event.COMPLETE and IOErrorEvent.IO_ERROR are both dispatched from the sounds."),(0,o.kt)("p",null,"There is no way to detect the end of playback with the sound pool."))}c.isMDXComponent=!0}}]);