"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[31482],{24289:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"nativewebview/create-a-webview","title":"Create a WebView","description":"Once you have initialised the extension, creating a web view is simply a matter of calling the createWebView() function with your parameters.","source":"@site/docs/nativewebview/create-a-webview.md","sourceDirName":"nativewebview","slug":"/nativewebview/create-a-webview","permalink":"/docs/nativewebview/create-a-webview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Create a WebView","sidebar_label":"Create a WebView"},"sidebar":"nativewebview","previous":{"title":"Initialise the Extension","permalink":"/docs/nativewebview/initialise-the-extension"},"next":{"title":"WebView Information","permalink":"/docs/nativewebview/webview-information"}}');var s=i(74848),o=i(28453);const r={title:"Create a WebView",sidebar_label:"Create a WebView"},a=void 0,c={},l=[{value:"Web View Options",id:"web-view-options",level:2},{value:"Link Target Action",id:"link-target-action",level:3},{value:"Granting Media Permissions",id:"granting-media-permissions",level:3}];function d(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Once you have initialised the extension, creating a web view is simply a matter of calling the ",(0,s.jsx)(n.code,{children:"createWebView()"})," function with your parameters."]}),"\n",(0,s.jsxs)(n.p,{children:["The following example creates a ",(0,s.jsx)(n.code,{children:"WebView"})," of size 400x600 and loads a URL. It also demonstrates some of the events dispatched by the WebView."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var viewPort:Rectangle = new Rectangle( 0, 0, 400, 600 );\n\t\t\t\nvar webView:WebView = NativeWebView.service.createWebView( viewPort ) ;\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can then attach listeners and load content into the view"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:'webView.addEventListener( NativeWebViewEvent.LOCATION_CHANGE, webView_locationChangeHandler );\nwebView.addEventListener( NativeWebViewEvent.COMPLETE, webView_completeHandler );\nwebView.addEventListener( NativeWebViewEvent.ERROR, webView_errorHandler );\n\nwebView.loadURL( "https://airnativeextensions.com" );\n'})}),"\n",(0,s.jsx)(n.p,{children:"The events give you information about the content in the view"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:'function webView_locationChangeHandler( event:NativeWebViewEvent ):void\n{\n\ttrace( "location change: " + event.data );\n}\n\nfunction webView_completeHandler( event:NativeWebViewEvent ):void\n{\n\ttrace( "load complete: " + event.data );\n}\n\nfunction webView_errorHandler( event:NativeWebViewEvent ):void\n{\n\ttrace( "error: " + event.data );\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"web-view-options",children:"Web View Options"}),"\n",(0,s.jsxs)(n.p,{children:["When creating a ",(0,s.jsx)(n.code,{children:"WebView"})," you can specify some options as to how the view will handle certain content and interactions."]}),"\n",(0,s.jsxs)(n.p,{children:["To do so, create an instance of the ",(0,s.jsx)(n.code,{children:"WebViewOptions"})," class and set the options as required. ",(0,s.jsxs)(n.em,{children:["Some of these options are platform dependent so make sure you read the documentation in the ",(0,s.jsx)(n.code,{children:"WebViewOptions"})," class."]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var options:WebViewOptions = new WebViewOptions();\n\noptions.mediaPlaybackRequiresUserAction = true;\noptions.allowInlineMediaPlayback = true;\noptions.backgroundEnabled = true;\noptions.allowZooming = true;\noptions.cachePolicy = CachePolicy.LOAD_NO_CACHE;\noptions.scrollBarStyle = WebViewOptions.SCROLLBAR_LIGHT;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This then gets passed as the second parameter to the ",(0,s.jsx)(n.code,{children:"createWebView()"})," function:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var webView:WebView = NativeWebView.service.createWebView( viewPort, options );\n"})}),"\n",(0,s.jsx)(n.h3,{id:"link-target-action",children:"Link Target Action"}),"\n",(0,s.jsxs)(n.p,{children:["The link target action option determines how links with ",(0,s.jsx)(n.code,{children:'"_blank"'})," targets are handled. In a normal browser situation these would open a new tab/window however in our environment you have the following options:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LinkTargetAction.SYSTEM_BROWSER"}),": New windows / popups from blank targets will open in the system browser;"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LinkTargetAction.CURRENT_WEBVIEW"}),": Blank targets will load in the current webview;"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LinkTargetAction.BLOCK"}),": Blank targets will be blocked, the ",(0,s.jsx)(n.code,{children:"NativeWebViewEvent.LINK_BLOCKED"})," event will be dispatched if you wish to handle them in your code."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:'var options:WebViewOptions = new WebViewOptions();\noptions.linkTargetAction = LinkTargetAction.BLOCK;\n\nvar webView:WebView = NativeWebView.service.createWebView( viewPort, options );\nwebView.addEventListener( NativeWebViewEvent.LINK_BLOCKED, linkBlockedHandler );\n\n\nfunction linkBlockedHandler( event:NativeWebViewEvent ):void \n{\n\ttrace( "Link was blocked: " + event.data );\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"granting-media-permissions",children:"Granting Media Permissions"}),"\n",(0,s.jsx)(n.p,{children:"If you plan to support media access through the web page it is worth considering how the permission grant process will be handled."}),"\n",(0,s.jsx)(n.p,{children:"When a page requests permission to use the microphone and/or camera there are generally 2 permission processes to go through. Firstly the normal application permission request of your user that your application would go through to normally access device hardware. Secondly when a web page makes this request there is a second process where you are given the opportunity to grant the web page permission to access the hardware."}),"\n",(0,s.jsxs)(n.p,{children:["You control this through the ",(0,s.jsx)(n.code,{children:"mediaCapturePermissionGrantType"})," option on your web view."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"options.mediaCapturePermissionGrantType = PermissionGrantType.GRANT;\n"})}),"\n",(0,s.jsx)(n.p,{children:"The available options for this are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PermissionGrantType.GRANT"}),": Grants the permission;"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PermissionGrantType.DENY"}),": Denies the permission;"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PermissionGrantType.PROMPT"}),": Prompts the user for permission each time a view is created;"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PermissionGrantType.GRANT_IF_SAME_HOST_ELSE_PROMPT"}),": If the security origin's host of the permission request equals the host of the WebView's current URL, the permission is granted if it has been granted before. Otherwise, the user gets prompted;"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PermissionGrantType.GRANT_IF_SAME_HOST_ELSE_DENY"}),": If the security origin's host of the permission request equals the host of the WebView's current URL, the permission is granted if it has been granted before. Otherwise, the user gets denied;"]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{title:"iOS / macOS",type:"note",children:[(0,s.jsx)(n.p,{children:"If you plan on supporting this you must ensure you have added the correct usage strings to your info additions:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<key>NSCameraUsageDescription</key>\n<string>Require camera usage description</string>\n<key>NSMicrophoneUsageDescription</key>\n<string>Require record audio description</string>\n"})}),(0,s.jsx)(n.p,{children:"The operating system will automatically handle the display of the permission request as required."})]}),"\n",(0,s.jsxs)(n.admonition,{title:"Android",type:"note",children:[(0,s.jsxs)(n.p,{children:["The Android implementation of this extension will request the system permissions for you when a webpage requests them and then apply the policy you have set in the ",(0,s.jsx)(n.code,{children:"mediaCapturePermissionGrantType"})," property."]}),(0,s.jsx)(n.p,{children:"You need to ensure you have added the appropriate permissions to your manifest, ie."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.CAMERA"/>\n<uses-permission android:name="android.permission.RECORD_AUDIO"/>\n'})})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(96540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);