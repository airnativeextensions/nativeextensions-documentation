"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[57819],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,u=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),f=p(n),d=i,b=f["".concat(u,".").concat(d)]||f[d]||l[d]||o;return n?r.createElement(b,s(s({ref:t},c),{},{components:n})):r.createElement(b,s({ref:t},c))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=f;var a={};for(var u in t)hasOwnProperty.call(t,u)&&(a[u]=t[u]);a.originalType=e,a.mdxType="string"==typeof e?e:i,s[1]=a;for(var p=2;p<o;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},50432:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return a},metadata:function(){return p},toc:function(){return l}});var r=n(87462),i=n(63366),o=(n(67294),n(3905)),s=["components"],a={title:"Migration v14",sidebar_label:"Migration v14"},u=void 0,p={unversionedId:"inappbilling/migration-v14",id:"inappbilling/migration-v14",title:"Migration v14",description:"Version 14.0",source:"@site/docs/inappbilling/migration-v14.md",sourceDirName:"inappbilling",slug:"/inappbilling/migration-v14",permalink:"/docs/inappbilling/migration-v14",draft:!1,tags:[],version:"current",frontMatter:{title:"Migration v14",sidebar_label:"Migration v14"},sidebar:"inappbilling",previous:{title:"In App Updates",permalink:"/docs/inappbilling/in-app-updates"},next:{title:"Migration (v12 and below)",permalink:"/docs/inappbilling/migration"}},c={},l=[{value:"Version 14.0",id:"version-140",level:2},{value:"Subscription Offers",id:"subscription-offers",level:3},{value:"Not using discounts",id:"not-using-discounts",level:4},{value:"Using discounts",id:"using-discounts",level:4}],f={toc:l};function d(e){var t=e.components,n=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"version-140"},"Version 14.0"),(0,o.kt)("p",null,"Version 14 implemented Google Play Billing client library v5.0.0"),(0,o.kt)("p",null,"This brings some major changes to subscriptions and some breaking API changes that you will need to update your application to manage."),(0,o.kt)("h3",{id:"subscription-offers"},"Subscription Offers"),(0,o.kt)("p",null,'Instead of "discounts" we have moved to the newer concept of "offers" to represent the different ways of purchasing a subscription. Offers allow much more flexibility in the ways you can allow your customers to purchase your subscriptions.'),(0,o.kt)("p",null,"Every subscription product now has at least one subscription offer associated with it. Each offer sets out different pricing phases for a subscription. Eg there may be one offer with a free introductory trial period followed by a recurring monthly subscription. The offer contains one or more subscription phases that has the cost and period information for different phases of the subscription. "),(0,o.kt)("p",null,"When purchasing as subscription you must now provide the subscription offer you wish to present to the user. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var subscription:Product = ...;\n\n// You can either have some logic, or allow the user to select. \n// If you only have one offer for your subscriptions you can just use the first available  \n\nvar offer:SubscriptionOffer = subscription.subscriptionOffers[0];\n\nvar request:PurchaseRequest = new PurchaseRequest()\n    .setProductId( sub.id )\n    .setSubscriptionOfferRequest( \n        new SubscriptionOfferRequest()\n            .setSubscriptionOffer( offer )\n     );\n\nInAppBilling.service.makePurchase( request );\n")),(0,o.kt)("p",null,"To migrate it will depend if you were previously using product discounts (",(0,o.kt)("inlineCode",{parentName:"p"},"ProductDiscount"),") in your application to provide promotional discounts, free trials or introductory periods."),(0,o.kt)("h4",{id:"not-using-discounts"},"Not using discounts"),(0,o.kt)("p",null,"If you haven't setup subscription offers on Google Play and aren't using any promotional discounts on iOS then to migrate to the new approach is to simply find the first offer in the subscription and supply that in the offer request."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var offer:SubscriptionOffer = product.subscriptionOffers[0];\n\nvar request:PurchaseRequest = new PurchaseRequest()\n    .setProductId( sub.id )\n    .setSubscriptionOfferRequest( \n        new SubscriptionOfferRequest()\n            .setSubscriptionOffer( offer )\n     );\n\nInAppBilling.service.makePurchase( request );\n")),(0,o.kt)("p",null,"You need to do this on all platforms and services and we internally "),(0,o.kt)("p",null,"As you investigate offers you may wish to expand this, but this is a simple way to move to the latest subscription purchase approach."),(0,o.kt)("h4",{id:"using-discounts"},"Using discounts"),(0,o.kt)("p",null,"If in the past you have used discounts and the ",(0,o.kt)("inlineCode",{parentName:"p"},"ProductDiscount")," class then you will need to completely migrate to the new ",(0,o.kt)("inlineCode",{parentName:"p"},"SubscriptionOffer")," approach."),(0,o.kt)("p",null,"Check the documentation on ",(0,o.kt)("a",{parentName:"p",href:"/docs/inappbilling/subscription-offers"},"Subscription Offers")," for more information."))}d.isMDXComponent=!0}}]);