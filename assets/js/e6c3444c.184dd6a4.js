"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[86166],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return d}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),c=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=c(n),d=a,m=h["".concat(u,".").concat(d)]||h[d]||p[d]||i;return n?r.createElement(m,o(o({ref:t},l),{},{components:n})):r.createElement(m,o({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},98131:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var r=n(87462),a=n(63366),i=(n(67294),n(3905)),o=["components"],s={title:"Requesting Access",sidebar_label:"Requesting Access"},u=void 0,c={unversionedId:"scanner/requesting-access",id:"scanner/requesting-access",title:"Requesting Access",description:"If you are going to be using one of the camera methods then you need to ensure you have",source:"@site/docs/scanner/requesting-access.md",sourceDirName:"scanner",slug:"/scanner/requesting-access",permalink:"/docs/scanner/requesting-access",draft:!1,tags:[],version:"current",frontMatter:{title:"Requesting Access",sidebar_label:"Requesting Access"},sidebar:"scanner",previous:{title:"Add the Extension",permalink:"/docs/scanner/add-the-extension"},next:{title:"Scanning",permalink:"/docs/scanner/scanning"}},l={},p=[{value:"Usage Description",id:"usage-description",level:2}],h={toc:p};function d(e){var t=e.components,s=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{title:"Authorisation",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If you are going to be using one of the camera methods then you need to ensure you have\nrequested authorisation before using the scanning functionality."),(0,i.kt)("p",{parentName:"admonition"},"However if you are planning to just scan bitmap data, then you can skip this section.")),(0,i.kt)("p",null,"When you are going to be accessing the camera you must check that your application\nhas been allowed access. To this end the extension provides several helpers to\ncheck and request access to the camera. Normal permission rules apply here."),(0,i.kt)("p",null,"On Android these permissions are listed through the manifest additions. On older\nversions of Android these permissions are accepted when the user installs the\napplication. More modern versions (Marshmallow 6 ","[v23]","+) require that you request\nthe permissions similar to iOS. You will still need to list them in your manifest\nand then follow the same code below as for iOS, except that on Android you will\nbe able to ask multiple times. "),(0,i.kt)("p",null,"You should respect the ",(0,i.kt)("inlineCode",{parentName:"p"},"SHOULD_EXPLAIN")," status by displaying additional information\nto your user about why you require this functionality."),(0,i.kt)("p",null,"On iOS the user must be asked at runtime, which you only get one chance to ask,\nafter which you must direct the user to manually change the permissions in the settings."),(0,i.kt)("p",null,"The following code will work across both platforms:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'trace( "Scanner Authorisation Status: " + Scanner.service.authorisationStatus() );\nScanner.service.addEventListener( AuthorisationEvent.CHANGED, authorisationChangedHandler );\nswitch (Scanner.service.authorisationStatus())\n{\n    case AuthorisationStatus.NOT_DETERMINED:\n    case AuthorisationStatus.SHOULD_EXPLAIN:\n        // REQUEST ACCESS: This will display the permission dialog\n        Scanner.service.requestAccess();\n        return;\n    \n    case AuthorisationStatus.DENIED:\n    case AuthorisationStatus.UNKNOWN:\n    case AuthorisationStatus.RESTRICTED:\n        // ACCESS DENIED: You should inform your user appropriately\n        return;\n        \n    case AuthorisationStatus.AUTHORISED:\n        // AUTHORISED: Scanner will be available\n        break;                      \n}\n')),(0,i.kt)("p",null,"You will then receive a change event if the user accepted your permission request:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"private function authorisationChangedHandler( event:AuthorisationEvent ):void\n{\n    switch (event.status)\n    {\n        case AuthorisationStatus.SHOULD_EXPLAIN:\n            // Should display a reason you need this feature\n            break;\n            \n        case AuthorisationStatus.AUTHORISED:\n            // AUTHORISED: Camera will be available\n            break;\n            \n        case AuthorisationStatus.RESTRICTED:\n        case AuthorisationStatus.DENIED:\n            // ACCESS DENIED: You should inform your user appropriately\n            break;\n    }\n}\n")),(0,i.kt)("h2",{id:"usage-description"},"Usage Description"),(0,i.kt)("p",null,"You can customise the usage description messages as you see fit to suit your application. These messages are displayed in the main body area of the iOS authorisation dialog with the title and buttons being standard (and not customisable)."),(0,i.kt)("p",null,"The image below is an example of the authorisation dialog. The content ",(0,i.kt)("em",{parentName:"p"},'"Require Camera"')," is the usage description message you can set."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(51904).Z,width:"300",height:"190"})),(0,i.kt)("p",null,"You set these values through adding the usage description keys to your application descriptor's info additions or simply by setting up your configuration options in your ",(0,i.kt)("inlineCode",{parentName:"p"},"apm")," project."))}d.isMDXComponent=!0},51904:function(e,t,n){t.Z=n.p+"assets/images/ios-permission-dialog-camera-3f9c64bd138a48a776a71a433e4682b9.png"}}]);