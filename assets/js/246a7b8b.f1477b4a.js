"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[23103],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var i=n(96540);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}},92038:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"pushnotifications/register-for-notifications","title":"Register for notifications","description":"Now that you have authorisation to access push notifications you can register your user\'s device.","source":"@site/docs/pushnotifications/register-for-notifications.md","sourceDirName":"pushnotifications","slug":"/pushnotifications/register-for-notifications","permalink":"/docs/pushnotifications/register-for-notifications","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Register for notifications","sidebar_label":"Register for notifications"},"sidebar":"pushnotifications","previous":{"title":"Request Authorisation","permalink":"/docs/pushnotifications/request-authorisation"},"next":{"title":"Topics","permalink":"/docs/pushnotifications/topics"}}');var r=n(74848),s=n(28453);const o={title:"Register for notifications",sidebar_label:"Register for notifications"},a=void 0,c={},d=[{value:"Current Tokens",id:"current-tokens",level:3}];function u(e){const t={code:"code",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Now that you have authorisation to access push notifications you can register your user's device.\nRegistration involves a call to the server to obtain a registration id or device token.\nThis is initiated by calling the ",(0,r.jsx)(t.code,{children:"register()"})," function."]}),"\n",(0,r.jsxs)(t.p,{children:["The token may change at any time so you should also listen for the ",(0,r.jsx)(t.code,{children:"CHANGED"})," event and update your server as your application requires."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:"PushNotifications.service.addEventListener( RegistrationEvent.REGISTERING, registeringHandler );\nPushNotifications.service.addEventListener( RegistrationEvent.REGISTER_SUCCESS, registerSuccessHandler );\nPushNotifications.service.addEventListener( RegistrationEvent.CHANGED, registrationChangedHandler );\nPushNotifications.service.addEventListener( RegistrationEvent.REGISTER_FAILED, registerFailedHandler );\nPushNotifications.service.addEventListener( RegistrationEvent.ERROR, errorHandler );\n\nPushNotifications.service.register();\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'function registeringHandler( event:RegistrationEvent ):void\n{\n\ttrace( "Registration started" );\n}\n\nfunction registerSuccessHandler( event:RegistrationEvent ):void\n{\n\ttrace( "Registration succeeded with ID: " + event.data  );\n\tvar deviceTokenOrRegistrationId:String = event.data;\n}\n\nfunction registrationChangedHandler( event:RegistrationEvent ):void\n{\n\ttrace( "Registration ID has changed: " + event.data );\n\tvar deviceTokenOrRegistrationId:String = event.data;\n}\n\nfunction registerFailedHandler( event:RegistrationEvent ):void\n{\n\ttrace( "Registration failed" );\n}\n\nfunction errorHandler( event:RegistrationEvent ):void\n{\n\ttrace( "Registration error: "+event.data );\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"current-tokens",children:"Current Tokens"}),"\n",(0,r.jsxs)(t.p,{children:["Once registered you can access the current registration id / device token at any time by using the ",(0,r.jsx)(t.code,{children:"getDeviceToken()"})," function. This will return the same string as the registration id / device token returned in either the  ",(0,r.jsx)(t.code,{children:"REGISTER_SUCCESS"})," or ",(0,r.jsx)(t.code,{children:"CHANGED"})," event."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:"var deviceTokenOrRegistrationId:String = PushNotifications.service.getDeviceToken();\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Additionally some services may have a secondary service identifier that the service server returned for this device. For example the OneSignal or Azure identifier. This can be retrieved by using the ",(0,r.jsx)(t.code,{children:"getServiceToken()"})," function."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:"var serviceToken:String = PushNotifications.service.getServiceToken();\n"})}),"\n",(0,r.jsx)(t.p,{children:"Depending on the service you are using you may have to use the device token or the service token to send notifications to the device."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);