"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[32487],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var a=n(96540);const s={},r=a.createContext(s);function i(e){const t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:t},e.children)}},87010:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"facebookapi/core/graph-api/basics","title":"Basics","description":"The Graph API implementation involves several classes. A builder class GraphRequestBuilder","source":"@site/docs/facebookapi/core/graph-api/basics.md","sourceDirName":"facebookapi/core/graph-api","slug":"/facebookapi/core/graph-api/basics","permalink":"/docs/facebookapi/core/graph-api/basics","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Basics","sidebar_label":"Basics"},"sidebar":"facebookapi","previous":{"title":"Overview","permalink":"/docs/facebookapi/core/graph-api/overview"},"next":{"title":"Batch","permalink":"/docs/facebookapi/core/graph-api/batch"}}');var s=n(74848),r=n(28453);const i={title:"Basics",sidebar_label:"Basics"},o=void 0,c={},d=[{value:"Events",id:"events",level:2},{value:"Callbacks",id:"callbacks",level:2},{value:"Builder",id:"builder",level:2},{value:"Fields and Parameters",id:"fields-and-parameters",level:3},{value:"Image Data",id:"image-data",level:3}];function l(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["The Graph API implementation involves several classes. A builder class ",(0,s.jsx)(t.code,{children:"GraphRequestBuilder"}),"\nis used to create a ",(0,s.jsx)(t.code,{children:"GraphRequest"})," which is then passed to the ",(0,s.jsx)(t.code,{children:"makeRequest"})," function\nto actually perform the request."]}),"\n",(0,s.jsx)(t.p,{children:"The simplest example of this is retrieving the current user's information:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:'var request:GraphRequest = new GraphRequestBuilder()\n\t.setPath( "/me" )\n\t.build();\n\nFacebook.instance.graphAPI.makeRequest( request );\n'})}),"\n",(0,s.jsx)(t.h2,{id:"events",children:"Events"}),"\n",(0,s.jsxs)(t.p,{children:["A ",(0,s.jsx)(t.code,{children:"GraphRequest"})," will dispatch status events indicating the completion or failure of the\nrequest:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"GraphRequestEvent.COMPLETE"}),": dispatched on successful completion"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"GraphRequestEvent.ERROR"}),": dispatched if there was an error"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"request.addEventListener( GraphRequestEvent.COMPLETE, request_completeHandler );\nrequest.addEventListener( GraphRequestEvent.ERROR, request_errorHandler );\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"function request_completeHandler( event:GraphRequestEvent ):void \n{\n\t// event.data will contain the Facebook response\n\ttrace( JSON.stringify(event.data) );\n}\n\nfunction request_errorHandler( event:GraphRequestEvent ):void \n{\n\t// event.errorCode and event.errorMessage will contain details on the error\n\ttrace( event.errorMessage );\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"callbacks",children:"Callbacks"}),"\n",(0,s.jsx)(t.p,{children:"As an alternative to events, you can add a callback function to a request:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:'var request:GraphRequest = new GraphRequestBuilder()\n\t.setPath( "/me" )\n\t.setCompleteCallback(\n\t\t\tfunction( data:Object ):void \n\t\t\t{\n\t\t\t\tlog( "request complete: " + JSON.stringify(data) );\n\t\t\t}\n\t)\n\t.setErrorCallback(\n\t\t\tfunction( code:int, message:String ):void \n\t\t\t{\n\t\t\t\tlog( "request error: " + code + "::"+ message );\n\t\t\t}\n\t)\n\t.build();\n'})}),"\n",(0,s.jsx)(t.p,{children:"These functions must be of the specific format above, i.e. for the complete callback:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"function( data:Object ):void \n{\n\t// process completion data\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"And the error callback:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"function( errorCode:int, errorMessage:String ):void \n{\n\t// process request error\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"builder",children:"Builder"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"GraphRequestBuilder"})," is your main interface to constructing requests."]}),"\n",(0,s.jsxs)(t.p,{children:["You must specify at least the Graph API endpoint you wish to query using the ",(0,s.jsx)(t.code,{children:"setPath"})," function."]}),"\n",(0,s.jsx)(t.h3,{id:"fields-and-parameters",children:"Fields and Parameters"}),"\n",(0,s.jsxs)(t.p,{children:["Most commands will have a list of optional parameters and/or fields. For example, the ",(0,s.jsx)(t.code,{children:"/me"}),"\nendpoint you can use the fields to add additional information you wish to retrieve. If you\nhave requested the email permission for example, you can add the ",(0,s.jsx)(t.code,{children:'"email"'})," field to return the\nusers email address. To add a field use the ",(0,s.jsx)(t.code,{children:"addField"})," or ",(0,s.jsx)(t.code,{children:"addFields"})," function on the builder:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:'new GraphRequestBuilder()\n\t.setPath( "/me" )\n\t.addField( "email" )\n\t.build();\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Parameters are often additional information passed along with the request, for example a\nlink passed along with a post request. To add a parameter use the ",(0,s.jsx)(t.code,{children:"addParameter"})," function\non the builder:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:'new GraphRequestBuilder()\n\t.setPath( "/me/feed" )\n\t.setMethod( GraphRequestBuilder.METHOD_POST )\n\t.addParameter( "link", "https://airnativeextensions.com" )\n\t.build();\n'})}),"\n",(0,s.jsx)(t.h3,{id:"image-data",children:"Image Data"}),"\n",(0,s.jsxs)(t.p,{children:["If you wish to add image data to a post you can use the ",(0,s.jsx)(t.code,{children:"setImage"})," function:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:'new GraphRequestBuilder()\n\t.setPath( "/me/photos" )\n\t.setMethod( GraphRequestBuilder.METHOD_POST )\n\t.setImage( yourBitmapData )\n\t.addParameter( "message", "Image posted through the Graph API from the Facebook API ANE" )\n\t.build();\n'})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);