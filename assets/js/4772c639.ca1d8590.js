"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[52712],{5493:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/android_showManageUnknownAppSourcesSettings-614c0b9c90c9a40f9056b885d5427e9d.png"},25602:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"packagemanager/installing-apps","title":"Installing Apps","description":"Android only","source":"@site/docs/packagemanager/installing-apps.md","sourceDirName":"packagemanager","slug":"/packagemanager/installing-apps","permalink":"/docs/packagemanager/installing-apps","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Installing Apps","sidebar_label":"Installing Apps"},"sidebar":"packagemanager","previous":{"title":"Package Events","permalink":"/docs/packagemanager/package-events"},"next":{"title":"Installed Application Info","permalink":"/docs/packagemanager/installed-application-info"}}');var t=a(74848),s=a(28453);const l={title:"Installing Apps",sidebar_label:"Installing Apps"},r=void 0,o={},c=[{value:"Manifest Additions",id:"manifest-additions",level:2},{value:"Availability",id:"availability",level:2},{value:"Settings",id:"settings",level:2},{value:"Install",id:"install",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Android only"})}),"\n",(0,t.jsxs)(n.p,{children:["Remember that ",(0,t.jsx)(n.a,{href:"https://play.google.com/about/developer-content-policy/",children:"Play policies"})," still apply to apps distributed on Google Play if those apps can install and update other apps.\nIn the majority of cases, such behavior is inappropriate; you should instead provide a ",(0,t.jsx)(n.a,{href:"https://developer.android.com/distribute/marketing-tools/linking-to-google-play.html",children:"deep link"})," to the app's listing on the Play Store."]}),"\n",(0,t.jsx)(n.h2,{id:"manifest-additions",children:"Manifest Additions"}),"\n",(0,t.jsxs)(n.p,{children:["If an app uses a targetSdkLevel of 26 or above and prompts the user to install other apps, the manifest file needs to include the ",(0,t.jsx)(n.code,{children:"REQUEST_INSTALL_PACKAGES"})," permission."]}),"\n",(0,t.jsx)(n.p,{children:"Apps that haven't declared this permission cannot install other apps, a handy security protection for apps that have no intention of doing so."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES" />\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In order to correctly access the APK file you will also need to add the following file provider to the manifest ",(0,t.jsxs)(n.strong,{children:["inside the ",(0,t.jsx)(n.code,{children:"application"})," tag"]}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["You will need to replace ",(0,t.jsx)(n.code,{children:"APPLICATION_PACKAGE"})," with your applications package name, generally your AIR application id prepended with ",(0,t.jsx)(n.code,{children:"air."})," eg ",(0,t.jsx)(n.code,{children:"air.com.distriqt.test"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<provider\n    android:name="com.distriqt.extension.packagemanager.content.PackageManagerFileProvider"\n    android:authorities="APPLICATION_PACKAGE.packagemanagerfileprovider"\n    android:grantUriPermissions="true"\n    android:exported="false">\n    <meta-data\n        android:name="android.support.FILE_PROVIDER_PATHS"\n        android:resource="@xml/distriqt_packagemanager_paths" />\n</provider>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"availability",children:"Availability"}),"\n",(0,t.jsxs)(n.p,{children:["You can check whether the current device can install applications by checking the ",(0,t.jsx)(n.code,{children:"canRequestApplicationInstalls"})," flag:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-actionscript",children:"if (PackageManager.service.canRequestApplicationInstalls)\n{\n    // Can install applications\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"settings",children:"Settings"}),"\n",(0,t.jsxs)(n.p,{children:["You can redirect the user to the appropriate settings by calling ",(0,t.jsx)(n.code,{children:"showManageUnknownAppSourcesSettings()"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-actionscript",children:"PackageManager.service.showManageUnknownAppSourcesSettings();\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will redirect the user to the application settings screen similar to the following:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:a(5493).A+"",width:"1080",height:"1920"})}),"\n",(0,t.jsx)(n.p,{children:"On older versions of Android it will redirect to the generic unknown sources settings screen."}),"\n",(0,t.jsx)(n.h2,{id:"install",children:"Install"}),"\n",(0,t.jsxs)(n.p,{children:["To install an application use the ",(0,t.jsx)(n.code,{children:"installApplication()"})," method and pass the native path to an APK file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-actionscript",children:'var apkFile:File = File.applicationStorageDirectory.resolvePath( "Main.apk" );\n\nPackageManager.service.installApplication( apkFile.nativePath );\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>r});var i=a(96540);const t={},s=i.createContext(t);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);