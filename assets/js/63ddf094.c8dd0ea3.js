"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[20173],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},v=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(n),v=r,m=p["".concat(s,".").concat(v)]||p[v]||d[v]||l;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=v;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:r,i[1]=o;for(var u=2;u<l;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}v.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),r=n(86010);const l={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,i),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>N});var a=n(87462),r=n(67294),l=n(86010),i=n(12466),o=n(16550),s=n(91980),u=n(67392),c=n(50012);function p(e){return function(e){var t,n;return null!=(t=null==(n=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function d(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=null!=t?t:p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function v(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,o.k6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,s._X)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})}),[l,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,l=d(e),[i,o]=(0,r.useState)((()=>function(e){var t;let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!v({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}const r=null!=(t=a.find((e=>e.default)))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:l}))),[s,u]=m({queryString:n,groupId:a}),[p,h]=function(e){let{groupId:t}=e;const n=function(e){return e?"docusaurus.tab."+e:null}(t),[a,l]=(0,c.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:a}),E=(()=>{const e=null!=s?s:p;return v({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{E&&o(E)}),[E]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!v({value:e,tabValues:l}))throw new Error("Can't select invalid tab value="+e);o(e),u(e),h(e)}),[u,h,l]),tabValues:l}}var E=n(72389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(e){let{className:t,block:n,selectedValue:o,selectValue:s,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==o&&(p(t),s(a))},v=e=>{var t;let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{var a;const t=c.indexOf(e.currentTarget)+1;n=null!=(a=c[t])?a:c[0];break}case"ArrowLeft":{var r;const t=c.indexOf(e.currentTarget)-1;n=null!=(r=c[t])?r:c[c.length-1];break}}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>c.push(e),onKeyDown:v,onClick:d},i,{className:(0,l.Z)("tabs__item",f.tabItem,null==i?void 0:i.className,{"tabs__item--active":o===t})}),null!=n?n:t)})))}function k(e){let{lazy:t,children:n,selectedValue:a}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function b(e){const t=h(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",f.tabList)},r.createElement(g,(0,a.Z)({},e,t)),r.createElement(k,(0,a.Z)({},e,t)))}function N(e){const t=(0,E.Z)();return r.createElement(b,(0,a.Z)({key:String(t)},e))}},74665:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));n(74866),n(85162);const l={title:"Migration v17.0"},i=void 0,o={unversionedId:"inappbilling/migration-v17.0",id:"inappbilling/migration-v17.0",title:"Migration v17.0",description:"This latest release brings a refactoring of the extension around products and purchases events.",source:"@site/docs/inappbilling/migration-v17.0.mdx",sourceDirName:"inappbilling",slug:"/inappbilling/migration-v17.0",permalink:"/docs/inappbilling/migration-v17.0",draft:!1,tags:[],version:"current",frontMatter:{title:"Migration v17.0"}},s={},u=[{value:"Product Events",id:"product-events",level:2},{value:"Purchase Events",id:"purchase-events",level:2}],c={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This latest release brings a refactoring of the extension around products and purchases events."),(0,r.kt)("p",null,"The purpose here is to reduce the ambiguity of the InAppBillingEvent that was previously used to handle all events and to provide a more consistent API for handling purchases and products."),(0,r.kt)("p",null,"The existing events will continue to work but we recommend you update your code to use the new events as they are more consistent and easier to use."),(0,r.kt)("h2",{id:"product-events"},"Product Events"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductEvent")," class has been introduced to handle product events. This means the following events:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.PRODUCTS_LOADED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.PRODUCTS_FAILED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.INVALID_PRODUCT"))),(0,r.kt)("p",null,"Are now handled by the ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductEvent")," class with similarly named events. "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ProductEvent.PRODUCTS_LOADED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ProductEvent.PRODUCTS_FAILED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ProductEvent.INVALID_PRODUCT"))),(0,r.kt)("p",null,"This means you should update your code to use the new event class and the new event types."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"InAppBilling.service.addEventListener( ProductEvent.PRODUCTS_LOADED, products_loadedHandler );\nInAppBilling.service.addEventListener( ProductEvent.PRODUCTS_FAILED, products_failedHandler );\nInAppBilling.service.addEventListener( ProductEvent.INVALID_PRODUCT, invalid_productHandler );\n")),(0,r.kt)("p",null,"The parameters for the events are slightly different as well. The ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductEvent")," class now has a ",(0,r.kt)("inlineCode",{parentName:"p"},"products")," property that contains the list of products that were loaded or failed to load. This replaces the ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," property that was previously used on the ",(0,r.kt)("inlineCode",{parentName:"p"},"InAppBillingEvent")," class."),(0,r.kt)("p",null,"So the ",(0,r.kt)("inlineCode",{parentName:"p"},"products_loadedHandler")," function should be updated to use the new event class and the new event properties."),(0,r.kt)("p",null,"Previously:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'private function products_loadedHandler( event:InAppBillingEvent ):void\n{\n    trace( "products loaded: " + event.data );\n}\n')),(0,r.kt)("p",null,"Now:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'private function products_loadedHandler( event:ProductEvent ):void\n{\n    trace( "products loaded: " + event.products );\n}\n')),(0,r.kt)("h2",{id:"purchase-events"},"Purchase Events"),(0,r.kt)("p",null,"The existing ",(0,r.kt)("inlineCode",{parentName:"p"},"PurchaseEvent")," class has been updated to handle all purchase related events. This means the following events:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.RESTORE_PURCHASES_SUCCESS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.RESTORE_PURCHASES_FAILED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.CONSUME_SUCCESS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.CONSUME_FAILED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.FINISH_SUCCESS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InAppBillingEvent.FINISH_FAILED"))),(0,r.kt)("p",null,"Have all been moved to the ",(0,r.kt)("inlineCode",{parentName:"p"},"PurchaseEvent")," class with similarly named events."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PurchaseEvent.RESTORE_PURCHASES_SUCCESS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PurchaseEvent.RESTORE_PURCHASES_FAILED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PurchaseEvent.CONSUME_SUCCESS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PurchaseEvent.CONSUME_FAILED")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PurchaseEvent.FINISH_SUCCESS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PurchaseEvent.FINISH_FAILED"))),(0,r.kt)("p",null,"This means you should update your code to use the new event class and the new event types."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"InAppBilling.service.addEventListener( PurchaseEvent.RESTORE_PURCHASES_SUCCESS, restore_purchases_successHandler );\nInAppBilling.service.addEventListener( PurchaseEvent.RESTORE_PURCHASES_FAILED, restore_purchases_failedHandler );\nInAppBilling.service.addEventListener( PurchaseEvent.CONSUME_SUCCESS, consume_successHandler );\nInAppBilling.service.addEventListener( PurchaseEvent.CONSUME_FAILED, consume_failedHandler );\nInAppBilling.service.addEventListener( PurchaseEvent.FINISH_SUCCESS, finish_successHandler );\nInAppBilling.service.addEventListener( PurchaseEvent.FINISH_FAILED, finish_failedHandler );\n")),(0,r.kt)("p",null,"The parameters for the events are slightly different as well. The ",(0,r.kt)("inlineCode",{parentName:"p"},"PurchaseEvent")," class has a ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," property that is strongly typed to be a ",(0,r.kt)("inlineCode",{parentName:"p"},"Vector.<Purchase>")," that contains the purchases related to the event. This replaces the untyped ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," property that is used on the ",(0,r.kt)("inlineCode",{parentName:"p"},"InAppBillingEvent")," class."))}d.isMDXComponent=!0}}]);