"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[50278],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=a.createContext({}),s=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(n),h=i,m=c["".concat(o,".").concat(h)]||c[h]||d[h]||l;return n?a.createElement(m,r(r({ref:t},u),{},{components:n})):a.createElement(m,r({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=h;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[c]="string"==typeof e?e:i,r[1]=p;for(var s=2;s<l;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},68384:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var a=n(87462),i=(n(67294),n(3905));const l={title:"Testing Huawei AppGallery",sidebar_label:"Testing"},r=void 0,p={unversionedId:"inappbilling/huawei/testing",id:"inappbilling/huawei/testing",title:"Testing Huawei AppGallery",description:"Huawei AppGallery In-App Purchases",source:"@site/docs/inappbilling/huawei/testing.md",sourceDirName:"inappbilling/huawei",slug:"/inappbilling/huawei/testing",permalink:"/docs/inappbilling/huawei/testing",draft:!1,tags:[],version:"current",frontMatter:{title:"Testing Huawei AppGallery",sidebar_label:"Testing"},sidebar:"inappbilling",previous:{title:"Setup",permalink:"/docs/inappbilling/huawei/huawei-appgallery"},next:{title:"Add the Extension",permalink:"/docs/inappbilling/samsung/add-the-extension"}},o={},s=[{value:"Huawei AppGallery In-App Purchases",id:"huawei-appgallery-in-app-purchases",level:2},{value:"Set Installer Package",id:"set-installer-package",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}],u={toc:s},c="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"huawei-appgallery-in-app-purchases"},"Huawei AppGallery In-App Purchases"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://developer.huawei.com/consumer/en/doc/development/HMS-Guides/iap-sandbox-testing-v4"},"https://developer.huawei.com/consumer/en/doc/development/HMS-Guides/iap-sandbox-testing-v4")),(0,i.kt)("h2",{id:"set-installer-package"},"Set Installer Package"),(0,i.kt)("p",null,"In order to correctly detect that the app was installed via the Huawei AppGallery you must set the installer package when installing your debug application. This is done normally by the App Gallery. "),(0,i.kt)("p",null,"When installing your application you will need to use the following commands using the ",(0,i.kt)("inlineCode",{parentName:"p"},"adb")," terminal command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'adb push YOURAPP.apk /data/local/tmp/app.apk\nadb shell pm install -i "com.huawei.appmarket" -r /data/local/tmp/app.apk\nadb shell rm /data/local/tmp/app.apk\n')),(0,i.kt)("p",null,"Change ",(0,i.kt)("inlineCode",{parentName:"p"},"YOURAPP.apk")," to be the path to your application. This command will set the installer package name to be the Huawei AppGallery's package name ",(0,i.kt)("inlineCode",{parentName:"p"},"com.huawei.appmarket"),"."),(0,i.kt)("p",null,"If you don't set this and rely on the default detection then you will find debugging may default to the Google Play Billing implementation."),(0,i.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("p",null,"If you are having issues with the service not being available, or setup failing, please check the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You have packaged the ",(0,i.kt)("inlineCode",{parentName:"li"},"agconnect-services.json")," file at the root level (alongside your swf) of your application;"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"HUAWEI_APP_ID")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"HUAWEI_CP_ID")," in your manifest additions match the values in the ",(0,i.kt)("inlineCode",{parentName:"li"},"agconnect-services.json")," file;"),(0,i.kt)("li",{parentName:"ul"},"The package name must be the same as the one filled in when registering a HUAWEI ID and applying for the HUAWEI ID Service. If it is not, change the app package name;"),(0,i.kt)("li",{parentName:"ul"},"The signing certificate fingerprint must be the same as the one filled in when applying for the HUAWEI ID service.")))}d.isMDXComponent=!0}}]);