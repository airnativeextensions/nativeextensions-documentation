"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[32952],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>v});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=u(n),m=i,v=c["".concat(s,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(v,r(r({ref:t},p),{},{components:n})):a.createElement(v,r({ref:t},p))}));function v(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:i,r[1]=o;for(var u=2;u<l;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},42737:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var a=n(87462),i=(n(67294),n(3905));const l={title:"Defaults",sidebar_label:"Defaults"},r=void 0,o={unversionedId:"application/defaults",id:"application/defaults",title:"Defaults",description:"The defaults allow you to setup some information for the user, to allow an application to",source:"@site/docs/application/defaults.md",sourceDirName:"application",slug:"/application/defaults",permalink:"/docs/application/defaults",draft:!1,tags:[],version:"current",frontMatter:{title:"Defaults",sidebar_label:"Defaults"},sidebar:"application",previous:{title:"Application State Events",permalink:"/docs/application/application-state-events"},next:{title:"Keychain",permalink:"/docs/application/keychain"}},s={},u=[{value:"Shared or Custom",id:"shared-or-custom",level:2},{value:"Access",id:"access",level:2},{value:"Setting and Retrieving Values",id:"setting-and-retrieving-values",level:2},{value:"String Values",id:"string-values",level:3},{value:"Boolean Values",id:"boolean-values",level:3},{value:"Number Values",id:"number-values",level:3},{value:"int Values",id:"int-values",level:3},{value:"Object Values",id:"object-values",level:3},{value:"Removing a Value",id:"removing-a-value",level:2},{value:"Saving",id:"saving",level:2},{value:"Changed Event",id:"changed-event",level:2}],p={toc:u},c="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The defaults allow you to setup some information for the user, to allow an application to\ncustomize its behaviour to match a user's preferences. For example, units of measurement,\nor refresh intervals. This storage is very similar to the SharedObject concept,\nit allows you to store key-value data."),(0,i.kt)("p",null,'It stores information using the native "preferences" style data storage. It uses:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Android: ",(0,i.kt)("inlineCode",{parentName:"li"},"SharedPreferences")),(0,i.kt)("li",{parentName:"ul"},"iOS: ",(0,i.kt)("inlineCode",{parentName:"li"},"NSUserDefaults")),(0,i.kt)("li",{parentName:"ul"},"default: ",(0,i.kt)("inlineCode",{parentName:"li"},"SharedObject"))),(0,i.kt)("h2",{id:"shared-or-custom"},"Shared or Custom"),(0,i.kt)("p",null,"By default, the ",(0,i.kt)("inlineCode",{parentName:"p"},"defaults")," are placed in a custom object to separate them from other settings and avoid conflicts with other native components. However there are times where this behaviour is not desirable. "),(0,i.kt)("p",null,'For example, if you are trying to retrieve the shared values stored by advertising or data collection\nservices in the "IAB Europe Transparency and Consent Framework". This includes values like the GDPR\npersonalisation settings and other user data sharing requirements. '),(0,i.kt)("p",null,"When you need access to these values we suggest changing the behaviour to use the shared values by\nsetting the value of ",(0,i.kt)("inlineCode",{parentName:"p"},"useSharedDefaults")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"Application.service.defaults.useSharedDefaults = true;\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"You will not be able to access values that were stored when this value is changed, i.e. if you have previously saved values in the custom object, and then change to the shared object, they will no longer be available."),(0,i.kt)("p",{parentName:"admonition"},"You can change this value as you require before accessing values, however be aware that changing this value does dispose and create objects so will have a performance hit if you do this regularly."),(0,i.kt)("p",{parentName:"admonition"},"We suggest moving to one consistent method to avoid switching methods. ")),(0,i.kt)("h2",{id:"access"},"Access"),(0,i.kt)("p",null,"You access the defaults functionality through the ",(0,i.kt)("inlineCode",{parentName:"p"},"defaults")," accessor, eg:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Application.service.defaults.getString( "key" );\n')),(0,i.kt)("h2",{id:"setting-and-retrieving-values"},"Setting and Retrieving Values"),(0,i.kt)("p",null,"Values can be stored in a series of basic types, including:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"String")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Boolean")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Number")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"int")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Object"))),(0,i.kt)("h3",{id:"string-values"},"String Values"),(0,i.kt)("p",null,"String values are retrieved by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"getString()")," function specifying the ",(0,i.kt)("inlineCode",{parentName:"p"},"key")," of the value you wish to retrieve."),(0,i.kt)("p",null,'For example, say you are storing a "nick name" for a user:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'trace( "Nickname = " + Application.service.defaults.getString( "nick_name" ) );\n')),(0,i.kt)("p",null,"You set a string value by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setString()")," function specifying the ",(0,i.kt)("inlineCode",{parentName:"p"},"key")," and the new ",(0,i.kt)("inlineCode",{parentName:"p"},"value")," you wish to set."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Application.service.defaults.setString( "nick_name", "My Nick Name" );\n')),(0,i.kt)("h3",{id:"boolean-values"},"Boolean Values"),(0,i.kt)("p",null,"Boolean values are set and retrieved using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setBoolean")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"getBoolean")," functions respectively."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Application.service.defaults.setBoolean( "firstRun", false );\n')),(0,i.kt)("p",null,"And to retrieve:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var firstRun:Boolean = Application.service.defaults.getBoolean( "firstRun" );\n')),(0,i.kt)("h3",{id:"number-values"},"Number Values"),(0,i.kt)("p",null,"Number values are set and retrieved using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setNumber")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"getNumber")," functions respectively."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Application.service.defaults.setNumber( "progress", 0.36 );\n')),(0,i.kt)("p",null,"And to retrieve:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var progress:Number = Application.service.defaults.getNumber( "progress" );\n')),(0,i.kt)("h3",{id:"int-values"},"int Values"),(0,i.kt)("p",null,"Integer values are set and retrieved using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setInt")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"getInt")," functions respectively."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Application.service.defaults.setInt( "count", 17 );\n')),(0,i.kt)("p",null,"And to retrieve:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var count:int = Application.service.defaults.getInt( "count" );\n')),(0,i.kt)("h3",{id:"object-values"},"Object Values"),(0,i.kt)("p",null,"Object values are set and retrieved using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setObject")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"getObject")," functions respectively.\nObjects can only contain primitive types as they are internally encoded as JSON objects for storage."),(0,i.kt)("p",null,"For example to set an object with a few properties:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var value:Object = {\n    test: "some string",\n    number: 3\n};\n\nApplication.service.defaults.setObject( "test.object", value );\n')),(0,i.kt)("p",null,"And to retrieve:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var value:Object = Application.service.defaults.getObject( "test.object" );\nif (value != null)\n{\n    trace( "get object : " + value.test + ":"+value.number );\n}\n')),(0,i.kt)("p",null,"A ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," value will be returned if there is no value set for the specified key."),(0,i.kt)("h2",{id:"removing-a-value"},"Removing a Value"),(0,i.kt)("p",null,"To remove a value you can call the ",(0,i.kt)("inlineCode",{parentName:"p"},"remove()")," function and specify the key of the value you wish to remove."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Application.service.defaults.remove( "nick_name" );\n')),(0,i.kt)("p",null,"Once you call this the value will no longer be set in the user's defaults and any attempts to retrieve it will return invalid data."),(0,i.kt)("h2",{id:"saving"},"Saving"),(0,i.kt)("p",null,"The values are saved periodically automatically, however if you wish to force any caching to be written to permanent storage you can call the ",(0,i.kt)("inlineCode",{parentName:"p"},"save()")," function whenever needed."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"Application.service.defaults.save();\n")),(0,i.kt)("p",null,"This function is useful after you have updated a series of default values or set some initialisation data on first run of your application but is not necessary."),(0,i.kt)("h2",{id:"changed-event"},"Changed Event"),(0,i.kt)("p",null,"Whenever a default value is changed a ",(0,i.kt)("inlineCode",{parentName:"p"},"DefaultsEvent.CHANGED")," will be dispatched and will contain the ",(0,i.kt)("inlineCode",{parentName:"p"},"key")," of the value that changed."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"iOS does not give information on the key that was changed only that the defaults have changed so the ",(0,i.kt)("inlineCode",{parentName:"p"},"key")," will always be empty on iOS")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Application.service.defaults.addEventListener( DefaultsEvent.CHANGED, defaults_changedHandler );\n\nfunction defaults_changedHandler( event:DefaultsEvent ):void\n{\n    trace( "defaults_changedHandler(): " + event.key );\n}\n')),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The changed event will be fired whenever a value is changed in the underlying storage medium. Some platforms have crossover with other features so the changed event may not only be dispatched for changes through the ",(0,i.kt)("inlineCode",{parentName:"p"},"defaults")," functionality."),(0,i.kt)("p",{parentName:"admonition"},"For example, this can happen when values are changed through the ",(0,i.kt)("inlineCode",{parentName:"p"},"settings")," functionality in this extension as both these features use the same underlying ",(0,i.kt)("em",{parentName:"p"},"Preferences")," functionality."),(0,i.kt)("p",{parentName:"admonition"},"You may also notice values that our extensions store for state information, so you should be aware only to respond to change events for keys that you are aware of.")))}d.isMDXComponent=!0}}]);