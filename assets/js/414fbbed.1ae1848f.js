"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[26359],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var t=s(96540);const a={},i=t.createContext(a);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},33234:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>v,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"gameservices/saved-games---conflicts","title":"Saved Games - Conflicts","description":"Detecting Conflicts","source":"@site/docs/gameservices/saved-games---conflicts.md","sourceDirName":"gameservices","slug":"/gameservices/saved-games---conflicts","permalink":"/docs/gameservices/saved-games---conflicts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Saved Games - Conflicts","sidebar_label":"Conflicts"},"sidebar":"gameservices","previous":{"title":"Usage","permalink":"/docs/gameservices/saved-games"},"next":{"title":"Key Concepts","permalink":"/docs/gameservices/turn-based-multiplayer---key-concepts"}}');var a=s(74848),i=s(28453);const o={title:"Saved Games - Conflicts",sidebar_label:"Conflicts"},c=void 0,r={},d=[{value:"Detecting Conflicts",id:"detecting-conflicts",level:2},{value:"Resolving Conflicts",id:"resolving-conflicts",level:2}];function l(e){const n={blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"detecting-conflicts",children:"Detecting Conflicts"}),"\n",(0,a.jsx)(n.p,{children:"When using the Saved Games service in your game, it is possible for multiple devices to perform reads and writes on the same saved game. In the event that a device temporarily loses its network connection and later reconnects, this might cause data conflicts whereby the saved game stored on a player's local device is out-of-sync with the remote version stored in service's servers. The Saved Games services provides a conflict resolution mechanism that presents both sets of conflicting saved games at read-time and lets you implement a resolution strategy that is appropriate for your game."}),"\n",(0,a.jsxs)(n.p,{children:["When the games service detects a data conflict, it notifies your game during a saved game operation (open, create, save etc) by dispatching a ",(0,a.jsx)(n.code,{children:"SavedGamesEvent.CONFLICT"})," event."]}),"\n",(0,a.jsx)(n.p,{children:"You should make sure you add a listener for this event before attempting any saved game operation."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-actionscript",children:"GameServices.service.savedGames.addEventListener( SavedGamesEvent.CONFLICT, conflictHandler );\n\n\nfunction conflictHandler( event:SavedGamesEvent ):void\n{\n    // Handle the conflict here\n\n    // event.conflictId identifies this conflict \n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The conflict event willl contain two versions of the saved game in the ",(0,a.jsx)(n.code,{children:"data"})," Array:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["The most-up-to-date version known by the service to be accurate (",(0,a.jsx)(n.code,{children:"event.data[0]"}),"); and"]}),"\n",(0,a.jsxs)(n.li,{children:["A modified version detected on one of the player's devices that contains conflicting content or metadata (",(0,a.jsx)(n.code,{children:"event.data[1]"}),"). This may not be the same as the version that you tried to save."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["It will also contain the ",(0,a.jsx)(n.code,{children:"conflictId"})," which identifies this conflict occurrance and is required to resolve this conflict."]}),"\n",(0,a.jsx)(n.h2,{id:"resolving-conflicts",children:"Resolving Conflicts"}),"\n",(0,a.jsx)(n.p,{children:"Your game must decide how to resolve the conflict by picking one of the provided versions or merging the data of the two saved game versions."}),"\n",(0,a.jsxs)(n.p,{children:["Once you have assembled the resolved version of the save game you call ",(0,a.jsx)(n.code,{children:"resolveConflict"})," to resolve the conflict on the saved game with the conflict id and the resolved saved game as parameters:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-actionscript",children:"GameServices.service.savedGames.resolveConflict( conflictId, resolvedGame );\n"})}),"\n",(0,a.jsx)(n.p,{children:"The following snippet shows and example of how your game might handle a saved game conflict by selecting the most recent saved game as the final version to save:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-actionscript",children:"function conflictHandler( event:SavedGameEvent ):void \n{\n    var savedGameA:SavedGame = event.data[0];\n    var savedGameB:SavedGame = event.data[1];\n\n    var resolvedGame:SavedGame = savedGameA.modified > savedGameB.modified ? savedGameA : savedGameB;        \n    GameServices.service.savedGames.resolveConflict( event.conflictId, resolvedGame );\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This call will result in either a ",(0,a.jsx)(n.code,{children:"SavedGamesEvent.CONFLICT_RESOLVE_SUCCESS"})," or a ",(0,a.jsx)(n.code,{children:"SavedGamesEvent.CONFLICT_RESOLVE_ERROR"})," event."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-actionscript",children:"GameServices.service.savedGames.addEventListener( SavedGamesEvent.CONFLICT_RESOLVE_SUCCESS, resolveSuccessHandler );\nGameServices.service.savedGames.addEventListener( SavedGamesEvent.CONFLICT_RESOLVE_ERROR, resolveErrorHandler );\n\n\nfunction resolveSuccessHandler( event:SavedGamesEvent ):void \n{\n    // The conflict was resolved and you can resume normal loading/saving etc.\n}\n\nfunction resolveErrorHandler( event:SavedGamesEvent ):void \n{\n    // The conflict wasn't resolved and will be encountered on the next saved games operation again\n}\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Be aware that the call to resolve a conflict may itself dispatch another ",(0,a.jsx)(n.code,{children:"SavedGamesEvent.CONFLICT"})," event, if for some reason there were a series of conflicts awaiting resolution."]}),"\n",(0,a.jsx)(n.p,{children:"Simply ensure that your conflict handler is never removed and always available to handle conflict resolutions."}),"\n"]})]})}function v(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);