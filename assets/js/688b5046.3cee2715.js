"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[56846],{3905:function(e,n,a){a.d(n,{Zo:function(){return c},kt:function(){return g}});var t=a(67294);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=t.createContext({}),p=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},c=function(e){var n=p(e.components);return t.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),g=i,m=d["".concat(s,".").concat(g)]||d[g]||u[g]||r;return a?t.createElement(m,o(o({ref:n},c),{},{components:a})):t.createElement(m,o({ref:n},c))}));function g(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=a[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}d.displayName="MDXCreateElement"},70872:function(e,n,a){a.r(n),a.d(n,{assets:function(){return c},contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return u}});var t=a(87462),i=a(63366),r=(a(67294),a(3905)),o=["components"],l={title:"Installed Application Info",sidebar_label:"Installed Application Info"},s=void 0,p={unversionedId:"packagemanager/installed-application-info",id:"packagemanager/installed-application-info",title:"Installed Application Info",description:"Permissions",source:"@site/docs/packagemanager/installed-application-info.md",sourceDirName:"packagemanager",slug:"/packagemanager/installed-application-info",permalink:"/docs/packagemanager/installed-application-info",draft:!1,tags:[],version:"current",frontMatter:{title:"Installed Application Info",sidebar_label:"Installed Application Info"},sidebar:"packagemanager",previous:{title:"Installing Apps",permalink:"/docs/packagemanager/installing-apps"},next:{title:"Migrating to AndroidX",permalink:"/docs/packagemanager/migrating-to-androidx"}},c={},u=[{value:"Permissions",id:"permissions",level:2},{value:"All packages permission",id:"all-packages-permission",level:3},{value:"Query single application",id:"query-single-application",level:2},{value:"Querying all applications",id:"querying-all-applications",level:2},{value:"Asynchronous retrieval",id:"asynchronous-retrieval",level:3},{value:"Synchronous retrieval",id:"synchronous-retrieval",level:3}],d={toc:u};function g(e){var n=e.components,a=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"permissions"},"Permissions"),(0,r.kt)("p",null,"In order to retrieve information about other applications you must add the package name for the application to the ",(0,r.kt)("inlineCode",{parentName:"p"},"queries")," node in your manifest additions. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<queries>\n    <package android:name="com.application.example" />\n</queries>\n')),(0,r.kt)("p",null,"You'll need to identify the package name of the application you wish to query."),(0,r.kt)("h3",{id:"all-packages-permission"},"All packages permission"),(0,r.kt)("p",null,"Google generally restricts the visibility of installed packages, however there is a broad permission ",(0,r.kt)("inlineCode",{parentName:"p"},"QUERY_ALL_PACKAGES")," that Google grants to applications in certain circumstances. If you have access to this permission then you don't need to include the queries."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="android.permission.QUERY_ALL_PACKAGES"/>\n')),(0,r.kt)("p",null,"More information here:\n",(0,r.kt)("a",{parentName:"p",href:"https://support.google.com/googleplay/android-developer/answer/10158779?hl=en#zippy=%2Cpermitted-uses-of-the-query-all-packages-permission"},"https://support.google.com/googleplay/android-developer/answer/10158779?hl=en#zippy=%2Cpermitted-uses-of-the-query-all-packages-permission")),(0,r.kt)("h2",{id:"query-single-application"},"Query single application"),(0,r.kt)("p",null,"You can query information about a single application by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"getPackageInfo()")," method. This method returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"PackageInfo")," object representing the queried package. If this returns ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," the application isn't installed (or you didn't add the correct permissions)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'var packageInfo:PackageInfo = PackageManager.service.getPackageInfo( "com.application.example" );\nif (packageInfo == null)\n{\n    // Application not installed or permission denied\n}\n')),(0,r.kt)("h2",{id:"querying-all-applications"},"Querying all applications"),(0,r.kt)("p",null,"There are two methods to retrieve the installed application information, asynchronous and synchronous. We suggest the async method as it shouldn't affect the ui as much as the synchronous method may do, depending on the device and the number of applications installed."),(0,r.kt)("p",null,"Which ever method you use, the end result is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Array")," of ",(0,r.kt)("inlineCode",{parentName:"p"},"PackageInfo")," objects. These objects contain:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"packageName"),": The java package name of the application"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"label"),": The name of the application"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"versionName"),": The version name of this package, as specified by the manifest tag's ",(0,r.kt)("inlineCode",{parentName:"li"},"versionName")," attribute"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"versionCode"),": The version code for the application")),(0,r.kt)("p",null,"along with other information detailed in the asdocs."),(0,r.kt)("h3",{id:"asynchronous-retrieval"},"Asynchronous retrieval"),(0,r.kt)("p",null,"In order to retrieve a list of applications that are installed on the device call the ",(0,r.kt)("inlineCode",{parentName:"p"},"getInstalledApplicationsAsync()")," function."),(0,r.kt)("p",null,"You can use either a callback passed to the function or listen for the ",(0,r.kt)("inlineCode",{parentName:"p"},"PackageManagerEvent.GET_INSTALLED_APPLICATIONS")," event (or both)"),(0,r.kt)("p",null,"Listening for the event involves adding a listener for ",(0,r.kt)("inlineCode",{parentName:"p"},"PackageManagerEvent.GET_INSTALLED_APPLICATIONS")," and then processing the result in the handler:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"PackageManager.service.addEventListener( \n    PackageManagerEvent.GET_INSTALLED_APPLICATIONS, \n    getInstalledApplicationsHandler \n);\n\nPackageManager.service.getInstalledApplicationsAsync();\n\n\nfunction getInstalledApplicationsHandler( event:PackageManagerEvent ):void\n{\n    var installedPackages:Array = event.data;\n    if (installedPackages != null)\n    {\n        for each (var packageInfo:PackageInfo in installedPackages)\n        {\n            trace( packageInfo.packageName );\n        }\n    }\n}\n")),(0,r.kt)("p",null,"Alternatively you can do the similar thing with a callback:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"PackageManager.service.getInstalledApplicationsAsync(\n        function( installedPackages:Array ):void\n        {\n            if (installedPackages != null)\n            {\n                for each (var packageInfo:PackageInfo in installedPackages)\n                {\n                    trace( packageInfo.packageName );\n                }\n            }\n        }\n);\n")),(0,r.kt)("h3",{id:"synchronous-retrieval"},"Synchronous retrieval"),(0,r.kt)("p",null,"You can also call ",(0,r.kt)("inlineCode",{parentName:"p"},"getInstalledApplications()")," to directly retrieve an array of the application package information however be aware that this call may take some time."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"var installedPackages:Array = PackageManager.service.getInstalledApplications();\nif (installedPackages != null)\n{\n    for each (var packageInfo:PackageInfo in installedPackages)\n    {\n        trace( packageInfo.packageName );\n    }\n}\n")))}g.isMDXComponent=!0}}]);