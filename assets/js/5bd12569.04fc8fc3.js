"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[52835],{8376:(t,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"contacts/request-authorisation","title":"Request Authorisation","description":"When you are going to be accessing the user\'s contacts you must check that your application has","source":"@site/docs/contacts/request-authorisation.md","sourceDirName":"contacts","slug":"/contacts/request-authorisation","permalink":"/docs/contacts/request-authorisation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Request Authorisation","sidebar_label":"Request Authorisation"},"sidebar":"contacts","previous":{"title":"Add the Extension","permalink":"/docs/contacts/add-the-extension"},"next":{"title":"Retrieving the Contact List","permalink":"/docs/contacts/retrieving-the-contact-list"}}');var o=s(74848),i=s(28453);const a={title:"Request Authorisation",sidebar_label:"Request Authorisation"},r=void 0,c={},u=[{value:"Usage Description",id:"usage-description",level:2}];function h(t){const e={code:"code",em:"em",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:"When you are going to be accessing the user's contacts you must check that your application has\nbeen allowed access. To this end the extension provides several helpers to check and request\naccess to the contact list. Normal permission rules apply here."}),"\n",(0,o.jsxs)(e.p,{children:["On Android these permissions are listed through the manifest additions. On older versions of\nAndroid these permissions are accepted when the user installs the application. More modern\nversions (Marshmallow 6 [v23]+) require that you request the permissions similar to iOS.\nYou will still need to list them in your manifest and then follow the same code below as\nfor iOS, except that on Android you will be able to ask multiple times. You should respect\nthe ",(0,o.jsx)(e.code,{children:"SHOULD_EXPLAIN"})," status by displaying additional information to your user about why\nyou require this functionality."]}),"\n",(0,o.jsx)(e.p,{children:"On iOS the user must be asked at runtime, which you only get one chance to ask, after which\nyou must direct the user to manually change the permissions in the settings."}),"\n",(0,o.jsx)(e.p,{children:"The following code will work across both platforms:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-actionscript",children:"Contacts.service.addEventListener( AuthorisationEvent.CHANGED, contacts_authorisationChangedHandler );\n\n\nswitch (Contacts.service.authorisationStatus())\n{\n\tcase AuthorisationStatus.SHOULD_EXPLAIN:\n\tcase AuthorisationStatus.NOT_DETERMINED:\n\t\t// REQUEST ACCESS: This will display the permission dialog\n\t\tContacts.service.requestAccess();\n\t\treturn;\n\t\n\tcase AuthorisationStatus.DENIED:\n\tcase AuthorisationStatus.UNKNOWN:\n\tcase AuthorisationStatus.RESTRICTED:\n\t\t// ACCESS DENIED: You should inform your user appropriately\n\t\treturn;\n\t\t\n\tcase AuthorisationStatus.AUTHORISED:\n\t\t// AUTHORISED: Contacts will be available\n\t\tbreak;\t\t\t\t\t\t\n}\n\n\nfunction contacts_authorisationChangedHandler( event:AuthorisationEvent ):void\n{\n\t// Check event.status\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"usage-description",children:"Usage Description"}),"\n",(0,o.jsx)(e.p,{children:"You can customise the usage description messages as you see fit to suit your application. These messages are displayed in the main body area of the iOS authorisation dialog with the title and buttons being standard (and not customisable)."}),"\n",(0,o.jsxs)(e.p,{children:["The image below is an example of the authorisation dialog. The content ",(0,o.jsx)(e.em,{children:'"Access to photo library is required to save images."'})," is the usage description message you can set."]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:s(47211).A+"",width:"573",height:"357"})}),"\n",(0,o.jsxs)(e.p,{children:["You set these values through adding the usage description keys to your info additions or simply by setting up your configuration options in your ",(0,o.jsx)(e.code,{children:"apm"})," project."]})]})}function l(t={}){const{wrapper:e}={...(0,i.R)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(h,{...t})}):h(t)}},28453:(t,e,s)=>{s.d(e,{R:()=>a,x:()=>r});var n=s(96540);const o={},i=n.createContext(o);function a(t){const e=n.useContext(i);return n.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(o):t.components||o:a(t.components),n.createElement(i.Provider,{value:e},t.children)}},47211:(t,e,s)=>{s.d(e,{A:()=>n});const n=s.p+"assets/images/ios-permission-dialog-fb435e911b1ce9d2619a0dff5db7e237.png"}}]);