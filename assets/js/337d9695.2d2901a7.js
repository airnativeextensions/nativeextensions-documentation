"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[21776],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return h}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),u=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=u(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=u(n),h=r,k=d["".concat(c,".").concat(h)]||d[h]||p[h]||o;return n?a.createElement(k,i(i({ref:t},l),{},{components:n})):a.createElement(k,i({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},51533:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],s={title:"Auth - Provider - Facebook",sidebar_label:"Facebook"},c=void 0,u={unversionedId:"firebase/auth/provider/facebook",id:"firebase/auth/provider/facebook",title:"Auth - Provider - Facebook",description:"You can let your users authenticate with Firebase using their Facebook accounts by integrating Facebook Login into your app.",source:"@site/docs/firebase/auth/provider/facebook.md",sourceDirName:"firebase/auth/provider",slug:"/firebase/auth/provider/facebook",permalink:"/docs/firebase/auth/provider/facebook",draft:!1,tags:[],version:"current",frontMatter:{title:"Auth - Provider - Facebook",sidebar_label:"Facebook"},sidebar:"firebase",previous:{title:"Apple",permalink:"/docs/firebase/auth/provider/apple"},next:{title:"Twitter",permalink:"/docs/firebase/auth/provider/twitter"}},l={},p=[{value:"Before you begin",id:"before-you-begin",level:2},{value:"Authenticate with Facebook",id:"authenticate-with-facebook",level:2},{value:"Authenticate with Firebase",id:"authenticate-with-firebase",level:2},{value:"Next steps",id:"next-steps",level:2}],d={toc:p};function h(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"You can let your users authenticate with Firebase using their Facebook accounts by integrating Facebook Login into your app."),(0,o.kt)("h2",{id:"before-you-begin"},"Before you begin"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Ensure you have setup Firebase in your application"),(0,o.kt)("li",{parentName:"ul"},"On the ",(0,o.kt)("a",{parentName:"li",href:"https://developers.facebook.com/"},"Facebook for Developers")," site, get the App ID and an App Secret for your app. "),(0,o.kt)("li",{parentName:"ul"},"Enable Facebook Login: ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"In the ",(0,o.kt)("a",{parentName:"li",href:"https://console.firebase.google.com/?authuser=0"},"Firebase console"),", open the ",(0,o.kt)("strong",{parentName:"li"},"Auth")," section"),(0,o.kt)("li",{parentName:"ul"},"On the ",(0,o.kt)("strong",{parentName:"li"},"Sign in method")," tab, enable the ",(0,o.kt)("strong",{parentName:"li"},"Facebook")," sign-in method and specify the ",(0,o.kt)("strong",{parentName:"li"},"App ID")," and ",(0,o.kt)("strong",{parentName:"li"},"App Secret")," you got from Facebook"),(0,o.kt)("li",{parentName:"ul"},"Then, make sure your ",(0,o.kt)("strong",{parentName:"li"},"OAuth redirect URI")," (e.g. my-app-12345.firebaseapp.com/__/auth/handler) is listed as one of your ",(0,o.kt)("strong",{parentName:"li"},"OAuth redirect URIs")," in your Facebook app's settings page on the Facebook for Developers site in the ",(0,o.kt)("strong",{parentName:"li"},"Product Settings > Facebook Login")," config.")))),(0,o.kt)("h2",{id:"authenticate-with-facebook"},"Authenticate with Facebook"),(0,o.kt)("p",null,"In order to sign in using Facebook you will need to integrate ",(0,o.kt)("strong",{parentName:"p"},"Facebook Login"),". You can do this using the ",(0,o.kt)("a",{parentName:"p",href:"https://airnativeextensions.com/extension/com.distriqt.FacebookAPI"},"Facebook API")," native extension. The following guide uses this ANE however you can use any method you currently have to attain the Facebook access token."),(0,o.kt)("p",null,"Firstly, integrate Facebook in your application by following the steps outlined in the Facebook extension documentation, this includes setting up your Facebook application in the Facebook developers site and initialising the Facebook application using ",(0,o.kt)("inlineCode",{parentName:"p"},"Facebook.instance.initialise()"),". "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/facebookapi/core/overview"},"Reference"))),(0,o.kt)("p",null,"When you are logging in your users, you must ensure that you request at least the ",(0,o.kt)("inlineCode",{parentName:"p"},"public_profile")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"email")," permissions. "),(0,o.kt)("p",null,"For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'FacebookLogin.instance.addEventListener( FacebookLoginEvent.SUCCESS, successHandler );\nFacebookLogin.instance.addEventListener( FacebookLoginEvent.CANCEL, cancelHandler );\nFacebookLogin.instance.addEventListener( FacebookLoginErrorEvent.ERROR, errorHandler );\n\nFacebookLogin.instance.logInWithReadPermissions(\n        [ "public_profile", "email" ]\n);\n\nfunction successHandler( event:FacebookLoginEvent ):void\n{\n    // Grab the access token to use for Firebase authentication\n    accessToken = event.accessToken.token;\n}\n\nfunction cancelHandler( event:FacebookLoginEvent ):void\n{\n    // Handle as required\n}\n\nfunction errorHandler( event:FacebookLoginErrorEvent ):void\n{\n    // Handle as required\n}\n')),(0,o.kt)("p",null,"It is also useful to check if there is already a session opened for the user, in which case you should be able to grab the access token immediately."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (FacebookAPI.service.isSessionOpen())\n{\n    accessToken = FacebookLogin.instance.getAccessToken().token;\n}\n")),(0,o.kt)("h2",{id:"authenticate-with-firebase"},"Authenticate with Firebase"),(0,o.kt)("p",null,"Once you have logged in your user into Facebook you can use the Facebook Access Token to authenticate your user with Firebase. You will use the access token to create an ",(0,o.kt)("inlineCode",{parentName:"p"},"AuthCredential")," that you can pass to the ",(0,o.kt)("inlineCode",{parentName:"p"},"FirebaseAuth")," ",(0,o.kt)("inlineCode",{parentName:"p"},"signInWithCredential")," function."),(0,o.kt)("p",null,"To create an ",(0,o.kt)("inlineCode",{parentName:"p"},"AuthCredential")," for Facebook use the ",(0,o.kt)("inlineCode",{parentName:"p"},"FacebookAuthProvider.getCredential()")," method:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var credential:AuthCredential = FacebookAuthProvider.getCredential( accessToken ); \n")),(0,o.kt)("p",null,"Then pass this to ",(0,o.kt)("inlineCode",{parentName:"p"},"signInWithCredential()"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"FirebaseAuth.service.signInWithCredential( credential );\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"signInWithCredential()")," method will return the ",(0,o.kt)("inlineCode",{parentName:"p"},"FirebaseAuthEvent.SIGNIN_WITH_CREDENTIAL_COMPLETE")," event."),(0,o.kt)("p",null,"For example, after acquiring the access token from Facebook:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'var credential:AuthCredential = FacebookAuthProvider.getCredential( accessToken );\n            \nFirebaseAuth.service.addEventListener( FirebaseAuthEvent.SIGNIN_WITH_CREDENTIAL_COMPLETE, signInWithCredential_completeHandler );\nFirebaseAuth.service.signInWithCredential( credential );\n\n\nfunction signInWithCredential_completeHandler( event:FirebaseAuthEvent ):void \n{\n    // Check the result\n    if (event.success)\n    {\n        // Get the user\n        var user:FirebaseUser = FirebaseAuth.service.getCurrentUser();\n\n        trace( "identifier:  " + user.identifier );\n        trace( "displayName: " + user.displayName );\n        trace( "email:       " + user.email );\n        \n        // You will find a "facebook.com" provider in user.providers \n        // most likely will be the only provider for a new user\n\n        for each (var info:UserInfo in user.providers)\n        {\n            trace( "------------------" );\n            trace( "\\tprovider:    " + info.providerId );\n            trace( "\\tidentifier:  " + info.identifier );\n            trace( "\\tdisplayName: " + info.displayName );\n            trace( "\\temail:       " + info.email );\n        }\n    }\n}\n')),(0,o.kt)("h2",{id:"next-steps"},"Next steps"),(0,o.kt)("p",null,"After a user signs in for the first time, a new user account is created and linked to the credentials\u2014that is, the user name and password, phone number, or auth provider information\u2014the user signed in with. This new account is stored as part of your Firebase project, and can be used to identify a user across every app in your project, regardless of how the user signs in."),(0,o.kt)("p",null,"In your apps, you can get the user's basic profile information from the ",(0,o.kt)("inlineCode",{parentName:"p"},"FirebaseUser")," object.\nIn your Firebase Realtime Database and Cloud Storage Security Rules, you can get the signed-in\nuser's unique user ID from the auth variable, and use it to control what data a user can access.\nYou can allow users to sign in to your app using multiple authentication providers by linking\nauth provider credentials to an existing user account."),(0,o.kt)("p",null,"To sign out a user, call ",(0,o.kt)("inlineCode",{parentName:"p"},"signOut()"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"FirebaseAuth.service.signOut();\n")))}h.isMDXComponent=!0}}]);