"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[48038],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var s=i(96540);const o={},t=s.createContext(o);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(t.Provider,{value:n},e.children)}},84483:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"expansionfiles/downloading-expansion-files","title":"Downloading Expansion Files","description":"Once you have setup the Expansion Files ANE you should provide information about","source":"@site/docs/expansionfiles/downloading-expansion-files.md","sourceDirName":"expansionfiles","slug":"/expansionfiles/downloading-expansion-files","permalink":"/docs/expansionfiles/downloading-expansion-files","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Downloading Expansion Files","sidebar_label":"Downloading Expansion Files"},"sidebar":"expansionfiles","previous":{"title":"Uploading Expansion Files","permalink":"/docs/expansionfiles/uploading-expansion-files"},"next":{"title":"JOBB Files","permalink":"/docs/expansionfiles/jobb-files"}}');var o=i(74848),t=i(28453);const a={title:"Downloading Expansion Files",sidebar_label:"Downloading Expansion Files"},l=void 0,r={},d=[];function c(e){const n={blockquote:"blockquote",code:"code",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["Once you have setup the Expansion Files ANE you should provide information about\nyour expansion files. This is done by creating an ExpansionFile object and passing\nit to the ANE's ",(0,o.jsx)(n.code,{children:"addExpansionFile"})," function."]}),"\n",(0,o.jsxs)(n.p,{children:["You can then check if the files have already been downloaded using the\n",(0,o.jsx)(n.code,{children:"expansionFilesDelivered"})," function. This returns ",(0,o.jsx)(n.code,{children:"true"})," if the files have been\ndownloaded either as part of the install from Google Play or in a previous run\nof the application. If the files haven't been downloaded you should start the\ndownload process and wait for the ",(0,o.jsx)(n.code,{children:"ExpansionFilesEvent.COMPLETE"})," event to process\nthe files."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["Note: ",(0,o.jsx)(n.code,{children:"expansionFilesDelivered"})," will check the file size of the downloaded\nfile to the filesize you have specified so it is very important that you\ncreate your ",(0,o.jsx)(n.code,{children:"ExpansionFile"})," with the exact size of the file you have uploaded\nto the Play Store. If you don't then this will always return ",(0,o.jsx)(n.code,{children:"false"})," and may\nincorrectly download your file on every launch."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The following example shows the major events in this process and the suggested\nmethod of checking for the existence of expansion files."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-actionscript",children:'public static const BASE64_PUBLIC_KEY\t: String = "YOUR_LICENSING_PUBLIC_KEY";\npublic static const SALT\t\t: Vector.<int> = Vector.<int>( [ 1, 43, -12, -1, 54, 98, -100, -12, 43, 2, -8, -4, 9, 5, -106, -108, -33, 45, -1, 84 ]); \n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-actionscript",children:"ExpansionFiles.service.setup( BASE64_PUBLIC_KEY, SALT );\n\nExpansionFiles.service.addEventListener( ExpansionFilesEvent.CONNECTED,     connectedHandler );\nExpansionFiles.service.addEventListener( ExpansionFilesEvent.STATE_CHANGED, stateChangedHandler );\nExpansionFiles.service.addEventListener( ProgressEvent.PROGRESS,            progressHandler );\nExpansionFiles.service.addEventListener( ExpansionFilesEvent.COMPLETE,      completeHandler );\n\n// Add the details of your expansion file(s)\nvar expansionFile:ExpansionFile = new ExpansionFile( ExpansionFile.MAIN, 1001002, 233017 );\nExpansionFiles.service.addExpansionFile( expansionFile );\n\n// Check if the files have been delivered / downloaded already\nif (!ExpansionFiles.service.expansionFilesDelivered())\n{\n\t// Start the downloading\n\tExpansionFiles.service.download();\n}\nelse\n{\n\t// Already have expansion files - use as required\n}\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-actionscript",children:'private function connectedHandler( event:ExpansionFilesEvent ):void\n{\n\ttrace( "connectedHandler()" );\n}\n\nprivate function stateChangedHandler( event:ExpansionFilesEvent ):void\n{\n\ttrace( "stateChangedHandler(): " + event.state );\n}\n\nprivate function completeHandler( event:ExpansionFilesEvent ):void\n{\n\ttrace( "completeHandler()" );\n\t// Read your expansion files\n}\n\nprivate function progressHandler( event:ProgressEvent ):void\n{\n\ttrace( "progressHandler( " + event.progress.toString() + " )" );\t\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);