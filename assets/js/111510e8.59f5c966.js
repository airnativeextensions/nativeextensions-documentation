"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[79370],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),d=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=d(e.components);return i.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),m=r,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||o;return n?i.createElement(h,a(a({ref:t},c),{},{components:n})):i.createElement(h,a({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var d=2;d<o;d++)a[d]=n[d];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7614:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return c},default:function(){return p}});var i=n(87462),r=n(63366),o=(n(67294),n(3905)),a=["components"],s={title:"Crashlytics - Add the extension",sidebar_label:"Add the extension"},l=void 0,d={unversionedId:"firebase/crashlytics/add-the-extension",id:"firebase/crashlytics/add-the-extension",title:"Crashlytics - Add the extension",description:"AIR SDK",source:"@site/docs/firebase/crashlytics/add-the-extension.md",sourceDirName:"firebase/crashlytics",slug:"/firebase/crashlytics/add-the-extension",permalink:"/docs/firebase/crashlytics/add-the-extension",tags:[],version:"current",frontMatter:{title:"Crashlytics - Add the extension",sidebar_label:"Add the extension"},sidebar:"firebase",previous:{title:"Introduction",permalink:"/docs/firebase/crashlytics/introduction"},next:{title:"Usage",permalink:"/docs/firebase/crashlytics/usage"}},c=[{value:"AIR SDK",id:"air-sdk",children:[],level:2},{value:"Required Extensions",id:"required-extensions",children:[{value:"Firebase Crashlytics",id:"firebase-crashlytics",children:[],level:3},{value:"Android Support",id:"android-support",children:[],level:3},{value:"Square ANEs",id:"square-anes",children:[],level:3}],level:2},{value:"Extension IDs",id:"extension-ids",children:[],level:2},{value:"Android",id:"android",children:[{value:"Manifest Additions",id:"manifest-additions",children:[],level:3}],level:2},{value:"iOS",id:"ios",children:[{value:"Info Additions",id:"info-additions",children:[],level:3}],level:2}],u={toc:c};function p(e){var t=e.components,n=(0,r.Z)(e,a);return(0,o.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"air-sdk"},"AIR SDK"),(0,o.kt)("p",null,"The latest release of the Crashlytics extension requires at least version 33.1.1.345 of the AIR SDK. Using anything less than this will mean you will not get crash reports delivered to the console on iOS! "),(0,o.kt)("h2",{id:"required-extensions"},"Required Extensions"),(0,o.kt)("p",null,"You should have been through the setup of the Firebase Core before attempting to proceed with Crashlytics."),(0,o.kt)("p",null,"Make sure you have added all the extensions required for the Firebase Core extension as outlined ",(0,o.kt)("a",{parentName:"p",href:"../core/add-the-extensions"},"here"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"If you have previously been using ",(0,o.kt)("a",{parentName:"p",href:"../crash/introduction"},"Firebase Crash Reporting")," then you must make sure you remove this before integrating Crashlytics. Importantly remove ",(0,o.kt)("inlineCode",{parentName:"p"},"com.distriqt.firebase.Crash")," extension from the extensions packaged with your application.")),(0,o.kt)("h3",{id:"firebase-crashlytics"},"Firebase Crashlytics"),(0,o.kt)("p",null,"The only required additional ANE is the Crashlytics ANE located in this repository:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-Firebase/raw/master/lib/com.distriqt.firebase.Crashlytics.ane"},(0,o.kt)("inlineCode",{parentName:"a"},"com.distriqt.firebase.Crashlytics")))),(0,o.kt)("p",null,"This ANE contains all the required libraries for the main Firebase Crashlytics functionality."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"android-support"},"Android Support"),(0,o.kt)("p",null,"The Android Support libraries encompass the Android Support, Android X and common Google libraries. "),(0,o.kt)("p",null,"These libraries are specific to Android. There are no issues including these on all platforms, they are just ",(0,o.kt)("strong",{parentName:"p"},"required")," for Android."),(0,o.kt)("p",null,"This extension requires the following extensions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.android.datatransport.ane"},(0,o.kt)("inlineCode",{parentName:"a"},"com.google.android.datatransport"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.dagger.ane"},(0,o.kt)("inlineCode",{parentName:"a"},"com.google.dagger")))),(0,o.kt)("p",null,"You can access these extensions here: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-AndroidSupport"},"https://github.com/distriqt/ANE-AndroidSupport"),"."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"square-anes"},"Square ANEs"),(0,o.kt)("p",null,"Due to several of our ANE's using the ",(0,o.kt)("a",{parentName:"p",href:"http://square.github.io/"},"Square open source libraries")," the libraries have been separated into a separate ANEs allowing you to avoid conflicts and duplicate definitions. This means that you need to include the some of the square native extensions in your application along with this extension."),(0,o.kt)("p",null,"You will add these extensions as you do with any other ANE, and you need to ensure it is packaged with your application."),(0,o.kt)("p",null,"This ANE requires the following Square extensions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-SquareLibs/raw/master/lib/com.distriqt.square.okhttp3.ane"},(0,o.kt)("inlineCode",{parentName:"a"},"com.distriqt.square.okhttp3")))),(0,o.kt)("p",null,"You can access these extensions here: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-SquareLibs"},"https://github.com/distriqt/ANE-SquareLibs"),"."),(0,o.kt)("h2",{id:"extension-ids"},"Extension IDs"),(0,o.kt)("p",null,"The following should be added to your ",(0,o.kt)("inlineCode",{parentName:"p"},"extensions")," node in your application descriptor to identify all the required ANEs in your application:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},"<extensions>\n    <extensionID>com.distriqt.Firebase</extensionID>\n\n    <extensionID>com.distriqt.Core</extensionID>\n\n    <extensionID>com.distriqt.playservices.Base</extensionID>\n    <extensionID>com.distriqt.playservices.AdsIdentifier</extensionID>\n\n    <extensionID>androidx.core</extensionID>\n    <extensionID>com.google.protobuflite</extensionID>\n    <extensionID>com.google.firebase.core</extensionID>\n\n    <extensionID>com.distriqt.CustomResources</extensionID>\n\n    \x3c!-- Crashlytics --\x3e\n    <extensionID>com.distriqt.firebase.Crashlytics</extensionID>\n\n    <extensionID>com.distriqt.square.okhttp3</extensionID>\n    <extensionID>com.google.dagger</extensionID>\n    <extensionID>com.google.android.datatransport</extensionID>\n\n</extensions>\n")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"android"},"Android"),(0,o.kt)("h3",{id:"manifest-additions"},"Manifest Additions"),(0,o.kt)("p",null,"There are some small additions required to the manifest for Crashlytics. "),(0,o.kt)("p",null,"Firstly, the following must be added inside the ",(0,o.kt)("inlineCode",{parentName:"p"},"application")," node in your manifest additions."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- Firebase Crashlytics --\x3e\n<meta-data android:name="firebase_crashlytics_collection_enabled" android:value="false" />\n<activity android:name="com.distriqt.extension.firebase.crashlytics.activities.CrashActivity" />\n\n\x3c!-- datatransport --\x3e\n<service\n    android:name="com.google.android.datatransport.runtime.backends.TransportBackendDiscovery"\n    android:exported="false" >\n    <meta-data\n        android:name="backend:com.google.android.datatransport.cct.CctBackendFactory"\n        android:value="cct" />\n</service>\n<service\n    android:name="com.google.android.datatransport.runtime.scheduling.jobscheduling.JobInfoSchedulerService"\n    android:exported="false"\n    android:permission="android.permission.BIND_JOB_SERVICE" >\n</service>\n<receiver\n    android:name="com.google.android.datatransport.runtime.scheduling.jobscheduling.AlarmManagerSchedulerBroadcastReceiver"\n    android:exported="false" />\n')),(0,o.kt)("p",null,"Next, locate the ",(0,o.kt)("inlineCode",{parentName:"p"},"ComponentDiscoveryService")," service you added as part of the core Firebase manfiest additions and add the following meta data tag:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'<meta-data\n    android:name="com.google.firebase.components:com.google.firebase.crashlytics.CrashlyticsRegistrar"\n    android:value="com.google.firebase.components.ComponentRegistrar" />\n')),(0,o.kt)("p",null,"It should now appear like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'<service\n        android:name="com.google.firebase.components.ComponentDiscoveryService"\n        android:directBootAware="true"\n        android:exported="false">\n\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.analytics.connector.internal.AnalyticsConnectorRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.installations.FirebaseInstallationsRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.dynamicloading.DynamicLoadingRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n\n    \x3c!-- Firebase Crashlytics --\x3e\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.crashlytics.CrashlyticsRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n\n</service>\n')),(0,o.kt)("p",null,"You must replace ",(0,o.kt)("inlineCode",{parentName:"p"},"APPLICATION_PACKAGE")," with your AIR application's Java package name, something like ",(0,o.kt)("inlineCode",{parentName:"p"},"air.com.distriqt.test"),". Generally this is your AIR application id prefixed by ",(0,o.kt)("inlineCode",{parentName:"p"},"air.")," unless you have specified no air flair in your build options."),(0,o.kt)("h2",{id:"ios"},"iOS"),(0,o.kt)("h3",{id:"info-additions"},"Info Additions"),(0,o.kt)("p",null,"You must add the following flag to your info additions node. This will delay initialisation of crashlytics until you call ",(0,o.kt)("inlineCode",{parentName:"p"},"enableCollection")," allowing us to setup Crashlytics correctly."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},"<key>FirebaseCrashlyticsCollectionEnabled</key>\n<false/>\n")))}p.isMDXComponent=!0}}]);