"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[3082],{3905:(e,a,n)=>{n.d(a,{Zo:()=>d,kt:()=>h});var t=n(67294);function i(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){i(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,i=function(e,a){if(null==e)return{};var n,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(i[n]=e[n]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=t.createContext({}),u=function(e){var a=t.useContext(p),n=a;return e&&(n="function"==typeof e?e(a):l(l({},a),e)),n},d=function(e){var a=u(e.components);return t.createElement(p.Provider,{value:a},e.children)},c="mdxType",s={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},y=t.forwardRef((function(e,a){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=u(n),y=i,h=c["".concat(p,".").concat(y)]||c[y]||s[y]||r;return n?t.createElement(h,l(l({ref:a},d),{},{components:n})):t.createElement(h,l({ref:a},d))}));function h(e,a){var n=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=y;var o={};for(var p in a)hasOwnProperty.call(a,p)&&(o[p]=a[p]);o.originalType=e,o[c]="string"==typeof e?e:i,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}y.displayName="MDXCreateElement"},44269:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>p,contentTitle:()=>l,default:()=>s,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var t=n(87462),i=(n(67294),n(3905));const r={title:"Audio Player",sidebar_label:"Audio Player"},l=void 0,o={unversionedId:"mediaplayer/audio-player",id:"mediaplayer/audio-player",title:"Audio Player",description:"The Audio Player can be used to play back audio files using the native audio player.",source:"@site/docs/mediaplayer/audio-player.md",sourceDirName:"mediaplayer",slug:"/mediaplayer/audio-player",permalink:"/docs/mediaplayer/audio-player",draft:!1,tags:[],version:"current",frontMatter:{title:"Audio Player",sidebar_label:"Audio Player"},sidebar:"mediaplayer",previous:{title:"Media Player - Playback Events",permalink:"/docs/mediaplayer/media-player---playback-events"},next:{title:"Audio Player - Background Audio",permalink:"/docs/mediaplayer/audio-player---background-audio"}},p={},u=[{value:"Create a Player",id:"create-a-player",level:2},{value:"Playing Audio",id:"playing-audio",level:2},{value:"Playback Speed",id:"playback-speed",level:2},{value:"Headphones",id:"headphones",level:2},{value:"Audio Interruptions",id:"audio-interruptions",level:2},{value:"Other Applications",id:"other-applications",level:2}],d={toc:u},c="wrapper";function s(e){let{components:a,...n}=e;return(0,i.kt)(c,(0,t.Z)({},d,n,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The Audio Player can be used to play back audio files using the native audio player. "),(0,i.kt)("p",null,"Using the native audio player gives you access to a high performance player that allows\nstreaming from http sources and playback of music and audio files packaged with your\napplication."),(0,i.kt)("p",null,"Additionally it allows playback of ",(0,i.kt)("a",{parentName:"p",href:"/docs/mediaplayer/audio-player---background-audio"},"audio in the background"),"."),(0,i.kt)("p",null,"Here we will cover the basics of creating and using an ",(0,i.kt)("inlineCode",{parentName:"p"},"AudioPlayer")," instance."),(0,i.kt)("h2",{id:"create-a-player"},"Create a Player"),(0,i.kt)("p",null,"To create a player use the ",(0,i.kt)("inlineCode",{parentName:"p"},"createAudioPlayer")," function. This function returns an instance of the ",(0,i.kt)("inlineCode",{parentName:"p"},"AudioPlayer")," class that you will use as the main interface to control the audio playback."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var player:AudioPlayer = MediaPlayer.service.createAudioPlayer(); \n")),(0,i.kt)("p",null,"This will create a default audio player that you can use to load and playback audio files.\nThere are a series of options available when you create a player through the ",(0,i.kt)("inlineCode",{parentName:"p"},"AudioPlayerOptions")," class,\nfor example to enable background audio playback you create an instance of this class and enable background audio,\nand pass this instance to the ",(0,i.kt)("inlineCode",{parentName:"p"},"createAudioPlayer")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var options:AudioPlayerOptions = new AudioPlayerOptions()\n    .enableBackgroundAudio();\n\nvar player:AudioPlayer = MediaPlayer.service.createAudioPlayer( options ); \n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You can create multiple players to playback different audio files simultaneously and control their playback individually")),(0,i.kt)("p",null,"Once you have created the player you will need to load a file into the player, which will prepare the player for playback loading the file as neccessary."),(0,i.kt)("p",null,"For example, to load a file from the ",(0,i.kt)("inlineCode",{parentName:"p"},"applicationStorageDirectory")," named ",(0,i.kt)("inlineCode",{parentName:"p"},"audio-file.mp3"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var file:File = File.applicationStorageDirectory.resolvePath("audio-file.mp3");\n\nplayer.load( file.nativePath );\n')),(0,i.kt)("h2",{id:"playing-audio"},"Playing Audio"),(0,i.kt)("p",null,"Once you have created an ",(0,i.kt)("inlineCode",{parentName:"p"},"AudioPlayer")," instance and called ",(0,i.kt)("inlineCode",{parentName:"p"},"load")," to specify the audio file, playing the audio is simply a matter of calling ",(0,i.kt)("inlineCode",{parentName:"p"},"play")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"player.play();\n")),(0,i.kt)("p",null,"The player will dispatch the following events:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AudioPlayerEvent.COMPLETE"),": When the playback of the audio is complete (reaches the end);"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AudioPlayerEvent.PAUSED"),": When the playback of the audio is paused (either from calling pause or user interaction with controls);"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AudioPlayerEvent.PLAYING"),": When the playback of the audio has started or resumes;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"MediaErrorEvent.ERROR"),": If an error occurred reading or playing the file, check the values in the ",(0,i.kt)("inlineCode",{parentName:"li"},"MediaErrorEvent")," for more information on the error that occurred.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'player.addEventListener( AudioPlayerEvent.COMPLETE, audioPlayer_completeHandler );\nplayer.addEventListener( MediaErrorEvent.ERROR, audioPlayer_errorHandler );\n\nfunction audioPlayer_errorHandler( event:MediaErrorEvent ):void\n{\n    trace( "error: [" + event.code + "] " + event.description );\n}\n\nfunction audioPlayer_completeHandler( event:AudioPlayerEvent ):void\n{\n    trace( "complete" );\n}\n')),(0,i.kt)("p",null,"To ",(0,i.kt)("strong",{parentName:"p"},"pause")," playback you can call the ",(0,i.kt)("inlineCode",{parentName:"p"},"pause")," function on the player."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"player.pause();\n")),(0,i.kt)("p",null,"This will pause playback but not change the current playback position, so calling play again will resume play from the same position."),(0,i.kt)("p",null,"To change the current playback position you can call ",(0,i.kt)("inlineCode",{parentName:"p"},"seek")," and pass the new playback position."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"player.seek( 10.2 );\n")),(0,i.kt)("h2",{id:"playback-speed"},"Playback Speed"),(0,i.kt)("p",null,"The playback speed can be controlled by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setPlaybackSpeed")," function. In order for this functionality to work however you must first have enabled the player to support changing the playback speed by enabling in the player options."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var options:AudioPlayerOptions = new AudioPlayerOptions()\n    .enablePlaybackSpeed();\n\nvar player:AudioPlayer = MediaPlayer.service.createAudioPlayer( options ); \n")),(0,i.kt)("p",null,"Once you have enabled the playback speed option you can call ",(0,i.kt)("inlineCode",{parentName:"p"},"setPlaybackSpeed"),", the speed should be a value between ",(0,i.kt)("inlineCode",{parentName:"p"},"0.5")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"2"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"player.setPlaybackSpeed( 0.5 );\n")),(0,i.kt)("h2",{id:"headphones"},"Headphones"),(0,i.kt)("p",null,"When headphones are plugged in the audio will continue playing through the headphones.\nHowever when they are removed the standard process is that audio will be paused. "),(0,i.kt)("p",null,"If you wish to alter this behaviour the ",(0,i.kt)("inlineCode",{parentName:"p"},"AudioPlayerEvent.AUDIO_BECOMING_NOISY"),' will be dispatched at this point.\nThis event is dispatched when the application audio would become "noisy", for example the headphones were removed and play would continue through the device speakers. However instead the system automatically pauses playback and you can use this event to trigger playback again. '),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"player.addEventListener( AudioPlayerEvent.AUDIO_BECOMING_NOISY, audioBecomingNoisyHandler );\n\nfunction audioBecomingNoisyHandler( event:AudioPlayerEvent ):void \n{\n    player.play();\n}\n")),(0,i.kt)("h2",{id:"audio-interruptions"},"Audio Interruptions"),(0,i.kt)("p",null,"Interuptions may occur when a user receives a phone call or when another app requests audio focus."),(0,i.kt)("p",null,'You are expected to be a "good app citizen" and not continue playing audio in these scenarios so you should listen for the ',(0,i.kt)("inlineCode",{parentName:"p"},"AudioPlayerEvent.INTERRUPTION_START")," event on your audio player and ensure that you respond appropriately, pausing any active playback as a minimum."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"player.removeEventListener( AudioPlayerEvent.INTERRUPTION_START, interruptionHandler );\n\nfunction interruptionHandler( event:AudioPlayerEvent ):void\n{\n    // Respond to audio interruption\n    player.pause();\n}\n")),(0,i.kt)("p",null,"You may also receive a ",(0,i.kt)("inlineCode",{parentName:"p"},"AudioPlayerevent.INTERRUPTION_END"),", depending on the circumstances, to signal the end of the interruption. This event is not guaranteed to be delivered on all platforms and in all scenarios, so it can be used but do not rely on it."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"player.removeEventListener( AudioPlayerEvent.INTERRUPTION_END, interruptionEndHandler );\n\nfunction interruptionEndHandler( event:AudioPlayerEvent ):void \n{\n    // Application has regained audio focus and can resume or start playback\n}\n")),(0,i.kt)("h2",{id:"other-applications"},"Other Applications"),(0,i.kt)("p",null,"If you play music in your application it is a good idea to check whether there is another application currently playing audio before starting your own audio. For example if there is a background music player application actively playing music."),(0,i.kt)("p",null,"You can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"isOtherAudioPlaying")," flag to check this in your application:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (MediaPlayer.service.isOtherAudioPlaying)\n{\n    // Other application is playing audio\n}\n")),(0,i.kt)("p",null,"In this case it is generally advised to disable your audio or at least any music that your application may play."))}s.isMDXComponent=!0}}]);