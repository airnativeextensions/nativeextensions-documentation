"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[28261],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>m});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=o.createContext({}),l=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},h=function(e){var t=l(e.components);return o.createElement(u.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,u=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),c=l(n),p=i,m=c["".concat(u,".").concat(p)]||c[p]||d[p]||r;return n?o.createElement(m,a(a({ref:t},h),{},{components:n})):o.createElement(m,a({ref:t},h))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=p;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[c]="string"==typeof e?e:i,a[1]=s;for(var l=2;l<r;l++)a[l]=n[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},54585:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=n(87462),i=(n(67294),n(3905));const r={title:"Request Authorisation",sidebar_label:"Request Authorisation"},a=void 0,s={unversionedId:"bluetoothle/request-authorisation",id:"bluetoothle/request-authorisation",title:"Request Authorisation",description:"After initialising the extension you should check whether the user has given your application",source:"@site/docs/bluetoothle/request-authorisation.md",sourceDirName:"bluetoothle",slug:"/bluetoothle/request-authorisation",permalink:"/docs/bluetoothle/request-authorisation",draft:!1,tags:[],version:"current",frontMatter:{title:"Request Authorisation",sidebar_label:"Request Authorisation"},sidebar:"bluetoothle",previous:{title:"Add the Extension",permalink:"/docs/bluetoothle/add-the-extension"},next:{title:"Adapter State",permalink:"/docs/bluetoothle/adapter-state"}},u={},l=[{value:"Usage Description",id:"usage-description",level:2}],h={toc:l},c="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(c,(0,o.Z)({},h,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"After initialising the extension you should check whether the user has given your application\nauthorisation to user Bluetooth LE. You can check the value of hasAuthorisation() which will\nreturn true if the device is authorised and false otherwise. However the better method is to\nuse the authorisationStatus() to determine the status, this will allow you to determine if\nyour application has authorisation, has been denied or is not yet determined (i.e. the user\nhas not yet been asked to grant authorisation)."),(0,i.kt)("p",null,"On iOS you will only be able to display the authorisation request dialog once! Hence it is\nvery important that you inform your users why they should grant authorisation before requesting\nauthorisation. To request authorisation you call requestAuthorisation(). This function will\ntrigger the native dialog asking the user for authorisation."),(0,i.kt)("p",null,"On Android these permissions are listed through the manifest additions. On older versions of\nAndroid these permissions are accepted when the user installs the application. More modern\nversions (Marshmallow 6 ","[v23]","+) require that you request the permissions at runtime similar\nto iOS. You will still need to list them in your manifest and then follow the same code below\nas for iOS, except that on Android you will be able to ask multiple times. You should respect\nthe SHOULD_EXPLAIN status by displaying additional information to your user about why you\nrequire this functionality."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"BluetoothLE.service.addEventListener( AuthorisationEvent.CHANGED, authorisationChangedHandler );\n\nswitch (BluetoothLE.service.authorisationStatus())\n{\n    case AuthorisationStatus.AUTHORISED:\n        // The user has granted access to Bluetooth LE\n        break;\n    \n    case AuthorisationStatus.NOT_DETERMINED:\n    case AuthorisationStatus.SHOULD_EXPLAIN:\n        // The user has not yet been asked or \n        // has denied once and you should explain\n        BluetoothLE.service.requestAuthorisation();\n        break;\n    \n    case AuthorisationStatus.DENIED:\n    case AuthorisationStatus.RESTRICTED:\n    case AuthorisationStatus.UNKNOWN:\n        // The user has denied access or has restricted access to Bluetooth LE\n        break;\n}\n\n\nfunction authorisationChangedHandler( event:AuthorisationEvent ):void\n{\n    // Authorisation status has now changed\n}\n")),(0,i.kt)("h2",{id:"usage-description"},"Usage Description"),(0,i.kt)("p",null,"You can customise the usage description messages as you see fit to suit your application. These messages are displayed in the main body area of the iOS authorisation dialog with the title and buttons being standard (and not customisable)."),(0,i.kt)("p",null,"The image below is an example of the authorisation dialog. The content ",(0,i.kt)("em",{parentName:"p"},'"Access to photo library is required to save images."')," is the usage description message you can set."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(9445).Z,width:"573",height:"357"})),(0,i.kt)("p",null,"You set these values through adding the usage description keys to your info additions or simply by setting up your configuration options in your ",(0,i.kt)("inlineCode",{parentName:"p"},"apm")," project."))}d.isMDXComponent=!0},9445:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/ios-permission-dialog-fb435e911b1ce9d2619a0dff5db7e237.png"}}]);