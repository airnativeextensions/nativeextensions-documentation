

Updating your application descriptor will insert the required `extensionID`'s and generate the manifest and info additions for your application. 

You update your application descriptor by running:

```
apm generate app-descriptor src/MyApp-app.xml
```

Change the path (`src/MyApp-app.xml`) to point to your application descriptor.

:::note Build Types
If you setup a development build type you can update your app descriptor with this configuration by using :

```
apm -b development generate app-descriptor src/MyApp-app.xml
```

Or you could maintain a separate "development" app descriptor by changing the output eg:

```
apm -b development generate app-descriptor src/MyApp-dev-app.xml
```
:::

:::caution
This will modify your application descriptor replacing the manifest additions and info additions with the ones generated from `apm`. 

You should backup your application descriptor before running this command to ensure you don't lose any information.

If you need to insert custom data into these sections see the guides for [Android](https://github.com/airsdk/apm/wiki/Usage-Generate#android) and [iOS](https://github.com/airsdk/apm/wiki/Usage-Generate#ios)
:::




### Amazon

Amazon is a specific implementation of Android and requires some additional manifest additions if you are distributing your application via the Amazon AppStore.

Firstly generate a custom android manifest addition for your application by running:

```
apm generate config android
```

This will create a file `config/android/AndroidManifest.xml` that you can add your required additions to.

Add the following content to the manifest file (noting that you need to add the xmlns:amazon declaration to the manifest tag):

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools"
    xmlns:amazon="http://schemas.amazon.com/apk/res/android">

    <uses-sdk android:minSdkVersion="24" android:targetSdkVersion="35" />

    <uses-permission android:name="com.amazon.device.messaging.permission.RECEIVE" />
    <permission android:name="${applicationId}.permission.RECEIVE_ADM_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="${applicationId}.permission.RECEIVE_ADM_MESSAGE" />

    <application>

        <amazon:enable-feature android:name="com.amazon.device.messaging" android:required="false"/>
        <service android:name="com.onesignal.notifications.services.ADMMessageHandler" android:exported="false" />
        <service android:name="com.onesignal.notifications.services.ADMMessageHandlerJob"
                android:permission="android.permission.BIND_JOB_SERVICE"
                android:exported="false" />
        <receiver android:name="com.onesignal.notifications.receivers.ADMMessageReceiver"
                android:permission="com.amazon.device.messaging.permission.SEND"
                android:exported="true" >
            <intent-filter>
                <action android:name="com.amazon.device.messaging.intent.REGISTRATION" />
                <action android:name="com.amazon.device.messaging.intent.RECEIVE" />
                <category android:name="${applicationId}" />
            </intent-filter>
        </receiver>

    </application>

</manifest>
```

Then regenerate your application descriptor to include these changes by running:

```bash
apm generate app-descriptor 
```

Follow the [guide here](https://documentation.onesignal.com/docs/generate-an-amazon-api-key) to generate your Amazon API Key. You should end up with a file (`api_key.txt`) that you will need to add to the root of your application and ensure it is packaged into your application.

:::warning
Do not place the `api_key.txt` file in an `assets` folder as mentioned in the OneSignal documentation. Any assets from AIR are automatically added into this directory, so add it at the top level of your application package.
:::

:::info
You will need to be using a recent version of AIR to be able to support these additional manifest namespaces and tags.
:::

