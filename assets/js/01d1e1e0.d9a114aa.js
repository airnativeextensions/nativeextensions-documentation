"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[11078],{11470:(e,n,a)=>{a.d(n,{A:()=>E});var i=a(96540),s=a(34164),o=a(17559),t=a(23104),r=a(56347),l=a(205),d=a(57485),c=a(31682),u=a(70679);function m(e){var n,a;return null!=(n=null==(a=i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')}))?void 0:a.filter(Boolean))?n:[]}function p(e){const{values:n,children:a}=e;return(0,i.useMemo)(()=>{const e=null!=n?n:function(e){return m(e).map(e=>{let{props:{value:n,label:a,attributes:i,default:s}}=e;return{value:n,label:a,attributes:i,default:s}})}(a);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map(e=>e.value).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e},[n,a])}function h(e){let{value:n,tabValues:a}=e;return a.some(e=>e.value===n)}function f(e){let{queryString:n=!1,groupId:a}=e;const s=(0,r.W6)(),o=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,d.aZ)(o),(0,i.useCallback)(e=>{if(!o)return;const n=new URLSearchParams(s.location.search);n.set(o,e),s.replace(Object.assign({},s.location,{search:n.toString()}))},[o,s])]}function g(e){const{defaultValue:n,queryString:a=!1,groupId:s}=e,o=p(e),[t,r]=(0,i.useState)(()=>function(e){var n;let{defaultValue:a,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!h({value:a,tabValues:i}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+a+'" but none of its children has the corresponding value. Available values are: '+i.map(e=>e.value).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return a}const s=null!=(n=i.find(e=>e.default))?n:i[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:o})),[d,c]=f({queryString:a,groupId:s}),[m,g]=function(e){let{groupId:n}=e;const a=function(e){return e?"docusaurus.tab."+e:null}(n),[s,o]=(0,u.Dv)(a);return[s,(0,i.useCallback)(e=>{a&&o.set(e)},[a,o])]}({groupId:s}),v=(()=>{const e=null!=d?d:m;return h({value:e,tabValues:o})?e:null})();(0,l.A)(()=>{v&&r(v)},[v]);return{selectedValue:t,selectValue:(0,i.useCallback)(e=>{if(!h({value:e,tabValues:o}))throw new Error("Can't select invalid tab value="+e);r(e),c(e),g(e)},[c,g,o]),tabValues:o}}var v=a(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=a(74848);function j(e){let{className:n,block:a,selectedValue:i,selectValue:o,tabValues:r}=e;const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,t.a_)(),c=e=>{const n=e.currentTarget,a=l.indexOf(n),s=r[a].value;s!==i&&(d(n),o(s))},u=e=>{var n;let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{var i;const n=l.indexOf(e.currentTarget)+1;a=null!=(i=l[n])?i:l[0];break}case"ArrowLeft":{var s;const n=l.indexOf(e.currentTarget)-1;a=null!=(s=l[n])?s:l[l.length-1];break}}null==(n=a)||n.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":a},n),children:r.map(e=>{let{value:n,label:a,attributes:o}=e;return(0,b.jsx)("li",Object.assign({role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>{l.push(e)},onKeyDown:u,onClick:c},o,{className:(0,s.A)("tabs__item",x.tabItem,null==o?void 0:o.className,{"tabs__item--active":i===n}),children:null!=a?a:n}),n)})})}function y(e){let{lazy:n,children:a,selectedValue:o}=e;const t=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=t.find(e=>e.props.value===o);return e?(0,i.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==o}))})}function A(e){const n=g(e);return(0,b.jsxs)("div",{className:(0,s.A)(o.G.tabs.container,"tabs-container",x.tabList),children:[(0,b.jsx)(j,Object.assign({},n,e)),(0,b.jsx)(y,Object.assign({},n,e))]})}function E(e){const n=(0,v.A)();return(0,b.jsx)(A,Object.assign({},e,{children:m(e.children)}),String(n))}},19365:(e,n,a)=>{a.d(n,{A:()=>t});a(96540);var i=a(34164);const s={tabItem:"tabItem_Ymn6"};var o=a(74848);function t(e){let{children:n,hidden:a,className:t}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,i.A)(s.tabItem,t),hidden:a,children:n})}},28453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>r});var i=a(96540);const s={},o=i.createContext(s);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(o.Provider,{value:n},e.children)}},39610:(e,n,a)=>{a.d(n,{A:()=>i});const i=a.p+"assets/images/onesignal_hms_agconnect-services-2cb45469a6ad608f81d0b184e1b1bd7c.png"},73325:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"pushnotifications/onesignal/amazon","title":"Amazon SDK Setup","description":"If you wish to use Amazon device messaging in OneSignal you will need to do some additional changes to your installation.","source":"@site/docs/pushnotifications/onesignal/amazon.mdx","sourceDirName":"pushnotifications/onesignal","slug":"/pushnotifications/onesignal/amazon","permalink":"/docs/pushnotifications/onesignal/amazon","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Amazon SDK Setup","sidebar_label":"Amazon"}}');var s=a(74848),o=a(28453),t=a(11470),r=a(19365);const l={title:"Amazon SDK Setup",sidebar_label:"Amazon"},d=void 0,c={},u=[{value:"Amazon API Key File",id:"amazon-api-key-file",level:2},{value:"Update Manifest",id:"update-manifest",level:2}];function m(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"If you wish to use Amazon device messaging in OneSignal you will need to do some additional changes to your installation."}),"\n",(0,s.jsxs)(n.p,{children:["We will assume you have already setup your OneSignal account and have your App ID. If not see the ",(0,s.jsx)(n.a,{href:"/docs/pushnotifications/onesignal/",children:"setup"})," section."]}),"\n",(0,s.jsx)(n.h2,{id:"amazon-api-key-file",children:"Amazon API Key File"}),"\n",(0,s.jsxs)(n.p,{children:["Download the ",(0,s.jsx)(n.code,{children:"agconnect-services.json"})," file:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"From the AppGallery Connect Project List select your app."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Ensure you have added your certificate SHA fingerprint to your app configuration."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'Click on the "agconnect-services.json" button to download this file.'}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:a(39610).A+"",width:"1262",height:"696"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Place this file at the root of your application and ensure it is packaged."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"update-manifest",children:"Update Manifest"}),"\n",(0,s.jsx)(n.p,{children:"In order to support Amazon we need to add a few things to the manifest additions in your app descriptor."}),"\n",(0,s.jsxs)(t.A,{groupId:"packagemanager",defaultValue:"apm",values:[{label:"APM",value:"apm"},{label:"Manual",value:"manual"}],children:[(0,s.jsxs)(r.A,{value:"apm",children:[(0,s.jsxs)(n.p,{children:["Using ",(0,s.jsx)(n.code,{children:"apm"})," you can generate a custom configuration which can be merged into your app descriptor by ",(0,s.jsx)(n.code,{children:"apm"}),". Firstly create a configuration for android:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"apm generate config android\n"})}),(0,s.jsxs)(n.p,{children:["Then edit the file created at ",(0,s.jsx)(n.code,{children:"config/android/AndroidManifest.xml"}),"."]}),(0,s.jsx)(n.p,{children:"Firstly add the amazon namespace at the top of the file:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<manifest xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:amazon="http://schemas.amazon.com/apk/res/android"\n>\n'})}),(0,s.jsx)(n.p,{children:"Then add the following permissions, services and receivers, so your file should resemble:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<manifest xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:amazon="http://schemas.amazon.com/apk/res/android"\n>\n    <uses-sdk android:minSdkVersion="19" android:targetSdkVersion="33"/>\n\n    <uses-permission android:name="com.amazon.device.messaging.permission.RECEIVE" />\n    <permission android:name="${applicationId}.permission.RECEIVE_ADM_MESSAGE" android:protectionLevel="signature" />\n    <uses-permission android:name="${applicationId}.permission.RECEIVE_ADM_MESSAGE" />\n\n    <application>\n\n        <amazon:enable-feature android:name="com.amazon.device.messaging" android:required="false"/>\n        <service android:name="com.onesignal.notifications.services.ADMMessageHandler" android:exported="false" />\n        <service android:name="com.onesignal.notifications.services.ADMMessageHandlerJob"\n                android:permission="android.permission.BIND_JOB_SERVICE"\n                android:exported="false" />\n        <receiver android:name="com.onesignal.notifications.receivers.ADMMessageReceiver"\n                android:permission="com.amazon.device.messaging.permission.SEND"\n                android:exported="true" >\n            <intent-filter>\n                <action android:name="com.amazon.device.messaging.intent.REGISTRATION" />\n                <action android:name="com.amazon.device.messaging.intent.RECEIVE" />\n                <category android:name="${applicationId}" />\n            </intent-filter>\n        </receiver>\n\n    </application>\n\n</manifest>\n'})}),(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Do not change the ",(0,s.jsx)(n.code,{children:"${applicationId}"})," references as these will be automatically handled by the merge process."]})}),(0,s.jsx)(n.p,{children:"Then regenerate your application descriptor."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"apm generate app-descriptor\n"})})]}),(0,s.jsxs)(r.A,{value:"manual",children:[(0,s.jsx)(n.p,{children:"To manually do this you will need to manually add the following to your manifest additions in your application descriptor."}),(0,s.jsx)(n.p,{children:"Firstly add the amazon namespace at the top of the file:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<manifestAdditions><![CDATA[\n\t\t\t<manifest xmlns:amazon="http://schemas.amazon.com/apk/res/android">\n\n      ...\n\n      ]]>\n</manifestAdditions>\n'})}),(0,s.jsxs)(n.p,{children:["You should add the listing below to your manifest, ensure you merge the ",(0,s.jsx)(n.code,{children:"application"})," node with any existing node in your manifest.\nThe following listing should be added along with the listing used when originally installing OneSignal."]}),(0,s.jsxs)(n.admonition,{type:"caution",children:[(0,s.jsx)(n.p,{children:"Ensure you replace:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"APPLICATION_PACKAGE"})," with your AIR application's Java package name, something like ",(0,s.jsx)(n.code,{children:"air.com.distriqt.test"}),". Generally this is your AIR application id prefixed by ",(0,s.jsx)(n.code,{children:"air."})," unless you have specified no air flair in your build options."]}),"\n"]})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<uses-permission android:name="com.amazon.device.messaging.permission.RECEIVE" />\n<permission android:name="APPLICATION_PACKAGE.permission.RECEIVE_ADM_MESSAGE" android:protectionLevel="signature" />\n<uses-permission android:name="APPLICATION_PACKAGE.permission.RECEIVE_ADM_MESSAGE" />\n\n<application>\n  <amazon:enable-feature android:name="com.amazon.device.messaging"\n                         android:required="false"/>\n  <service android:name="com.onesignal.ADMMessageHandler"\n           android:exported="false" />\n  <service android:name="com.onesignal.ADMMessageHandlerJob"\n           android:permission="android.permission.BIND_JOB_SERVICE"\n           android:exported="false" />\n  <receiver android:name="com.onesignal.ADMMessageHandler$Receiver"\n            android:permission="com.amazon.device.messaging.permission.SEND" >\n    <intent-filter>\n      <action android:name="com.amazon.device.messaging.intent.REGISTRATION" />\n      <action android:name="com.amazon.device.messaging.intent.RECEIVE" />\n      <category android:name="APPLICATION_PACKAGE" />\n    </intent-filter>\n  </receiver>\n</application>\n'})})]})]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}}}]);