"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[17295],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return g}});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),p=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return i.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(t),g=a,m=d["".concat(s,".").concat(g)]||d[g]||c[g]||r;return t?i.createElement(m,o(o({ref:n},u),{},{components:t})):i.createElement(m,o({ref:n},u))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<r;p++)o[p]=t[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}d.displayName="MDXCreateElement"},80567:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return c}});var i=t(87462),a=t(63366),r=(t(67294),t(3905)),o=["components"],l={title:"Initialise",sidebar_label:"Initialise"},s=void 0,p={unversionedId:"singular/initialise",id:"singular/initialise",title:"Initialise",description:"Creating a Configuration Object",source:"@site/docs/singular/initialise.md",sourceDirName:"singular",slug:"/singular/initialise",permalink:"/docs/singular/initialise",draft:!1,tags:[],version:"current",frontMatter:{title:"Initialise",sidebar_label:"Initialise"},sidebar:"singular",previous:{title:"AIR",permalink:"/docs/singular/add-the-extension"},next:{title:"Tracking Events and Revenue",permalink:"/docs/singular/tracking-events"}},u={},c=[{value:"Creating a Configuration Object",id:"creating-a-configuration-object",level:2},{value:"Initialising Singular",id:"initialising-singular",level:2},{value:"Optional: Handling Deep Links",id:"optional-handling-deep-links",level:2},{value:"Android",id:"android",level:3},{value:"iOS",id:"ios",level:3},{value:"Optional: Custom User ID",id:"optional-custom-user-id",level:2},{value:"Optional: Global Properties",id:"optional-global-properties",level:2},{value:"Setting Global Properties through the Config Object",id:"setting-global-properties-through-the-config-object",level:3},{value:"Setting Global Properties After Initialisation",id:"setting-global-properties-after-initialisation",level:3},{value:"Optional: Modifying the Session Timeout",id:"optional-modifying-the-session-timeout",level:2}],d={toc:c};function g(e){var n=e.components,t=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"creating-a-configuration-object"},"Creating a Configuration Object"),(0,r.kt)("p",null,"Before you initialize Singular functionality in your code, you have to create a Singular configuration object and set all your configuration options."),(0,r.kt)("p",null,"This object will contain:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Your SDK Key and SDK Secret (to retrieve them, log into your Singular account and go to Developer Tools > SDK Keys)."),(0,r.kt)("li",{parentName:"ul"},"Optionally, any SDK preferences you may want to set.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript",metastring:'title="Example: Creating a Configuration Object with Some Common Options"',title:'"Example:',Creating:!0,a:!0,Configuration:!0,Object:!0,with:!0,Some:!0,Common:!0,'Options"':!0},"var config:SingularConfig \n    = new SingularConfig( API_KEY, SECRET )\n        .withSKAdNetworkEnabled( true )\n        .withWaitForTrackingAuthorizationTimeoutInterval( 300 );\n")),(0,r.kt)("p",null,"See the documentation on the ",(0,r.kt)("inlineCode",{parentName:"p"},"SingularConfig")," class for details on the available options."),(0,r.kt)("h2",{id:"initialising-singular"},"Initialising Singular"),(0,r.kt)("p",null,"The Singular SDK should be initialized every time your app is opened. This is a prerequisite to all Singular attribution functionality, and it also sends a new user session to Singular (sessions are used to calculate user retention)."),(0,r.kt)("p",null,"To initialise the SDK call the ",(0,r.kt)("inlineCode",{parentName:"p"},"init()")," method passing the config object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"var config:SingularConfig \n    = new SingularConfig( API_KEY, SECRET )\n        .withSKAdNetworkEnabled( true )\n        .withWaitForTrackingAuthorizationTimeoutInterval( 300 );\n\nvar success:Boolean = Singular.instance.init( config );\n")),(0,r.kt)("h2",{id:"optional-handling-deep-links"},"Optional: Handling Deep Links"),(0,r.kt)("p",null,"If you plan on handling deep links in your application you must add a handler for them before initialising the SDK."),(0,r.kt)("p",null,"Deep links are handled through the ",(0,r.kt)("inlineCode",{parentName:"p"},"SingularLinkEvent.RESOLVED")," event."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"Singular.instance.addEventListener( SingularLinkEvent.RESOLVED, linkResolvedHandler );\n\nfunction linkResolvedHandler( event:SingularLinkEvent ):void\n{\n    var deepLink:String = event.params.deeplink;\n    var passthrough:String = event.params.passthrough;\n    var isDeferred:Boolean = event.params.isDeferred;\n}\n")),(0,r.kt)("p",null,"The event contains a ",(0,r.kt)("inlineCode",{parentName:"p"},"SingularLinkParams")," object that contains the details of the link including the ",(0,r.kt)("inlineCode",{parentName:"p"},"deepLink"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"passthrough")," parameters and whether it was a deferred link."),(0,r.kt)("p",null,"Follow the documentation in ",(0,r.kt)("a",{parentName:"p",href:"https://support.singular.net/hc/en-us/articles/360031371451-Singular-Links-Prerequisites"},"Singular Link Prerequisites")," in order to setup your links."),(0,r.kt)("h3",{id:"android"},"Android"),(0,r.kt)("p",null,"You will need to add some custom additions to your manifest to support deep links (this must be added inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"application")," tag). Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"URL_SCHEME")," with the url scheme your deep links are using on Android, ie the scheme part from: ",(0,r.kt)("inlineCode",{parentName:"p"},"URL_SCHEME://your-link")," "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<activity>\n    <intent-filter>\n        <action android:name="android.intent.action.MAIN"/>\n        <category android:name="android.intent.category.LAUNCHER"/>\n    </intent-filter>\n    <intent-filter>\n        <action android:name="android.intent.action.VIEW" />\n        <category android:name="android.intent.category.DEFAULT" />\n        <category android:name="android.intent.category.BROWSABLE" />\n        <data android:scheme="URL_SCHEME" />\n    </intent-filter>\n</activity>\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If you already have a launch activity in your manifest, just add the second ",(0,r.kt)("inlineCode",{parentName:"p"},"intent-filter")," in the above example to your existing ",(0,r.kt)("inlineCode",{parentName:"p"},"activity"),".")),(0,r.kt)("h3",{id:"ios"},"iOS"),(0,r.kt)("p",null,"You will need to add some additions to your ",(0,r.kt)("inlineCode",{parentName:"p"},"InfoAdditions")," to support deep links, replace ",(0,r.kt)("inlineCode",{parentName:"p"},"URL_SCHEME")," with the url scheme your deep links are using on iOS, ie the scheme part from: ",(0,r.kt)("inlineCode",{parentName:"p"},"URL_SCHEME://your-link"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<key>CFBundleURLTypes</key>\n<array>\n    <dict>\n        <key>CFBundleURLSchemes</key>\n        <array>\n            <string>URL_SCHEME</string>\n        </array>\n    </dict>\n</array>\n")),(0,r.kt)("p",null,"Add the following to your ",(0,r.kt)("inlineCode",{parentName:"p"},"Entitlements"),", replace ",(0,r.kt)("inlineCode",{parentName:"p"},"SINGULAR_LINK")," with your singular link domain you created in the console, eg ",(0,r.kt)("inlineCode",{parentName:"p"},"distriqt-test.sng.link"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<key>com.apple.developer.associated-domains</key>\n<array>\n    <string>applinks:SINGULAR_LINK</string>\n</array>\n")),(0,r.kt)("h2",{id:"optional-custom-user-id"},"Optional: Custom User ID"),(0,r.kt)("p",null,"The Singular SDK can send an internal user ID from your app to Singular."),(0,r.kt)("p",null,"To set the user id pass the identifier as part of your configuration object:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'var config:SingularConfig \n    = new SingularConfig( API_KEY, SECRET )\n        .withCustomUserId( "user_custom_id" )\n        ...\n')),(0,r.kt)("h2",{id:"optional-global-properties"},"Optional: Global Properties"),(0,r.kt)("p",null,"The Singular SDK lets you define custom properties to be sent to the Singular servers along with every session and event sent from the app. These properties can represent any information you want about the user, the app mode/status, or anything else."),(0,r.kt)("p",null,"You can define up to 5 global properties. They persist between app runs (with the latest value you gave them) until you unset them or the user uninstalls the app."),(0,r.kt)("h3",{id:"setting-global-properties-through-the-config-object"},"Setting Global Properties through the Config Object"),(0,r.kt)("p",null,"To set global properties before initializing the SDK, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"withGlobalProperty()")," method in the ",(0,r.kt)("inlineCode",{parentName:"p"},"SingularConfig")," object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'var config:SingularConfig \n    = new SingularConfig( API_KEY, SECRET )\n        .withGlobalProperty( "a_prop", "set from config", true )\n        .withGlobalProperty( "b_prop", "set from config", true )\n        ...\n')),(0,r.kt)("h3",{id:"setting-global-properties-after-initialisation"},"Setting Global Properties After Initialisation"),(0,r.kt)("p",null,"Use the following methods to set, unset, and retrieve global properties at any time in the app's run."),(0,r.kt)("p",null,"Set a property using ",(0,r.kt)("inlineCode",{parentName:"p"},"setGlobalProperty()"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'Singular.instance.setGlobalProperty( "a_prop", "set from sdk", true );\n')),(0,r.kt)("p",null,"Retrieve all current properties using the ",(0,r.kt)("inlineCode",{parentName:"p"},"getGlobalProperties()")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'var props:Object = Singular.instance.getGlobalProperties();\n\nfor (var key:String in props)\n{\n    trace( key + " = " + props[key] );\n}\n')),(0,r.kt)("p",null,"Clear a specific property using the ",(0,r.kt)("inlineCode",{parentName:"p"},"unsetGlobalProperty()")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'Singular.instance.unsetGlobalProperty( "a_prop" );\n')),(0,r.kt)("p",null,"Clear all global properties using the ",(0,r.kt)("inlineCode",{parentName:"p"},"clearGlobalProperties()")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"Singular.instance.clearGlobalProperties();\n")),(0,r.kt)("h2",{id:"optional-modifying-the-session-timeout"},"Optional: Modifying the Session Timeout"),(0,r.kt)("p",null,"By default, if the app runs in the background for 60 seconds or more before returning to the foreground, the SDK will register a new session. To change this timeout value, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"withSessionTimeoutInSec()")," method and add it to the Config."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"var config:SingularConfig \n    = new SingularConfig( API_KEY, SECRET )\n        .withSessionTimeoutInSec( 100 )\n        ...\n")))}g.isMDXComponent=!0}}]);