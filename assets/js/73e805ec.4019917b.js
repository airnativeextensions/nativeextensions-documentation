(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[98436],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(t),m=o,k=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return t?a.createElement(k,r(r({ref:n},c),{},{components:t})):a.createElement(k,r({ref:n},c))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var p=2;p<i;p++)r[p]=t[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},48975:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return r},metadata:function(){return l},toc:function(){return s},default:function(){return c}});var a=t(22122),o=t(19756),i=(t(67294),t(3905)),r={title:"Migrating to Version 8",sidebar_label:"Migrating to Version 8"},l={unversionedId:"facebookapi/migrating-to-version-8",id:"facebookapi/migrating-to-version-8",isDocsHomePage:!1,title:"Migrating to Version 8",description:"Version 8 of the FacebookAPI brings a complete rewrite and restructure of the API to bring it inline with the latest Facebook SDK and to remove a series of API elements that Facebook have deprecated and removed over time.",source:"@site/docs/facebookapi/migrating-to-version-8.md",sourceDirName:"facebookapi",slug:"/facebookapi/migrating-to-version-8",permalink:"/docs/facebookapi/migrating-to-version-8",version:"current",sidebar_label:"Migrating to Version 8",frontMatter:{title:"Migrating to Version 8",sidebar_label:"Migrating to Version 8"},sidebar:"facebookapi",previous:{title:"Migrating to Version 9",permalink:"/docs/facebookapi/migrating-to-version-9"},next:{title:"Migrating to AndroidX",permalink:"/docs/facebookapi/migrating-to-androidx"}},s=[{value:"Change extensions",id:"change-extensions",children:[]},{value:"Application Descriptor",id:"application-descriptor",children:[]},{value:"Imports",id:"imports",children:[]},{value:"Initialisation",id:"initialisation",children:[]},{value:"App Events",id:"app-events",children:[]},{value:"Graph API",id:"graph-api",children:[]},{value:"Login",id:"login",children:[]},{value:"Share Dialog",id:"share-dialog",children:[]}],p={toc:s};function c(e){var n=e.components,t=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Version 8 of the FacebookAPI brings a complete rewrite and restructure of the API to bring it inline with the latest Facebook SDK and to remove a series of API elements that Facebook have deprecated and removed over time."),(0,i.kt)("p",null,"During this redevelopment we have broken the extension up into several extensions each representing a component of the Facebook SDK."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Core: contains the base SDK including analytics, events, app links and the graph API;"),(0,i.kt)("li",{parentName:"ul"},"Login: contains the login SDK allowing you to sign in users using their Facebook credentials;"),(0,i.kt)("li",{parentName:"ul"},"Share: contains the share SDK allowing your users to share content;")),(0,i.kt)("p",null,"This allows you to only add the components that you require in your application allowing you to reduce the size of your application."),(0,i.kt)("p",null,"Migrating from a previous version of the ANE will involve some major changes to your code. Below we will outline some of the major changes and how to address them."),(0,i.kt)("p",null,"While this guide covers the key points on migrating, we do highly recommend considering re-implementing the extensions from the start, due to the number of changes. "),(0,i.kt)("h2",{id:"change-extensions"},"Change extensions"),(0,i.kt)("p",null,"Firstly you should remove the ",(0,i.kt)("inlineCode",{parentName:"p"},"com.distriqt.FacebookAPI")," extension from your application."),(0,i.kt)("p",null,"Then add the 3 new Facebook extensions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"com.distriqt.facebook.Core")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"com.distriqt.facebook.Login")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"com.distriqt.facebook.Share"))),(0,i.kt)("p",null,"Your extensions node should now contain:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<extensions>\n    <extensionID>com.distriqt.facebook.Core</extensionID>\n    <extensionID>com.distriqt.facebook.Login</extensionID>\n    <extensionID>com.distriqt.facebook.Share</extensionID>\n\n    <extensionID>com.distriqt.Core</extensionID>\n    <extensionID>com.distriqt.Bolts</extensionID>\n\n    <extensionID>androidx.core</extensionID>\n    <extensionID>androidx.appcompat</extensionID>\n    <extensionID>androidx.browser</extensionID>\n    <extensionID>androidx.cardview</extensionID>\n    <extensionID>androidx.vectordrawable</extensionID>\n    <extensionID>com.android.installreferrer</extensionID>\n</extensions>\n")),(0,i.kt)("h2",{id:"application-descriptor"},"Application Descriptor"),(0,i.kt)("p",null,"We suggest removing all your manifest additions and info additions and checking the ",(0,i.kt)("a",{parentName:"p",href:"core/add-the-extension"},"add the extension")," guide to ensure you have the latest."),(0,i.kt)("p",null,"Note there is a small additional manifest entry for the Share extension ",(0,i.kt)("a",{parentName:"p",href:"share/add-the-extension#manifest-additions"},"here")),(0,i.kt)("h2",{id:"imports"},"Imports"),(0,i.kt)("p",null,"Remove any imports from the ",(0,i.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.facebookapi")," package. All the imports now are in the ",(0,i.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.facebook")," package, eg:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},"import com.distriqt.extension.facebook.core.Facebook;\n")),(0,i.kt)("h2",{id:"initialisation"},"Initialisation"),(0,i.kt)("p",null,"Previously you would have called ",(0,i.kt)("inlineCode",{parentName:"p"},"initialiseApp()")," as below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'FacebookAPI.service.initialiseApp( "YOUR_FACEBOOK_APP_ID" );\n')),(0,i.kt)("p",null,"Change this to:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},"Facebook.instance.initialise();\n")),(0,i.kt)("p",null,"More on initialisation ",(0,i.kt)("a",{parentName:"p",href:"core/initialise-the-extension"},"here")),(0,i.kt)("h2",{id:"app-events"},"App Events"),(0,i.kt)("p",null,"Key points:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Class rename: ",(0,i.kt)("inlineCode",{parentName:"li"},"FacebookAppEvent")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"AppEvent")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FacebookAPI.service.appEvents.logEvent()")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"Facebook.instance.appEventsLogger.logEvent()"))),(0,i.kt)("p",null,"For example the following legacy code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'var event:FacebookAppEvent = new FacebookAppEvent( AppEventsConstants.EVENT_NAME_ADDED_TO_CART );\nevent.valueToSum = 54.23;\n\nevent.setParameter( AppEventsConstants.EVENT_PARAM_CURRENCY, "USD" );\nevent.setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_TYPE, "product" );\nevent.setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_ID, "HDFU-8452" );\n\n\nFacebookAPI.service.appEvents.logEvent( event );\n')),(0,i.kt)("p",null,"becomes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'var event:AppEvent = \n    new AppEvent()\n        .setEventName( AppEventsConstants.EVENT_NAME_ADDED_TO_CART )\n        .setValueToSum( 54.23 )\n        .setParameter( AppEventsConstants.EVENT_PARAM_CURRENCY, "USD" )\n        .setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_TYPE, "product" )\n        .setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_ID, "HDFU-8452" )\n    ;\n\nFacebook.instance.appEventsLogger.logEvent( event );\n')),(0,i.kt)("p",null,"More on app events ",(0,i.kt)("a",{parentName:"p",href:"core/app-events/overview"},"here")),(0,i.kt)("h2",{id:"graph-api"},"Graph API"),(0,i.kt)("p",null,"The graph API remains fairly similar:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Package move: ",(0,i.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.facebookapi.graphapi")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.facebook.graphapi")),(0,i.kt)("li",{parentName:"ul"},"Class rename: ",(0,i.kt)("inlineCode",{parentName:"li"},"GraphAPIRequest")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"GraphRequest")),(0,i.kt)("li",{parentName:"ul"},"Class rename: ",(0,i.kt)("inlineCode",{parentName:"li"},"GraphAPIRequestBuilder")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"GraphRequestBuilder")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"FacebookAPI.service.graphAPI.makeRequest()")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"Facebook.instance.graphAPI.makeRequest()"))),(0,i.kt)("p",null,"For example the following legacy code:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'var request:GraphAPIRequest = new GraphAPIRequestBuilder()\n    .setPath( "/me" )\n    .build();\n\nFacebookAPI.service.graphAPI.makeRequest( request );\n')),(0,i.kt)("p",null,"becomes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'var request:GraphRequest = new GraphRequestBuilder()\n    .setPath( "/me" )\n    .build();\n\nFacebook.instance.graphAPI.makeRequest( request );\n')),(0,i.kt)("p",null,"More on the graph API ",(0,i.kt)("a",{parentName:"p",href:"core/graph-api/overview"},"here")),(0,i.kt)("h2",{id:"login"},"Login"),(0,i.kt)("p",null,"To login you would have called ",(0,i.kt)("inlineCode",{parentName:"p"},"createSession()"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'FacebookAPI.service.createSession( [ "public_profile", "email" ], true );\n')),(0,i.kt)("p",null,"This becomes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'FacebookLogin.instance.logInWithReadPermissions( [ "public_profile", "email" ] );\n')),(0,i.kt)("p",null,"There are no longer a series of session events to handle, so you can remove any code handling ",(0,i.kt)("inlineCode",{parentName:"p"},"FacebookAPISessionEvent"),"s and replace with a couple of simple ",(0,i.kt)("inlineCode",{parentName:"p"},"FacebookLoginEvent"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"FacebookLoginErrorEvent")," events:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},'FacebookLogin.instance.addEventListener( FacebookLoginEvent.SUCCESS, successHandler );\nFacebookLogin.instance.addEventListener( FacebookLoginEvent.CANCEL, cancelHandler );\nFacebookLogin.instance.addEventListener( FacebookLoginErrorEvent.ERROR, errorHandler );\n\nFacebookLogin.instance.logInWithReadPermissions( [ "public_profile", "email" ] );\n\n\nfunction successHandler( event:FacebookLoginEvent ):void\n{\n    trace( "successHandler()" );\n    // You can now access the user\n}\n\nfunction cancelHandler( event:FacebookLoginEvent ):void\n{\n    trace( "cancelHandler()" );\n}\n\nfunction errorHandler( event:FacebookLoginErrorEvent ):void\n{\n    trace( "errorHandler() code :    " + event.errorID  );\n    trace( "errorHandler() message : " + event.text  );\n}\n')),(0,i.kt)("p",null,"More on the login process ",(0,i.kt)("a",{parentName:"p",href:"login/facebook-login"},"here")),(0,i.kt)("h2",{id:"share-dialog"},"Share Dialog"),(0,i.kt)("p",null,"Sharing through the Facebook SDK has changed dramatically over the past few years. "),(0,i.kt)("p",null,"You basically only have access to the Share dialog now and a smaller set of content builders (with open graph stories being removed)."),(0,i.kt)("p",null,"The share dialog show has moved, so:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},"FacebookAPI.service.shareDialog.show( builder.build() );\n")),(0,i.kt)("p",null,"becomes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-as3"},"FacebookShare.instance.shareDialog.show( builder.build() );\n")),(0,i.kt)("p",null,"More on the share dialog ",(0,i.kt)("a",{parentName:"p",href:"share/share-dialog"},"here")))}c.isMDXComponent=!0}}]);