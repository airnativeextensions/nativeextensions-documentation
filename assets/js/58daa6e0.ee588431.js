"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[27579],{12862:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"image/transformations","title":"Transformations","description":"You can apply transformations to BitmapData by using the transformAsync function to return BitmapData or the transformAndSaveAsync function to save to a file.","source":"@site/docs/image/transformations.md","sourceDirName":"image","slug":"/image/transformations","permalink":"/docs/image/transformations","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Transformations","sidebar_label":"Transformations"},"sidebar":"image","previous":{"title":"Decoding ByteArray to BitmapData","permalink":"/docs/image/decoding-bytearray-to-bitmapdata"},"next":{"title":"Capturing a Screenshot","permalink":"/docs/image/capturing-a-screenshot"}}');var r=a(74848),s=a(28453);const o={title:"Transformations",sidebar_label:"Transformations"},i=void 0,c={},l=[{value:"Rotations",id:"rotations",level:2},{value:"Resizing",id:"resizing",level:2},{value:"Transform and Save",id:"transform-and-save",level:2},{value:"Events and Callbacks",id:"events-and-callbacks",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["You can apply transformations to ",(0,r.jsx)(n.code,{children:"BitmapData"})," by using the ",(0,r.jsx)(n.code,{children:"transformAsync"})," function to return ",(0,r.jsx)(n.code,{children:"BitmapData"})," or the ",(0,r.jsx)(n.code,{children:"transformAndSaveAsync"})," function to save to a file."]}),"\n",(0,r.jsxs)(n.p,{children:["Each of these functions take an instance of the ",(0,r.jsx)(n.code,{children:"ImageTransform"})," class which specifies the details of the transformation to apply to the image."]}),"\n",(0,r.jsxs)(n.p,{children:["The functions will return ",(0,r.jsx)(n.code,{children:"true"})," if the transformation process was started successfully and ",(0,r.jsx)(n.code,{children:"false"})," if there was an error either with the state of the extension or with the conversion of the parameters to native."]}),"\n",(0,r.jsxs)(n.p,{children:["The transformation will occur on a background thread and once complete will dispatch the ",(0,r.jsx)(n.code,{children:"ImageEvent.TRANSFORM_COMPLETE"})," event or ",(0,r.jsx)(n.code,{children:"ImageEvent.TRANSFORM_ERROR"})," if there was an error."]}),"\n",(0,r.jsx)(n.h2,{id:"rotations",children:"Rotations"}),"\n",(0,r.jsxs)(n.p,{children:["To rotate an image set the ",(0,r.jsx)(n.code,{children:"rotate"})," property of your transform to be the angle of rotation in degrees:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"var transform:ImageTransform = new ImageTransform();\ntransform.rotate = 90;\n\nImage.service.addEventListener( ImageEvent.TRANSFORM_COMPLETE, completeHandler );\nImage.service.addEventListener( ImageEvent.TRANSFORM_ERROR, errorHandler );\n\nImage.service.transformAsync( bitmapData, transform );\n\nfunction completeHandler( event:ImageEvent ):void \n{\n    // event.bitmapData contains the transformation result\n}\n\nfunction errorHandler( event:ImageEvent ):void \n{\n    // An error occurred\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can specify any arbitrary angle to rotate the image by. The size of the resulting image will be a bounding box around the rotated image so will most likely be larger than the original image."}),"\n",(0,r.jsx)(n.h2,{id:"resizing",children:"Resizing"}),"\n",(0,r.jsx)(n.p,{children:"To resize an image there are several options to achieve a different sized image."}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"resizeMethod"})," specifies the approach the resizing will take to handle dealing with aspect ratios and clipping. It can be one of the following:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ImageTransform.RESIZE_NONE"}),": (Default) no resizing will occur"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ImageTransform.RESIZE_BEST_FIT"}),": best fit the image to inside the specified width and height"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ImageTransform.RESIZE_FILL_NO_CROP"}),": Uses the width and height as the minimum dimensions and performs no cropping."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ImageTransform.RESIZE_FILL"}),": Fill the specified width and height with the image, cropping if necessary."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Along with this method you specify the ",(0,r.jsx)(n.code,{children:"width"})," and ",(0,r.jsx)(n.code,{children:"height"})," you require."]}),"\n",(0,r.jsxs)(n.p,{children:["For example, to get an exact image sized ",(0,r.jsx)(n.code,{children:"150x150"})," we would use the fill method:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"var transform:ImageTransform = new ImageTransform();\ntransform.resizeMethod = ImageTransform.RESIZE_FILL;\ntransform.width = 150;\ntransform.height = 150;\n\nImage.service.transformAsync( bitmapData, transform );\n"})}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.code,{children:"ImageTransform"})," class in asdocs for more on these methods."]}),"\n",(0,r.jsx)(n.h2,{id:"transform-and-save",children:"Transform and Save"}),"\n",(0,r.jsxs)(n.p,{children:["In some circumstances you may need to transform an image and save to a file directly, rather than needing the transformed data in your application. Using the ",(0,r.jsx)(n.code,{children:"transformAndSaveAsync"})," function you will save on the time required to create and return the required bitmap data to AIR and the extension instead will save the result directly to a file on the user's device."]}),"\n",(0,r.jsxs)(n.p,{children:["This function takes the same transformation options as the ",(0,r.jsx)(n.code,{children:"transformAsync"})," function however it additionally takes an output parameter that specifies the location and format of the output file."]}),"\n",(0,r.jsxs)(n.p,{children:["For example, to generate a ",(0,r.jsx)(n.code,{children:"150x150"})," thumbnail for an image and save to the application storage:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:'var transform:ImageTransform = new ImageTransform();\ntransform.resizeMethod = ImageTransform.RESIZE_FILL;\ntransform.width = 150;\ntransform.height = 150;\n\nvar file:File = File.applicationStorageDirectory.resolvePath("images/thumbnail.jpg");\n\t\t\t\nvar output:ImageOutput = new ImageOutput( file.nativePath );\noutput.format = ImageFormat.JPG;\n\nImage.service.transformAndSaveAsync( transformImage.bitmapData, transform, output );\n'})}),"\n",(0,r.jsx)(n.h2,{id:"events-and-callbacks",children:"Events and Callbacks"}),"\n",(0,r.jsx)(n.p,{children:"You can use the events to process the completion of the transformation."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"Image.service.addEventListener( ImageEvent.TRANSFORM_COMPLETE, completeHandler );\nImage.service.addEventListener( ImageEvent.TRANSFORM_ERROR, errorHandler );\n\nfunction completeHandler( event:ImageEvent ):void \n{\n    // event.bitmapData contains the transformation result\n}\n\nfunction errorHandler( event:ImageEvent ):void \n{\n    // An error occurred\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, you can use a callback function as a parameter to the ",(0,r.jsx)(n.code,{children:"transformAsync"})," or ",(0,r.jsx)(n.code,{children:"transformAndSaveAsync"})," functions."]}),"\n",(0,r.jsxs)(n.p,{children:["The callback for ",(0,r.jsx)(n.code,{children:"transformAsync"})," passes the transformed bitmap data as a parameter to the callback:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"Image.service.transformAsync( bitmapData, transform, callback );\n\nfunction callback( bitmapData:BitmapData ):void \n{\n    // This will be called when the above transform completes\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The callback for ",(0,r.jsx)(n.code,{children:"transformAndSaveAsync"})," passes the success of the save operation to the callback:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"Image.service.transformAndSaveAsync( bitmapData, transform, output, callback );\n\nfunction callback( success:Boolean ):void \n{\n    // This will be called when the above transform completes\n}\n"})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>i});var t=a(96540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);