"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[18591],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(n),m=i,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(g,r(r({ref:t},p),{},{components:n})):a.createElement(g,r({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var u=2;u<o;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},16884:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return r},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var a=n(87462),i=n(63366),o=(n(67294),n(3905)),r={title:"Setup - Configuration Files",sidebar_label:"Configuration Files"},l=void 0,s={unversionedId:"firebase/setup/configuration-files",id:"firebase/setup/configuration-files",isDocsHomePage:!1,title:"Setup - Configuration Files",description:"There are two ways to configure an application.",source:"@site/docs/firebase/setup/configuration-files.md",sourceDirName:"firebase/setup",slug:"/firebase/setup/configuration-files",permalink:"/docs/firebase/setup/configuration-files",tags:[],version:"current",frontMatter:{title:"Setup - Configuration Files",sidebar_label:"Configuration Files"},sidebar:"firebase",previous:{title:"Create a Firebase Project",permalink:"/docs/firebase/setup/create-a-firebase-project"},next:{title:"Introduction",permalink:"/docs/firebase/core/introduction"}},u=[{value:"Configuration Files",id:"configuration-files",children:[]},{value:"iOS",id:"ios",children:[]},{value:"Android",id:"android",children:[{value:"Android Create Resource ANE",id:"android-create-resource-ane",children:[]},{value:"Android Values XML",id:"android-values-xml",children:[]},{value:"Android Manual Configuration",id:"android-manual-configuration",children:[]}]},{value:"Manual Configuration",id:"manual-configuration",children:[]},{value:"Further information",id:"further-information",children:[]}],p={toc:u};function d(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"There are two ways to configure an application."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Using a packaged plist file on iOS and packaged resources (custom resources ANE) on Android;"),(0,o.kt)("li",{parentName:"ul"},"Manual configuration passing in values at runtime.")),(0,o.kt)("p",null,"The first method is the preferred method as it ensures your application is always correctly configured."),(0,o.kt)("p",null,"The second method will rely on a function call from your code which can be delayed and may cause some errors in background and initialisation operations particular with analytics. You may find Analytics doesn't work at all using the manual method."),(0,o.kt)("p",null,"We highly suggest you use the first method whenever possible. It does require slightly more work on Android however it ensures your application is always running with the correct configuration. However if you are willing to sacrifice some functionality it is easier to use the manual method of initialisation."),(0,o.kt)("h2",{id:"configuration-files"},"Configuration Files"),(0,o.kt)("p",null,"The first step in configuring your application is to get the configuration files from the Firebase console."),(0,o.kt)("p",null,"Once you have created your project in the console you will be able to navigate to the manage settings page and download the latest configuration file."),(0,o.kt)("p",null,"These files contain configuration details such as keys and identifiers, for the services you have enabled in your applications."),(0,o.kt)("p",null,"Ideally you should be able to automatically configure your application using the configuration files downloaded from the Firebase console.\nHowever there are some slight complications that we will explain in the following sections."),(0,o.kt)("h2",{id:"ios"},"iOS"),(0,o.kt)("p",null,"For an iOS project this configuration file takes the form of an xml plist file called ",(0,o.kt)("inlineCode",{parentName:"p"},"GoogleService-Info.plist"),"."),(0,o.kt)("p",null,"Download this file and place it in the root of your application package and ensure it is packaged with your iOS AIR application."),(0,o.kt)("p",null,"This is all that is required for iOS and packaging this file with your application ensures your application is using the first method mentioned above."),(0,o.kt)("p",null,"You can also use Manual Configuration (see below) if you require."),(0,o.kt)("h2",{id:"android"},"Android"),(0,o.kt)("p",null,"For an Android project this configuration file takes the form of a json file called ",(0,o.kt)("inlineCode",{parentName:"p"},"google-services.json"),"."),(0,o.kt)("p",null,"When an Android developer adds this file to his application part of the build process constructs resources file ",(0,o.kt)("inlineCode",{parentName:"p"},"values.xml")," from this ",(0,o.kt)("inlineCode",{parentName:"p"},"json")," file and packages them in their application."),(0,o.kt)("p",null,"As we don't have this option there are two available avenues to setup your application:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Creating the Android Resource"),(0,o.kt)("li",{parentName:"ul"},"Manual Configuration")),(0,o.kt)("h3",{id:"android-create-resource-ane"},"Android Create Resource ANE"),(0,o.kt)("p",null,"The first is the preferred method using Android resources."),(0,o.kt)("p",null,"Here we manually create the ",(0,o.kt)("inlineCode",{parentName:"p"},"values.xml")," file from the details in the ",(0,o.kt)("inlineCode",{parentName:"p"},"google-services.json")," file and then package this into an ANE using a custom resources build script.\nThis is slightly more complex as you need to create an ANE containing your configuration resources\nhowever it is a simple process using the provided ant build scripts and ensures your application is correctly configured."),(0,o.kt)("p",null,"If you are wanting to use custom notification icons you are going to have to generate this ANE anyway so\nit's a good idea to use this method from the start."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"If you have any issues with this process, please send us your ",(0,o.kt)("inlineCode",{parentName:"strong"},"values.xml")," along with any custom icons and we can create the custom resources ANE for you."))),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Check out the Custom Resources script and make a copy for yourself from the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-CustomResources"},"repository here"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You will need to make sure you have all the tools installed to run ",(0,o.kt)("inlineCode",{parentName:"p"},"ant")))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"see details in the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-CustomResources"},"CustomResources tutorial"))),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Open ",(0,o.kt)("inlineCode",{parentName:"li"},"build_config/build.config")," and perform the following changes:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Change the AIR SDK and Android SDK paths to match your environment"),(0,o.kt)("li",{parentName:"ul"},"You should have something like the following:")),(0,o.kt)("blockquote",null,(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre"},"# AIR SDK\nair.sdk = /Users/marchbold/work/sdks/air/current\n# ANDROID\nandroid.sdk = /Users/marchbold/work/sdks/android/android-sdk-macosx\n"))),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create your values file at ",(0,o.kt)("inlineCode",{parentName:"p"},"res/values/values.xml")," ",(0,o.kt)("a",{parentName:"p",href:"#android-values-xml"},"see below"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Run ",(0,o.kt)("inlineCode",{parentName:"p"},"ant")," in the repository directory and you will generate an ANE file in the ",(0,o.kt)("inlineCode",{parentName:"p"},"build")," directory (the name will be based on your package name).\nThis extension contains your configuration values resource and will be automatically loaded by the Firebase extension.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Add that ANE to your AIR application and ensure it's packaged with your Android application")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"More information on the ",(0,o.kt)("inlineCode",{parentName:"p"},"google-services.json")," format ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/android/guides/google-services-plugin#processing_the_json_file"},"here")))),(0,o.kt)("h3",{id:"android-values-xml"},"Android Values XML"),(0,o.kt)("p",null,"To create your values file (",(0,o.kt)("inlineCode",{parentName:"p"},"res/values/values.xml"),") you can either use the conversion tool ",(0,o.kt)("a",{parentName:"p",href:"https://docs.airnativeextensions.com/firebase/tools/google-services-json-to-xml.html"},"available here")," or you can create it manually by copying the example below:"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Complete ",(0,o.kt)("inlineCode",{parentName:"p"},"values.xml")," example:"),(0,o.kt)("pre",{parentName:"blockquote"},(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8"?>\n<resources>\n    <string name="google_app_id" translatable="false">1:1035469437089:android:73a4fb8297b2cd4f</string>\n    <string name="gcm_defaultSenderId" translatable="false">1035469437089</string>\n    <string name="default_web_client_id" translatable="false">337894902146-e4uksm38sne0bqrj6uvkbo4oiu4hvigl.apps.googleusercontent.com</string>\n    <string name="ga_trackingId" translatable="false">UA-65557217-3</string>\n    <string name="firebase_database_url" translatable="false">https://example-url.firebaseio.com</string>\n    <string name="google_api_key" translatable="false">AIzbSyCILMsOuUKwN3qhtxrPq7FFemDJUAXTyZ8</string>\n    <string name="google_crash_reporting_api_key" translatable="false">AIzbSyCILMsOuUKwN3qhtxrPq7FFemDJUAXTyZ8</string>\n    <string name="google_storage_bucket" translatable="false">XXX</string>\n    <string name="project_id" translatable="false">mydemoapp</string>\n</resources>\n'))),(0,o.kt)("p",null,"The values from your ",(0,o.kt)("inlineCode",{parentName:"p"},"google-services.json")," file coincide with the values in your ",(0,o.kt)("inlineCode",{parentName:"p"},"values.xml")," file as per the table below:"),(0,o.kt)("blockquote",null,(0,o.kt)("table",{parentName:"blockquote"},(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Json value"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"google_app_id"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"{YOUR_CLIENT}/client_info/mobilesdk_app_id"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"gcm_defaultSenderId"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"project_info/project_number"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"default_web_client_id"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"{YOUR_CLIENT}/oauth_client/client_id")," ",(0,o.kt)("inlineCode",{parentName:"td"},"(client_type == 3)"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"ga_trackingId"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"{YOUR_CLIENT}/services/analytics-service/analytics_property/tracking_id"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"firebase_database_url"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"project_info/firebase_url"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"google_api_key"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"{YOUR_CLIENT}/api_key/current_key"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"google_crash_reporting_api_key"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"{YOUR_CLIENT}/api_key/current_key"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"google_storage_bucket"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"project_info/storage_bucket"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},(0,o.kt)("inlineCode",{parentName:"strong"},"project_id"))),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"project_info/project_id")))))),(0,o.kt)("h3",{id:"android-manual-configuration"},"Android Manual Configuration"),(0,o.kt)("p",null,"The second method is a delayed configuration method which is the same as the manual configuration in the next section however the values are read directly from the json file if you package it with your Android application."),(0,o.kt)("p",null,"This method requires that you package the ",(0,o.kt)("inlineCode",{parentName:"p"},"google-services.json")," at the root level of your application.\nWhen you call ",(0,o.kt)("inlineCode",{parentName:"p"},"initialiseApp()"),", the extension will look for this file and if found will read the values appropriate for your application."),(0,o.kt)("p",null,"See the notes on the manual configuration below as all the points there apply to this method."),(0,o.kt)("h2",{id:"manual-configuration"},"Manual Configuration"),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This method while appearing simple is not advised."),(0,o.kt)("p",{parentName:"div"},"Firebase has issues with some aspects of it's functionality when initialised in this manner. Particularly it seems that Analytics will fail and you will get error messages about a missing ",(0,o.kt)("inlineCode",{parentName:"p"},"google_app_id"),". This appears to be well known and no current solution is available."))),(0,o.kt)("p",null,"If you wish you can manually setup your application."),(0,o.kt)("p",null,"To do this you create an instance of the ",(0,o.kt)("inlineCode",{parentName:"p"},"FirebaseOptions")," class and set the details for your application. You can locate these in the configuration files downloaded above."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var options:FirebaseOptions = new FirebaseOptions();\noptions.apiKey      = google_api_key;\noptions.clientID    = default_web_client_id;\noptions.databaseURL = firebase_database_url\noptions.gcmSenderID = gcm_defaultSenderId;\noptions.googleAppID = google_app_id;\n\nFirebase.service.initialiseApp( options );\n")),(0,o.kt)("p",null,"If you are using manual configuration on Android it is important that you remove the ",(0,o.kt)("inlineCode",{parentName:"p"},"FirebaseInitProvider")," from your manifest. This provider is the code responsible for initialising Firebase using your resources, if you aren't providing the configuration resources then this will fail."),(0,o.kt)("p",null,"i.e. remove the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- common --\x3e\n<provider\n    android:authorities="APPLICATION_PACKAGE.firebaseinitprovider"\n    android:name="com.google.firebase.provider.FirebaseInitProvider"\n    android:exported="false"\n    android:initOrder="100" />\n')),(0,o.kt)("h2",{id:"further-information"},"Further information"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://support.google.com/firebase/answer/7015592"},"Download a configuration file")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://developers.google.com/android/guides/google-services-plugin#processing_the_json_file"},"Google Services JSON"))))}d.isMDXComponent=!0}}]);