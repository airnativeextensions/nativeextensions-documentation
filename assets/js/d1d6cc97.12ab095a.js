"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[65106],{28453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>d});var t=n(96540);const s={},r=t.createContext(s);function i(e){const a=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:a},e.children)}},64804:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"firebase/database/read-data-and-change-events","title":"Database - Read Data and Change Events","description":"Reading Data and Listening to Value Change events","source":"@site/docs/firebase/database/read-data-and-change-events.md","sourceDirName":"firebase/database","slug":"/firebase/database/read-data-and-change-events","permalink":"/docs/firebase/database/read-data-and-change-events","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Database - Read Data and Change Events","sidebar_label":"Read Data and Change Events"},"sidebar":"firebase","previous":{"title":"Write Data","permalink":"/docs/firebase/database/write-data"},"next":{"title":"Delete Data","permalink":"/docs/firebase/database/delete-data"}}');var s=n(74848),r=n(28453);const i={title:"Database - Read Data and Change Events",sidebar_label:"Read Data and Change Events"},d=void 0,c={},o=[{value:"Reading Data and Listening to Value Change events",id:"reading-data-and-listening-to-value-change-events",level:2},{value:"Get a DatabaseReference",id:"get-a-databasereference",level:2},{value:"Listen for value events",id:"listen-for-value-events",level:3},{value:"Read Data Once",id:"read-data-once",level:3}];function l(e){const a={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.h2,{id:"reading-data-and-listening-to-value-change-events",children:"Reading Data and Listening to Value Change events"}),"\n",(0,s.jsx)(a.p,{children:"All data reading is an asynchronous process."}),"\n",(0,s.jsx)(a.h2,{id:"get-a-databasereference",children:"Get a DatabaseReference"}),"\n",(0,s.jsxs)(a.p,{children:["To read or write data from the database, you need an instance of ",(0,s.jsx)(a.code,{children:"DatabaseReference"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-actionscript",children:"var database:DatabaseReference;\n\ndatabase = FirebaseDatabase.service.getReference();\n"})}),"\n",(0,s.jsx)(a.h3,{id:"listen-for-value-events",children:"Listen for value events"}),"\n",(0,s.jsxs)(a.p,{children:["To read data at a path and listen for changes you add a listener for the ",(0,s.jsx)(a.code,{children:"VALUE_CHANGED"}),"\nevent."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-actionscript",children:"database.addEventListener( DatabaseReferenceEvent.VALUE_CHANGED, valueChangedHandler );\n"})}),"\n",(0,s.jsx)(a.p,{children:"You can also attach these listeners to children to get specific updates when a particular\nvalue changes:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-actionscript",children:'database.child("someKey").addEventListener( DatabaseReferenceEvent.VALUE_CHANGED, valueChangedHandler );\n'})}),"\n",(0,s.jsxs)(a.p,{children:["In your handler you will have access to a ",(0,s.jsx)(a.code,{children:"DataSnapshot"})," which represents the data\ncontained in the node at the time of the event:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-actionscript",children:"private function valueChangedHandler( event:DatabaseReferenceEvent ):void \n{\n\t// event.snapshot will contain the DataSnapshot of the reference this listener was attached\n\ttrace( event.snapshot.toString() );\n}\n"})}),"\n",(0,s.jsxs)(a.p,{children:["You should also listen for the ",(0,s.jsx)(a.code,{children:"VALUE_CHANGED_ERROR"})," event at this point. It will\nbe dispatched when there is an issue retrieving the value. For example, a read can\nfail if the client doesn't have permission to read from a Firebase database location."]}),"\n",(0,s.jsxs)(a.p,{children:["When this event is dispatched the event will have the ",(0,s.jsx)(a.code,{children:"errorCode"})," and ",(0,s.jsx)(a.code,{children:"errorDescription"}),"\nfields populated with the details of the error."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-actionscript",children:"database.addEventListener( DatabaseReferenceEvent.VALUE_CHANGED_ERROR, valueChangedErrorHandler );\n"})}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-actionscript",children:"private function valueChangedErrorHandler( event:DatabaseReferenceEvent ):void \n{\n\ttrace( event.errorCode );\n\ttrace( event.errorDescription );\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"read-data-once",children:"Read Data Once"}),"\n",(0,s.jsx)(a.p,{children:"In some cases you may want a callback to be called once and then immediately removed,\nsuch as when initializing a UI element that you don't expect to change. This is useful\nfor data that only needs to be loaded once and isn't expected to change frequently or\nrequire active listening."}),"\n",(0,s.jsxs)(a.p,{children:["To this end you can use the ",(0,s.jsx)(a.code,{children:"once( callback:Function )"})," method and provide a callback\nfunction to handle the result."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-actionscript",children:'var ref:DatabaseReference = FirebaseDatabase.service.getReference( "test" );\n\nref.once( function( value:Object ):void \n{\n\tif (value != null)\n\t{\n\t\ttrace( JSON.stringify( value ) );\n\t}\n\telse \n\t{\n\t\t// There was an error\n\t}\n});\n'})}),"\n",(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.code,{children:"once"})," function takes a ",(0,s.jsx)(a.code,{children:"Function"})," as a parameter which will be called when the value\nhas been read. This function should have one parameter of type ",(0,s.jsx)(a.code,{children:"Object"})," which will be the\nresulting ",(0,s.jsx)(a.code,{children:"value"})," of the read operation. This value may be ",(0,s.jsx)(a.code,{children:"null"})," if an error occurred."]})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);