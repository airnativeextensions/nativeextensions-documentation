"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[92199],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},36865:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/unity-import-files-0deb28a23aac822213c508c87a5798be.png"},44887:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/header-ff88759a9b4f9848969a4af99760b09f.png"},49754:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"permissions/unity","title":"Unity","description":"Contents","source":"@site/docs/permissions/unity.md","sourceDirName":"permissions","slug":"/permissions/unity","permalink":"/docs/permissions/unity","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Unity","sidebar_label":"Unity"}}');var t=s(74848),r=s(28453);const o={title:"Unity",sidebar_label:"Unity"},a=void 0,l={},d=[{value:"Contents",id:"contents",level:2},{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Add the Plugin",id:"add-the-plugin",level:2},{value:"Asset Store",id:"asset-store",level:3},{value:"Manual Installation",id:"manual-installation",level:3},{value:"Import the Plugin",id:"import-the-plugin",level:3},{value:"Android",id:"android",level:3},{value:"Proguard",id:"proguard",level:4},{value:"Usage",id:"usage",level:2},{value:"Checking for Support",id:"checking-for-support",level:3},{value:"Set Permissions",id:"set-permissions",level:2},{value:"Requesting Access",id:"requesting-access",level:2},{value:"Check Authorisation Status",id:"check-authorisation-status",level:3},{value:"Request Authorisation",id:"request-authorisation",level:3},{value:"Event",id:"event",level:4},{value:"Callback",id:"callback",level:4},{value:"Support",id:"support",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(44887).A+"",width:"1200",height:"630"})}),"\n",(0,t.jsx)(n.h2,{id:"contents",children:"Contents"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#features",children:"Features"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#add-the-plugin",children:"Add the Plugin"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#asset-store",children:"Asset Store"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#manual-installation",children:"Manual Installation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#import-the-plugin",children:"Import the Plugin"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#ios-setup",children:"iOS Setup"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#usage",children:"Usage"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#checking-for-support",children:"Checking for Support"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#set-permissions",children:"Set Permissions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#requesting-access",children:"Requesting Access"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#support",children:"Support"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The Permissions extension gives you access to the Android device permissions being able to query and request user permission to access 'dangerous' permissions."}),"\n",(0,t.jsx)(n.p,{children:"The simple API allows you to quickly integrate permissions in your AIR application. Identical code base can be used across all platforms allowing you to concentrate on your application and not device specifics."}),"\n",(0,t.jsx)(n.p,{children:"We provide complete guides to get you up and running with permissions quickly and easily."}),"\n",(0,t.jsxs)(n.p,{children:["Please note you can access the most recent documentation for this plugin here: ",(0,t.jsx)(n.a,{href:"https://docs.airnativeextensions.com/docs/permissions/",children:"https://docs.airnativeextensions.com/docs/permissions/"})]}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsx)(n.p,{children:"Save key/value pairs to App Cloud Defaults on:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check the current authorisation status;"}),"\n",(0,t.jsx)(n.li,{children:"Request access to required permissions;"}),"\n",(0,t.jsx)(n.li,{children:"Single API interface - your code works across supported platforms with no modifications;"}),"\n",(0,t.jsx)(n.li,{children:"Sample project code and reference"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"As with all our extensions you get access to a year of support and updates as we are continually improving and updating the extensions for OS updates and feature requests."}),"\n",(0,t.jsx)(n.h2,{id:"add-the-plugin",children:"Add the Plugin"}),"\n",(0,t.jsx)(n.p,{children:"First step is always to add the plugin to your development environment."}),"\n",(0,t.jsx)(n.h3,{id:"asset-store",children:"Asset Store"}),"\n",(0,t.jsx)(n.p,{children:"Open the Asset Store in your browser and add the Permissions plugin to your assets."}),"\n",(0,t.jsx)(n.p,{children:'Open the Package Manager (Window > Package Manager) in the Unity Editor and select the "My Assets" section. Select the Permissions plugin, and click Import in the bottom right.'}),"\n",(0,t.jsx)(n.h3,{id:"manual-installation",children:"Manual Installation"}),"\n",(0,t.jsxs)(n.p,{children:["In unity you import the package by selecting ",(0,t.jsx)(n.code,{children:"Assets / Import Package / Custom Package ..."})," and then browsing to the unity plugin package file: ",(0,t.jsx)(n.code,{children:"com.distriqt.Permissions.unitypackage"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(85484).A+"",width:"408",height:"268"})}),"\n",(0,t.jsx)(n.p,{children:"You can manually download the extension from our repository:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/distriqt/ANE-Permissions",children:"https://github.com/distriqt/ANE-Permissions"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"import-the-plugin",children:"Import the Plugin"}),"\n",(0,t.jsx)(n.p,{children:"This will present the import dialog and display all the files for the plugin, make sure all the files are selected."}),"\n",(0,t.jsx)(n.p,{children:"The plugin will be added to your project and you can now use the plugins functionality in your application."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(36865).A+"",width:"431",height:"618"})}),"\n",(0,t.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,t.jsx)(n.h4,{id:"proguard",children:"Proguard"}),"\n",(0,t.jsx)(n.p,{children:"If you are using a custom proguard configuration you may need to add the following line to ensure the interface class for the plugin is accessible to unity at runtime."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"-keep class com.distriqt.extension.permissions.PermissionsUnityPlugin {*;}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.h3,{id:"checking-for-support",children:"Checking for Support"}),"\n",(0,t.jsxs)(n.p,{children:["You can use the ",(0,t.jsx)(n.code,{children:"isSupported"})," flag to determine if this extension is supported on the current platform and device."]}),"\n",(0,t.jsx)(n.p,{children:"This allows you to react to whether the functionality is available on the device and provide an alternative solution if not."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"if (AppGroupDefaults.isSupported)\n{\n\t// Functionality here\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"set-permissions",children:"Set Permissions"}),"\n",(0,t.jsx)(n.p,{children:"There are several methods to add entries to the android manifest in Unity.\nIf you already have a preferred approach, you can simply add the permissions you require to your manifest, eg:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.CAMERA" />\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The approach we prefer is to create a folder in your ",(0,t.jsx)(n.code,{children:"Assets"})," folder something like ",(0,t.jsx)(n.code,{children:"Project.androidlib"}),", (you can create this in a subfolder like ",(0,t.jsx)(n.code,{children:"Plugins/Android"})," to keep things organised)."]}),"\n",(0,t.jsxs)(n.p,{children:["Create a file in this directory called ",(0,t.jsx)(n.code,{children:"project.properties"})," and add the following contents:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"android.library=true\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then create an ",(0,t.jsx)(n.code,{children:"AndroidManifests.xml"})," file and add the additions you need:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<manifest \n    xmlns:android="http://schemas.android.com/apk/res/android" \n    package="project.packagename.resources">\n\n\t<uses-permission android:name="android.permission.CAMERA" />\n\n</manifest>\n'})}),"\n",(0,t.jsx)(n.p,{children:"Unity will merge the contents of this file into your applications manifest during a build."}),"\n",(0,t.jsx)(n.h2,{id:"requesting-access",children:"Requesting Access"}),"\n",(0,t.jsx)(n.h3,{id:"check-authorisation-status",children:"Check Authorisation Status"}),"\n",(0,t.jsxs)(n.p,{children:["You can check the authorisation status for a specific permission by using the ",(0,t.jsx)(n.code,{children:"authorisationStatusForPermission()"})," method:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'string status = Permissions.Instance.AuthorisationStatusForPermission(\n    "android.permission.CAMERA"\n);\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"status"})," can be one of the values defined in the ",(0,t.jsx)(n.code,{children:"AuthorisationStatus"})," class:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorisationStatus.AUTHORISED"}),": This device has been authorised."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorisationStatus.NOT_DETERMINED"}),": You are yet to ask for authorisation."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorisationStatus.SHOULD_EXPLAIN"}),": You need to further explain."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorisationStatus.DENIED"}),": The user has disabled the permission."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorisationStatus.UNKNOWN"}),": The permission is in an unknown state, normally indicating an error has occurred."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AuthorisationStatus.RESTRICTED"}),": The user has restricted the permission to certain assets."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"request-authorisation",children:"Request Authorisation"}),"\n",(0,t.jsxs)(n.p,{children:["To request authorisation for an individual permission you can use the ",(0,t.jsx)(n.code,{children:"RequestAuthorisationForPermission()"})," method passing the permission of interest."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'Permissions.Instance.RequestAuthorisationForPermission( \n    "android.permission.CAMERA" \n    );\n'})}),"\n",(0,t.jsx)(n.p,{children:"This method can either be handled with an event result or via a callback function."}),"\n",(0,t.jsx)(n.h4,{id:"event",children:"Event"}),"\n",(0,t.jsxs)(n.p,{children:["You will receive an ",(0,t.jsx)(n.code,{children:"OnAuthorisationChanged"})," event after the process completes which contains the updated ",(0,t.jsx)(n.code,{children:"status"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'Permissions.Instance.OnAuthorisationChanged += Permissions_OnAuthorisationChanged;\n\nPermissions.service.RequestAuthorisationForPermission( \n    "android.permission.CAMERA" \n    );\n'})}),"\n",(0,t.jsx)(n.p,{children:"You will then receive a change event if the user accepted your permission request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"private void Permissions_OnAuthorisationChanged(AuthorisationEvent e)\n{\n\t// Check the authorisation state again (as above)\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"callback",children:"Callback"}),"\n",(0,t.jsxs)(n.p,{children:["You can supply a function to the ",(0,t.jsx)(n.code,{children:"RequestAuthorisationForPermission()"})," method that will be called when the process completes.\nThis method should have the following signature ",(0,t.jsx)(n.code,{children:"( string status )"}),". The ",(0,t.jsx)(n.code,{children:"status"})," parameter is the updated authorisation status."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'Permissions.Instance.RequestAuthorisationForPermission(\n\t"android.permission.CAMERA",\n\t(string status) =>\n\t{\n\t\tLog("request auth status = " + status);\n\t\t// Check the authorisation state again (as above)\n\t}\n);\n'})}),"\n",(0,t.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,t.jsx)(n.p,{children:"If you need further support integrating or using this extension please feel free to contact us."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Email: ",(0,t.jsx)(n.a,{href:"mailto:unityplugins@distriqt.com",children:"unityplugins@distriqt.com"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"We have been supporting developers for over 10 years and always happy to help."}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(76704).A+"",width:"350",height:"122"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://distriqt.com",children:"https://distriqt.com"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://airnativeextensions.com",children:"more native extensions"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},76704:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/distriqt-8a12c7d5668fa470c2792eff60114604.png"},85484:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/unity-import-package-b85c051a845ff354a7a93475c2d8e06a.png"}}]);