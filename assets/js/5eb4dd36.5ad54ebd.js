"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[77646],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>b});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),h=i,b=c["".concat(l,".").concat(h)]||c[h]||d[h]||a;return n?r.createElement(b,s(s({ref:t},u),{},{components:n})):r.createElement(b,s({ref:t},u))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,s=new Array(a);s[0]=h;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[c]="string"==typeof e?e:i,s[1]=o;for(var p=2;p<a;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},41983:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var r=n(87462),i=(n(67294),n(3905));const a={title:"Testing Apple In-App Purchases",sidebar_label:"Testing"},s=void 0,o={unversionedId:"inappbilling/apple/testing",id:"inappbilling/apple/testing",title:"Testing Apple In-App Purchases",description:"iOS Subscriptions",source:"@site/docs/inappbilling/apple/testing.md",sourceDirName:"inappbilling/apple",slug:"/inappbilling/apple/testing",permalink:"/docs/inappbilling/apple/testing",draft:!1,tags:[],version:"current",frontMatter:{title:"Testing Apple In-App Purchases",sidebar_label:"Testing"},sidebar:"inappbilling",previous:{title:"Server Side Verification",permalink:"/docs/inappbilling/apple/server-side-verification"},next:{title:"Troubleshooting",permalink:"/docs/inappbilling/apple/troubleshooting"}},l={},p=[{value:"iOS Subscriptions",id:"ios-subscriptions",level:2},{value:"Duration",id:"duration",level:3},{value:"Suggested Tests",id:"suggested-tests",level:3},{value:"Renewals and Expiration",id:"renewals-and-expiration",level:4},{value:"Restoring after Expiration",id:"restoring-after-expiration",level:4},{value:"Restoring during Subscription",id:"restoring-during-subscription",level:4},{value:"Restoring during Subscription on multiple devices",id:"restoring-during-subscription-on-multiple-devices",level:4}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"ios-subscriptions"},"iOS Subscriptions"),(0,i.kt)("p",null,"When testing subscriptions, you should be aware that they work differently in the sandbox, TestFlight and on the App Store. "),(0,i.kt)("p",null,"In order to test correctly you will need to be aware of these differences."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Importantly be aware that while running your application in sandbox or TestFlight you will not be able to use Touch / Face ID and that you will experience a much large number of password requests. Basically for every AppStore interaction the password dialog will be presented. "),(0,i.kt)("p",{parentName:"blockquote"},"You have to trust that this process is not how your live application will perform once deployed to production in the AppStore."),(0,i.kt)("p",{parentName:"blockquote"},"We often advise developers to make a simple way for beta testers to switch between subscribed and unsubscribed otherwise you may find your subscribed state will get a lot less testing due to the number of password requests required (sometimes up to three to purchase a subscription).")),(0,i.kt)("h3",{id:"duration"},"Duration"),(0,i.kt)("p",null,"Subscription durations are greatly reduced for testing purposes allowing you to quickly test multiple renewals and expirations via TestFlight and in the sandbox."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Subscription Duration"),(0,i.kt)("th",{parentName:"tr",align:null},"Test Duration"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"1 week"),(0,i.kt)("td",{parentName:"tr",align:null},"3 minutes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"1 month"),(0,i.kt)("td",{parentName:"tr",align:null},"5 minutes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"2 months"),(0,i.kt)("td",{parentName:"tr",align:null},"10 minutes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"3 months"),(0,i.kt)("td",{parentName:"tr",align:null},"15 minutes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"6 months"),(0,i.kt)("td",{parentName:"tr",align:null},"30 minutes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"1 year"),(0,i.kt)("td",{parentName:"tr",align:null},"1 hour")))),(0,i.kt)("p",null,"A subscription will automatically renew 6 times per account per 8 hour window, at which point the subscription will expire."),(0,i.kt)("p",null,"There is no way to test cancellation directly as these renewals happen automatically."),(0,i.kt)("p",null,"There is also no way to test subscription management while in the sandbox or TestFlight."),(0,i.kt)("h3",{id:"suggested-tests"},"Suggested Tests"),(0,i.kt)("p",null,"Note that with the notes above about the 8 hour window performing several of these tests within a short period may have unexpected results. You should be aware that every subscription may not renew 6 times within that window. Try to perform tests within the first subscription period (5 minutes for monthly)."),(0,i.kt)("p",null,"We suggest you test the ",(0,i.kt)("strong",{parentName:"p"},"Renewals and Expiration")," first as this is the main test that uses the renewal attempts."),(0,i.kt)("p",null,"Also it is helpful to test with multiple sandbox accounts as these restrictions are per account."),(0,i.kt)("h4",{id:"renewals-and-expiration"},"Renewals and Expiration"),(0,i.kt)("p",null,"This process is to test the the subscription, renewals and expiration process works correctly."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Subscribe to a monthly subscription"),(0,i.kt)("li",{parentName:"ul"},"Close your app and wait 5 minutes"),(0,i.kt)("li",{parentName:"ul"},"Launch your app"),(0,i.kt)("li",{parentName:"ul"},"If a prompt is displayed enter the password")),(0,i.kt)("p",null,"Your application should still be subscribed at this point."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Repeat this process until 35 minutes have passed (6 renewal periods + original subscription period)")),(0,i.kt)("p",null,"Your application should now be in an un-subscribed state."),(0,i.kt)("h4",{id:"restoring-after-expiration"},"Restoring after Expiration"),(0,i.kt)("p",null,"This process is to test whether the restore purchases call correctly reports no active subscriptions after a subscription has expired."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Subscribe to a monthly subscription"),(0,i.kt)("li",{parentName:"ul"},"Perform the ",(0,i.kt)("strong",{parentName:"li"},"Renewals and Expiration")," test to expire the subscription or simply close the app and wait 35 minutes"),(0,i.kt)("li",{parentName:"ul"},"Launch the application (enter password if prompted)"),(0,i.kt)("li",{parentName:"ul"},"Go through your restore purchases process")),(0,i.kt)("p",null,"At this point it should report no active subscriptions were found and your application should be in the un-subscribed state. "),(0,i.kt)("h4",{id:"restoring-during-subscription"},"Restoring during Subscription"),(0,i.kt)("p",null,"This process is to check the restoring of a subscription during an active subscription period."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Subscribe to a monthly subscription"),(0,i.kt)("li",{parentName:"ul"},"Close and uninstall the application"),(0,i.kt)("li",{parentName:"ul"},"Reinstall the application within 5 minutes"),(0,i.kt)("li",{parentName:"ul"},"Go through your restore purchases process")),(0,i.kt)("p",null,"At this point the application should have restored the active subscription and be in the subscribed state."),(0,i.kt)("h4",{id:"restoring-during-subscription-on-multiple-devices"},"Restoring during Subscription on multiple devices"),(0,i.kt)("p",null,"This process is to check the updating of the subscription state across a user's devices."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Subscribe to a monthly subscription"),(0,i.kt)("li",{parentName:"ul"},"Install the application on another device before the expiration"),(0,i.kt)("li",{parentName:"ul"},"Go through your restore purchases process using the same test user as on the first device")),(0,i.kt)("p",null,"The restore process should have picked up the active subscription purchased on the first device and the second device should be in the subscribed state."))}d.isMDXComponent=!0}}]);