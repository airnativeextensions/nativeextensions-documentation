"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[70619],{23491:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/ios_authorisation_dialog-75d480c1e8ed17b58a9816753e11bc75.png"},28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>o});var t=n(96540);const s={},r=t.createContext(s);function a(e){const i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:i},e.children)}},99554:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"idfa/get-advertising-identifier","title":"Get Advertising Identifier","description":"Authorisation","source":"@site/docs/idfa/get-advertising-identifier.md","sourceDirName":"idfa","slug":"/idfa/get-advertising-identifier","permalink":"/docs/idfa/get-advertising-identifier","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Get Advertising Identifier","sidebar_label":"Get Advertising Identifier"},"sidebar":"idfa","previous":{"title":"Add the Extension","permalink":"/docs/idfa/add-the-extension"},"next":{"title":"Migrating","permalink":"/docs/idfa/migrating"}}');var s=n(74848),r=n(28453);const a={title:"Get Advertising Identifier",sidebar_label:"Get Advertising Identifier"},o=void 0,d={},c=[{value:"Authorisation",id:"authorisation",level:2},{value:"Requesting Authorisation",id:"requesting-authorisation",level:3},{value:"Advertising Identifier",id:"advertising-identifier",level:2},{value:"Example",id:"example",level:2}];function l(e){const i={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"authorisation",children:"Authorisation"}),"\n",(0,s.jsx)(i.p,{children:"iOS 14 introduced the App Tracking Transparency authorisation which requires applications to request permission to track a user."}),"\n",(0,s.jsx)(i.p,{children:"You must have authorisation otherwise the IDFA will be invalid."}),"\n",(0,s.jsxs)(i.p,{children:["You can check what the current granted authorisation status is by calling the ",(0,s.jsx)(i.code,{children:"authorisationStatus()"})," function. This will return one of the values defined in the ",(0,s.jsx)(i.code,{children:"TrackingAuthorisationStatus"})," class:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:"var authorisationStatus:String = IDFA.service.authorisationStatus();\n"})}),"\n",(0,s.jsx)(i.p,{children:"For example:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:"switch (IDFA.service.authorisationStatus())\n{\n    case TrackingAuthorisationStatus.NOT_DETERMINED:\n        // Authorisation not yet requested\n        break;\n\n    case TrackingAuthorisationStatus.AUTHORISED:\n        // Authorised to retrieve IDFA\n        break; \n\n    case TrackingAuthorisationStatus.DENIED:\n        // User has denied access\n        break;\n\n    case TrackingAuthorisationStatus.RESTRICTED:\n        // Restricted usage\n        break\n}\n"})}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:["Note: On platforms that do not require user authorisation this will always return ",(0,s.jsx)(i.code,{children:"AUTHORISED"})]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"requesting-authorisation",children:"Requesting Authorisation"}),"\n",(0,s.jsxs)(i.p,{children:["You can request user authorisation by calling the ",(0,s.jsx)(i.code,{children:"requestAuthorisation()"}),' function. If possible, this will present a dialog to request permission from the user. The text in this dialog can be customised through the "usage description" text in your info additions. (See ',(0,s.jsx)(i.a,{href:"/docs/idfa/add-the-extension",children:"Add the Extension"})," for details on setting this value)."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(23491).A+"",width:"370",height:"800"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:"IDFA.service.requestAuthorisation();\n"})}),"\n",(0,s.jsxs)(i.p,{children:["This function will return ",(0,s.jsx)(i.code,{children:"true"})," if the dialog will be presented and ",(0,s.jsx)(i.code,{children:"false"})," in all other situations (eg the dialog has already been displayed or the platform does not require user authorisation)."]}),"\n",(0,s.jsxs)(i.p,{children:["You handle feedback from this dialog either by listening for the ",(0,s.jsx)(i.code,{children:"IDFAAuthorisationEvent.CHANGED"})," event or passing a callback function to the ",(0,s.jsx)(i.code,{children:"requestAuthorisation()"})," function. The callback will always be called even if the dialog isn't presented whereas the event will only be dispatched if the dialog is presented (i.e. if ",(0,s.jsx)(i.code,{children:"requestAuthorisation()"})," returns ",(0,s.jsx)(i.code,{children:"true"})," )."]}),"\n",(0,s.jsx)(i.p,{children:"Using the callback:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:"IDFA.service.requestAuthorisation(\n        function( authorisationStatus:String ):void\n        {\n            trace( authorisationStatus );\n        }\n);\n"})}),"\n",(0,s.jsx)(i.p,{children:"Using the event:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'IDFA.service.addEventListener( IDFAAuthorisationEvent.CHANGED, authorisationChangedHandler );\nvar success:Boolean = IDFA.service.requestAuthorisation();\n\nfunction authorisationChangedHandler( event:IDFAAuthorisationEvent ):void\n{\n    trace( "authorisationChangedHandler: " + event.authorisationStatus );\n}\n'})}),"\n",(0,s.jsx)(i.h2,{id:"advertising-identifier",children:"Advertising Identifier"}),"\n",(0,s.jsx)(i.p,{children:"The advertising identifier is a user-specific, unique, resettable ID for advertising, provided by Google Play services and the iOS SDK. It gives users better controls and provides developers with a simple, standard system to continue to monetize your apps. It is an anonymous identifier for advertising purposes and enables users to reset their identifier or opt out of interest-based ads within Google Play and iOS apps."}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"iOS"}),": this is the value of the ",(0,s.jsx)(i.code,{children:"ASIdentifierManager"})," ",(0,s.jsx)(i.code,{children:"advertisingIdentifier"})," property - ",(0,s.jsx)("a",{href:"http://developer.apple.com/documentation/adsupport/asidentifiermanager",children:"documentation"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Android"}),": this is the value of the Google Play Services advertising ID - ",(0,s.jsx)("a",{href:"http://developers.google.com/android/reference/com/google/android/gms/ads/identifier/AdvertisingIdClient",children:"documentation"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"The user has the ability to limit ad tracking on both iOS and Android through the device settings. This value can also be retrieved so that you can respect this value in any tracking your application performs."}),"\n",(0,s.jsx)(i.p,{children:"Retrieving the advertising identifier or identifier for advertising (IDFA) is an asynchronous process."}),"\n",(0,s.jsxs)(i.p,{children:["You will need to call ",(0,s.jsx)(i.code,{children:"getIDFA()"})," to start the call and listen for the ",(0,s.jsx)(i.code,{children:"IDFAEvent.COMPLETE"})," event. This event contains the current advertisting identifier and whether the user has limited ad tracking."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'IDFA.service.addEventListener( IDFAEvent.COMPLETE, idfaCompleteHandler );\nIDFA.service.getIDFA();\n\nfunction idfaCompleteHandler( event:IDFAEvent ):void\n{\n    trace( "identifier: " + event.identifier );\n    trace( "isLimitAdTrackingEnabled: " + event.isLimitAdTrackingEnabled );\n}\n'})}),"\n",(0,s.jsx)(i.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(i.p,{children:"The following is a simple example of combining the authorisation request and IDFA retrieval:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'IDFA.service.addEventListener( IDFAEvent.COMPLETE, idfaCompleteHandler );\n\nIDFA.service.requestAuthorisation(\n        function ( status:String ):void \n        {\n            if (status == TrackingAuthorisationStatus.AUTHORISED)\n            {\n                IDFA.service.getIDFA();\n            }\n        }\n);\n\nfunction idfaCompleteHandler( event:IDFAEvent ):void\n{\n\ttrace( "identifier: " + event.identifier );\n    trace( "isLimitAdTrackingEnabled: " + event.isLimitAdTrackingEnabled );\n}\n'})})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);