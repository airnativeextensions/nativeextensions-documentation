<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Firestore - Add Data | air native extensions</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/firebase/firestore/add-data"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Firestore - Add Data | air native extensions"><meta data-react-helmet="true" name="description" content="Add data"><meta data-react-helmet="true" property="og:description" content="Add data"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/firebase/firestore/add-data"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/firebase/firestore/add-data" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/firebase/firestore/add-data" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f49ec264.css">
<link rel="preload" href="/assets/js/runtime~main.20c348f8.js" as="script">
<link rel="preload" href="/assets/js/main.9f6f4e02.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--light_3ouy navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--dark_3zJb navbar__logo"><b class="navbar__title">AIR Native Extensions</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2ySP react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_2iFN"> </span></div><div class="react-toggle-track-x"><span class="toggle_2iFN"> </span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3zOJ"><button class="clean-btn backToTopButton_DkI0" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_G8MK"><div class="sidebar_1tWv"><nav class="menu thin-scrollbar menu_1Iah menuWithAnnouncementBar_3acx"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/firebase/">Firebase</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setup Firebase for your application</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core / Analytics</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Develop</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Authentication</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Realtime Database</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Cloud Firestore</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/firestore/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/firestore/add-the-extension">Add the extension</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Add and manage data</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a href="https://firebase.google.com/docs/firestore/data-model" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Data model (external)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://firebase.google.com/docs/firestore/manage-data/structure-data" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Structure data (external)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://firebase.google.com/docs/firestore/manage-data/data-types" target="_blank" rel="noopener noreferrer" class="menu__link" tabindex="0"><span>Data types (external)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/firebase/firestore/add-data">Add Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/firestore/transactions-and-batched-writes">Transactions and batched writes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/firestore/delete-data">Delete data</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Query data</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Security</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/firestore/enable-offline-data">Enable offline data</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Further reading</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Storage</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Quality</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Crashlytics</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Performance Monitoring</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Grow</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Cloud Messaging</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Remote Config</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Dynamic Links</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Migration Guides</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Other</a></li></ul></nav></div></aside><main class="docMainContainer_3Zec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><div class="tocCollapsible_3moT tocMobile_2bxg"><button type="button" class="clean-btn tocCollapsibleButton_3OYu">On this page</button></div><div class="markdown"><header><h1>Firestore - Add Data</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="add-data"></a>Add data<a class="hash-link" href="#add-data" title="Direct link to heading">#</a></h2><p>Cloud Firestore stores data in Documents, which are stored in Collections. Cloud Firestore creates collections and documents implicitly the first time you add data to the document. You do not need to explicitly create collections or documents.</p><p>There are several ways to write data to Cloud Firestore:</p><ul><li>Set the data of a document within a collection, explicitly specifying a document identifier.</li><li>Add a new document to a collection. In this case, Cloud Firestore automatically generates the document identifier.</li><li>Create an empty document with an automatically generated identifier, and assign data to it later.</li></ul><p>This guide explains how to use the <code>setDocument()</code>, <code>add()</code>, or <code>update()</code> methods to write data to individual documents in Cloud Firestore. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="set-a-document"></a>Set a document<a class="hash-link" href="#set-a-document" title="Direct link to heading">#</a></h3><p>To create or overwrite a single document, use the <code>setDocument()</code> method:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var city:Object = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                name: &quot;Los Angeles&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                state: &quot;CA&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                country:  &quot;USA&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var document:DocumentReference = FirebaseFirestore.service.collection( &quot;cities&quot; ).document( &quot;LA&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.addEventListener( DocumentReferenceEvent.SET_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.addEventListener( DocumentReferenceEvent.SET_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.setDocument( city );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>The <code>setDocument()</code> call will dispatch one of two events:</p><ul><li><code>DocumentReferenceEvent.SET_SUCCESS</code>: The document has been correctly set with the new data</li><li><code>DocumentReferenceEvent.SET_ERROR</code>: There was an error setting the data to the document</li></ul><p>You should ensure you remove the event listeners at this point to ensure the extension can correctly clean up memory usage of unused document references.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">function successHandler( event:DocumentReferenceEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.SET_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.SET_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;Set Document: Success&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function errorHandler( event:DocumentReferenceEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.SET_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.SET_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;Get Document Error: &quot; + event.message );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Alternatively you can add a success and failure listener directly:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">document.setDocument( city )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addOnSuccessListener( function( snapshot:DocumentSnapshot ):void {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Document was successfully set</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addOnFailureListener( function( message:String ):void {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Error occurred</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>If the document does not exist, it will be created. If the document does exist, its contents will be overwritten with the newly provided data, unless you specify that the data should be merged into the existing document, as follows:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">document.setDocument( city, SetOptions.merge() );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>If you&#x27;re not sure whether the document exists, pass the option to merge the new data with any existing document to avoid overwriting entire documents.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="data-types"></a>Data types<a class="hash-link" href="#data-types" title="Direct link to heading">#</a></h3><p>Cloud Firestore lets you write a variety of data types inside a document, including strings, booleans, numbers, dates, null, and nested arrays and objects. Cloud Firestore always stores numbers as doubles, regardless of what type of number you use in your code.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var data:Object = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    stringExample: &quot;Hello world!&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    booleanExample: true,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    numberExample: 3.14159265,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    dateExample: new Date(),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    nullExample: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    arrayExample: [ 1, 2, 3 ],</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    nestedData: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        a: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        b: true</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_1iPN" id="blob"></a>Blob<a class="hash-link" href="#blob" title="Direct link to heading">#</a></h4><p>You can use a <code>Blob</code> (<code>com.distriqt.extension.firebase.firestore.Blob</code>) to add <code>ByteArray</code> style data to your documents.</p><p>The <code>Blob</code> data type inherits from a <code>ByteArray</code> and handles conversion to and from the Firestore Blob format. So you can simply use the standard <code>ByteArray</code> functions to store data and then add it to your document.</p><p>For example, construct a <code>Blob</code> and write 2 bytes to it:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var bytes:Blob = new Blob();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bytes.writeByte(0xa0);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bytes.writeByte(0x7f);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Then use this as a value in your data object and pass it to <code>setDocument()</code>:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var data:Object = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    title: &quot;Some data&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    byteData: bytes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.setDocument( data );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="custom-objects"></a>Custom objects<a class="hash-link" href="#custom-objects" title="Direct link to heading">#</a></h3><p>Not currently supported</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="add-a-document"></a>Add a document<a class="hash-link" href="#add-a-document" title="Direct link to heading">#</a></h3><p>When you use <code>setDocument()</code> to create a document, you must specify an ID for the document to create. For example:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FirebaseFirestore.service.collection( &quot;cities&quot; ).document( &quot;LA&quot; ).setDocument(data);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>But sometimes there isn&#x27;t a meaningful ID for the document, and it&#x27;s more convenient to let Cloud Firestore auto-generate an ID for you. You can do this by calling <code>add()</code>:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var collection:CollectionReference = FirebaseFirestore.service.collection( &quot;cities&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">collection.addEventListener( CollectionReferenceEvent.ADD_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">collection.addEventListener( CollectionReferenceEvent.ADD_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">collection.add( data );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">function successHandler( event:CollectionReferenceEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( CollectionReferenceEvent.ADD_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( CollectionReferenceEvent.ADD_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;Add Success: document.getId()   = &quot; + event.document.getId() );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;Add Success: document.getPath() = &quot; + event.document.getPath() );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function errorHandler( event:CollectionReferenceEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( CollectionReferenceEvent.ADD_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( CollectionReferenceEvent.ADD_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;Add Error: &quot; + event.message );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>In some cases, it can be useful to create a document reference with an auto-generated ID, then use the reference later. For this use case, you can call <code>document()</code>:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var document:DocumentReference = FirebaseFirestore.service.collection( &quot;cities&quot; ).document();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... later</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.set( data );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Behind the scenes, <code>.add(...)</code> and <code>.document().setDocument(...)</code> are completely equivalent, so you can use whichever is more convenient.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="update-a-document"></a>Update a document<a class="hash-link" href="#update-a-document" title="Direct link to heading">#</a></h3><p>To update some fields of a document without overwriting the entire document, use the <code>update()</code> method:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var changes:Object = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                population:  4018000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span></span><span class="token-line" style="color:#393A34"><span class="token plain">var document:DocumentReference = FirebaseFirestore.service.collection( &quot;cities&quot; ).document( &quot;LA&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.addEventListener( DocumentReferenceEvent.UPDATE_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.addEventListener( DocumentReferenceEvent.UPDATE_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.update( changes );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function successHandler( event:DocumentReferenceEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.UPDATE_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.UPDATE_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;Update Success&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function errorHandler( event:DocumentReferenceEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.UPDATE_SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event.currentTarget.removeEventListener( DocumentReferenceEvent.UPDATE_ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;Update Error: &quot; + event.message );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>You can also add server timestamps to specific fields in your documents, to track when an update was received by the server:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var changes:Object = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                population:  4018000,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                timestamp: FieldValue.serverTimestamp()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var document:DocumentReference = FirebaseFirestore.service.collection( &quot;cities&quot; ).document( &quot;LA&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.update( changes );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/firebase/firestore/add-the-extension"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Add the extension</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/firebase/firestore/transactions-and-batched-writes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transactions and batched writes »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#add-data" class="table-of-contents__link">Add data</a><ul><li><a href="#set-a-document" class="table-of-contents__link">Set a document</a></li><li><a href="#data-types" class="table-of-contents__link">Data types</a></li><li><a href="#custom-objects" class="table-of-contents__link">Custom objects</a></li><li><a href="#add-a-document" class="table-of-contents__link">Add a document</a></li><li><a href="#update-a-document" class="table-of-contents__link">Update a document</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>AIR discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>starling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>stack overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>license<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2021 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.20c348f8.js"></script>
<script src="/assets/js/main.9f6f4e02.js"></script>
</body>
</html>