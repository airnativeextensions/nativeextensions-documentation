(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[8393],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return c},kt:function(){return h}});var i=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=i.createContext({}),s=function(e){var n=i.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=s(e.components);return i.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},d=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(t),h=r,g=d["".concat(p,".").concat(h)]||d[h]||u[h]||o;return t?i.createElement(g,a(a({ref:n},c),{},{components:t})):i.createElement(g,a({ref:n},c))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,a=new Array(o);a[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var s=2;s<o;s++)a[s]=t[s];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}d.displayName="MDXCreateElement"},80189:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return a},metadata:function(){return l},toc:function(){return p},default:function(){return c}});var i=t(22122),r=t(19756),o=(t(67294),t(3905)),a={title:"Login with Apple Id",sidebar_label:"Login with Apple Id"},l={unversionedId:"applesignin/login-with-apple-id",id:"applesignin/login-with-apple-id",isDocsHomePage:!1,title:"Login with Apple Id",description:"Login",source:"@site/docs/applesignin/login-with-apple-id.md",sourceDirName:"applesignin",slug:"/applesignin/login-with-apple-id",permalink:"/docs/applesignin/login-with-apple-id",version:"current",sidebar_label:"Login with Apple Id",frontMatter:{title:"Login with Apple Id",sidebar_label:"Login with Apple Id"},sidebar:"applesignin",previous:{title:"Setup Auth Server",permalink:"/docs/applesignin/setup-auth-server"},next:{title:"Get User Credentials",permalink:"/docs/applesignin/get-user-credentials"}},p=[{value:"Login",id:"login",children:[]},{value:"Options",id:"options",children:[{value:"iOS",id:"ios",children:[]},{value:"Android",id:"android",children:[]}]},{value:"Events",id:"events",children:[]},{value:"User Revoke",id:"user-revoke",children:[]},{value:"Example",id:"example",children:[]},{value:"Android",id:"android-1",children:[]}],s={toc:p};function c(e){var n=e.components,t=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,i.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"login"},"Login"),(0,o.kt)("p",null,"To initiate login call the ",(0,o.kt)("inlineCode",{parentName:"p"},"loginWithAppleId()")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"AppleSignIn.instance.loginWithAppleId();\n")),(0,o.kt)("p",null,'This will initiate the sign in process and present the "Sign In with Apple" UI.'),(0,o.kt)("h2",{id:"options"},"Options"),(0,o.kt)("p",null,"You can pass a few options to the login function allowing you to control some aspects of the process. Mainly whether the email and full name of the user should be requested."),(0,o.kt)("p",null,"This is done by passing an instance of the ",(0,o.kt)("inlineCode",{parentName:"p"},"AppleSignInOptions")," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"loginWithAppleId()")," function."),(0,o.kt)("p",null,"For example, to request both the email and full name scopes:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var options:AppleSignInOptions = new AppleSignInOptions()\n        .setRequestedScopes([\n                AppleSignInScopes.FULL_NAME,\n                AppleSignInScopes.EMAIL\n                            ]);\n\nAppleSignIn.instance.loginWithAppleId( options );\n")),(0,o.kt)("h3",{id:"ios"},"iOS"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Important: To sign in with an Apple account, users must:"),(0,o.kt)("ul",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ul"},"Have an Apple ID with two-factor authentication (2FA) enabled."),(0,o.kt)("li",{parentName:"ul"},"Be signed in to iCloud on an Apple device.")),(0,o.kt)("p",{parentName:"blockquote"},"See ",(0,o.kt)("a",{parentName:"p",href:"https://support.apple.com/en-us/HT210318"},"How to use Sign in with Apple"),". You will also need to meet these requirements to test your integration with Sign In with Apple.")),(0,o.kt)("h3",{id:"android"},"Android"),(0,o.kt)("p",null,"If you are deploying to Android as well then you will need to provide your Service ID (client id) and redirect url in the options."),(0,o.kt)("p",null,"For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'var options:AppleSignInOptions = new AppleSignInOptions()\n        .setRequestedScopes([\n                AppleSignInScopes.FULL_NAME,\n                AppleSignInScopes.EMAIL\n                            ])\n        .setClientId( "com.distriqt.test.applesignin" )\n        .setRedirectUrl( "https://auth.distriqt.com/appleoauth" )\n;\n')),(0,o.kt)("p",null,"The client id is the identifier used to create your ",(0,o.kt)("strong",{parentName:"p"},"Service ID")," in the apple developer console."),(0,o.kt)("p",null,"The redirect url is one of the urls you entered when creating your ",(0,o.kt)("strong",{parentName:"p"},"Service ID")," that you intend to use for this login request."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"These values are ignored on iOS.")),(0,o.kt)("h2",{id:"events"},"Events"),(0,o.kt)("p",null,"During the login process you will receive one of the following events:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AppleSignInEvent.SUCCESS"),": Upon successfully authentication;"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AppleSignInErrorEvent.ERROR"),": If an error occurred during login;")),(0,o.kt)("p",null,"You should listen for both of these events and handle accordingly."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'AppleSignIn.instance.addEventListener( AppleSignInErrorEvent.ERROR, errorHandler );\nAppleSignIn.instance.addEventListener( AppleSignInEvent.SUCCESS, successHandler );\n\nfunction successHandler( event:AppleSignInEvent ):void\n{\n    trace( "user: " + event.appleIdCredential.user );\n    trace( "identityToken: " + event.appleIdCredential.identityToken );\n    trace( "authorizationCode: " + event.appleIdCredential.authorizationCode );\n    trace( "raw Nonce: " + event.rawNonce );\n}\n\nfunction errorHandler( event:AppleSignInErrorEvent ):void\n{\n    trace( "errorHandler(): [" + event.errorID + "] :: " + event.text  );\n}\n')),(0,o.kt)("p",null,'You can access the "nonce" used to initiate this authorisation request in the success handler via the ',(0,o.kt)("inlineCode",{parentName:"p"},"event.rawNonce")," property. This can be used to further authenticate with services such as Firebase. "),(0,o.kt)("h2",{id:"user-revoke"},"User Revoke"),(0,o.kt)("p",null,"The user can revoke the authentication through their apple account. You can listen for a revoke event which will be dispatched if the authentication is ever revoked by the user:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"AppleSignIn.instance.addEventListener( AppleSignInEvent.REVOKED, revokedHandler );\n\n\nfunction revokedHandler( event:AppleSignInEvent ):void\n{\n    // User revoked authentication\n}\n")),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},'AppleSignIn.instance.addEventListener( AppleSignInErrorEvent.ERROR, errorHandler );\nAppleSignIn.instance.addEventListener( AppleSignInEvent.SUCCESS, successHandler );\n\nvar options:AppleSignInOptions = new AppleSignInOptions()\n        .setRequestedScopes([\n                AppleSignInScopes.FULL_NAME,\n                AppleSignInScopes.EMAIL\n                            ])\n        .setClientId( "com.distriqt.test.applesignin" )\n        .setRedirectUrl( "https://auth.distriqt.com/appleoauth" );\n\nAppleSignIn.instance.loginWithAppleId( options );\n\n\n\nfunction successHandler( event:AppleSignInEvent ):void\n{\n    trace( "user: " + event.appleIdCredential.user );\n    trace( "identityToken: " + event.appleIdCredential.identityToken );\n    trace( "authorizationCode: " + event.appleIdCredential.authorizationCode );\n}\n\nfunction errorHandler( event:AppleSignInErrorEvent ):void\n{\n    trace( "errorHandler(): [" + event.errorID + "] :: " + event.text  );\n}\n')),(0,o.kt)("h2",{id:"android-1"},"Android"),(0,o.kt)("p",null,"With Android the process uses a webview and the OAuth web login."),(0,o.kt)("p",null,"In order to successfully complete this process you need to setup a server that will exchange the authorisation code for the identity token and user."),(0,o.kt)("p",null,"There are a few differences with this process that you should be aware of as it will affect how you implement login on Android."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"User's name components are only returned the first time they log in.")))}c.isMDXComponent=!0}}]);