<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Central Manager | air native extensions</title><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/bluetoothle/central-manager"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Central Manager | air native extensions"><meta data-react-helmet="true" name="description" content="Acting as a Central"><meta data-react-helmet="true" property="og:description" content="Acting as a Central"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/bluetoothle/central-manager"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/bluetoothle/central-manager" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/bluetoothle/central-manager" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.95805f25.css">
<link rel="preload" href="/assets/js/runtime~main.8205d1b9.js" as="script">
<link rel="preload" href="/assets/js/main.3ee0c167.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AIR Native Extensions</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT"> </span></div><div class="react-toggle-track-x"><span class="toggle_71bT"> </span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AIR Native Extensions</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/news/">News</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bluetoothle">BluetoothLE</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bluetoothle/add-the-extension">Add the Extension</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bluetoothle/request-authorisation">Request Authorisation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Usage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bluetoothle/adapter-state">Adapter State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bluetoothle/centrals-and-peripherals">Centrals and Peripherals</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/bluetoothle/central-manager">Central Manager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bluetoothle/peripheral-manager">Peripheral Manager</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Help</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bluetoothle/migrating-to-androidx">Migrating to AndroidX</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bluetoothle/changelog">changelog</a></li><li class="menu__list-item"><a href="https://docs.airnativeextensions.com/asdocs/bluetoothle/" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">asdocs</a></li><li class="menu__list-item"><a href="http://github.com/distriqt/ANE-BluetoothLE/issues/new" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Contact Support</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Central Manager</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="acting-as-a-central"></a>Acting as a Central<a class="hash-link" href="#acting-as-a-central" title="Direct link to heading">#</a></h2><p>In this section we describe how to operate as a central and scan, read, write and subscribe to peripherals.</p><p>Here you will be shown how to:</p><ul><li><a href="#discovering-peripherals">Discovering Peripherals</a></li><li><a href="#connecting-to-a-peripheral">Connecting to a Peripheral</a></li><li><a href="#discovering-services-and-characteristics-of-a-connected-peripheral">Discovering Services and Characteristics of a Connected Peripheral</a></li><li><a href="#retrieving-the-value-of-a-characteristic">Retrieving the Value of a Characteristic</a></li><li><a href="#subscribing-to-a-characteristic">Subscribing to a Characteristic</a></li><li><a href="#unsubscribing-from-a-characteristic">Unsubscribing from a Characteristic</a></li><li><a href="#writing-the-value-of-a-characteristic">Writing the Value of a Characteristic</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="discovering-peripherals"></a>Discovering Peripherals<a class="hash-link" href="#discovering-peripherals" title="Direct link to heading">#</a></h3><p>The most common first task for a central is to scan for advertising peripherals.
As advertising is the main way peripherals announce their presence. You can discover
any advertising peripherals by starting a scan using the <code>scanForPeripherals</code> function.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">BluetoothLE.service.centralManager.addEventListener( PeripheralEvent.DISCOVERED, central_peripheralDiscoveredHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">if (!BluetoothLE.service.centralManager.scanForPeripherals())</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // There was an error starting to scan, check the state of the adapter!</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then when peripherals are discovered you will receive the <code>PeripheralEvent.DISCOVERED</code> event:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">private function central_peripheralDiscoveredHandler( event:PeripheralEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // event.peripheral will contain a Peripheral object with information about the Peripheral</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral discovered: &quot;+ event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Most likely in a real world situation you would provide the first parameter to the
<code>scanForPeripherals</code> function. This first parameter is an array of service uuids which
should be scanned for as generally you are wanting to discover devices with a certain feature
/ service. If you do not provide it (as in the above example) then all discovered peripherals
will be returned.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="connecting-to-a-peripheral"></a>Connecting to a Peripheral<a class="hash-link" href="#connecting-to-a-peripheral" title="Direct link to heading">#</a></h3><p>Once you have discovered a peripheral and made the decision to interact with it you will need
to connect to the peripheral. When connecting you need to use an object retrieved through a
discovered event, passing it to the <code>BluetoothLE.service.centralManager.connect</code> function.</p><p>The connect function may then cause several events to be dispatched:</p><ul><li><code>PeripheralEvent.CONNECT</code>: when connection was successfully made</li><li><code>PeripheralEvent.CONNECT_FAIL</code>: when the connection failed</li><li><code>PeripheralEvent.DISCONNECT</code>: this may be dispatched later (after a connect event) if the connection is left idle.</li></ul><p>For example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">var activePeripheral:Peripheral = null;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">BluetoothLE.service.centralManager.addEventListener( PeripheralEvent.DISCOVERED, central_peripheralDiscoveredHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">BluetoothLE.service.centralManager.addEventListener( PeripheralEvent.CONNECT, central_peripheralConnectHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">BluetoothLE.service.centralManager.addEventListener( PeripheralEvent.CONNECT_FAIL, central_peripheralConnectFailHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">BluetoothLE.service.centralManager.addEventListener( PeripheralEvent.DISCONNECT, central_peripheralDisconnectHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">BluetoothLE.service.centralManager.scanForPeripherals();</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function central_peripheralDiscoveredHandler( event:PeripheralEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;connecting to peripheral: &quot;+ event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // You should make some decision about whether this peripheral is the one you wish to connect to</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    //  either store the peripheral and ask the user or determine by services available </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // For this example we are just going to blindly connect to every discovered peripheral</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    BluetoothLE.service.centralManager.connect( event.peripheral );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function central_peripheralConnectHandler( event:PeripheralEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral connected: &quot;+ event.peripheral.toString() ); </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // Store the peripheral for further interaction</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    activePeripheral = event.peripheral;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function central_peripheralConnectFailHandler( event:PeripheralEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral connect fail: &quot;+ event.peripheral.name );    </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    activePeripheral = null;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function central_peripheralDisconnectHandler( event:PeripheralEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral disconnect: &quot;+ event.peripheral.name );  </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    activePeripheral = null;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="discovering-services-and-characteristics-of-a-connected-peripheral"></a>Discovering Services and Characteristics of a Connected Peripheral<a class="hash-link" href="#discovering-services-and-characteristics-of-a-connected-peripheral" title="Direct link to heading">#</a></h3><p>After you have established a connection to a peripheral, you can begin to explore its data.
The first step in exploring what a peripheral has to offer is discovering its available services.
To do this you add listeners to the <code>Peripheral</code> object and call <code>discoverServices</code>.</p><p>Similar to <code>scanForPeripherals</code> the discovery process can take an array of uuids to limit the
services returned to be services of interest to your application. The following example uses
the default of an empty array to discover all avaliable services of the peripheral</p><p>When this process completes successfully the <code>PeripheralEvent.DISCOVER_SERVICES</code> will be
dispatched with a Peripheral object that contains a populated <code>Peripheral.services</code> array of
<code>Service</code> objects.</p><p>Each service contains a list of <code>Characteristic</code>s. You can consider a <code>Characteristic</code> as a data value,
which has properties, permissions and a value represented as a <code>ByteArray</code>. Similarly to services
you can discover the Characteristics of a <code>Service</code> on a <code>Peripheral</code> by calling the
<code>discoverCharacteristics</code> function. This function similarly dispatches the
<code>PeripheralEvent.DISCOVER_CHARACTERISTICS</code> event when completed.</p><p>In the following snippet we discover all of the available services on a previously connected
Peripheral and then proceed to discover the characteristics of the first service.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">var peripheral:Peripheral = ...; // This snippet assumes you have a connected &#x27;peripheral&#x27; object.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var service:Service = null;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( PeripheralEvent.DISCOVER_SERVICES, peripheral_discoverServicesHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( PeripheralEvent.DISCOVER_CHARACTERISTICS, peripheral_discoverCharacteristicsHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.discoverServices();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then in the event handler lets iterate through the services and discover the characteristics of
the first available Service.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_discoverServicesHandler( event:PeripheralEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral discover services: &quot; + event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    if (event.peripheral.services.length &gt; 0)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        for each (var service:Service in event.peripheral.services)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            trace( &quot;service: &quot;+ service.uuid );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // As an example discover the characteristics of the first available service</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        peripheral.discoverCharacteristics( peripheral.services[0] );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_discoverCharacteristicsHandler( event:PeripheralEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral discover characteristics: &quot; + event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    for each (var service:Service in event.peripheral.services)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        trace( &quot;service: &quot;+ service.uuid );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        for each (var ch:Characteristic in service.characteristics)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            trace( &quot;characteristic: &quot;+ch.uuid );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="retrieving-the-value-of-a-characteristic"></a>Retrieving the Value of a Characteristic<a class="hash-link" href="#retrieving-the-value-of-a-characteristic" title="Direct link to heading">#</a></h3><p>A characteristic contains a single value that represents more information about a peripheral&#x27;s service.
For example, a temperature measurement characteristic of a health thermometer service may have a value
that indicates a temperature in Celsius. You can retrieve the value of a characteristic by reading it
directly or by subscribing to it.</p><p>After you have found a characteristic of a service that you are interested in, you can read the
characteristic&#x27;s value by calling the <code>readValueForCharacteristic</code> and waiting for the
<code>CharacteristicEvent.UPDATE</code> event.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">var peripheral:Peripheral = ...; // Previously connected Peripheral</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var characteristic:Characteristic = ...; // Discovered Characteristic of interest</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.UPDATE, peripheral_characteristic_updatedHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.UPDATE_ERROR, peripheral_characteristic_errorHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.readValueForCharacteristic( characteristic );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_updatedHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic updated: &quot; + event.characteristic.uuid );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;value=&quot;+ event.characteristic.value.readUTFBytes( event.characteristic.value.length )  );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_errorHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic error: [&quot; + event.errorCode +&quot;] &quot;+event.error );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="subscribing-to-a-characteristic"></a>Subscribing to a Characteristic<a class="hash-link" href="#subscribing-to-a-characteristic" title="Direct link to heading">#</a></h3><p>Though reading the value of a characteristic using the <code>readValueForCharacteristic</code> method can be
effective for some use cases, it is not the most efficient way to retrieve a value that changes.
For most characteristic values that change—for instance, your heart rate at any given time — you
should retrieve them by subscribing to them. When you subscribe to a characteristic&#x27;s value, you
receive an event from the peripheral when the value changes.</p><p>You can subscribe to the value of a characteristic that you are interested in by calling the
<code>subscribeToCharacteristic</code> function and passing the characteristic you are interested in. When you
attempt to subscribe to a characteristic&#x27;s value, the <code>CharacteristicEvent.SUBSCRIBE</code> event will
be dispatched indicating you will now receive <code>CharacteristicEvent.UPDATE</code> events whenever the
value of the Characteristic changes. If the subscription request fails for any reason the
<code>CharacteristicEvent.SUBSCRIBE_ERROR</code> will be dispatched.</p><p>After you have successfully subscribed to a characteristic&#x27;s value, the peripheral device
notifies your app when the value has changed. Each time the value changes the
<code>CharacteristicEvent.UPDATE</code> event will be dispatched.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">var peripheral:Peripheral = ...; // Previously connected Peripheral</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var characteristic:Characteristic = ...; // Discovered Characteristic of interest</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.UPDATE, peripheral_characteristic_updatedHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.UPDATE_ERROR, peripheral_characteristic_errorHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.SUBSCRIBE, peripheral_characteristic_subscribeHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.SUBSCRIBE_ERROR, peripheral_characteristic_subscribeErrorHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.UNSUBSCRIBE, peripheral_characteristic_unsubscribeHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">if (!peripheral.subscribeToCharacteristic( characteristic ))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // error starting subscription process </span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Once subscribed you will start receiving update events:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_updatedHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic updated: &quot; + event.characteristic.uuid );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;value=&quot;+ event.characteristic.value.readUTFBytes( event.characteristic.value.length )  );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_errorHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic error: [&quot; + event.errorCode +&quot;] &quot;+event.error );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_subscribeHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic subscribe: &quot; + event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}       </span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_subscribeErrorHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic error: [&quot; + event.errorCode +&quot;] &quot;+event.error );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}       </span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_unsubscribeHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic unsubscribe: &quot; + event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unsubscribing-from-a-characteristic"></a>Unsubscribing from a Characteristic<a class="hash-link" href="#unsubscribing-from-a-characteristic" title="Direct link to heading">#</a></h3><p>If you wish to later unsubscribe from a characteristic you can call the <code>unsubscribeToCharacteristic</code>
with the same <code>Characteristic</code> and the <code>CharacteristicEvent.UNSUBSCRIBE</code> will be dispatched when
this is completed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.UNSUBSCRIBE, peripheral_characteristic_unsubscribeHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.unsubscribeToCharacteristic( characteristic );</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_unsubscribeHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic unsubscribe: &quot; + event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="writing-the-value-of-a-characteristic"></a>Writing the Value of a Characteristic<a class="hash-link" href="#writing-the-value-of-a-characteristic" title="Direct link to heading">#</a></h3><p>For some use cases, it makes sense to write the value of a characteristic. If a characteristic&#x27;s
value is writeable, you can write its value with some data (a ByteArray) by calling
<code>writeValueForCharacteristic</code> function on a <code>Peripheral</code> and providing the <code>Characteristic</code> to
write and the new value.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">// These variables for peripheral and characteristic should have </span></div><div class="token-line" style="color:#393A34"><span class="token plain">// previously been obtained through scanning and discovery functionality </span></div><div class="token-line" style="color:#393A34"><span class="token plain">var peripheral:Peripheral = ...;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var characteristic:Characteristic = ...;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.WRITE_SUCCESS, peripheral_characteristic_writeHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">peripheral.addEventListener( CharacteristicEvent.WRITE_ERROR, peripheral_characteristic_writeErrorHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span></div><div class="token-line" style="color:#393A34"><span class="token plain">// Some data to write</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var value:ByteArray = new ByteArray();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">value.writeUTFBytes( &quot;some_data_value&quot; );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var success:Boolean = peripheral.writeValueForCharacteristic( characteristic, value );</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You will receive either a success or an error event:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_writeHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic write: &quot; + event.peripheral.name );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">private function peripheral_characteristic_writeErrorHandler( event:CharacteristicEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;peripheral characteristic error: [&quot; + event.errorCode +&quot;] &quot;+event.error );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}   </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Characteristics may only allow certain types of writes to be performed on their value.
To determine which types of writes are permitted to a characteristic&#x27;s value, you access
the relevant properties of the <code>Characteristic.properties</code> array. The possible values are
defined in the <code>Characteristic</code> class <code>PROPERTY_*</code> definitions.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/bluetoothle/centrals-and-peripherals"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Centrals and Peripherals</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/bluetoothle/peripheral-manager"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Peripheral Manager »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#acting-as-a-central" class="table-of-contents__link">Acting as a Central</a><ul><li><a href="#discovering-peripherals" class="table-of-contents__link">Discovering Peripherals</a></li><li><a href="#connecting-to-a-peripheral" class="table-of-contents__link">Connecting to a Peripheral</a></li><li><a href="#discovering-services-and-characteristics-of-a-connected-peripheral" class="table-of-contents__link">Discovering Services and Characteristics of a Connected Peripheral</a></li><li><a href="#retrieving-the-value-of-a-characteristic" class="table-of-contents__link">Retrieving the Value of a Characteristic</a></li><li><a href="#subscribing-to-a-characteristic" class="table-of-contents__link">Subscribing to a Characteristic</a></li><li><a href="#unsubscribing-from-a-characteristic" class="table-of-contents__link">Unsubscribing from a Characteristic</a></li><li><a href="#writing-the-value-of-a-characteristic" class="table-of-contents__link">Writing the Value of a Characteristic</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">twitter</a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">AIR discussions</a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">starling</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">stack overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">privacy</a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item">license</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2021 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.8205d1b9.js"></script>
<script src="/assets/js/main.3ee0c167.js"></script>
</body>
</html>