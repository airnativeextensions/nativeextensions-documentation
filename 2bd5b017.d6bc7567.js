(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{181:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return c}));var r=n(2),a=n(6),i=(n(0),n(779)),o={title:"Android",sidebar_label:"Android"},s={unversionedId:"appgroupdefaults/android",id:"appgroupdefaults/android",isDocsHomePage:!1,title:"Android",description:"Android Setup",source:"@site/docs/appgroupdefaults/android.md",slug:"/appgroupdefaults/android",permalink:"/docs/appgroupdefaults/android",version:"current",sidebar_label:"Android",sidebar:"appgroupdefaults",previous:{title:"iOS",permalink:"/docs/appgroupdefaults/ios"},next:{title:"Usage",permalink:"/docs/appgroupdefaults/usage"}},p=[{value:"Android Setup",id:"android-setup",children:[{value:"Provider Method",id:"provider-method",children:[]},{value:"File Method",id:"file-method",children:[]}]}],d={rightToc:p};function c(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"android-setup"},"Android Setup"),Object(i.b)("p",null,"There are two methods available on Android to share settings between applications."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Provider Method - uses a content provider and broadcast receiver to share variables"),Object(i.b)("li",{parentName:"ul"},"File Method - uses an encrypted file to share variables. ")),Object(i.b)("blockquote",null,Object(i.b)("h3",Object(r.a)({parentName:"blockquote"},{id:"unity"}),"Unity"),Object(i.b)("p",{parentName:"blockquote"},"For unity these additions should be placed in your applications ",Object(i.b)("inlineCode",{parentName:"p"},"AndroidManifest.xml")," file.\nIf you don't have one, create a file at ",Object(i.b)("inlineCode",{parentName:"p"},"Assets/Plugins/Android/AndroidManifest.xml")," and add the\ncontent from the example, then proceed as below to update the manifest as per the method you\nplan to use.")),Object(i.b)("h3",{id:"provider-method"},"Provider Method"),Object(i.b)("p",null,"The provider method requires that you add several additions to the manifest. This\nincludes a content provider and a broadcast receiver, along with some permissions\nand settings."),Object(i.b)("p",null,"This method requires that you sign all of the applications with the same certificate.\nThis is required so that the settings are secured between your applications."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-xml"}),'\x3c!-- For the content provider and broadcast receiver method --\x3e\n<application>\n                \n    <meta-data android:name="app_group" android:value="[APPGROUP]" />\n    <meta-data android:name="app_authority" android:value="group.[APPID].provider" />\n    <meta-data android:name="app_authority_matcher" android:value="group\\\\.(?:[a-z,1-9]{1,}\\\\.)*provider" />\n\n    <provider\n        android:name="com.distriqt.extension.appgroupdefaults.provider.SharedProvider"\n        android:authorities="group.[APPID].provider"\n        android:exported="true" >\n    </provider>\n        \n    <receiver\n        android:name="com.distriqt.extension.appgroupdefaults.provider.SharedContentChangedReceiver"\n        android:enabled="true"\n        android:exported="true" >\n        <intent-filter>\n            <action android:name="[APPGROUP]"/>\n        </intent-filter>\n    </receiver>\n\n</application>\n')),Object(i.b)("p",null,"You should replace ",Object(i.b)("inlineCode",{parentName:"p"},"[APPGROUP]")," with your application group.\nThis must be done in the meta-data tag and in the receiver.\nFor example: ",Object(i.b)("inlineCode",{parentName:"p"},"group.com.distriqt.test")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-xml"}),'    <meta-data android:name="app_group" android:value="group.com.distriqt.test" />\n')),Object(i.b)("p",null,"You also need to define an ",Object(i.b)("strong",{parentName:"p"},"application authority"),", this must be different for\neach of your applications but must be matchable using the matcher. We suggest using\nthe example above replacing ",Object(i.b)("inlineCode",{parentName:"p"},"[APPID]")," with your application id, for example an app_authority\nmay be, ",Object(i.b)("inlineCode",{parentName:"p"},"group.com.distriqt.test.app1.provider")," as below:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-xml"}),'    <meta-data android:name="app_authority" android:value="group.com.distriqt.test.app1.provider" />\n')),Object(i.b)("p",null,"You must place the application authority both in the meta-data tag and in the provider."),Object(i.b)("h3",{id:"file-method"},"File Method"),Object(i.b)("p",null,"The default is the provider method however if you wish to use the shared file method you\ncan specify the type in the ",Object(i.b)("inlineCode",{parentName:"p"},"setup")," call:"),Object(i.b)("p",null,"AIR:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-actionscript"}),'AppGroupDefaults.service.setup( \n    "12345678", \n    "group.com.distriqt.test", \n    AppGroupDefaults.TYPE_FILE \n);\n')),Object(i.b)("p",null,"Unity:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-csharp"}),'AppGroupDefaults.Instance.Setup( \n    "12345678", // salt\n    "group.com.distriqt.test", // app group identifier\n    AppGroupDefaults.TYPE_FILE // Android type\n);\n')),Object(i.b)("p",null,"This method writes to a public file with the content encrypted."),Object(i.b)("p",null,"This requires read / write permissions to the external storage:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-xml"}),'<android>\n    <manifestAdditions><![CDATA[\n        <manifest android:installLocation="auto">\n            <uses-permission android:name="android.permission.INTERNET"/>\n            \n            <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />\n            <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />\n        </manifest>\n    ]]></manifestAdditions>\n</android>\n')),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"With recent versions of Android you will need to request runtime permissions to access the storage."),Object(i.b)("p",{parentName:"blockquote"},"With AIR you can use the Permissions ANE to request the permissions at runtime."),Object(i.b)("pre",{parentName:"blockquote"},Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-actionscript"}),'Permissions.service.setPermissions( [\n        "android.permission.READ_EXTERNAL_STORAGE",\n        "android.permission.WRITE_EXTERNAL_STORAGE"\n        ]);\n\nif (!Permissions.service.hasAuthorisation())\n    Permissions.service.requestAuthorisation();\n')),Object(i.b)("p",{parentName:"blockquote"},"Unity you can use the  ",Object(i.b)("inlineCode",{parentName:"p"},"UnityEngine.Android.Permission")," helper class to request permissions."),Object(i.b)("pre",{parentName:"blockquote"},Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-csharp"}),"if (!Permission.HasUserAuthorizedPermission(Permission.ExternalStorageWrite) \n    || !Permission.HasUserAuthorizedPermission(Permission.ExternalStorageRead))\n{\n    Permission.RequestUserPermission(Permission.ExternalStorageWrite);\n    Permission.RequestUserPermission(Permission.ExternalStorageRead);\n}\n"))))}c.isMDXComponent=!0},779:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=a.a.createContext({}),c=function(e){var t=a.a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return a.a.createElement(d.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),u=c(n),b=r,m=u["".concat(o,".").concat(b)]||u[b]||l[b]||i;return n?a.a.createElement(m,s(s({ref:t},d),{},{components:n})):a.a.createElement(m,s({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=b;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=n[d];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);