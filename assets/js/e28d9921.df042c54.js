"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[37736],{3905:function(e,n,o){o.d(n,{Zo:function(){return c},kt:function(){return u}});var t=o(67294);function r(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function i(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?i(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function s(e,n){if(null==e)return{};var o,t,r=function(e,n){if(null==e)return{};var o,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)o=i[t],n.indexOf(o)>=0||(r[o]=e[o]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)o=i[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var d=t.createContext({}),l=function(e){var n=t.useContext(d),o=n;return e&&(o="function"==typeof e?e(n):a(a({},n),e)),o},c=function(e){var n=l(e.components);return t.createElement(d.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var o=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(o),u=r,g=m["".concat(d,".").concat(u)]||m[u]||p[u]||i;return o?t.createElement(g,a(a({ref:n},c),{},{components:o})):t.createElement(g,a({ref:n},c))}));function u(e,n){var o=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=o.length,a=new Array(i);a[0]=m;var s={};for(var d in n)hasOwnProperty.call(n,d)&&(s[d]=n[d]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var l=2;l<i;l++)a[l]=o[l];return t.createElement.apply(null,a)}return t.createElement.apply(null,o)}m.displayName="MDXCreateElement"},1351:function(e,n,o){o.r(n),o.d(n,{frontMatter:function(){return a},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return l},default:function(){return p}});var t=o(87462),r=o(63366),i=(o(67294),o(3905)),a={title:"Performance - Add the extension",sidebar_label:"Add the extension"},s=void 0,d={unversionedId:"firebase/performance/add-the-extension",id:"firebase/performance/add-the-extension",isDocsHomePage:!1,title:"Performance - Add the extension",description:"Required Extensions",source:"@site/docs/firebase/performance/add-the-extension.md",sourceDirName:"firebase/performance",slug:"/firebase/performance/add-the-extension",permalink:"/docs/firebase/performance/add-the-extension",tags:[],version:"current",frontMatter:{title:"Performance - Add the extension",sidebar_label:"Add the extension"},sidebar:"firebase",previous:{title:"Introduction",permalink:"/docs/firebase/performance/introduction"},next:{title:"Traces",permalink:"/docs/firebase/performance/traces"}},l=[{value:"Required Extensions",id:"required-extensions",children:[{value:"Android Support",id:"android-support",children:[]},{value:"Square ANEs",id:"square-anes",children:[]},{value:"Firebase Performance Monitoring",id:"firebase-performance-monitoring",children:[]}]},{value:"Extension IDs",id:"extension-ids",children:[]},{value:"Android Manifest Additions",id:"android-manifest-additions",children:[]},{value:"iOS",id:"ios",children:[]}],c={toc:l};function p(e){var n=e.components,o=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,t.Z)({},c,o,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"required-extensions"},"Required Extensions"),(0,i.kt)("p",null,"You should have been through the setup of the Firebase Core before attempting to proceed with Performance Monitoring."),(0,i.kt)("p",null,"Make sure you have added all the extensions required for the Firebase Core extension as outlined ",(0,i.kt)("a",{parentName:"p",href:"../core/add-the-extensions"},"here"),"."),(0,i.kt)("h3",{id:"android-support"},"Android Support"),(0,i.kt)("p",null,"The Android Support libraries encompass the Android Support, Android X and common Google libraries. "),(0,i.kt)("p",null,"These libraries are specific to Android. There are no issues including these on all platforms, they are just ",(0,i.kt)("strong",{parentName:"p"},"required")," for Android."),(0,i.kt)("p",null,"This extension requires the following extensions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.core.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"androidx.core"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.appcompat.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"androidx.appcompat"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.protobuflite.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"com.google.protobuflite"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.dagger.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"com.google.dagger"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/com.google.android.datatransport.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"com.google.android.datatransport")))),(0,i.kt)("p",null,"You can access these extensions here: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-AndroidSupport"},"https://github.com/distriqt/ANE-AndroidSupport"),"."),(0,i.kt)("h3",{id:"square-anes"},"Square ANEs"),(0,i.kt)("p",null,"Due to several of our ANE's using the ",(0,i.kt)("a",{parentName:"p",href:"http://square.github.io/"},"Square open source libraries")," the libraries have been separated into a separate ANEs allowing you to avoid conflicts and duplicate definitions. This means that you need to include the some of the square native extensions in your application along with this extension."),(0,i.kt)("p",null,"You will add these extensions as you do with any other ANE, and you need to ensure it is packaged with your application."),(0,i.kt)("p",null,"This ANE requires the following Square extensions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-SquareLibs/raw/master/lib/com.distriqt.square.okhttp3.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"com.distriqt.square.okhttp3")))),(0,i.kt)("p",null,"You can access these extensions here: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/distriqt/ANE-SquareLibs"},"https://github.com/distriqt/ANE-SquareLibs"),"."),(0,i.kt)("h3",{id:"firebase-performance-monitoring"},"Firebase Performance Monitoring"),(0,i.kt)("p",null,"Usage of Performance Monitoring requires adding the Performance Monitoring ANE along with the Remote Config ANE located in this repository:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-Firebase/raw/master/lib/com.distriqt.firebase.Performance.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"com.distriqt.firebase.Performance"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-Firebase/raw/master/lib/com.distriqt.firebase.RemoteConfig.ane"},(0,i.kt)("inlineCode",{parentName:"a"},"com.distriqt.firebase.RemoteConfig")))),(0,i.kt)("p",null,"This ANE contains all the required libraries for the main Firebase Performance Monitoring functionality."),(0,i.kt)("h2",{id:"extension-ids"},"Extension IDs"),(0,i.kt)("p",null,"The following should be added to your ",(0,i.kt)("inlineCode",{parentName:"p"},"extensions")," node in your application descriptor to identify all the required ANEs in your application:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<extensions>\n    <extensionID>com.distriqt.Core</extensionID>\n    \n    <extensionID>com.distriqt.playservices.Base</extensionID>\n    <extensionID>com.distriqt.playservices.AdsIdentifier</extensionID>\n\n    <extensionID>com.google.android.datatransport</extensionID>\n    <extensionID>com.google.dagger</extensionID>\n    <extensionID>com.google.protobuflite</extensionID>\n    <extensionID>com.google.firebase.core</extensionID>\n\n    <extensionID>androidx.core</extensionID>\n    <extensionID>androidx.appcompat</extensionID>\n\n    <extensionID>com.distriqt.Firebase</extensionID>\n    <extensionID>com.distriqt.firebase.Performance</extensionID>\n    <extensionID>com.distriqt.firebase.RemoteConfig</extensionID>\n\n    <extensionID>com.distriqt.square.okhttp3</extensionID>\n\n    <extensionID>com.distriqt.CustomResources</extensionID>\n</extensions>\n")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"android-manifest-additions"},"Android Manifest Additions"),(0,i.kt)("p",null,"In order to add performance monitoring you need to add the following permissions to\nyour manifest additions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"com.google.android.providers.gsf.permission.READ_GSERVICES")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"com.google.android.providers.gsf.permission.WRITE_GSERVICES"))),(0,i.kt)("p",null,"You will also need to add the ",(0,i.kt)("inlineCode",{parentName:"p"},"FirebasePerfProvider")," and data transport additions below. You must replace ",(0,i.kt)("inlineCode",{parentName:"p"},"APPLICATION_PACKAGE")," with your AIR application's Java package name, something like ",(0,i.kt)("inlineCode",{parentName:"p"},"air.com.distriqt.test"),". Generally this is your AIR application id prefixed by ",(0,i.kt)("inlineCode",{parentName:"p"},"air.")," unless you have specified no air flair in your build options."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest android:installLocation="auto">\n    <uses-permission android:name="android.permission.INTERNET"/>\n    \n    \x3c!-- OTHER PERMISSIONS / REQUIREMENTS --\x3e\n\n    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />\n    <uses-permission android:name="com.google.android.providers.gsf.permission.WRITE_GSERVICES" />\n\n    <application>\n\n        <provider\n            android:name="com.google.firebase.perf.provider.FirebasePerfProvider"\n            android:authorities="APPLICATION_PACKAGE.firebaseperfprovider"\n            android:exported="false"\n            android:initOrder="101" />\n\n        \x3c!-- datatransport --\x3e\n        <service\n            android:name="com.google.android.datatransport.runtime.backends.TransportBackendDiscovery"\n            android:exported="false" >\n            <meta-data\n                android:name="backend:com.google.android.datatransport.cct.CctBackendFactory"\n                android:value="cct" />\n        </service>\n        <service\n            android:name="com.google.android.datatransport.runtime.scheduling.jobscheduling.JobInfoSchedulerService"\n            android:exported="false"\n            android:permission="android.permission.BIND_JOB_SERVICE" >\n        </service>\n        <receiver\n            android:name="com.google.android.datatransport.runtime.scheduling.jobscheduling.AlarmManagerSchedulerBroadcastReceiver"\n            android:exported="false" />\n\n    </application>\n\n    \x3c!-- OTHER ADDITIONS --\x3e\n\n</manifest>\n')),(0,i.kt)("p",null,"Lastly locate the ",(0,i.kt)("inlineCode",{parentName:"p"},"ComponentDiscoveryService")," service you added as part of the core Firebase manfiest additions and add the following meta data tags:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<meta-data\n    android:name="com.google.firebase.components:com.google.firebase.perf.FirebasePerfRegistrar"\n    android:value="com.google.firebase.components.ComponentRegistrar" />\n<meta-data\n    android:name="com.google.firebase.components:com.google.firebase.remoteconfig.RemoteConfigRegistrar"\n    android:value="com.google.firebase.components.ComponentRegistrar" />\n<meta-data\n    android:name="com.google.firebase.components:com.google.firebase.abt.component.AbtRegistrar"\n    android:value="com.google.firebase.components.ComponentRegistrar" />\n')),(0,i.kt)("p",null,"It should now appear like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<service android:name="com.google.firebase.components.ComponentDiscoveryService" \n        android:directBootAware="true"\n        android:exported="false">\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.perf.FirebasePerfRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.remoteconfig.RemoteConfigRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.abt.component.AbtRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.analytics.connector.internal.AnalyticsConnectorRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.installations.FirebaseInstallationsRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.dynamicloading.DynamicLoadingRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n</service>\n')),(0,i.kt)("h2",{id:"ios"},"iOS"),(0,i.kt)("p",null,"No particular additions are required for iOS"))}p.isMDXComponent=!0}}]);