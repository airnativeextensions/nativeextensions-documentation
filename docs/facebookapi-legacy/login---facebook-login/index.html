<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Login - Facebook Login | air native extensions</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/facebookapi-legacy/login---facebook-login"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Login - Facebook Login | air native extensions"><meta data-react-helmet="true" name="description" content="This is the legacy extension documentation. Find the new documentation here"><meta data-react-helmet="true" property="og:description" content="This is the legacy extension documentation. Find the new documentation here"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/facebookapi-legacy/login---facebook-login"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/facebookapi-legacy/login---facebook-login" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/facebookapi-legacy/login---facebook-login" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f49ec264.css">
<link rel="preload" href="/assets/js/runtime~main.f8ae6c32.js" as="script">
<link rel="preload" href="/assets/js/main.ec838744.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--light_3ouy navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--dark_3zJb navbar__logo"><b class="navbar__title">AIR Native Extensions</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2ySP react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_2iFN"> </span></div><div class="react-toggle-track-x"><span class="toggle_2iFN"> </span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3zOJ"><button class="clean-btn backToTopButton_DkI0" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_G8MK"><div class="sidebar_1tWv"><nav class="menu thin-scrollbar menu_1Iah menuWithAnnouncementBar_3acx"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/facebookapi-legacy/">FacebookAPI</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setup Facebook</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setup the Extension</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Facebook Login</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/facebookapi-legacy/login---overview">Login - Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/facebookapi-legacy/login---facebook-login">Login - Facebook Login</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/facebookapi-legacy/login---access-token">Login - Access Token</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">App Events</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Sharing</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">App Links</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Games</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Graph API</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Troubleshooting</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Other</a></li></ul></nav></div></aside><main class="docMainContainer_3Zec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><div class="tocCollapsible_3moT tocMobile_2bxg"><button type="button" class="clean-btn tocCollapsibleButton_3OYu">On this page</button></div><div class="markdown"><header><h1>Login - Facebook Login</h1></header><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>This is the legacy extension documentation. Find the new documentation <a href="/docs/facebookapi/">here</a></p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="login"></a>Login<a class="hash-link" href="#login" title="Direct link to heading">#</a></h2><p>You should now be ready to begin using the FacebookAPI extension after calling <code>initialiseApp</code></p><p>In order to log a user in you will be creating a session and then monitoring the session state
using event handlers. To start you will call the <code>createSession</code> function and passing
in the required permissions and options.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">if (FacebookAPI.isSupported)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var permissions:Array = [ &quot;public_profile&quot;, &quot;email&quot; ];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var readOnly:Boolean = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    FacebookAPI.service.createSession( permissions, readOnly );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>In order to respond to session events we should add some event handlers, to handle the
<code>FacebookAPISessionEvent</code> events. </p><p>The <code>FacebookAPISessionEvent</code> contains information about the current session,
including the access token and profile information, along with any errors that
may have occurred.</p><p>This class contains:</p><ul><li><code>accessToken</code>: An instance of <code>AccessToken</code> containing details about the token</li><li><code>profile</code>: An instance of <code>Profile</code> containing details about the current user</li></ul><p>These may be <code>null</code> if the user isn&#x27;t logged in or if profile information hasn&#x27;t been retrieved yet.</p><p>In this example we will use a single event handler for all the events:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPENED, facebook_sessionHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_INFO, facebook_sessionHandler );  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPEN_ERROR, facebook_sessionHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPEN_DISABLED, facebook_sessionHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPEN_CANCELLED, facebook_sessionHandler );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Then in your handler:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">function facebook_sessionHandler( event:FacebookAPISessionEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    switch (event.type)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.SESSION_OPENED:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // A session was opened successfully and you will have an access token</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;User ID:         &quot; + event.accessToken.userId );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Expiration date: &quot; + event.accessToken.expirationTimestamp );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Permissions:     &quot; + event.accessToken.permissions.join(&quot;, &quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Access token:    &quot; + event.accessToken.token);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.SESSION_INFO:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // More information about the user&#x27;s session/profile is available</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace( &quot;User name: &quot; + event.profile.name );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.SESSION_OPEN_ERROR:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Triggered when a login error occurred</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Session open error: &quot; + event.errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.SESSION_OPEN_DISABLED:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Triggered when the user has disabled Facebook login for your application in iOS settings</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Session login is disabled&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.SESSION_OPEN_CANCELLED:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Triggered when the user cancels the sign-in process from Facebook</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;User cancelled sign-in&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="logout"></a>Logout<a class="hash-link" href="#logout" title="Direct link to heading">#</a></h2><p>To logout the current user call the <code>closeSession</code> function.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.closeSession();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>This function will dispatch one of two events, either a success or a failure:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_CLOSED, facebook_sessionHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_CLOSE_ERROR, facebook_sessionHandler );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>And extending the handler above:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.SESSION_CLOSED:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // The session was closed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Session closed&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.SESSION_CLOSE_ERROR:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // An error occurred when closing the session</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace( &quot;There was an error closing the session&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="permissions"></a>Permissions<a class="hash-link" href="#permissions" title="Direct link to heading">#</a></h2><p>When a person logs into your app via Facebook Login you can access a subset
of that person&#x27;s data stored on Facebook. Permissions are how you ask someone
if you can access that data. A person&#x27;s privacy settings combined with what
you ask for will determine what you can access.</p><p>Permissions are strings that are passed along with a login request or an API
call. Here are two examples of permissions:</p><ul><li><code>email</code> - Access to a person&#x27;s primary email address.</li><li><code>user_likes</code> - Access to the list of things a person likes.</li></ul><p>You can get the list of granted and denied permissions at any time by using
the current <a href="/docs/facebookapi-legacy/login---access-token"><code>AccessToken</code></a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="when-to-ask-for-permissions"></a>When to ask for Permissions<a class="hash-link" href="#when-to-ask-for-permissions" title="Direct link to heading">#</a></h3><p>Your app can ask for additional permissions at any time, even after a person
logs in for the first time. For example, the <code>publish_actions</code> permission
lets you post to a person&#x27;s Facebook Timeline. It&#x27;s recommended you ask for
this permission only when a person is ready to publish a story to Facebook.
When you ask for new permissions, the person using your app will be asked
about those new permissions and has the ability to opt out. For more information,
see <a href="https://developers.facebook.com/docs/facebook-login/permissions/requesting-and-revoking/#optimizing" target="_blank" rel="noopener noreferrer">Optimizing Permissions Requests</a>.</p><p>Permissions only need to be granted once per app, i.e. permissions granted
on one platform are effectively granted on all the platforms your app supports.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="revoked-permissions"></a>Revoked Permissions<a class="hash-link" href="#revoked-permissions" title="Direct link to heading">#</a></h3><p>People can also revoke permissions granted to your app in Facebook&#x27;s interface
at any time after they have logged in. It is important that your app regularly
checks which permissions have been granted, especially when launching on a new
platform. We provide methods for you to check what permissions are currently
granted to your app.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="request-permissions"></a>Request permissions<a class="hash-link" href="#request-permissions" title="Direct link to heading">#</a></h2><p>If you need to change the permissions of a logged in user you can use the
<code>requestPermissions</code> function. This function is very similar to the <code>createSession</code>
function, it requires an array of permission strings.</p><p>This will present another Facebook dialog requesting the new permissions.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var permissions:Array = [ &quot;public_profile&quot;, &quot;user_friends&quot;, &quot;email&quot;, &quot;user_about_me&quot; ];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.requestPermissions( permissions, true );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>If you require publishing / write permissions make sure you set the second parameter
to <code>false</code>. This specifies that you are requesting write permissions.</p><blockquote><p>Note: Facebook does not allow requesting read and write permissions in the
same request so you should initially request your read permissions and then
at some later point (normally just before you are going to perform a write)
request the write permissions.</p></blockquote><p>Calling <code>requestPermissions</code> will result in one of the <code>FacebookAPISessionEvent</code>s</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.REQUEST_PERMISSIONS_COMPLETED, requestPermissionsHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.REQUEST_PERMISSIONS_CANCELLED, requestPermissionsHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FacebookAPI.service.addEventListener( FacebookAPISessionEvent.REQUEST_PERMISSIONS_ERROR, requestPermissionsHandler );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Similar to the other events in the handler you will have access to the new access token:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">function requestPermissionsHandler( event:FacebookAPISessionEvent ):void </span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    switch (event.type)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.REQUEST_PERMISSIONS_COMPLETED:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;User ID:         &quot; + event.accessToken.userId );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Expiration date: &quot; + event.accessToken.expirationTimestamp );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Permissions:     &quot; + event.accessToken.permissions.join(&quot;, &quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace(&quot;Access token:    &quot; + event.accessToken.token);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.REQUEST_PERMISSIONS_CANCELLED:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // User cancelled the request</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        case FacebookAPISessionEvent.REQUEST_PERMISSIONS_ERROR:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // There was an error</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            trace( &quot;ERROR: &quot;+ event.errorMessage );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/facebookapi-legacy/login---overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Login - Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/facebookapi-legacy/login---access-token"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Login - Access Token »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#login" class="table-of-contents__link">Login</a></li><li><a href="#logout" class="table-of-contents__link">Logout</a></li><li><a href="#permissions" class="table-of-contents__link">Permissions</a><ul><li><a href="#when-to-ask-for-permissions" class="table-of-contents__link">When to ask for Permissions</a></li><li><a href="#revoked-permissions" class="table-of-contents__link">Revoked Permissions</a></li></ul></li><li><a href="#request-permissions" class="table-of-contents__link">Request permissions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>AIR discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>starling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>stack overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>license<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2021 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.f8ae6c32.js"></script>
<script src="/assets/js/main.ec838744.js"></script>
</body>
</html>