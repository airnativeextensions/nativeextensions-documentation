"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[37631],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>v});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=n.createContext({}),d=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},c=function(e){var a=d(e.components);return n.createElement(s.Provider,{value:a},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},h=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(t),h=r,v=p["".concat(s,".").concat(h)]||p[h]||u[h]||i;return t?n.createElement(v,o(o({ref:a},c),{},{components:t})):n.createElement(v,o({ref:a},c))}));function v(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=h;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=t[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"},13564:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var n=t(87462),r=(t(67294),t(3905));const i={title:"Database - Read Data and Change Events",sidebar_label:"Read Data and Change Events"},o=void 0,l={unversionedId:"firebase/database/read-data-and-change-events",id:"firebase/database/read-data-and-change-events",title:"Database - Read Data and Change Events",description:"Reading Data and Listening to Value Change events",source:"@site/docs/firebase/database/read-data-and-change-events.md",sourceDirName:"firebase/database",slug:"/firebase/database/read-data-and-change-events",permalink:"/docs/firebase/database/read-data-and-change-events",draft:!1,tags:[],version:"current",frontMatter:{title:"Database - Read Data and Change Events",sidebar_label:"Read Data and Change Events"},sidebar:"firebase",previous:{title:"Write Data",permalink:"/docs/firebase/database/write-data"},next:{title:"Delete Data",permalink:"/docs/firebase/database/delete-data"}},s={},d=[{value:"Reading Data and Listening to Value Change events",id:"reading-data-and-listening-to-value-change-events",level:2},{value:"Get a DatabaseReference",id:"get-a-databasereference",level:2},{value:"Listen for value events",id:"listen-for-value-events",level:3},{value:"Read Data Once",id:"read-data-once",level:3}],c={toc:d},p="wrapper";function u(e){let{components:a,...t}=e;return(0,r.kt)(p,(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"reading-data-and-listening-to-value-change-events"},"Reading Data and Listening to Value Change events"),(0,r.kt)("p",null,"All data reading is an asynchronous process. "),(0,r.kt)("h2",{id:"get-a-databasereference"},"Get a DatabaseReference"),(0,r.kt)("p",null,"To read or write data from the database, you need an instance of ",(0,r.kt)("inlineCode",{parentName:"p"},"DatabaseReference"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"var database:DatabaseReference;\n\ndatabase = FirebaseDatabase.service.getReference();\n")),(0,r.kt)("h3",{id:"listen-for-value-events"},"Listen for value events"),(0,r.kt)("p",null,"To read data at a path and listen for changes you add a listener for the ",(0,r.kt)("inlineCode",{parentName:"p"},"VALUE_CHANGED"),"\nevent."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"database.addEventListener( DatabaseReferenceEvent.VALUE_CHANGED, valueChangedHandler );\n")),(0,r.kt)("p",null,"You can also attach these listeners to children to get specific updates when a particular\nvalue changes:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'database.child("someKey").addEventListener( DatabaseReferenceEvent.VALUE_CHANGED, valueChangedHandler );\n')),(0,r.kt)("p",null,"In your handler you will have access to a ",(0,r.kt)("inlineCode",{parentName:"p"},"DataSnapshot")," which represents the data\ncontained in the node at the time of the event:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"private function valueChangedHandler( event:DatabaseReferenceEvent ):void \n{\n    // event.snapshot will contain the DataSnapshot of the reference this listener was attached\n    trace( event.snapshot.toString() );\n}\n")),(0,r.kt)("p",null,"You should also listen for the ",(0,r.kt)("inlineCode",{parentName:"p"},"VALUE_CHANGED_ERROR")," event at this point. It will\nbe dispatched when there is an issue retrieving the value. For example, a read can\nfail if the client doesn't have permission to read from a Firebase database location."),(0,r.kt)("p",null,"When this event is dispatched the event will have the ",(0,r.kt)("inlineCode",{parentName:"p"},"errorCode")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"errorDescription"),"\nfields populated with the details of the error."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"database.addEventListener( DatabaseReferenceEvent.VALUE_CHANGED_ERROR, valueChangedErrorHandler );\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"private function valueChangedErrorHandler( event:DatabaseReferenceEvent ):void \n{\n    trace( event.errorCode );\n    trace( event.errorDescription );\n}\n")),(0,r.kt)("h3",{id:"read-data-once"},"Read Data Once"),(0,r.kt)("p",null,"In some cases you may want a callback to be called once and then immediately removed,\nsuch as when initializing a UI element that you don't expect to change. This is useful\nfor data that only needs to be loaded once and isn't expected to change frequently or\nrequire active listening."),(0,r.kt)("p",null,"To this end you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"once( callback:Function )")," method and provide a callback\nfunction to handle the result."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'var ref:DatabaseReference = FirebaseDatabase.service.getReference( "test" );\n\nref.once( function( value:Object ):void \n{\n    if (value != null)\n    {\n        trace( JSON.stringify( value ) );\n    }\n    else \n    {\n        // There was an error\n    }\n});\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"once")," function takes a ",(0,r.kt)("inlineCode",{parentName:"p"},"Function")," as a parameter which will be called when the value\nhas been read. This function should have one parameter of type ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," which will be the\nresulting ",(0,r.kt)("inlineCode",{parentName:"p"},"value")," of the read operation. This value may be ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," if an error occurred."))}u.isMDXComponent=!0}}]);