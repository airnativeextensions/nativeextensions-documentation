"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[27722],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(96540);const i={},a=o.createContext(i);function s(e){const t=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:t},e.children)}},28494:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"pushnotifications/gcm/google-cloud-message","title":"Google Cloud Message","description":"There are many ways to send notifications to your devices.","source":"@site/docs/pushnotifications/gcm/google-cloud-message.md","sourceDirName":"pushnotifications/gcm","slug":"/pushnotifications/gcm/google-cloud-message","permalink":"/docs/pushnotifications/gcm/google-cloud-message","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Google Cloud Message","sidebar_label":"Google Cloud Message"}}');var i=n(74848),a=n(28453);const s={title:"Google Cloud Message",sidebar_label:"Google Cloud Message"},r=void 0,c={},d=[{value:"PHP Example",id:"php-example",level:3}];function l(e){const t={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"There are many ways to send notifications to your devices."}),"\n",(0,i.jsx)(t.p,{children:"The basic procedure is once your application has sent the device token (registration id) to your server,\nyour server will send a message to the appropriate service (APNS/GCM) which will deliver the notification\nto the registered device."}),"\n",(0,i.jsx)(t.h3,{id:"php-example",children:"PHP Example"}),"\n",(0,i.jsx)(t.p,{children:"The following is a very basic PHP example, sending a message to a single device."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"<?php\n/**\n * This is a test script to send a message to an GCM Android device, i.e. an Android device using Google Cloud Messaging. \n * \n * To use this script you need to set the following pieces of information\n *  - device registration id\n *  - api key (this is the browser API key)\n * \n * Then run it using php: \n * <code> php gcm_simplepush.php </code> \n *\n */\n// Put your device token here (without spaces):\n$registrationId = 'DEVICE_ID';\n// GCM API Key\n$apiKey = \"GCM_API_KEY\";\n\n$dataPayload = array(\n\t'notification' => array(\n\t\t'icon' => 'ic_stat_distriqt_default',\n\t\t'alert' => 'You have a notification', \n\t\t'title' => 'You have a notification', \n\t\t'body' => \"The body of the notification\",\n\t\t'sound' => 'default',\n\t\t'vibrate' => 'true',\n\t),\n\t'user_custom' => 'some-custom-value'\n);\n\n$response = sendNotification( \n\t$apiKey, \n\tarray($registrationId), \n\t$dataPayload,\n\tnull\n);\n\necho $response;\necho \"\\ncomplete...\\n\";\n////////////////////////////////////////////////////////////////////////////////\n//\t\n//\n/**\n * The following function will send a GCM notification using curl.\n * \n * @param $apiKey\t\t\t\t[string] \tThe Browser API key string for your GCM account\n * @param $registrationIdsArray [array] \tAn array of registration ids to send this notification to\n * @param $messageData\t\t\t[array]\t\tA named array of data to send as the notification data payload\n * @param $notification\t\t\t[array]\t\tA named array of data to send as the notification information\n */\nfunction sendNotification( $apiKey, $registrationIdsArray, $customData, $notification  )\n{\n    print_r($messageData);\n\tprint_r($registrationIdsArray);\n    $headers = array(\"Content-Type:\" . \"application/json\", \"Authorization:\" . \"key=\" . $apiKey);\n    $data = array(\n        'registration_ids' => $registrationIdsArray,\n    );\n\tif ($customData != null) \t$data['data'] = $customData;\n\tif ($notification != null)\t$data['notification'] = $notification;\n\t$post = json_encode($data);\n\t\n\tprint( $post );\n    $ch = curl_init();\n    curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers ); \n    curl_setopt( $ch, CURLOPT_URL, \"https://android.googleapis.com/gcm/send\" );\n    curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, 0 );\n    curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, 0 );\n    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );\n    curl_setopt( $ch, CURLOPT_POSTFIELDS, $post );\n    $response = curl_exec($ch);\n    curl_close($ch);\n    return $response;\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"https://gist.github.com/marchbold/0377f398092c0d4874f9",children:"Source gist"})}),"\n",(0,i.jsx)(t.p,{children:"You run these scripts using php:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"php script.php\n"})})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);