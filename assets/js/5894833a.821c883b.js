"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[20827],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),h=u(n),d=i,f=h["".concat(l,".").concat(d)]||h[d]||p[d]||a;return n?r.createElement(f,s(s({ref:t},c),{},{components:n})):r.createElement(f,s({ref:t},c))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,s=new Array(a);s[0]=h;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var u=2;u<a;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},98653:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return c},default:function(){return h}});var r=n(87462),i=n(63366),a=(n(67294),n(3905)),s=["components"],o={title:"Overview",sidebar_label:"Overview"},l=void 0,u={unversionedId:"inappbilling/overview",id:"inappbilling/overview",title:"Overview",description:"Implementing in-app billing / purchases can be a daunting task. There are several steps that you must go through.",source:"@site/docs/inappbilling/overview.md",sourceDirName:"inappbilling",slug:"/inappbilling/overview",permalink:"/docs/inappbilling/overview",tags:[],version:"current",frontMatter:{title:"Overview",sidebar_label:"Overview"},sidebar:"inappbilling",previous:{title:"InAppBilling",permalink:"/docs/inappbilling/"},next:{title:"Setup",permalink:"/docs/inappbilling/apple/apple-in-app-purchases"}},c=[{value:"Setup",id:"setup",children:[],level:2},{value:"Products",id:"products",children:[],level:2},{value:"Making Purchases",id:"making-purchases",children:[],level:2},{value:"Consuming Purchases",id:"consuming-purchases",children:[],level:2},{value:"Getting and Restoring purchases",id:"getting-and-restoring-purchases",children:[],level:2}],p={toc:c};function h(e){var t=e.components,n=(0,i.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Implementing in-app billing / purchases can be a daunting task. There are several steps that you must go through."),(0,a.kt)("p",null,"Here we will provide an overview of the process as way of introduction to the concepts in this extension. This assumes you have already been through the configuration of the service through the appropriate store console, and is focussed on the extension functionality you will be accessing."),(0,a.kt)("h2",{id:"setup"},"Setup"),(0,a.kt)("p",null,"Firstly you must always call ",(0,a.kt)("inlineCode",{parentName:"p"},"setup()")," and specify a ",(0,a.kt)("inlineCode",{parentName:"p"},"BillingService")," to use. The billing service specifies which app store you are intending to use and any details about that store, such as license keys for purchase verification."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"See ",(0,a.kt)("a",{parentName:"li",href:"billing-service"},"Billing Service")," for details;")),(0,a.kt)("h2",{id:"products"},"Products"),(0,a.kt)("p",null,"After setup you must retrieve a list of products. This does several things, firstly it informs the extension of the product and subscription identifiers and, secondly, it retrieves product information (price etc) from the store. Additionally any invalid identifiers will be detected including any products that may not be setup correctly. "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"See ",(0,a.kt)("a",{parentName:"li",href:"products"},"Products")," for details;")),(0,a.kt)("p",null,"Once you have completed this step you are ready to access purchases."),(0,a.kt)("h2",{id:"making-purchases"},"Making Purchases"),(0,a.kt)("p",null,"Next you will likely want to make a purchase. "),(0,a.kt)("p",null,"Making a purchase consists of several components"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"making a purchase request;"),(0,a.kt)("li",{parentName:"ul"},"handling changes in a purchase state with the purchases updated events;"),(0,a.kt)("li",{parentName:"ul"},"verifying a completed purchase with a server (optional);"),(0,a.kt)("li",{parentName:"ul"},"delivering the product;"),(0,a.kt)("li",{parentName:"ul"},"finishing the purchase;")),(0,a.kt)("p",null,'Once a purchase is "finished" the purchase is acknowledged as being delivered to the user, any managed stores will hold onto this purchase for the user and return information about it as required.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"See ",(0,a.kt)("a",{parentName:"li",href:"make-a-purchase"},"Make a Purchase")," for details;")),(0,a.kt)("h2",{id:"consuming-purchases"},"Consuming Purchases"),(0,a.kt)("p",null,"If the purchase is for a consumable product (i.e. one that can be purchased multiple times), you must consume the purchase before attempting to purchase the product again. This should only be done after the purchase is finished. It can be done immediately, or at a later point, eg when the user actually consumes the product."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"See ",(0,a.kt)("a",{parentName:"li",href:"consuming-purchases"},"Consuming Purchases")," for details;")),(0,a.kt)("h2",{id:"getting-and-restoring-purchases"},"Getting and Restoring purchases"),(0,a.kt)("p",null,"This differs between the services. Some services will allow you to query directly the purchases that a user has made and return a list. Apple is the main exception here. "),(0,a.kt)("p",null,"This functionality is provided through the ",(0,a.kt)("a",{parentName:"p",href:"get-purchases"},"Get Purchases")," functionality."),(0,a.kt)("p",null,'Apple intend you to do this via a server, by sending the "Application Receipt" to your server and then communicating with Apple to verify and retrieve the list of user\'s purchases. We have provided an "Application Receipt" variant of this ANE which decodes the application receipt locally on the device and makes the get purchases functionality available. Be aware that this is not considered best practice but is something that we have found to be convenient.'),(0,a.kt)("p",null,'All services however provide a method of "restoring purchases". This is a process that must be triggered by a user interaction and is designed to be a way for a user to retrieve their purchases on another device. See ',(0,a.kt)("a",{parentName:"p",href:"restore-purchases"},"Restoring Purchases")," for details."))}h.isMDXComponent=!0}}]);