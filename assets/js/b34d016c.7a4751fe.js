"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[81707],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},v=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(n),v=s,m=p["".concat(l,".").concat(v)]||p[v]||d[v]||r;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,i=new Array(r);i[0]=v;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[p]="string"==typeof e?e:s,i[1]=o;for(var u=2;u<r;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}v.displayName="MDXCreateElement"},99841:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var a=n(87462),s=(n(67294),n(3905));const r={title:"Quests and Events",sidebar_label:"Quests and Events"},i=void 0,o={unversionedId:"gameservices/quests-and-events",id:"gameservices/quests-and-events",title:"Quests and Events",description:"Quests have been deprecated in Google Play Games. This functionality has been removed from the Play Games service so currently no services support Quests.",source:"@site/docs/gameservices/quests-and-events.md",sourceDirName:"gameservices",slug:"/gameservices/quests-and-events",permalink:"/docs/gameservices/quests-and-events",draft:!1,tags:[],version:"current",frontMatter:{title:"Quests and Events",sidebar_label:"Quests and Events"},sidebar:"gameservices",previous:{title:"Invitations",permalink:"/docs/gameservices/turn-based-multiplayer---invitations"},next:{title:"Screen Recording",permalink:"/docs/gameservices/screen-recording"}},l={},u=[{value:"Loading Events",id:"loading-events",level:2},{value:"Updating an Event",id:"updating-an-event",level:2},{value:"Displaying the Quests UI",id:"displaying-the-quests-ui",level:2},{value:"Loading Quests",id:"loading-quests",level:2},{value:"Quest States",id:"quest-states",level:2}],c={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,s.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("admonition",{type:"danger"},(0,s.kt)("p",{parentName:"admonition"},"Quests have been deprecated in Google Play Games. This functionality has been removed from the Play Games service so currently no services support Quests."),(0,s.kt)("p",{parentName:"admonition"},"We have left this functionality in the extension in case a service implements a quest like functionality in the future.")),(0,s.kt)("p",null,"Player Events allow you to collect cumulative data generated by your players during gameplay and\nstore them in the game service servers for game analytics. You can flexibly define what player\ndata your game should collect; this might include metrics such as how often:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Players use a particular item"),(0,s.kt)("li",{parentName:"ul"},"Players reach a certain level"),(0,s.kt)("li",{parentName:"ul"},"Players perform some specific game action")),(0,s.kt)("p",null,"You can use the events data as feedback on how to improve your game. For example, you can adjust\nthe difficulty level of certain levels in your game that players are finding too hard to complete."),(0,s.kt)("p",null,"Quests complement the Player Events by allowing you to introduce new time-bound challenges (or quests)\nthat are based on events data. Quests allow you to re-engage players and incentivize them with some\nin-game reward or benefit if they succeed, without having to republish your entire game."),(0,s.kt)("p",null,"You should check whether Quests and Events are supported on your device and service by checking the\n",(0,s.kt)("inlineCode",{parentName:"p"},"isSupported")," flag:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (GameServices.service.quests.isSupported)\n{\n    // Quests and Events are supported\n}\n")),(0,s.kt)("h1",{id:"integrating-player-events"},"Integrating Player Events"),(0,s.kt)("p",null,"The first step is to define your events in the game service you are using. "),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Google Play Games have deprecated this functionality")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Google Play",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Go to the Events page for your game in the Developer Console"),(0,s.kt)("li",{parentName:"ul"},'Click on the "Add new event" button and configure the event properties'),(0,s.kt)("li",{parentName:"ul"},"Publish your event definitions"),(0,s.kt)("li",{parentName:"ul"},"More information ",(0,s.kt)("a",{parentName:"li",href:"http://developers.google.com/games/services/common/concepts/quests"},"here"))))),(0,s.kt)("h2",{id:"loading-events"},"Loading Events"),(0,s.kt)("p",null,"Loading the Player Events available to your player is a simple call to ",(0,s.kt)("inlineCode",{parentName:"p"},"loadEvents")," using the quests functionality."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.quests.addEventListener( PlayerEventEvent.EVENTS_LOAD_SUCCESS, eventsLoadSuccessHandler );\nGameServices.service.quests.addEventListener( PlayerEventEvent.EVENTS_LOAD_ERROR,   eventsLoadErrorHandler );\n\nGameServices.service.quests.loadEvents();\n")),(0,s.kt)("p",null,"Then in your event handlers:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'private function eventsLoadSuccessHandler( event:PlayerEventEvent ):void\n{\n    trace( "EVENTS LOAD SUCCESS" );         \n    for each (var e:PlayerEvent in event.events)\n    {\n        message( "\\t event: ["+e.eventId+"] "+ e.name );\n    }\n}\n\nprivate function eventsLoadErrorHandler( event:PlayerEventEvent ):void\n{\n    trace( "EVENTS LOAD ERROR:" + event.message );\n}\n')),(0,s.kt)("h2",{id:"updating-an-event"},"Updating an Event"),(0,s.kt)("p",null,"Once you have loaded the Player Events you can increment an event when your events occur during game play:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'var eventId:String = "some_event_id";\n\nGameServices.service.quests.incrementEvent( eventId );\n')),(0,s.kt)("h1",{id:"integrating-quests"},"Integrating Quests"),(0,s.kt)("p",null,"Similar to events, you will need to define your quests in the game service you are using."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Google Play Games have deprecated this functionality")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Google Play",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Go to the Quests page for your game in the Developer Console"),(0,s.kt)("li",{parentName:"ul"},'Click on the "Add new quest" button and configure the quest properties'),(0,s.kt)("li",{parentName:"ul"},"Specify the events that represent player actions or milestones needed to complete the quest"),(0,s.kt)("li",{parentName:"ul"},"Publish your quests"),(0,s.kt)("li",{parentName:"ul"},"More information ",(0,s.kt)("a",{parentName:"li",href:"http://developers.google.com/games/services/common/concepts/quests"},"here"))))),(0,s.kt)("h2",{id:"displaying-the-quests-ui"},"Displaying the Quests UI"),(0,s.kt)("p",null,"You can present a native UI to show your players the available quests within your game.\nThrough this UI your players can accept quests and start tracking events towards quests."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.quests.addEventListener( QuestEvent.QUESTS_UI_CLOSED, questsUIClosedHandler );\nGameServices.service.quests.displayUI();\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'private function questsUIClosedHandler( event:QuestEvent ):void\n{\n    trace( "QUESTS UI CLOSED" );\n}\n')),(0,s.kt)("h2",{id:"loading-quests"},"Loading Quests"),(0,s.kt)("p",null,"You can load the list of available quests and present them to your players as you require."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.quests.addEventListener( QuestEvent.QUESTS_LOAD_SUCCESS, questsLoadSuccessHandler );\nGameServices.service.quests.addEventListener( QuestEvent.QUESTS_LOAD_ERROR, questsLoadErrorHandler );\n\nGameServices.service.quests.loadQuests();\n")),(0,s.kt)("p",null,"This will load an array of ",(0,s.kt)("inlineCode",{parentName:"p"},"Quest")," objects and return them in the success event:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'private function questsLoadSuccessHandler( event:QuestEvent ):void\n{\n    trace( "QUESTS LOAD SUCCESS" );\n    for each (var quest:Quest in event.quests)\n    {\n        trace( "\\t quest: ["+quest.questId+"] "+ quest.name );\n    }\n}\n\nprivate function questsLoadErrorHandler( event:QuestEvent ):void\n{\n    trace( "QUESTS LOAD ERROR: "+ event.message  );\n}\n')),(0,s.kt)("h2",{id:"quest-states"},"Quest States"),(0,s.kt)("p",null,'A quest is in an inactive state until your player "accepts" the quest. Once a quest is accepted\nany events that you track will then be counted towards the progress of the quest.'),(0,s.kt)("p",null,"To accept a quest call the ",(0,s.kt)("inlineCode",{parentName:"p"},"accept")," function with the quest id of interest."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.quests.addEventListener( QuestEvent.QUEST_ACCEPT_SUCCESS, questsAcceptSuccessHandler );\nGameServices.service.quests.addEventListener( QuestEvent.QUEST_ACCEPT_ERROR, questsAcceptErrorHandler );\n\nGameServices.service.quests.accept( questId );\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'private function questsAcceptSuccessHandler( event:QuestEvent ):void\n{\n    trace( "ACCEPT SUCCESS: " );\n}\n\nprivate function questsAcceptErrorHandler( event:QuestEvent ):void\n{\n    trace( "ACCEPT ERROR:" + event.message );\n}\n')),(0,s.kt)("p",null,"Once a quest has been accepted, any events that occur that contribute to a quest will automatically\nbe added towards the players quest progress and when the conditions are met the quest will be marked\nas completed and a small service UI element will be displayed to the user."),(0,s.kt)("p",null,"You should make sure you call the ",(0,s.kt)("inlineCode",{parentName:"p"},"listenForCompletion")," function at some point before you increment\nany events and also add an event listener for the ",(0,s.kt)("inlineCode",{parentName:"p"},"QuestEvent.QUEST_COMPLETED"),". This makes sure your\napplication has registered for quest completion events."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"GameServices.service.quests.addEventListener( QuestEvent.QUEST_COMPLETED, questsCompletedHandler );\nGameServices.service.quests.addEventListener( QuestEvent.QUEST_CLAIM_SUCCESS, questsClaimSuccessHandler );\nGameServices.service.quests.addEventListener( QuestEvent.QUEST_CLAIM_ERROR, questsClaimErrorHandler );\n\n// Calling this enables the QUEST_COMPLETED event when your player completes a quest\nGameServices.service.quests.listenForCompletion();\n")),(0,s.kt)("p",null,'Once a quest is completed your user can "claim" the reward. You can do this in your interface by\ncalling the ',(0,s.kt)("inlineCode",{parentName:"p"},"GameServices.service.quests.claim()")," function when you require or the user can claim a\nreward through the native UI. You should account for both scenarios by making sure you always have\nan event listener for the ",(0,s.kt)("inlineCode",{parentName:"p"},"QuestEvent.QUEST_CLAIM_SUCCESS")," event, and reward your player when this\nevent occurs."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'private function questsCompletedHandler( event:QuestEvent ):void\n{\n    var quest:Quest = event.quests[0];\n    trace( "QUEST COMPLETED: " + quest.questId + "::"+ quest.currentMilestone.milestoneId );\n    \n    // Call this when your user claims the reward\n    GameServices.service.quests.claim( quest.questId, quest.currentMilestone.milestoneId );\n}\n\nprivate function questsClaimSuccessHandler( event:QuestEvent ):void\n{\n    // Use the rewardData as required to give your player the quest reward\n    trace( "CLAIM SUCCESS: " + event.quests[0].currentMilestone.rewardData.toString() );\n}\n\nprivate function questsClaimErrorHandler( event:QuestEvent ):void\n{\n    trace( "CLAIM ERROR:" + event.message );\n}\n')))}d.isMDXComponent=!0}}]);