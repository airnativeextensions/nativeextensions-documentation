"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[36021],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return h}});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=p(t),h=i,m=c["".concat(s,".").concat(h)]||c[h]||u[h]||l;return t?a.createElement(m,r(r({ref:n},d),{},{components:t})):a.createElement(m,r({ref:n},d))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var l=t.length,r=new Array(l);r[0]=c;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var p=2;p<l;p++)r[p]=t[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},57606:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return d},default:function(){return c}});var a=t(87462),i=t(63366),l=(t(67294),t(3905)),r=["components"],o={title:"Unity",sidebar_label:"Unity"},s=void 0,p={unversionedId:"share/unity",id:"share/unity",title:"Unity",description:"Contents",source:"@site/docs/share/unity.md",sourceDirName:"share",slug:"/share/unity",permalink:"/docs/share/unity",tags:[],version:"current",frontMatter:{title:"Unity",sidebar_label:"Unity"}},d=[{value:"Contents",id:"contents",children:[],level:2},{value:"Overview",id:"overview",children:[],level:2},{value:"Features",id:"features",children:[],level:2},{value:"Add the Plugin",id:"add-the-plugin",children:[{value:"Asset Store",id:"asset-store",children:[],level:3},{value:"Manual Installation",id:"manual-installation",children:[],level:3},{value:"Import the Plugin",id:"import-the-plugin",children:[],level:3},{value:"Resolve Android Dependencies",id:"resolve-android-dependencies",children:[{value:"Unity Jar Resolver",id:"unity-jar-resolver",children:[{value:"Importing",id:"importing",children:[],level:6},{value:"Resolving",id:"resolving",children:[],level:6}],level:4},{value:"Custom Gradle Template",id:"custom-gradle-template",children:[],level:4}],level:3},{value:"Proguard",id:"proguard",children:[],level:3}],level:2},{value:"Usage",id:"usage",children:[{value:"Checking for Support",id:"checking-for-support",children:[],level:3}],level:2},{value:"Simple Share",id:"simple-share",children:[{value:"Android Events",id:"android-events",children:[],level:3}],level:2},{value:"Share Files",id:"share-files",children:[{value:"Sharing a File",id:"sharing-a-file",children:[],level:3},{value:"Opening a File",id:"opening-a-file",children:[],level:3}],level:2},{value:"Positioning",id:"positioning",children:[{value:"Centering",id:"centering",children:[],level:4}],level:2},{value:"Launch Applications",id:"launch-applications",children:[{value:"iOS",id:"ios",children:[],level:3},{value:"Start Actvity",id:"start-actvity",children:[],level:3}],level:2},{value:"Email",id:"email",children:[{value:"Email Support",id:"email-support",children:[],level:3},{value:"Simple Email",id:"simple-email",children:[],level:3},{value:"Send Email with Options",id:"send-email-with-options",children:[{value:"Attachments",id:"attachments",children:[],level:4}],level:3}],level:2},{value:"SMS",id:"sms",children:[{value:"SMS Supported",id:"sms-supported",children:[],level:3},{value:"Sending an SMS with UI",id:"sending-an-sms-with-ui",children:[],level:3},{value:"Android Advanced SMS operations",id:"android-advanced-sms-operations",children:[{value:"Manifest Additions",id:"manifest-additions",children:[],level:4},{value:"Requesting Authorisation",id:"requesting-authorisation",children:[],level:4},{value:"Sending an SMS",id:"sending-an-sms",children:[],level:4},{value:"Subscription Info",id:"subscription-info",children:[],level:4},{value:"Events",id:"events",children:[],level:4}],level:3}],level:2},{value:"Support",id:"support",children:[],level:2}],u={toc:d};function c(e){var n=e.components,o=(0,i.Z)(e,r);return(0,l.kt)("wrapper",(0,a.Z)({},u,o,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(71987).Z,width:"1200",height:"630"})),(0,l.kt)("h2",{id:"contents"},"Contents"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#overview"},"Overview")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#features"},"Features")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#add-the-plugin"},"Add the Plugin"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#asset-store"},"Asset Store")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#manual-installation"},"Manual Installation")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#import-the-plugin"},"Import the Plugin")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#resolve-android-dependencies"},"Resolve Android Dependencies")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#usage"},"Usage"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#checking-for-support"},"Checking for Support"),"   "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#simple-share"},"Simple Share")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#share-files"},"Share Files")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#launch-applications"},"Launch Applications")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#email"},"Email")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#sms"},"SMS")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#support"},"Support"))),(0,l.kt)("h2",{id:"overview"},"Overview"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://universalextensions.com/extension/com.distriqt.Share"},"Share")," plugin gives\nyou access to the default share menu to send files and information to other applications.\nYou can use one simple line of Actionscript to display the built-in native share dialogs\nallowing your user to share files and content with other applications."),(0,l.kt)("p",null,"For example, your user could use this to:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"save an image to the camera roll,"),(0,l.kt)("li",{parentName:"ul"},"send as an attachment on an email,"),(0,l.kt)("li",{parentName:"ul"},"save a pdf to Dropbox,"),(0,l.kt)("li",{parentName:"ul"},"plus much more.")),(0,l.kt)("p",null,"Additionally this ANE now has the ability to launch other applications on the user's device allowing you to deeply integrate with other applications. "),(0,l.kt)("p",null,"You can pass detailed extras to an explicit Intent on Android allowing amazing integration with other applications,\nlaunching specific views in other applications or sending detailed information for another application to use within an activity."),(0,l.kt)("p",null,"The email and sms APIs allow you to quickly integrate sending emails and sms in your AIR application with just a few lines of code. Identical code base can be used across all supported platforms allowing you to concentrate on your application and not\ndevice specifics."),(0,l.kt)("p",null,"We provide complete guides to get you up and running with sharing quickly and easily."),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(81230).Z,width:"1240",height:"930"})),(0,l.kt)("h2",{id:"features"},"Features"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Share text/image/url/files with other applications"),(0,l.kt)("li",{parentName:"ul"},"Launch applications directly ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Pass parameters and data"))),(0,l.kt)("li",{parentName:"ul"},"Email",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Provides ability to compose an email using the native UI"),(0,l.kt)("li",{parentName:"ul"},"Multiple To, CC and BCC Addresses"),(0,l.kt)("li",{parentName:"ul"},"Multiple Attachments using a file path reference"),(0,l.kt)("li",{parentName:"ul"},'Default implementation using a "mailto" link'),(0,l.kt)("li",{parentName:"ul"},"Send preformatted HTML emails on iOS and Android;"))),(0,l.kt)("li",{parentName:"ul"},"SMS",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Create an SMS and send with the native UI"),(0,l.kt)("li",{parentName:"ul"},"Send an SMS without UI on Android"))),(0,l.kt)("li",{parentName:"ul"},"Single API interface - your code works across iOS and Android with no modifications"),(0,l.kt)("li",{parentName:"ul"},"Sample project code and ASDocs reference")),(0,l.kt)("p",null,"As with all our extensions you get access to a year of support and updates as we are\ncontinually improving and updating the extensions for OS updates and feature requests."),(0,l.kt)("h2",{id:"add-the-plugin"},"Add the Plugin"),(0,l.kt)("p",null,"First step is always to add the plugin to your development environment. "),(0,l.kt)("h3",{id:"asset-store"},"Asset Store"),(0,l.kt)("p",null,"Open the Asset Store in your browser and add the Share plugin to your assets."),(0,l.kt)("p",null,'Open the Package Manager (Window > Package Manager) in the Unity Editor and select the "My Assets" section. Select the Share plugin, and click Import in the bottom right.'),(0,l.kt)("h3",{id:"manual-installation"},"Manual Installation"),(0,l.kt)("p",null,"In unity you import the package by selecting ",(0,l.kt)("inlineCode",{parentName:"p"},"Assets / Import Package / Custom Package ...")," and then browsing to the unity plugin package file: ",(0,l.kt)("inlineCode",{parentName:"p"},"com.distriqt.Share.unitypackage"),"."),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(37443).Z,width:"408",height:"268"})),(0,l.kt)("p",null,"You can manually download the extension from our repository:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-Share"},"https://github.com/distriqt/ANE-Share"))),(0,l.kt)("h3",{id:"import-the-plugin"},"Import the Plugin"),(0,l.kt)("p",null,"This will present the import dialog and display all the files for the plugin, make sure all the files are selected."),(0,l.kt)("p",null,"The plugin will be added to your project and you can now use the plugins functionality in your application."),(0,l.kt)("h3",{id:"resolve-android-dependencies"},"Resolve Android Dependencies"),(0,l.kt)("p",null,"This plugin depends on some common Android libraries, particularly the AndroidX support library."),(0,l.kt)("p",null,"You can get these dependencies using one of the following methods."),(0,l.kt)("h4",{id:"unity-jar-resolver"},"Unity Jar Resolver"),(0,l.kt)("p",null,"This is the suggested method."),(0,l.kt)("p",null,"Use the ",(0,l.kt)("em",{parentName:"p"},"Unity Jar Resolver")," plugin to download and manage the Android dependencies. "),(0,l.kt)("h6",{id:"importing"},"Importing"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"If you already use the ",(0,l.kt)("em",{parentName:"p"},"Unity Jar Resolver")," in your project you can skip this step.")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Download the latest version of the ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/googlesamples/unity-jar-resolver/releases"},(0,l.kt)("em",{parentName:"a"},"Unity Jar Resolver"))),(0,l.kt)("li",{parentName:"ul"},"Import the plugin by selecting ",(0,l.kt)("inlineCode",{parentName:"li"},"Assets / Import Package / Custom Package ...")," and locate the plugin you downloaded. The plugin will be in the zip named: ",(0,l.kt)("inlineCode",{parentName:"li"},"external-dependency-manager-latest.unitypackage")," "),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("em",{parentName:"li"},"Import Unity Package")," window, click Import")),(0,l.kt)("h6",{id:"resolving"},"Resolving"),(0,l.kt)("p",null,"By default, the resolver should run automatically and will add the dependencies required by this plugin. "),(0,l.kt)("p",null,"If you have need to resolve the dependencies manually then you will need to:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Open the menu under: ",(0,l.kt)("inlineCode",{parentName:"li"},"Assets / External Dependency Manager / Android Resolver")),(0,l.kt)("li",{parentName:"ul"},"Select ",(0,l.kt)("inlineCode",{parentName:"li"},"Resolve")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"Force Resolve"))),(0,l.kt)("p",null,"More information on the ",(0,l.kt)("em",{parentName:"p"},"Unity Jar Resolver")," can be found ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/googlesamples/unity-jar-resolver"},"here")),(0,l.kt)("h4",{id:"custom-gradle-template"},"Custom Gradle Template"),(0,l.kt)("p",null,"Unity's in-built gradle build support and exporting to android studio does not support per plugin gradle script. Therefore, this plugin cannot add the dependencies by itself."),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"mainTemplate.gradle")," is generated when you enable the ",(0,l.kt)("strong",{parentName:"p"},"Custom Gradle Template")," property on the Player window."),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"build.gradle")," exists in generated Gradle project when you enable the ",(0,l.kt)("strong",{parentName:"p"},"Export Project")," property on the Player window and Build the project."),(0,l.kt)("p",null,"Update the ",(0,l.kt)("inlineCode",{parentName:"p"},"dependencies")," section in your ",(0,l.kt)("inlineCode",{parentName:"p"},"mainTemplate.gradle")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"build.gradle")," as below:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"dependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n}\n")),(0,l.kt)("h3",{id:"proguard"},"Proguard"),(0,l.kt)("p",null,"If you are using a custom proguard configuration you may need to add the following line to ensure the interface class for the plugin is accessible to unity at runtime."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-keep class com.distriqt.extension.share.ShareUnityPlugin {*;}\n")),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("h3",{id:"checking-for-support"},"Checking for Support"),(0,l.kt)("p",null,"You can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"isSupported")," flag to determine if this extension is supported on the current platform and device."),(0,l.kt)("p",null,"This allows you to react to whether the functionality is available on the device and provide an alternative solution if not."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},"if (Share.isSupported)\n{\n    // Functionality here\n}\n")),(0,l.kt)("h2",{id:"simple-share"},"Simple Share"),(0,l.kt)("p",null,"Displaying an action to share text, image data or/and URL is simply a process of calling ",(0,l.kt)("inlineCode",{parentName:"p"},"share()")," with data you wish to share.\nAn action dialog will be displayed with a list of applications that will accept the content for sharing.\nThis generally includes applications like: Messaging, Email, Twitter, Facebook."),(0,l.kt)("p",null,"To share a URL:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'if (Share.isSupported)\n{\n    Share.Instance.share("Check out this site", null, "https://distriqt.com");\n}\n')),(0,l.kt)("p",null,"To share an image (",(0,l.kt)("inlineCode",{parentName:"p"},"Texture2D"),"):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'Texture2D image = ...; // Some image texture (eg ScreenCapture.CaptureScreenshotAsTexture())\n\nShare.Instance.share(\n    "Look at this screenshot",\n    image\n);\n')),(0,l.kt)("h3",{id:"android-events"},"Android Events"),(0,l.kt)("p",null,"A small note about events on Android. "),(0,l.kt)("p",null,"The result event may not always return success. The extension returns the event code returned from the application however as a lot of applications on Android don't necessarily respond with success or failure events you will most likely just get an ",(0,l.kt)("inlineCode",{parentName:"p"},"OnClosed")," dispatched. "),(0,l.kt)("p",null,"So you should be prepared to treat a cancelled or closed event as a success."),(0,l.kt)("h2",{id:"share-files"},"Share Files"),(0,l.kt)("p",null,"There are two operations regarding files exposed by this ANE, referred to as sharing a file (",(0,l.kt)("inlineCode",{parentName:"p"},"shareFile"),") and opening a file (",(0,l.kt)("inlineCode",{parentName:"p"},"showOpenIn"),")."),(0,l.kt)("p",null,"Both of these will display a list of applications however they are subtly different."),(0,l.kt)("p",null,"The major difference here is that sharing just attaches the file to an activity whereas opening will actually pass the file data for opening.\nYou will probably want to use the open method in most cases, however feel free to experiment with the different methods\nto see which suits your requirements better."),(0,l.kt)("p",null,"To distinguish these methods you should consider ",(0,l.kt)("inlineCode",{parentName:"p"},"shareFile")," to be used to send a file to someone, via mail, message etc\nwhereas ",(0,l.kt)("inlineCode",{parentName:"p"},"showOpenIn")," is used to open a file in an application, for playback, editing or even to post to social networks."),(0,l.kt)("h3",{id:"sharing-a-file"},"Sharing a File"),(0,l.kt)("p",null,"Displaying an action to share a file is simply a process of calling ",(0,l.kt)("inlineCode",{parentName:"p"},"shareFile")," with the path of the file you wish to share.\nYou control which applications are displayed in the share dialog by setting the ",(0,l.kt)("inlineCode",{parentName:"p"},"mimeType"),".\nThe system will then only display applications that can handle that type of file."),(0,l.kt)("p",null,"On iOS this uses the ",(0,l.kt)("inlineCode",{parentName:"p"},"UIActivityViewController")," to display a list of services that support the supplied data."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'// Here we have an image file in the streaming assets (iOS only)\nstring filePath = Path.Combine(\n    UnityEngine.Application.streamingAssetsPath, \n    "image.png"\n);\n\nShare.Instance.OnComplete += Share_OnComplete;\n\nShare.Instance.shareFile( filePath, "image.png", "image/png" );\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'private void Share_OnComplete(ShareEvent e)\n{\n    Debug.Log("Share_OnComplete");\n}\n')),(0,l.kt)("h3",{id:"opening-a-file"},"Opening a File"),(0,l.kt)("p",null,'Similarly to "Sharing a File", opening a file can be used to pass a file to another application, for opening, editting or posting to a social network. The major difference here is that sharing just attaches the file to an activity whereas opening will actually pass the file data for opening. '),(0,l.kt)("p",null,"Generally this operation gives better functionality than the share file."),(0,l.kt)("p",null,"On iOS this uses the ",(0,l.kt)("inlineCode",{parentName:"p"},"UIDocumentInteractionController")," to display a list of applications that can open the specified file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'// Here we have an image file in the streaming assets (iOS only)\nstring filePath = Path.Combine(\n    UnityEngine.Application.streamingAssetsPath, \n    "image.png"\n);\n\nShare.Instance.OnComplete += Share_OnComplete;\n\nShare.Instance.showOpenIn( filePath, "image.png", "image/png" );\n')),(0,l.kt)("p",null,"The below shows an example of opening an ",(0,l.kt)("inlineCode",{parentName:"p"},"igo")," (instagram only file) and setting the packageName and UTI to limit the applications displayed to only be Instagram. We also use the ",(0,l.kt)("inlineCode",{parentName:"p"},"Applications.IsInstalled()")," to check that Instagram is installed. More on this function in the ",(0,l.kt)("a",{parentName:"p",href:"#launch-applications"},"Launch Applications")," section."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'plugins.share.applications.Application app\n        = new plugins.share.applications.Application(\n            "com.instagram.android",\n            "instagram://");\n\nif (Share.Instance.Applications.IsInstalled(app))\n{\n    string filePath = Path.Combine(UnityEngine.Application.streamingAssetsPath, "instagram.igo");\n    \n    ShareOptions options = new ShareOptions();\n    options.packageName = "com.instagram.android";\n    options.UTI = "com.instagram.photo";\n    \n    Share.Instance.showOpenIn( filePath, "", "image/*", options );\n}\n')),(0,l.kt)("h2",{id:"positioning"},"Positioning"),(0,l.kt)("p",null,"In general the share dialog is presented as a slide up dialog presenting the available sharing options."),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(3398).Z,width:"355",height:"600"})),(0,l.kt)("p",null,"However in some circumstances such as on an iPad, the dialog will appear as a popup dialog and you can\nguide where this dialog will appear using some of the parameters on the share options."),(0,l.kt)("p",null,"The options allow you to specify two things:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"position"),": The rectangle in view at which to anchor the popover window"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"arrowDirection"),": the direction the popover is permitted to use")),(0,l.kt)("p",null,"For example if we had a button located at x,y ",(0,l.kt)("inlineCode",{parentName:"p"},"100,100")," of width ",(0,l.kt)("inlineCode",{parentName:"p"},"200")," and height ",(0,l.kt)("inlineCode",{parentName:"p"},"50"),",\nthe following will use the best positioning for the dialog and display a small arrow pointing\nto the button:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'ShareOptions options = new ShareOptions();\noptions.position = new Rect(100, 100, 200, 50);\noptions.arrowDirection = ShareOptions.ARROWDIRECTION_ANY;\n\nShare.Instance.share( "Share text", null, "http://airnativeextensions.com", options );\n')),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(42184).Z,width:"800",height:"600"})),(0,l.kt)("p",null,"Or we could limit the dialog to only appear to the left or right of the position by using\nbitwise-OR to combine the required directions:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'ShareOptions options = new ShareOptions();\noptions.position = new Rect(100, 100, 200, 50);\noptions.arrowDirection = ShareOptions.ARROWDIRECTION_LEFT | ShareOptions.ARROWDIRECTION_RIGHT;\n\nShare.Instance.share( "Share text", null, "http://airnativeextensions.com", options );\n')),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(70453).Z,width:"800",height:"600"})),(0,l.kt)("h4",{id:"centering"},"Centering"),(0,l.kt)("p",null,"If you need to center the dialog you can simply use the center of the screen as the ",(0,l.kt)("inlineCode",{parentName:"p"},"position")," and supply ",(0,l.kt)("inlineCode",{parentName:"p"},"ARROWDIRECTION_NONE")," as the ",(0,l.kt)("inlineCode",{parentName:"p"},"arrowDirection"),"."),(0,l.kt)("p",null,"For example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'ShareOptions options = new ShareOptions();\noptions.position = new Rect(centerX, centerY, 0, 0);\noptions.arrowDirection = ShareOptions.ARROWDIRECTION_NONE;\n\nShare.Instance.share( "Share text", null, "http://airnativeextensions.com", options );\n')),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(60419).Z,width:"800",height:"600"})),(0,l.kt)("h2",{id:"launch-applications"},"Launch Applications"),(0,l.kt)("p",null,"This function allows your application to start another application on the device.\nIt uses different methods on iOS and Android however both will allow you to specify start up parameters to an application:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"On Android it uses an explicit Intent with a package, type, action and extras;"),(0,l.kt)("li",{parentName:"ul"},"On iOS it uses a custom url scheme with query parameters;")),(0,l.kt)("p",null,"The simplest example of launching another application if installed."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'plugins.share.applications.Application app\n        = new plugins.share.applications.Application(\n            "com.instagram.android",\n            "instagram://");\n\nif (Share.Instance.Applications.IsInstalled(app))\n{\n    Share.Instance.Applications.Launch(app);\n}\n')),(0,l.kt)("p",null,"An example of launching Instagram and opening a specific user profile"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'plugins.share.applications.Application app\n        = new plugins.share.applications.Application(\n            "com.instagram.android",\n            "instagram://");\n\nApplicationOptions options = new ApplicationOptions();\noptions.action = ApplicationOptions.ACTION_VIEW;\noptions.data = "http://instagram.com/_u/distriqt";\noptions.parameters = "user?username=distriqt";\n \nif (Share.Instance.Applications.IsInstalled(app))\n{\n    Share.Instance.Applications.Launch(app, options);\n}\n')),(0,l.kt)("h3",{id:"ios"},"iOS"),(0,l.kt)("p",null,"On iOS you must add the application schemes you wish to query or launch to your info additions.\nIf you don't perform these additions you will always receive ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," from the ",(0,l.kt)("inlineCode",{parentName:"p"},"isInstalled()")," and the launch functions."),(0,l.kt)("p",null,"You should add the ",(0,l.kt)("inlineCode",{parentName:"p"},"LSApplicationQueriesSchemes")," value to your ",(0,l.kt)("inlineCode",{parentName:"p"},"Info.plist"),", and include the schemes for the applications you intend to query."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<key>LSApplicationQueriesSchemes</key>\n<array>\n    <string>instagram</string>\n    <string>whatsapp</string>\n</array>\n")),(0,l.kt)("h3",{id:"start-actvity"},"Start Actvity"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Android only")),(0,l.kt)("p",null,"This functionality allows you to use the Android Intent system to launch an Intent directly."),(0,l.kt)("p",null,"This is sometimes required when you need particular control over how the data is passed to an Intent."),(0,l.kt)("p",null,"Use the ",(0,l.kt)("inlineCode",{parentName:"p"},"Intent")," class to create an Intent and then pass it to the ",(0,l.kt)("inlineCode",{parentName:"p"},"StartActivity")," function."),(0,l.kt)("p",null,"For example to launch a url in the Chrome application"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'Intent intent = new Intent(Intent.ACTION_VIEW);\nintent.packageName = "com.android.chrome";\nintent.data = "https://distriqt.com";\n\nShare.Instance.Applications.StartActivity(intent);\n')),(0,l.kt)("p",null,"The return value of the ",(0,l.kt)("inlineCode",{parentName:"p"},"StartActivity")," function will be ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," if no activity could be launched matching the ",(0,l.kt)("inlineCode",{parentName:"p"},"Intent")," and will be ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," if an activity was started."),(0,l.kt)("h2",{id:"email"},"Email"),(0,l.kt)("h3",{id:"email-support"},"Email Support"),(0,l.kt)("p",null,"You can check whether the current user can send emails using the ",(0,l.kt)("inlineCode",{parentName:"p"},"isMailSupported")," call."),(0,l.kt)("p",null,"This performs some basic checks as to whether the user can send an email."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},"if (Share.Instance.Email.IsMailSupported)\n{\n    // You should be able to send an email\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"On Apple devices this checks that the user has an email account setup in the settings."),(0,l.kt)("li",{parentName:"ul"},"On Android devices this checks that there is an email client application installed.")),(0,l.kt)("h3",{id:"simple-email"},"Simple Email"),(0,l.kt)("p",null,"Sending an email is a simple task of calling the ",(0,l.kt)("inlineCode",{parentName:"p"},"SendMail()")," function, specifying the subject, body and recipients."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'string subject = "Test email from unity";\nstring body = "Some awesome message I want to send";\nstring toRecipients = "unityplugins@distriqt.com";\n\nShare.Instance.Email.OnCompose += Email_OnCompose;\nShare.Instance.Email.OnAttachmentError += Email_OnAttachmentError;\n\nbool success = Share.Instance.Email.SendMail(subject, body, toRecipients);\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'private void Email_OnCompose(EmailEvent e)\n{\n    Debug.Log("Email_OnCompose: " + e.details);\n}\n\nprivate void Email_OnAttachmentError(EmailEvent e)\n{\n    Debug.Log("Email_OnAttachmentError: " + e.details);\n}\n')),(0,l.kt)("h3",{id:"send-email-with-options"},"Send Email with Options"),(0,l.kt)("p",null," You can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"sendMailWithOptions()")," function to send more complex data, including:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"CC and BCC recipients;"),(0,l.kt)("li",{parentName:"ul"},"file attachments; and"),(0,l.kt)("li",{parentName:"ul"},"HTML content;")),(0,l.kt)("p",null,"If you wish to send html content you can set the ",(0,l.kt)("inlineCode",{parentName:"p"},"isHTML")," flag in the ",(0,l.kt)("inlineCode",{parentName:"p"},"sendMailWithOptions()")," function to true and the extension will attempt to use the body text as html."),(0,l.kt)("p",null,"The following example shows the supported HTML content:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'string subject = "Test email from unity";\nstring body = "Some awesome message I want to send";\nstring toRecipients = "unityplugins@distriqt.com";\nstring ccRecipients = "distriqt@distriqt.com";\nstring bccRecipients = "airnativeextensions@distriqt.com";\n\nstring body = \n        "<div>"+\n        "<p>This HTML email was sent using the distriqt <b>Message ANE</b></p>"+\n        "A link: <a href=\'http://airnativeextensions.com\'>airnativeextensions.com</a>"+\n        "<br/>" +\n        "Block: <blockquote>Some quote</blockquote>"+\n        "<br/>" +\n        "Bold: <b>This text should be bold</b>"+\n        "<br/>" +\n        "Italic: <i>This text should be italic</i>"+\n        "<br/>" +\n        "Colour: <font color=\'#ff0000\'>This text should be red</font>"+\n        "<div/>" ;\n\nShare.Instance.Email.SendMailWithOptions( \n        subject, \n        body, \n        toRecipients, \n        ccRecipients,\n        bccRecipients,\n        null,           // Attachments (see next section)\n        true            // isHTML flag\n    );\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"HTML content can depend on the client the user has installed. As this can vary greatly (on Android in particular) the HTML content functionality can have unexpected results in clients that don't respect or accept html content."),(0,l.kt)("p",{parentName:"blockquote"},"Our extension uses the underlying standard method to format and flag the content as html however there are still cases you may encounter issues. We highly recommend you throughly test this feature to make sure it suits your needs.")),(0,l.kt)("h4",{id:"attachments"},"Attachments"),(0,l.kt)("p",null,"You can specify an ",(0,l.kt)("inlineCode",{parentName:"p"},"Array")," of ",(0,l.kt)("inlineCode",{parentName:"p"},"Attachment")," objects each representing a file to attach to the email."),(0,l.kt)("p",null,"You create an attachment using the constructor and passing the native path to the file and we suggest passing a mime type."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},"Attachment attachment = new Attachment();\nattachment.nativePath = imageFile; // Absolute native path to file \n")),(0,l.kt)("p",null,"Then you pass your attachments to the send mail function in an ",(0,l.kt)("inlineCode",{parentName:"p"},"Attachment[]")," array:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'Attachment[] attachments = new Attachment[1];\nattachments[0] = attachment;\n\nShare.Instance.Email.SendMailWithOptions( \n        subject, \n        body, \n        toRecipients, \n        "",\n        "",\n        attachments\n    );\n')),(0,l.kt)("h2",{id:"sms"},"SMS"),(0,l.kt)("h3",{id:"sms-supported"},"SMS Supported"),(0,l.kt)("p",null,"You can check whether the current user can send sms using the ",(0,l.kt)("inlineCode",{parentName:"p"},"IsSMSSupported")," call."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},"if (Share.Instance.SMS.IsSMSSupported)\n{\n    // You should be able to send an sms\n}\n")),(0,l.kt)("h3",{id:"sending-an-sms-with-ui"},"Sending an SMS with UI"),(0,l.kt)("p",null,"The example below shows how to send an SMS using the native UI:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'if (Share.Instance.SMS.IsSMSSupported)\n{\n    Share.Instance.SMS.OnSMSSent += SMS_OnSMSSent;\n    Share.Instance.SMS.OnSMSSentError += SMS_OnSMSSentError;\n    Share.Instance.SMS.OnSMSCancelled += SMS_OnSMSCancelled;\n\n    SMS sms = new SMS();\n    sms.address = "0444444444";\n    sms.message = "Sending an SMS with the distriqt plugin";\n    \n    Share.Instance.SMS.SendSMSWithUI( sms );\n}\n\nprivate function smsEventHandler( event:SMSEvent ):void\n{\n    trace( event.type +"::"+ event.details + "::"+event.sms.toString() );\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'private void SMS_OnSMSCancelled(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSCancelled");\n}\n\nprivate void SMS_OnSMSSentError(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSSentError");\n}\n\nprivate void SMS_OnSMSSent(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSSent");\n}\n')),(0,l.kt)("h3",{id:"android-advanced-sms-operations"},"Android Advanced SMS operations"),(0,l.kt)("p",null,"On Android you can request permission to directly send and receive SMS messages without\nuser interaction. "),(0,l.kt)("h4",{id:"manifest-additions"},"Manifest Additions"),(0,l.kt)("p",null,"The plugin requires a few additions to the manifest to be able to start certain activities and to get permission to send and receive SMS. "),(0,l.kt)("p",null,"These are optional and so should be added manually currently. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="android.permission.SEND_SMS" /> \n<uses-permission android:name="android.permission.READ_SMS" /> \n<uses-permission android:name="android.permission.RECEIVE_SMS" />\n\n\x3c!-- To access SIM subscriptions --\x3e\n<uses-permission android:name="android.permission.READ_PHONE_STATE" />\n\n\n<application>\n\n    \x3c!-- TO RECEIVE SMS --\x3e\n    <receiver android:name="com.distriqt.extension.share.receivers.SMSReceiver" android:exported="true" > \n        <intent-filter android:priority="1000"> \n            <action android:name="android.provider.Telephony.SMS_RECEIVED" />\n        </intent-filter> \n    </receiver>\n\n</application>\n')),(0,l.kt)("h4",{id:"requesting-authorisation"},"Requesting Authorisation"),(0,l.kt)("p",null,"Firstly you must request authorisation to send and receive messages. "),(0,l.kt)("p",null,"You can do this using the normal ",(0,l.kt)("inlineCode",{parentName:"p"},"Permission")," process through Unity, eg to check whether you have permission to send sms directly:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'if (Permission.HasUserAuthorizedPermission("android.permission.SEND_SMS"))\n{\n    //\n}\n')),(0,l.kt)("p",null,"More information here: ",(0,l.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/android-RequestingPermissions.html"},"https://docs.unity3d.com/Manual/android-RequestingPermissions.html")),(0,l.kt)("h4",{id:"sending-an-sms"},"Sending an SMS"),(0,l.kt)("p",null,"Once you have authorisation, sending an SMS is a simple matter of calling ",(0,l.kt)("inlineCode",{parentName:"p"},"sendSMS"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'if (Share.service.sms.isSMSSupported)\n{\n    SMS sms = new SMS();\n    sms.address = "0444444444";\n    sms.message = "Sending an SMS with the distriqt plugin";\n    \n    Share.Instance.SMS.SendSMS( sms );\n}\n')),(0,l.kt)("h4",{id:"subscription-info"},"Subscription Info"),(0,l.kt)("p",null,"In some devices there are multiple SIM cards and you may wish to specify the subscription to use to send the SMS."),(0,l.kt)("p",null,"Firstly you must add the additional permission to ",(0,l.kt)("inlineCode",{parentName:"p"},"READ_PHONE_STATE")," to be able to access the subscription information."),(0,l.kt)("p",null,"Then call ",(0,l.kt)("inlineCode",{parentName:"p"},"GetSubscriptions()")," to retrieve an array of ",(0,l.kt)("inlineCode",{parentName:"p"},"SubscriptionInfo")," objects representing the different sims."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},'SubscriptionInfo[] subs = Share.Instance.SMS.GetSubscriptions();\nforeach (SubscriptionInfo sub in subs)\n{\n    Debug.Loh( "SIM: ["+sub.id+"] " + sub.displayName + "/"+sub.carrierName);\n}\n')),(0,l.kt)("p",null,"When sending an SMS you can specify the subscription id to use to send the SMS:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csharp"},"Share.Instance.SMS.SendSMS( sms, sub.id );\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note: This is only supported on Android API v22+. If it is not supported (or if you haven't requested the additional permission) ",(0,l.kt)("inlineCode",{parentName:"p"},"GetSubscriptions()")," will return an empty array and the default sim will be used to send messages.")),(0,l.kt)("h4",{id:"events"},"Events"),(0,l.kt)("p",null,"You can listen for several events, as defined in the ",(0,l.kt)("inlineCode",{parentName:"p"},"SMSManager")," class, see the documentation\nin that class for more information on the events."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},'Share.Instance.SMS.OnSMSSent += SMS_OnSMSSent;\nShare.Instance.SMS.OnSMSSentError += SMS_OnSMSSentError;\nShare.Instance.SMS.OnSMSCancelled += SMS_OnSMSCancelled;\nShare.Instance.SMS.OnSMSDelivered += SMS_OnSMSDelivered;\nShare.Instance.SMS.OnSMSNotDelivered += SMS_OnSMSNotDelivered;\nShare.Instance.SMS.OnSMSReceived += SMS_OnSMSReceived;\n\n\nprivate void SMS_OnSMSCancelled(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSCancelled");\n}\n\nprivate void SMS_OnSMSSentError(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSSentError");\n}\n\nprivate void SMS_OnSMSSent(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSSent");\n}\n\nprivate void SMS_OnSMSReceived(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSReceived");\n}\n\nprivate void SMS_OnSMSNotDelivered(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSNotDelivered");\n}\n\nprivate void SMS_OnSMSDelivered(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSDelivered");\n}\n')),(0,l.kt)("h2",{id:"support"},"Support"),(0,l.kt)("p",null,"If you need further support integrating or using this extension please feel free to contact us."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Email: ",(0,l.kt)("a",{parentName:"li",href:"mailto:unityplugins@distriqt.com"},"unityplugins@distriqt.com"))),(0,l.kt)("p",null,"We have been supporting developers for over 10 years and always happy to help."),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,(0,l.kt)("img",{src:t(31062).Z,width:"350",height:"122"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://distriqt.com"},"https://distriqt.com")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://universalextensions.com"},"more native extensions"))))}c.isMDXComponent=!0},42184:function(e,n,t){n.Z=t.p+"assets/images/Share_ios_positioning_any-679e8c90f99bb92755af57e365583fd5.png"},60419:function(e,n,t){n.Z=t.p+"assets/images/Share_ios_positioning_centered-e4e5d0eabcc2a9f96b36e5cdb5975623.png"},70453:function(e,n,t){n.Z=t.p+"assets/images/Share_ios_positioning_left-e3fc9fba1505d2f68cd00baa50c23e52.png"},3398:function(e,n,t){n.Z=t.p+"assets/images/Share_shareFile_ios_framed-735eda0832d8b02e42b5b921796cf960.png"},31062:function(e,n,t){n.Z=t.p+"assets/images/distriqt-8a12c7d5668fa470c2792eff60114604.png"},71987:function(e,n,t){n.Z=t.p+"assets/images/header-0d0f3fd672eb1bd29ff253f031101705.png"},81230:function(e,n,t){n.Z=t.p+"assets/images/promo-1c3c3996b65516afe09461918f491548.png"},37443:function(e,n,t){n.Z=t.p+"assets/images/unity-import-package-b85c051a845ff354a7a93475c2d8e06a.png"}}]);