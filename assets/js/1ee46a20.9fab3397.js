"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[26214],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=s(n),h=r,m=d["".concat(l,".").concat(h)]||d[h]||c[h]||o;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},27139:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return s},default:function(){return c}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i={title:"Apple In-App Purchases",sidebar_label:"Setup"},p=void 0,l={unversionedId:"inappbilling/apple/apple-in-app-purchases",id:"inappbilling/apple/apple-in-app-purchases",isDocsHomePage:!1,title:"Apple In-App Purchases",description:"Creating Your Products",source:"@site/docs/inappbilling/apple/apple-in-app-purchases.md",sourceDirName:"inappbilling/apple",slug:"/inappbilling/apple/apple-in-app-purchases",permalink:"/docs/inappbilling/apple/apple-in-app-purchases",tags:[],version:"current",frontMatter:{title:"Apple In-App Purchases",sidebar_label:"Setup"},sidebar:"inappbilling",previous:{title:"Overview",permalink:"/docs/inappbilling/overview"},next:{title:"Server Side Verification",permalink:"/docs/inappbilling/apple/server-side-verification"}},s=[{value:"Creating Your Products",id:"creating-your-products",children:[]},{value:"Testing",id:"testing",children:[]},{value:"Security Recommendation",id:"security-recommendation",children:[]},{value:"Further information",id:"further-information",children:[]}],u={toc:s};function c(e){var t=e.components,i=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"creating-your-products"},"Creating Your Products"),(0,o.kt)("p",null,"The first step to setting up purchases is to create your products."),(0,o.kt)("p",null,"This is done through the iTunes Connect configuration for your application. Before starting make sure you understand what you can sell using in-app purchases."),(0,o.kt)("p",null,"From the Apple ",(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Products.html#//apple_ref/doc/uid/TP40008267-CH2-SW2"},"documentation"),": "),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"You can use In-App Purchase to sell content, app functionality, and services."),(0,o.kt)("ul",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Content"),". Deliver digital content or assets, such as magazines, photos, and artwork. Content can also be used by the app itself\u2014for example, additional characters and levels in a game, filters in a camera app, and stationery in a word processor."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"App functionality"),". Unlock behavior and expand features you\u2019ve already delivered. Examples include a free game that offers multiplayer mode as an in-app purchase and a free weather app that lets users make a one-time purchase to remove ads."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Services"),". Have users pay for one-time services such as voice transcription and for ongoing services such as access to a collection of data.")),(0,o.kt)("p",{parentName:"blockquote"},"You can\u2019t use In-App Purchase to sell real-world goods and services or to sell unsuitable content."),(0,o.kt)("ul",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Real-world goods and services"),". You must deliver a digital good or service within your app when using In-App Purchase. Use a different payment mechanism to let your users buy real-world goods and services in your app, such as a credit card or payment service."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Unsuitable content"),". Don\u2019t use In-App Purchase to sell content that the isn\u2019t allowed by the App Review Guidelines\u2014for example, pornography, hate speech, or defamation.")),(0,o.kt)("p",{parentName:"blockquote"},"For detailed information about what you can offer using In-App Purchase, see your license agreement and the App Review Guidelines. Reviewing the guidelines carefully before you start coding helps you avoid delays and rejection during the review process. If the guidelines don\u2019t address your case in sufficient detail, you can ask the App Review team specific questions using the online contact form.")),(0,o.kt)("p",null,"Once you are certain you can sell your product log in to ",(0,o.kt)("a",{parentName:"p",href:"https://itunesconnect.apple.com"},"iTunes Connect")," and select your application."),(0,o.kt)("p",null,"Under ",(0,o.kt)("strong",{parentName:"p"},"Features")," you will see the ",(0,o.kt)("strong",{parentName:"p"},"In-App Purchases")," section."),(0,o.kt)("p",null,"Every product you create is only available to one particular application and cannot be shared amongst other applications."),(0,o.kt)("p",null,"To create a product (the following is adapted from the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnectInAppPurchase_Guide/Chapters/CreatingInAppPurchaseProducts.html#//apple_ref/doc/uid/TP40013727-CH3-SW1"},"Apple documentation"),"):"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Click the Add button (+) as highlighted in the screenshot below:")),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(4362).Z})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"In the section for the type of in-app purchase you want to create, click Create. "),(0,o.kt)("p",{parentName:"li"},"The in-app purchase product type cannot be changed once your in-app purchase has been created.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"In the Reference Name field, enter an internal name for the product.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"In the Product ID field, enter an alphanumeric identifier for the product."),(0,o.kt)("p",{parentName:"li"},"In iTunes Connect, you identify the in-app purchase product using a string called a ",(0,o.kt)("strong",{parentName:"p"},"product identifier"),".\nFor example, com.company.app_name.productid.\nWhen your app uses the extension to communicate with the App Store, it uses product identifiers\nto the ",(0,o.kt)("inlineCode",{parentName:"p"},"getProducts")," function to retrieve the configuration data you provided for the products.\nLater, when a user wants to purchase a product, your app identifies the product to be purchased\nusing its product identifier.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"For auto-renewable subscriptions, create a New Subscription Group, or add it to an existing group.\nAll auto-renewable subscriptions must be part of a group.\nYou can learn more in Understanding Subscription Groups and Durations.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Specify whether the product is cleared for sale.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Choose a price tier. The price tier determines both the customer price and your proceeds.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Configure the product display text for at least one language.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"In the Review Notes section, enter information that can help Apple review the product.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Upload a screenshot of the product as it appears on the device."),(0,o.kt)("p",{parentName:"li"},"This screenshot is used for Apple\u2019s review only and is not displayed on the App Store.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Click Save."))),(0,o.kt)("p",null,"Your in-app purchase product appears on the app\u2019s In-App Purchases page. "),(0,o.kt)("p",null,"If the product is Ready to Submit, the product\u2019s configuration is complete and ready for you to test the product with your app.\nYou should now be able to use the extension to query and make test purchases of your products."),(0,o.kt)("p",null,"You will need to have your product reviewed and release your application in order to have your products available to your users."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"testing"},"Testing"),(0,o.kt)("p",null,"Each platform has slightly different test environments that you will need to be aware of and setup to be able to\ncorrectly implement and test purchases."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Create a test user in the sandbox environment: ",(0,o.kt)("a",{parentName:"li",href:"https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/SettingUpUserAccounts.html#//apple_ref/doc/uid/TP40011225-CH25-SW10"},"Setting Up User Accounts")),(0,o.kt)("li",{parentName:"ul"},"Log out from your iTunes account on the test iOS device"),(0,o.kt)("li",{parentName:"ul"},"Do not sign in with your test account in the Settings"),(0,o.kt)("li",{parentName:"ul"},"Launch your application, you'll be asked to sign into the store while you are testing")),(0,o.kt)("p",null,"Test each part of your code to verify that you\u2019ve implemented it correctly."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"security-recommendation"},"Security Recommendation"),(0,o.kt)("p",null,"When you send a purchase request, create a ",(0,o.kt)("inlineCode",{parentName:"p"},"String")," token that identifies the user making this purchase request\nand include this token in the ",(0,o.kt)("inlineCode",{parentName:"p"},"applicationUsername"),". You can use a randomly generated string as the token. "),(0,o.kt)("p",null,"By way of illustration, consider the following two examples. In the normal\ncase, many different users on your server each buy coins to\nuse in your game, and each user pays for the purchase from a different\nApp Store account. In contrast, it would be very unusual for a single\nuser on your server to buy coins multiple times, paying for each\npurchase from a different App Store account. The App Store can't\ndetect this kind of irregular activity on its own\u2014it needs information\nfrom your app about which account on your server is associated with\nthe transaction."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html"},"https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"further-information"},"Further information"),(0,o.kt)("p",null,"Apple provides a guide for setting up InApp Purchases.\nIt can be quite a complex process so make sure you follow the guide exactly and complete each step: "),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://developer.apple.com/library/ios/#technotes/tn2259/_index.html"},"Adding In-App Purchase to your iOS and Mac Applications")),(0,o.kt)("p",null,"You can also see the Apple FAQs ",(0,o.kt)("a",{parentName:"p",href:"http://developer.apple.com/library/ios/#technotes/tn2259/_index.html#//apple_ref/doc/uid/DTS40009578-CH1-FREQUENTLY_ASKED_QUESTIONS"},"here"),"."))}c.isMDXComponent=!0},4362:function(e,t,n){t.Z=n.p+"assets/images/AppDetails-menu-4_2x-50c5ca0b4f0b37d394455dff8bc18985.png"}}]);