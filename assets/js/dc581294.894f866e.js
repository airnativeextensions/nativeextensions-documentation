"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[81237],{28453:(e,i,r)=>{r.d(i,{R:()=>t,x:()=>a});var n=r(96540);const s={},o=n.createContext(s);function t(e){const i=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),n.createElement(o.Provider,{value:i},e.children)}},59533:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"firebase/firestore/perform-simple-and-compound-queries","title":"Firestore - Perform simple and compound queries","description":"Cloud Firestore provides powerful query functionality for specifying which documents you want to retrieve from a collection. These queries can also be used with either query() or addSnapshotListener(), as described in Get Data and Get Realtime Updates.","source":"@site/docs/firebase/firestore/perform-simple-and-compound-queries.md","sourceDirName":"firebase/firestore","slug":"/firebase/firestore/perform-simple-and-compound-queries","permalink":"/docs/firebase/firestore/perform-simple-and-compound-queries","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Firestore - Perform simple and compound queries","sidebar_label":"Perform simple and compound queries"},"sidebar":"firebase","previous":{"title":"Get realtime updates","permalink":"/docs/firebase/firestore/get-realtime-updates"},"next":{"title":"Order and limit data","permalink":"/docs/firebase/firestore/order-and-limit-data"}}');var s=r(74848),o=r(28453);const t={title:"Firestore - Perform simple and compound queries",sidebar_label:"Perform simple and compound queries"},a=void 0,l={},c=[{value:"Simple queries",id:"simple-queries",level:2},{value:"Compound queries",id:"compound-queries",level:2},{value:"OR queries",id:"or-queries",level:2},{value:"Limitations",id:"limitations",level:3},{value:"Query limitations",id:"query-limitations",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.p,{children:["Cloud Firestore provides powerful query functionality for specifying which documents you want to retrieve from a collection. These queries can also be used with either ",(0,s.jsx)(i.code,{children:"query()"})," or ",(0,s.jsx)(i.code,{children:"addSnapshotListener()"}),", as described in ",(0,s.jsx)(i.a,{href:"/docs/firebase/firestore/get-data",children:"Get Data"})," and ",(0,s.jsx)(i.a,{href:"/docs/firebase/firestore/get-realtime-updates",children:"Get Realtime Updates"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"simple-queries",children:"Simple queries"}),"\n",(0,s.jsxs)(i.p,{children:["The following query returns all cities with state ",(0,s.jsx)(i.code,{children:"CA"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'// Create a reference to the cities collection\nvar citiesRef:CollectionReference = FirebaseFirestore.service.collection("cities");\n\n// Create a query against the collection.\nvar query:Query = citiesRef.whereEqualTo("state", "CA");\n'})}),"\n",(0,s.jsx)(i.p,{children:"The following query returns all the capital cities:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'var query:Query = FirebaseFirestore.service.collection("cities").whereEqualTo("capital", true);\n'})}),"\n",(0,s.jsxs)(i.p,{children:["There are several variants of the ",(0,s.jsx)(i.code,{children:"where..."})," method each take two parameters, a field to filter on and a value."]}),"\n",(0,s.jsx)(i.p,{children:"Some example filters:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'citiesRef.whereEqualTo("state", "CA");\ncitiesRef.whereLessThan("population", 100000);\ncitiesRef.whereGreaterThanOrEqualTo("name", "San Francisco");\n'})}),"\n",(0,s.jsx)(i.h2,{id:"compound-queries",children:"Compound queries"}),"\n",(0,s.jsxs)(i.p,{children:["You can also chain multiple ",(0,s.jsx)(i.code,{children:"where..."})," methods to create more specific queries (logical AND). However, to combine the equality operator (",(0,s.jsx)(i.code,{children:"=="}),") with a range or array-contains clause ( ",(0,s.jsx)(i.code,{children:"<"}),", ",(0,s.jsx)(i.code,{children:"<="}),", ",(0,s.jsx)(i.code,{children:">"}),", ",(0,s.jsx)(i.code,{children:">="}),", or ",(0,s.jsx)(i.code,{children:"array_contains"}),"), make sure to create a ",(0,s.jsx)(i.a,{href:"https://firebase.google.com/docs/firestore/query-data/indexing",children:"composite index"}),"."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'citiesRef.whereEqualTo("state", "CO").whereEqualTo("name", "Denver");\ncitiesRef.whereEqualTo("state", "CA").whereLessThan("population", 1000000);\n'})}),"\n",(0,s.jsxs)(i.p,{children:["You can only perform range comparisons (",(0,s.jsx)(i.code,{children:"<"}),", ",(0,s.jsx)(i.code,{children:"<="}),", ",(0,s.jsx)(i.code,{children:">"}),", ",(0,s.jsx)(i.code,{children:">="}),") on a single field."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Valid"}),": Range filters on only one field"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'citiesRef.whereGreaterThanOrEqualTo("state", "CA")\n        .whereLessThanOrEqualTo("state", "IN");\ncitiesRef.whereEqualTo("state", "CA")\n        .whereGreaterThan("population", 1000000);\n'})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Invalid"}),": Range filters on different fields:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'citiesRef.whereGreaterThanOrEqualTo("state", "CA").whereGreaterThan("population", 100000);\n'})}),"\n",(0,s.jsx)(i.h2,{id:"or-queries",children:"OR queries"}),"\n",(0,s.jsx)(i.p,{children:"You can combine constraints with a logical OR. For example:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'var query:Query = collection.where(\n        Filter.or(\n                Filter.equalTo( "capital", true),\n                Filter.greaterThanOrEqualTo("population", 1000000)\n));\n'})}),"\n",(0,s.jsx)(i.p,{children:"Firestore uses your composite indexes to serve OR queries. If your indexes do not support the query, Firestore suggests additional indexes for your database."}),"\n",(0,s.jsx)(i.p,{children:"You can combine OR queries with compound queries to filter on combinations of OR and AND operations. For example:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-actionscript",children:'var query:Query = collection.where(\n        Filter.and(\n                Filter.equalTo("state", "CA"),\n                Filter.or(\n                        Filter.equalTo("capital", true),\n                        Filter.greaterThanOrEqualTo("population", 1000000)\n                )\n        )\n);\n'})}),"\n",(0,s.jsx)(i.h3,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsx)(i.p,{children:"Note the following limitations for OR queries:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Firestore limits a query to a maximum of 30 disjunctions based on the query's disjunctive normal form. You are more likely to reach this limit when performing an AND of multiple OR groups."}),"\n",(0,s.jsx)(i.li,{children:"You can't combine not-in with in, array-contains-any, or or in the same query."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"query-limitations",children:"Query limitations"}),"\n",(0,s.jsx)(i.p,{children:"The following list summarizes Firestore query limitations:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Firestore provides support for logical OR queries through the or, in, and array-contains-any operators. These queries are limited to 30 disjunctions based on the query's disjunctive normal form."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["You can use at most one ",(0,s.jsx)(i.code,{children:"array-contains"})," clause per disjunction (",(0,s.jsx)(i.code,{children:"or"})," group). You can't combine ",(0,s.jsx)(i.code,{children:"array-contains"})," with ",(0,s.jsx)(i.code,{children:"array-contains-any"})," in the same disjunction."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["You can't combine ",(0,s.jsx)(i.code,{children:"not-in"})," with ",(0,s.jsx)(i.code,{children:"in"}),", ",(0,s.jsx)(i.code,{children:"array-contains-any"}),", or ",(0,s.jsx)(i.code,{children:"or"})," in the same query."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Only a single ",(0,s.jsx)(i.code,{children:"not-in"})," or ",(0,s.jsx)(i.code,{children:"!="})," is allowed per query."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"not-in"})," supports up to 10 comparison values."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"The sum of filters, sort orders, and parent document path (1 for a subcollection, 0 for a root collection) in a query cannot exceed 100. This is calculated based on the disjunctive normal form of the query.\nA query with an inequality filter on a field implies ordering by that field and filters for existence of that field."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["For a full description of limitations, see ",(0,s.jsx)(i.a,{href:"https://cloud.google.com/firestore/docs/query-data/queries#query_limitations",children:"Query limitations"}),"."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);