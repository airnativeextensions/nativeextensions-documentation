"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[22835],{3905:function(e,n,o){o.d(n,{Zo:function(){return p},kt:function(){return k}});var t=o(67294);function s(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function a(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?a(Object(o),!0).forEach((function(n){s(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function r(e,n){if(null==e)return{};var o,t,s=function(e,n){if(null==e)return{};var o,t,s={},a=Object.keys(e);for(t=0;t<a.length;t++)o=a[t],n.indexOf(o)>=0||(s[o]=e[o]);return s}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)o=a[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(s[o]=e[o])}return s}var c=t.createContext({}),l=function(e){var n=t.useContext(c),o=n;return e&&(o="function"==typeof e?e(n):i(i({},n),e)),o},p=function(e){var n=l(e.components);return t.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var o=e.components,s=e.mdxType,a=e.originalType,c=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=l(o),k=s,m=d["".concat(c,".").concat(k)]||d[k]||u[k]||a;return o?t.createElement(m,i(i({ref:n},p),{},{components:o})):t.createElement(m,i({ref:n},p))}));function k(e,n){var o=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var a=o.length,i=new Array(a);i[0]=d;var r={};for(var c in n)hasOwnProperty.call(n,c)&&(r[c]=n[c]);r.originalType=e,r.mdxType="string"==typeof e?e:s,i[1]=r;for(var l=2;l<a;l++)i[l]=o[l];return t.createElement.apply(null,i)}return t.createElement.apply(null,o)}d.displayName="MDXCreateElement"},56887:function(e,n,o){o.r(n),o.d(n,{frontMatter:function(){return i},contentTitle:function(){return r},metadata:function(){return c},toc:function(){return l},default:function(){return u}});var t=o(87462),s=o(63366),a=(o(67294),o(3905)),i={title:"Login - Facebook Login",sidebar_label:"Login - Facebook Login"},r=void 0,c={unversionedId:"facebookapi-legacy/login---facebook-login",id:"facebookapi-legacy/login---facebook-login",isDocsHomePage:!1,title:"Login - Facebook Login",description:"This is the legacy extension documentation. Find the new documentation here",source:"@site/docs/facebookapi-legacy/login---facebook-login.md",sourceDirName:"facebookapi-legacy",slug:"/facebookapi-legacy/login---facebook-login",permalink:"/docs/facebookapi-legacy/login---facebook-login",tags:[],version:"current",frontMatter:{title:"Login - Facebook Login",sidebar_label:"Login - Facebook Login"},sidebar:"facebookapi-legacy",previous:{title:"Login - Overview",permalink:"/docs/facebookapi-legacy/login---overview"},next:{title:"Login - Access Token",permalink:"/docs/facebookapi-legacy/login---access-token"}},l=[{value:"Login",id:"login",children:[]},{value:"Logout",id:"logout",children:[]},{value:"Permissions",id:"permissions",children:[{value:"When to ask for Permissions",id:"when-to-ask-for-permissions",children:[]},{value:"Revoked Permissions",id:"revoked-permissions",children:[]}]},{value:"Request permissions",id:"request-permissions",children:[]}],p={toc:l};function u(e){var n=e.components,o=(0,s.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,t.Z)({},p,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"This is the legacy extension documentation. Find the new documentation ",(0,a.kt)("a",{parentName:"p",href:"../facebookapi/"},"here")))),(0,a.kt)("h2",{id:"login"},"Login"),(0,a.kt)("p",null,"You should now be ready to begin using the FacebookAPI extension after calling ",(0,a.kt)("inlineCode",{parentName:"p"},"initialiseApp")),(0,a.kt)("p",null,"In order to log a user in you will be creating a session and then monitoring the session state\nusing event handlers. To start you will call the ",(0,a.kt)("inlineCode",{parentName:"p"},"createSession")," function and passing\nin the required permissions and options."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'if (FacebookAPI.isSupported)\n{\n    var permissions:Array = [ "public_profile", "email" ];\n    var readOnly:Boolean = true;\n\n    FacebookAPI.service.createSession( permissions, readOnly );\n}\n')),(0,a.kt)("p",null,"In order to respond to session events we should add some event handlers, to handle the\n",(0,a.kt)("inlineCode",{parentName:"p"},"FacebookAPISessionEvent")," events. "),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"FacebookAPISessionEvent")," contains information about the current session,\nincluding the access token and profile information, along with any errors that\nmay have occurred."),(0,a.kt)("p",null,"This class contains:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"accessToken"),": An instance of ",(0,a.kt)("inlineCode",{parentName:"li"},"AccessToken")," containing details about the token"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"profile"),": An instance of ",(0,a.kt)("inlineCode",{parentName:"li"},"Profile")," containing details about the current user")),(0,a.kt)("p",null,"These may be ",(0,a.kt)("inlineCode",{parentName:"p"},"null")," if the user isn't logged in or if profile information hasn't been retrieved yet."),(0,a.kt)("p",null,"In this example we will use a single event handler for all the events:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPENED, facebook_sessionHandler );\nFacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_INFO, facebook_sessionHandler );  \nFacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPEN_ERROR, facebook_sessionHandler );\nFacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPEN_DISABLED, facebook_sessionHandler );\nFacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_OPEN_CANCELLED, facebook_sessionHandler );\n")),(0,a.kt)("p",null,"Then in your handler:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'function facebook_sessionHandler( event:FacebookAPISessionEvent ):void\n{\n    switch (event.type)\n    {\n        case FacebookAPISessionEvent.SESSION_OPENED:\n            // A session was opened successfully and you will have an access token\n            trace("User ID:         " + event.accessToken.userId );\n            trace("Expiration date: " + event.accessToken.expirationTimestamp );\n            trace("Permissions:     " + event.accessToken.permissions.join(", "));\n            trace("Access token:    " + event.accessToken.token);\n            break;\n        \n        case FacebookAPISessionEvent.SESSION_INFO:\n            // More information about the user\'s session/profile is available\n            trace( "User name: " + event.profile.name );\n            break;\n        \n        case FacebookAPISessionEvent.SESSION_OPEN_ERROR:\n            // Triggered when a login error occurred\n            trace("Session open error: " + event.errorMessage);\n            break;\n        \n        case FacebookAPISessionEvent.SESSION_OPEN_DISABLED:\n            // Triggered when the user has disabled Facebook login for your application in iOS settings\n            trace("Session login is disabled");\n            break;\n        \n        case FacebookAPISessionEvent.SESSION_OPEN_CANCELLED:\n            // Triggered when the user cancels the sign-in process from Facebook\n            trace("User cancelled sign-in");\n            break;\n\n    }\n}\n')),(0,a.kt)("h2",{id:"logout"},"Logout"),(0,a.kt)("p",null,"To logout the current user call the ",(0,a.kt)("inlineCode",{parentName:"p"},"closeSession")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"FacebookAPI.service.closeSession();\n")),(0,a.kt)("p",null,"This function will dispatch one of two events, either a success or a failure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"FacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_CLOSED, facebook_sessionHandler );\nFacebookAPI.service.addEventListener( FacebookAPISessionEvent.SESSION_CLOSE_ERROR, facebook_sessionHandler );\n")),(0,a.kt)("p",null,"And extending the handler above:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'    ...\n\n        case FacebookAPISessionEvent.SESSION_CLOSED:\n            // The session was closed\n            trace("Session closed");\n            break;\n\n        case FacebookAPISessionEvent.SESSION_CLOSE_ERROR:\n            // An error occurred when closing the session\n            trace( "There was an error closing the session" );\n            break;\n\n    ...\n')),(0,a.kt)("h2",{id:"permissions"},"Permissions"),(0,a.kt)("p",null,"When a person logs into your app via Facebook Login you can access a subset\nof that person's data stored on Facebook. Permissions are how you ask someone\nif you can access that data. A person's privacy settings combined with what\nyou ask for will determine what you can access."),(0,a.kt)("p",null,"Permissions are strings that are passed along with a login request or an API\ncall. Here are two examples of permissions:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"email")," - Access to a person's primary email address."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"user_likes")," - Access to the list of things a person likes.")),(0,a.kt)("p",null,"You can get the list of granted and denied permissions at any time by using\nthe current ",(0,a.kt)("a",{parentName:"p",href:"login---access-token"},(0,a.kt)("inlineCode",{parentName:"a"},"AccessToken")),"."),(0,a.kt)("h3",{id:"when-to-ask-for-permissions"},"When to ask for Permissions"),(0,a.kt)("p",null,"Your app can ask for additional permissions at any time, even after a person\nlogs in for the first time. For example, the ",(0,a.kt)("inlineCode",{parentName:"p"},"publish_actions")," permission\nlets you post to a person's Facebook Timeline. It's recommended you ask for\nthis permission only when a person is ready to publish a story to Facebook.\nWhen you ask for new permissions, the person using your app will be asked\nabout those new permissions and has the ability to opt out. For more information,\nsee ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/facebook-login/permissions/requesting-and-revoking/#optimizing"},"Optimizing Permissions Requests"),"."),(0,a.kt)("p",null,"Permissions only need to be granted once per app, i.e. permissions granted\non one platform are effectively granted on all the platforms your app supports."),(0,a.kt)("h3",{id:"revoked-permissions"},"Revoked Permissions"),(0,a.kt)("p",null,"People can also revoke permissions granted to your app in Facebook's interface\nat any time after they have logged in. It is important that your app regularly\nchecks which permissions have been granted, especially when launching on a new\nplatform. We provide methods for you to check what permissions are currently\ngranted to your app."),(0,a.kt)("h2",{id:"request-permissions"},"Request permissions"),(0,a.kt)("p",null,"If you need to change the permissions of a logged in user you can use the\n",(0,a.kt)("inlineCode",{parentName:"p"},"requestPermissions")," function. This function is very similar to the ",(0,a.kt)("inlineCode",{parentName:"p"},"createSession"),"\nfunction, it requires an array of permission strings."),(0,a.kt)("p",null,"This will present another Facebook dialog requesting the new permissions."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'var permissions:Array = [ "public_profile", "user_friends", "email", "user_about_me" ];\n                \nFacebookAPI.service.requestPermissions( permissions, true );\n')),(0,a.kt)("p",null,"If you require publishing / write permissions make sure you set the second parameter\nto ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),". This specifies that you are requesting write permissions."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: Facebook does not allow requesting read and write permissions in the\nsame request so you should initially request your read permissions and then\nat some later point (normally just before you are going to perform a write)\nrequest the write permissions.")),(0,a.kt)("p",null,"Calling ",(0,a.kt)("inlineCode",{parentName:"p"},"requestPermissions")," will result in one of the ",(0,a.kt)("inlineCode",{parentName:"p"},"FacebookAPISessionEvent"),"s"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},"FacebookAPI.service.addEventListener( FacebookAPISessionEvent.REQUEST_PERMISSIONS_COMPLETED, requestPermissionsHandler );\nFacebookAPI.service.addEventListener( FacebookAPISessionEvent.REQUEST_PERMISSIONS_CANCELLED, requestPermissionsHandler );\nFacebookAPI.service.addEventListener( FacebookAPISessionEvent.REQUEST_PERMISSIONS_ERROR, requestPermissionsHandler );\n")),(0,a.kt)("p",null,"Similar to the other events in the handler you will have access to the new access token:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'function requestPermissionsHandler( event:FacebookAPISessionEvent ):void \n{\n    switch (event.type)\n    {\n        case FacebookAPISessionEvent.REQUEST_PERMISSIONS_COMPLETED:\n            trace("User ID:         " + event.accessToken.userId );\n            trace("Expiration date: " + event.accessToken.expirationTimestamp );\n            trace("Permissions:     " + event.accessToken.permissions.join(", "));\n            trace("Access token:    " + event.accessToken.token);\n            break;\n\n        case FacebookAPISessionEvent.REQUEST_PERMISSIONS_CANCELLED:\n            // User cancelled the request\n            break;\n\n        case FacebookAPISessionEvent.REQUEST_PERMISSIONS_ERROR:\n            // There was an error\n            trace( "ERROR: "+ event.errorMessage );\n            break;\n    }\n} \n')))}u.isMDXComponent=!0}}]);