(window.webpackJsonp=window.webpackJsonp||[]).push([[657],{712:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return p})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return s}));var i=t(2),a=t(6),r=(t(0),t(850)),o={title:"Handling Incoming Links",sidebar_label:"Handling Incoming Links"},p={unversionedId:"facebookapi/core/app-links/handling-incoming-links",id:"facebookapi/core/app-links/handling-incoming-links",isDocsHomePage:!1,title:"Handling Incoming Links",description:"When someone taps a link posted from your app or taps the app attribution in an Open Graph story posted from your app in Facebook, they may be presented with the option to open your content in your  app. Alternatively, they may be immediately directed to your app.",source:"@site/docs/facebookapi/core/app-links/handling-incoming-links.md",slug:"/facebookapi/core/app-links/handling-incoming-links",permalink:"/docs/facebookapi/core/app-links/handling-incoming-links",version:"current",sidebar_label:"Handling Incoming Links",sidebar:"facebookapi",previous:{title:"Support Incoming Links",permalink:"/docs/facebookapi/core/app-links/support"},next:{title:"Login",permalink:"/docs/facebookapi/login/overview"}},c=[{value:"Receiving App Links",id:"receiving-app-links",children:[]},{value:"Handling App Links",id:"handling-app-links",children:[]},{value:"Startup",id:"startup",children:[]},{value:"App Link Return-to-Referer View",id:"app-link-return-to-referer-view",children:[]},{value:"Testing",id:"testing",children:[]},{value:"Testing Deferred Links",id:"testing-deferred-links",children:[]}],l={rightToc:c};function s(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,"When someone taps a link posted from your app or taps the app attribution in an Open Graph story posted from your app in Facebook, they may be presented with the option to open your content in your  app. Alternatively, they may be immediately directed to your app."),Object(r.b)("p",null,"To ensure an engaging user experience, you should process the incoming link when your app is activated and direct the person to the object featured in the story they're coming from."),Object(r.b)("h2",{id:"receiving-app-links"},"Receiving App Links"),Object(r.b)("p",null,"Your app will receive a link where {url} is the incoming URL based on a custom scheme that you have defined for your app. You'll also receive an al_applink_data query parameter with JSON encoded content."),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-json"}),'{url}?al_applink_data=\n  {\n    "target_url": "{the-target-url}",\n    "extras": {\n        "fb_app_id": {your-fb-app-id},\n        "fb_access_token": "{your-access-token}]",\n        "fb_expires_in": "3600"\n    },\n    "referer_app_link": {\n        "url": "{your-fb-app-back-link}",\n        "app_name": "Facebook"\n    }\n  }\n')),Object(r.b)("p",null,"Where ",Object(r.b)("inlineCode",{parentName:"p"},"fb_access_token")," and ",Object(r.b)("inlineCode",{parentName:"p"},"fb_expires_in")," are only available if the person has authenticated with Facebook in your app."),Object(r.b)("h2",{id:"handling-app-links"},"Handling App Links"),Object(r.b)("p",null,"Your application will be notified of App Link openings using the ",Object(r.b)("inlineCode",{parentName:"p"},"AppLinkEvent"),". "),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-actionscript"}),"FacebookCore.instance.appLinks.addEventListener( AppLinkEvent.APP_LINK, appLinkHandler );\n")),Object(r.b)("p",null,"When this event is triggered it will contain details on the App Link in the event:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-actionscript"}),"private function appLinkHandler( event:AppLinkEvent ):void \n{\n  // event.appLink will contain the details on the App Link. \n  // If null the link could not be processed\n  if (event.appLink != null)\n  {\n    trace( \n      JSON.stringify( \n        event.appLink.data \n      ));\n  }\n}\n")),Object(r.b)("h2",{id:"startup"},"Startup"),Object(r.b)("p",null,"At startup the extension will check for app links as soon as you initialise the Core extension. You should ensure that you have added the listener for the  ",Object(r.b)("inlineCode",{parentName:"p"},"AppLinkEvent.APP_LINK")," before calling ",Object(r.b)("inlineCode",{parentName:"p"},"initialise()"),"."),Object(r.b)("p",null,"For example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-actionscript"}),'// Add the listener\nFacebook.instance.appLinks.addEventListener( AppLinkEvent.APP_LINK, appLinkHandler );\n\n// Call initialise\nFacebook.instance.initialise();\n\n\n// Handle any links\nfunction appLinkHandler( event:AppLinkEvent ):void \n{\n  trace( "APPLINK: " + event.appLink.dataJSON );\n}\n')),Object(r.b)("p",null,"After startup, events may be dispatched when your application is activated from a link."),Object(r.b)("h2",{id:"app-link-return-to-referer-view"},"App Link Return-to-Referer View"),Object(r.b)("p",null,"If you wish to return to the application that referred your application you can call the\n",Object(r.b)("inlineCode",{parentName:"p"},"openReferer")," function and pass in the same App Link that was passed in the event:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-actionscript"}),"FacebookCore.instance.appLinks.openReferer( appLink );\n")),Object(r.b)("h2",{id:"testing"},"Testing"),Object(r.b)("p",null,'The easiest way to test, is to copy the url of your app link and create a private "Group" on Facebook with your testers. Post the link into the group and then access the group through the Facebook app on your device.'),Object(r.b)("p",null,"Clicking the link should open your application."),Object(r.b)("h2",{id:"testing-deferred-links"},"Testing Deferred Links"),Object(r.b)("p",null,'You can test a link by using the "Deep Link Tester" in the ',Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://developers.facebook.com/tools/app-ads-helper/"}),"Facebook Ads Helper"),"."),Object(r.b)("p",null,'Select your application and go to the "Deep Link Tester" and click "Test Deep Link". '),Object(r.b)("p",null,"Enter the url for your app eg ",Object(r.b)("inlineCode",{parentName:"p"},"distriqtTestApp://link")," and you'll get a notification in your Facebook application. "),Object(r.b)("p",null,"You must be logged into the Facebook app on your device with your developer account in order for this to work."))}s.isMDXComponent=!0},850:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return h}));var i=t(0),a=t.n(i);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),s=function(e){var n=a.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},u=function(e){var n=s(e.components);return a.a.createElement(l.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=a.a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=s(t),d=i,h=u["".concat(o,".").concat(d)]||u[d]||b[d]||r;return t?a.a.createElement(h,p(p({ref:n},l),{},{components:t})):a.a.createElement(h,p({ref:n},l))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=d;var p={};for(var c in n)hasOwnProperty.call(n,c)&&(p[c]=n[c]);p.originalType=e,p.mdxType="string"==typeof e?e:i,o[1]=p;for(var l=2;l<r;l++)o[l]=t[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);