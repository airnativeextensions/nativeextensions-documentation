"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[4309],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return p}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=a.createContext({}),l=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=l(e.components);return a.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},S=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,u=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),S=l(t),p=r,m=S["".concat(u,".").concat(p)]||S[p]||c[p]||s;return t?a.createElement(m,i(i({ref:n},d),{},{components:t})):a.createElement(m,i({ref:n},d))}));function p(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,i=new Array(s);i[0]=S;var o={};for(var u in n)hasOwnProperty.call(n,u)&&(o[u]=n[u]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var l=2;l<s;l++)i[l]=t[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}S.displayName="MDXCreateElement"},85162:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(67294),r=t(86010),s="tabItem_Ymn6";function i(e){var n=e.children,t=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(s,i),hidden:t},n)}},74866:function(e,n,t){t.d(n,{Z:function(){return M}});var a=t(87462),r=t(67294),s=t(86010),i=t(12466),o=t(16550),u=t(91980),l=t(67392),d=t(50012);function c(e){return function(e){var n,t;return null!=(n=null==(t=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(n=e.props)&&"object"==typeof n&&"value"in n)return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}function S(e){var n=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=n?n:c(t);return function(e){var n=(0,l.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function p(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function m(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,s=(0,o.k6)(),i=function(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:t,groupId:a});return[(0,u._X)(i),(0,r.useCallback)((function(e){if(i){var n=new URLSearchParams(s.location.search);n.set(i,e),s.replace(Object.assign({},s.location,{search:n.toString()}))}}),[i,s])]}function v(e){var n,t,a,s,i=e.defaultValue,o=e.queryString,u=void 0!==o&&o,l=e.groupId,c=S(e),v=(0,r.useState)((function(){return function(e){var n,t=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var r=null!=(n=a.find((function(e){return e.default})))?n:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:i,tabValues:c})})),h=v[0],f=v[1],b=m({queryString:u,groupId:l}),y=b[0],E=b[1],g=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:l}.groupId),t=(0,d.Nk)(n),a=t[0],s=t[1],[a,(0,r.useCallback)((function(e){n&&s.set(e)}),[n,s])]),M=g[0],k=g[1],T=function(){var e=null!=y?y:M;return p({value:e,tabValues:c})?e:null}();return(0,r.useLayoutEffect)((function(){T&&f(T)}),[T]),{selectedValue:h,selectValue:(0,r.useCallback)((function(e){if(!p({value:e,tabValues:c}))throw new Error("Can't select invalid tab value="+e);f(e),E(e),k(e)}),[E,k,c]),tabValues:c}}var h=t(72389),f="tabList__CuJ",b="tabItem_LNqP";function y(e){var n=e.className,t=e.block,o=e.selectedValue,u=e.selectValue,l=e.tabValues,d=[],c=(0,i.o5)().blockElementScrollPositionUntilNextRender,S=function(e){var n=e.currentTarget,t=d.indexOf(n),a=l[t].value;a!==o&&(c(n),u(a))},p=function(e){var n,t=null;switch(e.key){case"Enter":S(e);break;case"ArrowRight":var a,r=d.indexOf(e.currentTarget)+1;t=null!=(a=d[r])?a:d[0];break;case"ArrowLeft":var s,i=d.indexOf(e.currentTarget)-1;t=null!=(s=d[i])?s:d[d.length-1]}null==(n=t)||n.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":t},n)},l.map((function(e){var n=e.value,t=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,key:n,ref:function(e){return d.push(e)},onKeyDown:p,onClick:S},i,{className:(0,s.Z)("tabs__item",b,null==i?void 0:i.className,{"tabs__item--active":o===n})}),null!=t?t:n)})))}function E(e){var n=e.lazy,t=e.children,a=e.selectedValue,s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var i=s.find((function(e){return e.props.value===a}));return i?(0,r.cloneElement)(i,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},s.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})})))}function g(e){var n=v(e);return r.createElement("div",{className:(0,s.Z)("tabs-container",f)},r.createElement(y,(0,a.Z)({},e,n)),r.createElement(E,(0,a.Z)({},e,n)))}function M(e){var n=(0,h.Z)();return r.createElement(g,(0,a.Z)({key:String(n)},e))}},65244:function(e,n,t){t.r(n),t.d(n,{assets:function(){return S},contentTitle:function(){return d},default:function(){return v},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return p}});var a=t(87462),r=t(63366),s=(t(67294),t(3905)),i=t(74866),o=t(85162),u=["components"],l={title:"SMS",sidebar_label:"SMS"},d=void 0,c={unversionedId:"share/sms",id:"share/sms",title:"SMS",description:"SMS Supported",source:"@site/docs/share/sms.mdx",sourceDirName:"share",slug:"/share/sms",permalink:"/docs/share/sms",draft:!1,tags:[],version:"current",frontMatter:{title:"SMS",sidebar_label:"SMS"},sidebar:"share",previous:{title:"Email",permalink:"/docs/share/email"},next:{title:"AppExtension - Introduction",permalink:"/docs/share/appextension---introduction"}},S={},p=[{value:"SMS Supported",id:"sms-supported",level:2},{value:"Sending an SMS with UI",id:"sending-an-sms-with-ui",level:2},{value:"Android Advanced SMS operations",id:"android-advanced-sms-operations",level:2},{value:"Manifest Additions",id:"manifest-additions",level:3},{value:"Requesting Authorisation",id:"requesting-authorisation",level:3},{value:"Sending an SMS",id:"sending-an-sms",level:3},{value:"Subscription Info",id:"subscription-info",level:3},{value:"Events",id:"events",level:3}],m={toc:p};function v(e){var n=e.components,t=(0,r.Z)(e,u);return(0,s.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"sms-supported"},"SMS Supported"),(0,s.kt)("p",null,"You can check whether the current user can send sms using the ",(0,s.kt)("inlineCode",{parentName:"p"},"isSMSSupported")," call."),(0,s.kt)(i.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"air",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Share.service.sms.isSMSSupported)\n{\n    // You should be able to send an sms\n}\n"))),(0,s.kt)(o.Z,{value:"unity",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-csharp"},"if (Share.Instance.SMS.IsSMSSupported)\n{\n    // You should be able to send an sms\n}\n")))),(0,s.kt)("h2",{id:"sending-an-sms-with-ui"},"Sending an SMS with UI"),(0,s.kt)("p",null,"The example below shows how to send an SMS using the native UI:"),(0,s.kt)(i.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"air",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'if (Share.service.sms.isSMSSupported)\n{\n    Share.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_CANCELLED, smsEventHandler );\n    Share.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_SENT, smsEventHandler );\n    Share.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_SENT_ERROR, smsEventHandler );\n                    \n    var sms:SMS = new SMS();\n    sms.address = "0444444444";\n    sms.message = "Sending an SMS with the distriqt Message ANE";\n    \n    Share.service.sms.sendSMSWithUI( sms, false );\n}\n\nfunction smsEventHandler( event:SMSEvent ):void\n{\n    trace( event.type +"::"+ event.details + "::"+event.sms.toString() );\n}\n'))),(0,s.kt)(o.Z,{value:"unity",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-csharp"},'if (Share.Instance.SMS.IsSMSSupported)\n{\n    Share.Instance.SMS.OnSMSSent += SMS_OnSMSSent;\n    Share.Instance.SMS.OnSMSSentError += SMS_OnSMSSentError;\n    Share.Instance.SMS.OnSMSCancelled += SMS_OnSMSCancelled;\n\n    SMS sms = new SMS();\n    sms.address = "0444444444";\n    sms.message = "Sending an SMS with the distriqt plugin";\n    \n    Share.Instance.SMS.SendSMSWithUI( sms );\n}\n\nprivate function smsEventHandler( event:SMSEvent ):void\n{\n    trace( event.type +"::"+ event.details + "::"+event.sms.toString() );\n}\n\nprivate void SMS_OnSMSCancelled(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSCancelled");\n}\n\nprivate void SMS_OnSMSSentError(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSSentError");\n}\n\nprivate void SMS_OnSMSSent(SMSEvent e)\n{\n    Debug.Log("SMS_OnSMSSent");\n}\n')))),(0,s.kt)("h2",{id:"android-advanced-sms-operations"},"Android Advanced SMS operations"),(0,s.kt)("p",null,"On Android you can request permission to directly send and receive SMS messages without\nuser interaction. "),(0,s.kt)("h3",{id:"manifest-additions"},"Manifest Additions"),(0,s.kt)("p",null,"The extension requires a few additions to the manifest to be able to start certain activities and to get permission to send and receive SMS. "),(0,s.kt)("p",null,"These are optional and so should be added manually currently. "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest android:installLocation="auto">\n    \n    <uses-permission android:name="android.permission.SEND_SMS" /> \n    <uses-permission android:name="android.permission.READ_SMS" /> \n    <uses-permission android:name="android.permission.RECEIVE_SMS" />\n\n    \x3c!-- To access SIM subscriptions --\x3e\n    <uses-permission android:name="android.permission.READ_PHONE_STATE" />\n\n\n    <application>\n\n        \x3c!-- TO RECEIVE SMS --\x3e\n        <receiver android:name="com.distriqt.extension.share.receivers.SMSReceiver" android:exported="true" > \n            <intent-filter android:priority="1000"> \n                <action android:name="android.provider.Telephony.SMS_RECEIVED" />\n            </intent-filter> \n        </receiver>\n\n    </application>\n\n</manifest>\n')),(0,s.kt)("h3",{id:"requesting-authorisation"},"Requesting Authorisation"),(0,s.kt)("p",null,"Firstly you must request authorisation to send and receive messages. "),(0,s.kt)(i.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"air",mdxType:"TabItem"},(0,s.kt)("p",null,"On Android these permissions are listed through the manifest additions.\nOn older versions of Android these permissions are accepted when the user installs the application.\nMore modern versions (Marshmallow 6 ","[v23]","+) require that you request the permissions similar to iOS.\nYou will still need to list them in your manifest and then follow the same code below as for iOS, except that on Android you will be able to ask multiple times.\nYou should respect the ",(0,s.kt)("inlineCode",{parentName:"p"},"SHOULD_EXPLAIN")," status by displaying additional information to your user about why you require this functionality."),(0,s.kt)("p",null,"The following code will work across both platforms:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'Share.service.sms.addEventListener( AuthorisationEvent.CHANGED, authorisationStatus_changedHandler );\n\nswitch (Share.service.sms.authorisationStatus())\n{\n    case AuthorisationStatus.SHOULD_EXPLAIN:\n    case AuthorisationStatus.NOT_DETERMINED:\n        // REQUEST ACCESS: This will display the permission dialog\n        Share.service.sms.requestAuthorisation();\n        return;\n    \n    case AuthorisationStatus.DENIED:\n    case AuthorisationStatus.UNKNOWN:\n    case AuthorisationStatus.RESTRICTED:\n        // ACCESS DENIED: You should inform your user appropriately\n        return;\n        \n    case AuthorisationStatus.AUTHORISED:\n        // AUTHORISED: SMS will be available\n        break;                      \n}\n\nfunction authorisationStatus_changedHandler( event:AuthorisationEvent ):void\n{\n    trace( "authorisationStatus_changedHandler: "+event.status );\n}\n'))),(0,s.kt)(o.Z,{value:"unity",mdxType:"TabItem"},(0,s.kt)("p",null,"You can do this using the normal ",(0,s.kt)("inlineCode",{parentName:"p"},"Permission")," process through Unity, eg to check whether you have permission to send sms directly:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-csharp"},'if (Permission.HasUserAuthorizedPermission("android.permission.SEND_SMS"))\n{\n    //\n}\n')),(0,s.kt)("p",null,"More information here: ",(0,s.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/android-RequestingPermissions.html"},"https://docs.unity3d.com/Manual/android-RequestingPermissions.html")))),(0,s.kt)("h3",{id:"sending-an-sms"},"Sending an SMS"),(0,s.kt)("p",null,"Once you have authorisation, sending an SMS is a simple matter of calling ",(0,s.kt)("inlineCode",{parentName:"p"},"sendSMS"),":"),(0,s.kt)(i.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"air",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'if (Share.service.sms.isSMSSupported)\n{\n    var sms:SMS = new SMS();\n    sms.address = "0444444444";\n    sms.message = "Testing Message ANE";\n    \n    Share.service.sms.sendSMS( sms );\n}\n'))),(0,s.kt)(o.Z,{value:"unity",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-csharp"},'if (Share.service.sms.isSMSSupported)\n{\n    SMS sms = new SMS();\n    sms.address = "0444444444";\n    sms.message = "Sending an SMS with the distriqt plugin";\n    \n    Share.Instance.SMS.SendSMS( sms );\n}\n')))),(0,s.kt)("h3",{id:"subscription-info"},"Subscription Info"),(0,s.kt)("p",null,"In some devices there are multiple SIM cards and you may wish to specify the subscription to use to send the SMS."),(0,s.kt)("p",null,"Firstly you must add the additional permission to ",(0,s.kt)("inlineCode",{parentName:"p"},"READ_PHONE_STATE")," to be able to access the subscription information."),(0,s.kt)("p",null,"Then call ",(0,s.kt)("inlineCode",{parentName:"p"},"getSubscriptions()")," to retrieve an array of ",(0,s.kt)("inlineCode",{parentName:"p"},"SubscriptionInfo")," objects representing the different sims."),(0,s.kt)(i.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"air",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'var subs:Array = Share.service.sms.getSubscriptions();\nfor each (var sub:SubscriptionInfo in subs)\n{\n    trace( "SIM: ["+sub.id+"] " + sub.displayName + "/"+sub.carrierName);\n}\n'))),(0,s.kt)(o.Z,{value:"unity",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-csharp"},'SubscriptionInfo[] subs = Share.Instance.SMS.GetSubscriptions();\nforeach (SubscriptionInfo sub in subs)\n{\n    Debug.Loh( "SIM: ["+sub.id+"] " + sub.displayName + "/"+sub.carrierName);\n}\n')))),(0,s.kt)("p",null,"When sending an SMS you can specify the subscription id to use to send the SMS:"),(0,s.kt)(i.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"air",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"Share.service.sms.sendSMS( sms, sub.id );\n"))),(0,s.kt)(o.Z,{value:"unity",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-csharp"},"Share.Instance.SMS.SendSMS( sms, sub.id );\n")))),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"This is only supported on Android API v22+. If it is not supported (or if you haven't requested the additional permission) ",(0,s.kt)("inlineCode",{parentName:"p"},"getSubscriptions()")," will return an empty array and the default sim will be used to send messages.")),(0,s.kt)("h3",{id:"events"},"Events"),(0,s.kt)("p",null,"You can listen for several events, as defined in the ",(0,s.kt)("inlineCode",{parentName:"p"},"SMSEvent")," class, see the documentation\nin that class for more information on the events."),(0,s.kt)(i.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,s.kt)(o.Z,{value:"air",mdxType:"TabItem"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'Share.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_CANCELLED,     smsEventHandler );\nShare.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_DELIVERED,     smsEventHandler );\nShare.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_RECEIVED,      smsEventHandler );\nShare.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_SENT,          smsEventHandler );\nShare.service.sms.addEventListener( SMSEvent.MESSAGE_SMS_SENT_ERROR,    smsEventHandler );\n\n\nfunction smsEventHandler( event:SMSEvent ):void\n{\n    trace( event.type +"::"+ event.details + "::"+event.sms.toString() );\n}\n'))),(0,s.kt)(o.Z,{value:"unity",mdxType:"TabItem"})))}v.isMDXComponent=!0}}]);