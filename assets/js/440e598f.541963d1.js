"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[46247],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(a),d=r,m=p["".concat(s,".").concat(d)]||p[d]||h[d]||o;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},85162:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(67294),r=a(86010);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,i),hidden:a},t)}},74866:(e,t,a)=>{a.d(t,{Z:()=>T});var n=a(87462),r=a(67294),o=a(86010),i=a(12466),l=a(16550),s=a(91980),u=a(67392),c=a(50012);function p(e){return function(e){var t,a;return null!=(t=null==(a=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:a.filter(Boolean))?t:[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function h(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=null!=t?t:p(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,a])}function d(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:a}=e;const n=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:t,groupId:a});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,o=h(e),[i,l]=(0,r.useState)((()=>function(e){var t;let{defaultValue:a,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!d({value:a,tabValues:n}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+a+'" but none of its children has the corresponding value. Available values are: '+n.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return a}const r=null!=(t=n.find((e=>e.default)))?t:n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[s,u]=m({queryString:a,groupId:n}),[p,f]=function(e){let{groupId:t}=e;const a=function(e){return e?"docusaurus.tab."+e:null}(t),[n,o]=(0,c.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:n}),y=(()=>{const e=null!=s?s:p;return d({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{y&&l(y)}),[y]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error("Can't select invalid tab value="+e);l(e),u(e),f(e)}),[u,f,o]),tabValues:o}}var y=a(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:t,block:a,selectedValue:l,selectValue:s,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.o5)(),h=e=>{const t=e.currentTarget,a=c.indexOf(t),n=u[a].value;n!==l&&(p(t),s(n))},d=e=>{var t;let a=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{var n;const t=c.indexOf(e.currentTarget)+1;a=null!=(n=c[t])?n:c[0];break}case"ArrowLeft":{var r;const t=c.indexOf(e.currentTarget)-1;a=null!=(r=c[t])?r:c[c.length-1];break}}null==(t=a)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>c.push(e),onKeyDown:d,onClick:h},i,{className:(0,o.Z)("tabs__item",b.tabItem,null==i?void 0:i.className,{"tabs__item--active":l===t})}),null!=a?a:t)})))}function g(e){let{lazy:t,children:a,selectedValue:n}=e;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function k(e){const t=f(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",b.tabList)},r.createElement(v,(0,n.Z)({},e,t)),r.createElement(g,(0,n.Z)({},e,t)))}function T(e){const t=(0,y.Z)();return r.createElement(k,(0,n.Z)({key:String(t)},e))}},31496:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>u,toc:()=>p});var n=a(87462),r=(a(67294),a(3905)),o=a(74866),i=a(85162);const l={title:"Authorisation",sidebar_label:"Authorisation"},s=void 0,u={unversionedId:"health/authorisation",id:"health/authorisation",title:"Authorisation",description:"Request Authorisation",source:"@site/docs/health/authorisation.mdx",sourceDirName:"health",slug:"/health/authorisation",permalink:"/docs/health/authorisation",draft:!1,tags:[],version:"current",frontMatter:{title:"Authorisation",sidebar_label:"Authorisation"},sidebar:"health",previous:{title:"Availablility & Updates",permalink:"/docs/health/check-for-updates"},next:{title:"Querying Data",permalink:"/docs/health/queries"}},c={},p=[{value:"Request Authorisation",id:"request-authorisation",level:2},{value:"Authorisation Status",id:"authorisation-status",level:2},{value:"Users",id:"users",level:2}],h={toc:p},d="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"request-authorisation"},"Request Authorisation"),(0,r.kt)("p",null,"In order to access the user's health data you must first request authorisation."),(0,r.kt)(o.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"air",mdxType:"TabItem"},(0,r.kt)("p",null,"To request access call the ",(0,r.kt)("inlineCode",{parentName:"p"},"requestAuthorisation()")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'Health.instance.requestAuthorisation(\n    new <HealthType> [ HealthType.STEP_COUNT ],\n    new <HealthType> [ HealthType.STEP_COUNT ],\n    function ( success:Boolean, error:Error ):void\n    {\n        trace( "requestAuthorisation:complete( " + success + " )" );\n    }\n);\n')),(0,r.kt)("p",null,"The first parameter is a ",(0,r.kt)("inlineCode",{parentName:"p"},"Vector.<HealthType>")," reqpresenting the write / share types you require access to and the second is similarly for the read types. "),(0,r.kt)("p",null,"The third parameter is a callback function that will be called once the authorisation process is complete. It must be of the form ",(0,r.kt)("inlineCode",{parentName:"p"},"function( success:Boolean, error:Error ):void"),".")),(0,r.kt)(i.Z,{value:"unity",mdxType:"TabItem"},(0,r.kt)("p",null,"To request access call the ",(0,r.kt)("inlineCode",{parentName:"p"},"RequestAuthorisation()")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'List<HealthType> shareTypes = new List<HealthType>\n{\n    HealthType.STEP_COUNT\n};\nList<HealthType> readTypes = new List<HealthType>\n{\n    HealthType.STEP_COUNT\n};\n\nHealth.Instance.RequestAuthorisation(\n    shareTypes,\n    readTypes,\n    (success, error) =>\n    {\n        Debug.Log("RequestAuthorisation: " + success + (error != null ? (" error: " + error) : ""));\n    }\n);\n')),(0,r.kt)("p",null,"The first parameter is a ",(0,r.kt)("inlineCode",{parentName:"p"},"List<HealthType>")," reqpresenting the write / share types you require access to and the second is similarly for the read types. "),(0,r.kt)("p",null,"The third parameter is a callback function that will be called once the authorisation process is complete. It must be of the form ",(0,r.kt)("inlineCode",{parentName:"p"},"Action<bool, HealthError>"),"."))),(0,r.kt)("h2",{id:"authorisation-status"},"Authorisation Status"),(0,r.kt)("p",null,"You can check the authorisation status by calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"authorisationStatus()")," method. "),(0,r.kt)(o.Z,{groupId:"framework",defaultValue:"air",values:[{label:"AIR",value:"air"},{label:"Unity",value:"unity"}],mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"air",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'Health.instance.authorisationStatus(\n    HealthType.STEP_COUNT,\n    function( status:String ):void\n    {\n        trace( "authorisationStatus: " + status );\n    }\n);\n'))),(0,r.kt)(i.Z,{value:"unity",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'Health.Instance.AuthorisationStatus(\n    HealthType.STEP_COUNT,\n    (status) =>\n    {\n        Debug.Log("AuthorisationStatus: " + status);\n    }\n);\n')))),(0,r.kt)("p",null,"The first parameter is the ",(0,r.kt)("inlineCode",{parentName:"p"},"HealthType")," you wish to query and the second is a callback function that will be called once the authorisation status has been determined (if possible).\nThis function takes one parameter being the status string as defined in the ",(0,r.kt)("inlineCode",{parentName:"p"},"AuthorisationStatus")," class."),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"On iOS there are certain limitations around the data this will return. Particularly Apple has decided not to return the read status for health data.\nInstead they suggest you request access whenever you require it and only attempt a read after you have successfully completed that process."),(0,r.kt)("p",{parentName:"admonition"},"This means that on iOS this method will only return ",(0,r.kt)("inlineCode",{parentName:"p"},"NOT_DETERMINED")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"DENIED")," for read authorisation status.")),(0,r.kt)("h2",{id:"users"},"Users"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This section is only relevant if you are using the Google Fitness API on Android.\nIt is not implemented in the Unity plugin at this time.")),(0,r.kt)("p",null,"If you are using the Google Fitness API you will need to authenticate your user using their Google account. This will give you access to the fit api and their data."),(0,r.kt)("p",null,"Follow the ",(0,r.kt)("a",{parentName:"p",href:"/docs/googleidentity/"},"Google Identity extension")," integration guide, you will just need to ensure that you add the Fitness API scope to your sign-in options:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'var options:GoogleIdentityOptions = new GoogleIdentityOptionsBuilder()\n        .addScope( "https://www.googleapis.com/auth/fitness.activity.read" )\n        .build();\n\nGoogleIdentity.service.setup( options );\n')),(0,r.kt)("p",null,"More information on the scopes is available ",(0,r.kt)("a",{parentName:"p",href:"https://developers.google.com/fit/datatypes/activity"},"here"),"."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This is only required to access the Google Fitness API and isn't required for the other services")),(0,r.kt)("p",null,"If your user isn't signed in, all queries will fail."))}m.isMDXComponent=!0}}]);