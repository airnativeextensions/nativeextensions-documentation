(window.webpackJsonp=window.webpackJsonp||[]).push([[457],{1151:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/windows_wns_credentials_1-92682835a9cf2f33a28e4da682c7f62a.png"},1152:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/windows_wns_credentials_2-29883538d6808678dbd4c253b6c993d8.png"},513:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return r})),n.d(t,"default",(function(){return p}));var i=n(2),a=(n(0),n(812));const o={title:"Windows Notification Service",sidebar_label:"Windows Notification Service"},s={unversionedId:"pushnotifications/windows-notification-service",id:"pushnotifications/windows-notification-service",isDocsHomePage:!1,title:"Windows Notification Service",description:"The Windows Push Notification Services (WNS) enable third-party developers to send toast, tile, badge, and raw updates from their own cloud service. This provides a mechanism to deliver new updates to your users in a power-efficient and dependable way.",source:"@site/docs/pushnotifications/windows-notification-service.md",slug:"/pushnotifications/windows-notification-service",permalink:"/docs/pushnotifications/windows-notification-service",version:"current",sidebar_label:"Windows Notification Service",sidebar:"pushnotifications",previous:{title:"OneSignal - Migrating to v7.5",permalink:"/docs/pushnotifications/onesignal---migrating-to-v7.5"},next:{title:"Azure Notifications",permalink:"/docs/pushnotifications/azure-notifications"}},r=[{value:"Credentials",id:"credentials",children:[]},{value:"AppxManifest",id:"appxmanifest",children:[]},{value:"Terminology",id:"terminology",children:[]},{value:"Supported Features",id:"supported-features",children:[]}],c={rightToc:r};function p({components:e,...t}){return Object(a.b)("wrapper",Object(i.a)({},c,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"The Windows Push Notification Services (WNS) enable third-party developers to send toast, tile, badge, and raw updates from their own cloud service. This provides a mechanism to deliver new updates to your users in a power-efficient and dependable way."),Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("img",{src:n(833).default}))),Object(a.b)("p",null,"WNS is supported by all of the ANEs in the repository. It is the core notification service on Windows UWP and requires minimal additional libraries so we have included it in every ANE.  "),Object(a.b)("p",null,"Make sure you have added the common ANEs from the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"add-the-extension"}),"Add the Extension")," section particularly the Core ANE and been through the specific requirements for ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"add-the-extension---windows"}),"Windows"),"."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(i.a)({parentName:"li"},{href:"#appxmanifest"}),"AppxManifest additions"))),Object(a.b)("h2",{id:"credentials"},"Credentials"),Object(a.b)("p",null,"Before you can send notifications using WNS, your app must be registered with the Store Dashboard. This will provide you with credentials for your app that your cloud service will use in authenticating with WNS. These credentials consist of a Package Security Identifier (SID) and a secret key. "),Object(a.b)("p",null,"To perform this registration, sign in to ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"https://partner.microsoft.com/en-us/dashboard/home"}),"Partner Center"),". After you create your app, you can retrieve the credentials bygoing to the WNS/MPNS page and clicking on the ",Object(a.b)("strong",{parentName:"p"},"Live Services site")," link."),Object(a.b)("p",null,Object(a.b)("img",{src:n(1151).default})),Object(a.b)("p",null,"The live services page will contain the credentials you need. In particular, you'll need to note:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("strong",{parentName:"li"},"Application Secret"),', or "client secret";'),Object(a.b)("li",{parentName:"ul"},Object(a.b)("strong",{parentName:"li"},"Package SID"),', "or client id".')),Object(a.b)("p",null,Object(a.b)("img",{src:n(1152).default})),Object(a.b)("p",null,"These credentials are used when sending notifications and not needed in your application. Your application needs no specific identifiers, however it must be created with the same ",Object(a.b)("inlineCode",{parentName:"p"},"Identity")," as the application in the store, ie you will see the ",Object(a.b)("strong",{parentName:"p"},"Application Identity")," tag in the image above matches the ",Object(a.b)("inlineCode",{parentName:"p"},"AppxManifest")," below."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Each app has its own set of credentials for its cloud service. These credentials cannot be used to send notifications to any other app.")),Object(a.b)("p",null,"See the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"windows-wns-message"}),"WNS message section")," for an example usage."),Object(a.b)("h2",{id:"appxmanifest"},"AppxManifest"),Object(a.b)("p",null,"The windows notifications UWP support requires a couple of additions to your AppxManifest in order to receive notification events when the user interacts with the notification."),Object(a.b)("p",null,'You will need to use the "Sign Separately" method to package your ',Object(a.b)("inlineCode",{parentName:"p"},"appx")," as described ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/tutorials/windows-appx-packaging-method1"}),"here"),". "),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("strong",{parentName:"p"},"If you don't make these changes then your application will not receive all the notification events."))),Object(a.b)("p",null,'During the "Update Content" step you will need to edit the ',Object(a.b)("inlineCode",{parentName:"p"},"AppxManifest.xml")," file contained in the pacakged files directory and add the following:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Declaration for ",Object(a.b)("inlineCode",{parentName:"li"},"xmlns:com")),Object(a.b)("li",{parentName:"ul"},"Declaration for ",Object(a.b)("inlineCode",{parentName:"li"},"xmlns:desktop")),Object(a.b)("li",{parentName:"ul"},"In the ",Object(a.b)("inlineCode",{parentName:"li"},"IgnorableNamespaces")," attribute, ",Object(a.b)("inlineCode",{parentName:"li"},"com")," and ",Object(a.b)("inlineCode",{parentName:"li"},"desktop")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"com:Extension")," for the COM activator"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"desktop:Extension")," for ",Object(a.b)("inlineCode",{parentName:"li"},"windows.toastNotificationActivation")," to declare your toast activator")),Object(a.b)("pre",null,Object(a.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),'<Package\n  ...\n  xmlns:com="http://schemas.microsoft.com/appx/manifest/com/windows10"\n  xmlns:desktop="http://schemas.microsoft.com/appx/manifest/desktop/windows10"\n  IgnorableNamespaces="... com desktop">\n  ...\n  <Applications>\n    <Application>\n      ...\n      <Extensions>\n\n        \x3c!--Register COM CLSID LocalServer32 registry key--\x3e\n        <com:Extension Category="windows.comServer">\n          <com:ComServer>\n            <com:ExeServer Executable="YOURAPPLICATION.exe" Arguments="-ToastActivated" DisplayName="Toast activator">\n              <com:Class Id="4db090a5-b5c9-4cbf-97a6-dd6a431f8749" DisplayName="Toast activator"/>\n            </com:ExeServer>\n          </com:ComServer>\n        </com:Extension>\n\n        \x3c!--Specify which CLSID to activate when toast clicked--\x3e\n        <desktop:Extension Category="windows.toastNotificationActivation">\n          <desktop:ToastNotificationActivation ToastActivatorCLSID="4db090a5-b5c9-4cbf-97a6-dd6a431f8749" /> \n        </desktop:Extension>\n\n      </Extensions>\n    </Application>\n  </Applications>\n </Package>\n')),Object(a.b)("p",null,"You also need to replace ",Object(a.b)("inlineCode",{parentName:"p"},"YOURAPPLICATION")," with the name of the ",Object(a.b)("inlineCode",{parentName:"p"},"Executable")," attribute in the ",Object(a.b)("inlineCode",{parentName:"p"},"Application")," node."),Object(a.b)("p",null,"For example, this is the entire ",Object(a.b)("inlineCode",{parentName:"p"},"AppxManifest.xml")," for the distriqt test application:"),Object(a.b)("pre",null,Object(a.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="utf-8"?>\n<Package\n  xmlns="http://schemas.microsoft.com/appx/manifest/foundation/windows10" \n  xmlns:uap="http://schemas.microsoft.com/appx/manifest/uap/windows10" \n  xmlns:uap2="http://schemas.microsoft.com/appx/manifest/uap/windows10/2" \n  xmlns:uap3="http://schemas.microsoft.com/appx/manifest/uap/windows10/3" \n  xmlns:uap4="http://schemas.microsoft.com/appx/manifest/uap/windows10/4" \n  xmlns:rescap="http://schemas.microsoft.com/appx/manifest/foundation/windows10/restrictedcapabilities" \n  xmlns:rescap3="http://schemas.microsoft.com/appx/manifest/foundation/windows10/restrictedcapabilities/3" \n  xmlns:desktop="http://schemas.microsoft.com/appx/manifest/desktop/windows10" \n  xmlns:desktop2="http://schemas.microsoft.com/appx/manifest/desktop/windows10/2" \n  xmlns:desktop3="http://schemas.microsoft.com/appx/manifest/desktop/windows10/3" \n  xmlns:com="http://schemas.microsoft.com/appx/manifest/com/windows10" \n  xmlns:wincap3="http://schemas.microsoft.com/appx/manifest/foundation/windows10/windowscapabilities/3" \n  IgnorableNamespaces="uap4 wincap3 rescap3 desktop desktop2 desktop3 com">\n  <Identity Name="distriqt.airnativeextensions" ProcessorArchitecture="x86" Publisher="CN=38CAD93E-B1A7-480F-B65D-3545798BA205" Version="1.0.0.0" />\n  <Properties>\n    <DisplayName>distriqt.airnativeextensions</DisplayName>\n    <PublisherDisplayName>distriqt</PublisherDisplayName>\n    <Logo>Assets\\StoreLogo.png</Logo>\n  </Properties>\n  <Resources>\n    <Resource Language="en-us" />\n    <Resource uap:Scale="100" />\n    <Resource uap:Scale="125" />\n    <Resource uap:Scale="150" />\n    <Resource uap:Scale="200" />\n    <Resource uap:Scale="400" />\n  </Resources>\n  <Dependencies>\n    <TargetDeviceFamily Name="Windows.Desktop" MinVersion="10.0.14393.0" MaxVersionTested="10.0.16299.15" />\n  </Dependencies>\n  <Capabilities>\n    <rescap:Capability Name="runFullTrust" />\n    <Capability Name="internetClient" />\n  </Capabilities>\n  <Applications>\n    <Application Id="distriqt.airnativeextensions" Executable="testnotifications.exe" EntryPoint="Windows.FullTrustApplication">\n      <uap:VisualElements DisplayName="distriqt.airnativeextensions" Description="distriqt.airnativeextensions" BackgroundColor="transparent" Square150x150Logo="Assets\\Square150x150Logo.png" Square44x44Logo="Assets\\Square44x44Logo.png">\n        <uap:DefaultTile Wide310x150Logo="Assets\\Wide310x150Logo.png" Square310x310Logo="Assets\\Square310x310Logo.png" Square71x71Logo="Assets\\Square71x71Logo.png">\n          <uap:ShowNameOnTiles>\n            <uap:ShowOn Tile="square150x150Logo" />\n            <uap:ShowOn Tile="wide310x150Logo" />\n            <uap:ShowOn Tile="square310x310Logo" />\n          </uap:ShowNameOnTiles>\n        </uap:DefaultTile>\n      </uap:VisualElements>\n\n      <Extensions>\n        \x3c!--Register COM CLSID LocalServer32 registry key--\x3e\n        <com:Extension Category="windows.comServer">\n          <com:ComServer>\n            <com:ExeServer Executable="testnotifications.exe" Arguments="-ToastActivated" DisplayName="Toast activator">\n              <com:Class Id="aa28441a-fba8-45dc-887e-149495769502" DisplayName="Toast activator"/>\n            </com:ExeServer>\n          </com:ComServer>\n        </com:Extension>\n\n        \x3c!--Specify which CLSID to activate when toast clicked--\x3e\n        <desktop:Extension Category="windows.toastNotificationActivation">\n          <desktop:ToastNotificationActivation ToastActivatorCLSID="aa28441a-fba8-45dc-887e-149495769502" /> \n        </desktop:Extension>\n        \n      </Extensions>\n    </Application>\n  </Applications>\n</Package>\n')),Object(a.b)("h2",{id:"terminology"},"Terminology"),Object(a.b)("p",null,'WNS refers to a "notification channel" that is created for you to send notifications to. This channel is the value that is returned as the "device token" from this extension. '),Object(a.b)("h2",{id:"supported-features"},"Supported Features"),Object(a.b)("p",null,"WNS supports actions, selection and notification events. "),Object(a.b)("p",null,"Actions need to be specified through the payload of the notification and any categories and actions specified through the ",Object(a.b)("inlineCode",{parentName:"p"},"Service")," aren't used."),Object(a.b)("p",null,"It doesn't support channels or groups currently."),Object(a.b)("p",null,"Authorisation is not required, and will always be in the ",Object(a.b)("inlineCode",{parentName:"p"},"authorised")," state."),Object(a.b)("p",null,"Topic subscriptions are not supported."))}p.isMDXComponent=!0},812:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var i=n(0),a=n.n(i);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),l=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=l(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(n),b=i,m=d["".concat(s,".").concat(b)]||d[b]||u[b]||o;return n?a.a.createElement(m,r(r({ref:t},p),{},{components:n})):a.a.createElement(m,r({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=b;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r.mdxType="string"==typeof e?e:i,s[1]=r;for(var p=2;p<o;p++)s[p]=n[p];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},833:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/windows-actions-f40d4a036c362429a4909da87c973acf.png"}}]);