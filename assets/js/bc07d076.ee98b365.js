"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[86430],{19195:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/android-capturescreenshot-permission-f779b483e64ba7d64eb07737d16471fe.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},37913:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/android-capturescreenshot-permission-36-f8845f612d4682007a9adad53c7096a8.png"},69266:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/android-capturescreenshot-permission-26-88c515c66bbbb870e136eb90d38ee651.png"},82127:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"image/capturing-a-screenshot","title":"Capturing a Screenshot","description":"You can use this extension to capture a screenshot of your application as bitmap data and subsequently use that data as you require.","source":"@site/docs/image/capturing-a-screenshot.md","sourceDirName":"image","slug":"/image/capturing-a-screenshot","permalink":"/docs/image/capturing-a-screenshot","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Capturing a Screenshot"},"sidebar":"image","previous":{"title":"Transformations","permalink":"/docs/image/transformations"},"next":{"title":"Migrating to v7.1","permalink":"/docs/image/migrating-to-v7.1"}}');var r=t(74848),i=t(28453);const o={title:"Capturing a Screenshot"},a=void 0,c={},l=[{value:"Completion",id:"completion",level:2},{value:"Callback",id:"callback",level:3},{value:"Events",id:"events",level:3},{value:"Platform Considerations",id:"platform-considerations",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Permission",id:"permission",level:4}];function d(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"You can use this extension to capture a screenshot of your application as bitmap data and subsequently use that data as you require."}),"\n",(0,r.jsx)(n.p,{children:"This is currently supported on iOS and Android API version 21 or higher."}),"\n",(0,r.jsxs)(n.p,{children:["To capture a screenshot you simply call ",(0,r.jsx)(n.code,{children:"captureScreenshot()"})," and await completion."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"Image.service.captureScreenshot();\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"captureScreenshot()"})," may return ",(0,r.jsx)(n.code,{children:"false"})," if the current platform is not supported or if a screenshot capture is currently in progress. You should avoid wherever possible capturing two screenshot simulataneously as this may have undesirable results."]}),"\n",(0,r.jsx)(n.h2,{id:"completion",children:"Completion"}),"\n",(0,r.jsx)(n.p,{children:"You can either use a callback or events to handle the completion of the screenshot."}),"\n",(0,r.jsx)(n.h3,{id:"callback",children:"Callback"}),"\n",(0,r.jsxs)(n.p,{children:["You can pass a callback function to the ",(0,r.jsx)(n.code,{children:"captureScreenshot()"})," method:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:'Image.service.captureScreenshot(\n        function ( bitmap:BitmapData ):void\n        {\n            if (bitmap != null)\n            {\n                // bitmap will contain the bitmap data of the screenshot\n                trace( "captureScreenshot: complete" );\n            }\n            else\n            {\n                trace( "captureScreenshot: an error occurred" );\n            }\n        }\n);\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The callback function must be of the format: ",(0,r.jsx)(n.code,{children:"function ( bitmap:BitmapData ):void"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,r.jsxs)(n.p,{children:["You can listen for a success event ",(0,r.jsx)(n.code,{children:"ImageEvent.SCREENSHOT_COMPLETE"})," or an error ",(0,r.jsx)(n.code,{children:"ImageEvent.SCREENSHOT_ERROR"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"Image.service.addEventListener( ImageEvent.SCREENSHOT_COMPLETE, screenshot_completeHandler );\nImage.service.addEventListener( ImageEvent.SCREENSHOT_ERROR, screenshot_errorHandler );\n\nvar success:Boolean = Image.service.captureScreenshot();\n\nfunction screenshot_completeHandler( event:ImageEvent ):void\n{\n    // event.bitmapData will contain the bitmap data of the screenshot\n}\n\nfunction screenshot_errorHandler( event:ImageEvent ):void\n{\n    // event.error will contain a description of the error\n    // event.errorCode will contain a numeric code of the error\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"platform-considerations",children:"Platform Considerations"}),"\n",(0,r.jsx)(n.p,{children:"There are some differences between the platforms here."}),"\n",(0,r.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,r.jsx)(n.p,{children:"On iOS your screenshot will be captured without any user interaction. It is not possible to get the current image of the status bar so only your application accessible content will be contained in the screenshot."}),"\n",(0,r.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,r.jsx)(n.p,{children:"Since Android 26 we now have a method to capture the screen without user interaction and this is now the default operation of the extension. This approach won't capture the status or navigation bar elements similar to iOS however the operation will be much more seamless."}),"\n",(0,r.jsxs)(n.p,{children:["If you wish to force the extension to use the older approach (with a media projection) you can pass ",(0,r.jsx)(n.code,{children:"false"})," as the second parameter to the ",(0,r.jsx)(n.code,{children:"captureScreenshot()"})," method, which will attempt to capture the full screen."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"Image.service.captureScreenshot( null, false );\n"})}),"\n",(0,r.jsx)(n.h4,{id:"permission",children:"Permission"}),"\n",(0,r.jsxs)(n.p,{children:["On Android, user permission is required to capture a screenshot of the full screen. On calling ",(0,r.jsx)(n.code,{children:"captureScreenshot()"})," your user may be presented a permission dialog. If they accept then the screenshot will be captured. If they deny the permission then the screenshot will fail with an error event and subsequent screenshot capture attempts will present the permission dialog again."]}),"\n",(0,r.jsx)(n.p,{children:"On older versions of the Android the following permission request is shown:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(19195).A+"",width:"400",height:"219"})}),"\n",(0,r.jsx)(n.p,{children:"With Android 26 and higher you are likely to see something like:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(69266).A+"",width:"400",height:"375"})}),"\n",(0,r.jsx)(n.p,{children:'On Android 36 and higher, you will have to get the user to select the "Share entire screen" option:'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:t(37913).A+"",width:"400",height:"366"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);