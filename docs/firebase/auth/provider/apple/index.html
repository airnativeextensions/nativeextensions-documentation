<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Auth - Provider - Apple | air native extensions</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/firebase/auth/provider/apple"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Auth - Provider - Apple | air native extensions"><meta data-react-helmet="true" name="description" content="You can let your users authenticate with Firebase using their Apple ID by using the Firebase SDK and the Apple Sign In extension to carry out the end-to-end OAuth 2.0 sign-in flow."><meta data-react-helmet="true" property="og:description" content="You can let your users authenticate with Firebase using their Apple ID by using the Firebase SDK and the Apple Sign In extension to carry out the end-to-end OAuth 2.0 sign-in flow."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/firebase/auth/provider/apple"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/firebase/auth/provider/apple" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/firebase/auth/provider/apple" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bfc8195f.css">
<link rel="preload" href="/assets/js/runtime~main.9124b803.js" as="script">
<link rel="preload" href="/assets/js/main.a657287d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1boX">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--light_3ouy navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_3oOy themedImage--dark_3zJb navbar__logo"><b class="navbar__title">AIR Native Extensions</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2ySP react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_2iFN"> </span></div><div class="react-toggle-track-x"><span class="toggle_2iFN"> </span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_3zOJ"><button class="clean-btn backToTopButton_DkI0" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_G8MK"><div class="sidebar_1tWv"><nav class="menu thin-scrollbar menu_1Iah menuWithAnnouncementBar_3acx"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/firebase/">Firebase</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Setup Firebase for your application</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core / Analytics</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Develop</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Authentication</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/add-the-extensions">Add the extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/initialise">Initialise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/manage-users">Manage Users</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Providers</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/email">Email</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/email-link">Email Link</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/anonymous">Anonymous</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/google-identity">Google Identity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/microsoft">Microsoft</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/firebase/auth/provider/apple">Apple</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/facebook">Facebook</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/twitter">Twitter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/phone">Phone</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/provider/custom-auth">Custom Auth</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/firebase/auth/link-multiple-providers">Link Multiple Providers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Realtime Database</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Cloud Firestore</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Storage</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Quality</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Crashlytics</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Performance Monitoring</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Grow</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Cloud Messaging</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Remote Config</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Dynamic Links</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Migration Guides</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Other</a></li></ul></nav></div></aside><main class="docMainContainer_3Zec"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2q91"><div class="docItemContainer_37q2"><article><div class="tocCollapsible_3moT tocMobile_2bxg"><button type="button" class="clean-btn tocCollapsibleButton_3OYu">On this page</button></div><div class="markdown"><header><h1>Sign in with Apple</h1></header><p>You can let your users authenticate with Firebase using their Apple ID by using the Firebase SDK and the Apple Sign In extension to carry out the end-to-end OAuth 2.0 sign-in flow.</p><blockquote><p>Important: To sign in with an Apple account, users must:</p><ul><li>Have an Apple ID with two-factor authentication (2FA) enabled.</li><li>Be signed in to iCloud on an Apple device.</li></ul><p>See <a href="https://support.apple.com/en-us/HT210318" target="_blank" rel="noopener noreferrer">How to use Sign in with Apple</a>. You will also need to meet these requirements to test your integration with Sign In with Apple.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="setup"></a>Setup<a class="hash-link" href="#setup" title="Direct link to heading">#</a></h2><p>To sign in users using Apple, first configure Sign In with Apple on Apple&#x27;s developer site, then enable Apple as a sign-in provider for your Firebase project.</p><p>Follow the guide in the:</p><ul><li><a href="https://github.com/distriqt/ANE-AppleSignIn/wiki/i.Setup-Application" target="_blank" rel="noopener noreferrer">Apple Sign In extension</a></li><li>or <a href="https://firebase.google.com/docs/auth/android/apple#configure-sign-in-with-apple" target="_blank" rel="noopener noreferrer">Firebase documentation</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="ios"></a>iOS<a class="hash-link" href="#ios" title="Direct link to heading">#</a></h2><p>For iOS devices you will need access to the AppleSignIn extension to perform the &quot;Sign in with Apple&quot;.</p><p>The iOS authentication with Firebase is a two step process similar to many of the other providers. You will firstly perform the normal Sign in with Apple process and then authenticate with Firebase.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="sign-in-with-apple-1"></a>Sign in with Apple<a class="hash-link" href="#sign-in-with-apple-1" title="Direct link to heading">#</a></h3><p>To perform this step you will need to add the AppleSignIn extension.  </p><ul><li><a href="https://github.com/distriqt/ANE-AppleSignIn/wiki/i.Add-the-Extension#ios" target="_blank" rel="noopener noreferrer">https://github.com/distriqt/ANE-AppleSignIn/wiki/i.Add-the-Extension#ios</a></li></ul><p>Then to perform the actual sign in setup the standard  <code>AppleSignInOptions</code> and call <code>loginWithAppleId()</code>:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">AppleSignIn.instance.addEventListener( AppleSignInErrorEvent.ERROR, errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">AppleSignIn.instance.addEventListener( AppleSignInEvent.SUCCESS, successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var options:AppleSignInOptions = new AppleSignInOptions()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setRequestedScopes([</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                AppleSignInScopes.FULL_NAME,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                AppleSignInScopes.EMAIL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            ]);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">AppleSignIn.instance.loginWithAppleId( options );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function successHandler( event:AppleSignInEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Continue to Authenticate with Firebase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function errorHandler( event:AppleSignInErrorEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Handle the error as required by your application</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;errorHandler(): [&quot; + event.errorID + &quot;] :: &quot; + event.text  );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p><img src="/assets/images/auth_signinwithapple_ios-78e06a686a3b4e77979fbb536058b263.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_1iPN" id="authenticate-with-firebase"></a>Authenticate with Firebase<a class="hash-link" href="#authenticate-with-firebase" title="Direct link to heading">#</a></h3><p>Once you have successfully performed the Sign in with Apple you will need to use the Apple Id credentials to construct a Firebase <code>OAuthCredential</code>. You will need the ID Token and the raw nonce from the success event.</p><blockquote><p>It is important to note that the credentials returned from the Apple Sign In ANE are base64 encoded so you will need to decode them before passing to Firebase</p></blockquote><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var identityToken:String = Base64.decode( event.appleIdCredential.identityToken );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">var rawNonce:String = event.rawNonce;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Then use these values to create the <code>OAuthCredential</code> using <code>apple.com</code> as the provider id:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var credential:OAuthCredential =</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        OAuthProvider.getCredential( &quot;apple.com&quot; )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setIdTokenWithRawNonce(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    identityToken,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    rawNonce</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Once you have created the <code>OAuthCredential</code> object you call <code>signInWithCredential()</code> passing in this <code>credential</code> object:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var success:Boolean = FirebaseAuth.service.signInWithCredential( credential );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>This may return <code>false</code> if your <code>credential</code> was invalid. </p><p>If successful you will receive the <code>FirebaseAuthEvent.SIGNIN_WITH_CREDENTIAL_COMPLETE</code> which will indicate the success of the sign in:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FirebaseAuth.service.addEventListener( FirebaseAuthEvent.SIGNIN_WITH_CREDENTIAL_COMPLETE, signInWithCredential_completeHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FirebaseAuth.service.signInWithCredential( credential );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function signInWithCredential_completeHandler( event:FirebaseAuthEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace(&quot;signInWithCredential_completeHandler(): &quot; + event.success );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="android"></a>Android<a class="hash-link" href="#android" title="Direct link to heading">#</a></h2><p>The AppleSignIn extension is not required for Android, the parts that we implemented in that ANE are replicated by Firebase.  The easiest way to authenticate your users with Firebase using their Apple accounts is to handle the entire sign-in flow with the Firebase Android SDK.</p><p>To handle the sign-in flow with the Firebase Android SDK, follow these steps:</p><ol><li>Construct an instance of the <code>OAuthProvider</code></li></ol><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var provider:OAuthProvider = new OAuthProvider( &quot;apple.com&quot; );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><ol start="2"><li><strong>Optional</strong>: Specify additional OAuth 2.0 scopes beyond the default that you want to request from the authentication provider using <code>setScopes()</code>:</li></ol><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var provider:OAuthProvider = new OAuthProvider( &quot;apple.com&quot; )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setScopes([ &quot;email&quot;, &quot;name&quot; ]);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><ol start="3"><li><strong>Optional</strong>: If you want to display Apple&#x27;s sign-in screen in a language other than English, set the locale parameter.</li></ol><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var provider:OAuthProvider = new OAuthProvider( &quot;apple.com&quot; )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setScopes([ &quot;email&quot;, &quot;name&quot; ])</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addCustomParameter(&quot;locale&quot;, &quot;fr&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><ol start="4"><li>Authenticate with Firebase using the OAuth provider object by calling <code>startSignInWithProvider</code> and awaiting the <code>FirebaseAuthEvent.SIGNIN_WITH_PROVIDER_COMPLETE</code>. Note that unlike other FirebaseAuth operations, this will take control of your UI by opening a Custom Chrome Tab. </li></ol><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FirebaseAuth.service.startSignInWithProvider( provider );</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>This completes with the <code>FirebaseAuthEvent.SIGNIN_WITH_PROVIDER_COMPLETE</code> event:</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FirebaseAuth.service.addEventListener(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        FirebaseAuthEvent.SIGNIN_WITH_PROVIDER_COMPLETE,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        startSignInWithProvider_completeHandler</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FirebaseAuth.service.startSignInWithProvider( provider );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function startSignInWithProvider_completeHandler( event:FirebaseAuthEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;startSignInWithProvider_completeHandler():complete:&quot; + event.success );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p><img src="/assets/images/auth_signinwithapple_android-ff7ae3be9f544d0802fb92b57f241841.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="next-steps"></a>Next Steps<a class="hash-link" href="#next-steps" title="Direct link to heading">#</a></h2><p>Once you have completed the authentication with Firebase ou should expect the normal <code>FirebaseAuthEvent.AUTHSTATE_CHANGED</code> event indicating that a user was authenticated and then you will be able to retrieve the user&#x27;s details using the standard <code>getCurrentUser()</code> where one of the providers will be the Apple details.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">var user:FirebaseUser = FirebaseAuth.service.getCurrentUser();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (user != null)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    log( &quot;identifier:  &quot; + user.identifier );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    log( &quot;displayName: &quot; + user.displayName );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    log( &quot;email:       &quot; + user.email );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    for each (var info:UserInfo in user.providers)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        log( &quot;------------------&quot; );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        log( &quot;\tprovider:    &quot; + info.providerId );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        log( &quot;\tidentifier:  &quot; + info.identifier );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        log( &quot;\tdisplayName: &quot; + info.displayName );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        log( &quot;\temail:       &quot; + info.email );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        log( &quot;\tphone:       &quot; + info.phoneNumber );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div><p>Unlike other providers supported by Firebase Auth, Apple does not provide a photo URL.</p><p>Also, when the user chooses not to share their email with the app, Apple provisions a unique email address for that user (of the form <a href="mailto:xyz@privaterelay.appleid.com" target="_blank" rel="noopener noreferrer">xyz@privaterelay.appleid.com</a>), which it shares with your app. If you configured the private email relay service, Apple forwards emails sent to the anonymized address to the user&#x27;s real email address.</p><p>Apple only shares user information such as the display name with apps the first time a user signs in. Usually, Firebase stores the display name the first time a user signs in with Apple, which you can get with the above. However, if you previously used Apple to sign a user in to the app without using Firebase, Apple will not provide Firebase with the user&#x27;s display name.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_1iPN" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h2><p>The following example demonstrates how to use the above concepts across both Android and iOS using the auth state changed event to listen for the user authentication.</p><div class="codeBlockContainer_21wf"><div class="codeBlockContent_1izB actionscript"><pre tabindex="0" class="prism-code language-actionscript codeBlock_1uaJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_3_dS"><span class="token-line" style="color:#393A34"><span class="token plain">FirebaseAuth.service.addEventListener( FirebaseAuthEvent.AUTHSTATE_CHANGED, authState_changedHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (FirebaseAuth.service.implementation == &quot;Android&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    FirebaseAuth.service.addEventListener(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            FirebaseAuthEvent.SIGNIN_WITH_PROVIDER_COMPLETE,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            startSignInWithProvider_completeHandler</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var provider:OAuthProvider = new OAuthProvider( &quot;apple.com&quot; )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setScopes([ &quot;email&quot;, &quot;name&quot; ])</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    FirebaseAuth.service.startSignInWithProvider( provider );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">else if (FirebaseAuth.service.implementation == &quot;iOS&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    AppleSignIn.instance.addEventListener( AppleSignInErrorEvent.ERROR, appleSignIn_errorHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    AppleSignIn.service.addEventListener( AppleSignInEvent.SUCCESS, appleSignIn_successHandler );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var options:AppleSignInOptions = new AppleSignInOptions()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setRequestedScopes([</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    AppleSignInScopes.FULL_NAME,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    AppleSignInScopes.EMAIL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                ]);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    AppleSignIn.service.loginWithAppleId( options );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function startSignInWithProvider_completeHandler( event:FirebaseAuthEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // End of the Android sign in process</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;startSignInWithProvider_completeHandler():complete:&quot; + event.success );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function appleSignIn_successHandler( event:AppleSignInEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    var credential:OAuthCredential =</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                OAuthProvider.getCredential( &quot;apple.com&quot; )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .setIdTokenWithRawNonce(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Base64.decode( event.appleIdCredential.identityToken ),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            event.rawNonce</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    FirebaseAuth.service.addEventListener( </span></span><span class="token-line" style="color:#393A34"><span class="token plain">            FirebaseAuthEvent.SIGNIN_WITH_CREDENTIAL_COMPLETE, </span></span><span class="token-line" style="color:#393A34"><span class="token plain">            signInWithCredential_completeHandler </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    FirebaseAuth.service.signInWithCredential( credential );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function appleSignIn_errorHandler( event:AppleSignInErrorEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;errorHandler(): [&quot; + event.errorID + &quot;] :: &quot; + event.text  );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function signInWithCredential_completeHandler( event:FirebaseAuthEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // End of the iOS sign in process</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace(&quot;signInWithCredential_completeHandler(): &quot; + event.success );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function authState_changedHandler( event:FirebaseAuthEvent ):void</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // This will be fired on both iOS and Android when the user is authenticated </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;auth state changed: &quot;+FirebaseAuth.service.isSignedIn() );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_3XUZ clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/firebase/auth/provider/microsoft"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Microsoft</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/firebase/auth/provider/facebook"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Facebook »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_2pwG thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup" class="table-of-contents__link">Setup</a></li><li><a href="#ios" class="table-of-contents__link">iOS</a><ul><li><a href="#sign-in-with-apple-1" class="table-of-contents__link">Sign in with Apple</a></li><li><a href="#authenticate-with-firebase" class="table-of-contents__link">Authenticate with Firebase</a></li></ul></li><li><a href="#android" class="table-of-contents__link">Android</a></li><li><a href="#next-steps" class="table-of-contents__link">Next Steps</a></li><li><a href="#example" class="table-of-contents__link">Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>AIR discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>starling<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>stack overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>license<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_37dV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2022 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.9124b803.js"></script>
<script src="/assets/js/main.a657287d.js"></script>
</body>
</html>