"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[33367],{28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>i});var a=n(96540);const r={},s=a.createContext(r);function c(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(s.Provider,{value:t},e.children)}},41044:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"facebookapi-legacy/graph-api---batch","title":"Graph API - Batch","description":"This is the legacy extension documentation. Find the new documentation here","source":"@site/docs/facebookapi-legacy/graph-api---batch.md","sourceDirName":"facebookapi-legacy","slug":"/facebookapi-legacy/graph-api---batch","permalink":"/docs/facebookapi-legacy/graph-api---batch","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Graph API - Batch","sidebar_label":"Graph API - Batch"},"sidebar":"facebookapi-legacy","previous":{"title":"Graph API - Basics","permalink":"/docs/facebookapi-legacy/graph-api---basics"},"next":{"title":"Graph API - Examples","permalink":"/docs/facebookapi-legacy/graph-api---examples"}}');var r=n(74848),s=n(28453);const c={title:"Graph API - Batch",sidebar_label:"Graph API - Batch"},i=void 0,o={},d=[{value:"Graph API Batch",id:"graph-api-batch",level:2},{value:"Events",id:"events",level:3},{value:"Callbacks",id:"callbacks",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.admonition,{type:"caution",children:(0,r.jsxs)(t.p,{children:["This is the legacy extension documentation. Find the new documentation ",(0,r.jsx)(t.a,{href:"../facebookapi/",children:"here"})]})}),"\n",(0,r.jsx)(t.h2,{id:"graph-api-batch",children:"Graph API Batch"}),"\n",(0,r.jsxs)(t.p,{children:["If you have several requests you wish to batch together you can use the ",(0,r.jsx)(t.code,{children:"GraphAPIRequestBatchBuilder"})," to create a batch request."]}),"\n",(0,r.jsxs)(t.p,{children:["To create a batch, firstly create your ",(0,r.jsx)(t.code,{children:"GraphAPIRequest"})," instances as normal:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:'var request1:GraphAPIRequest = new GraphAPIRequestBuilder()\n\t\t.setPath(\'/me\')\n\t\t.setMethod(\'GET\')\n\t\t.addFields(["first_name","gender","picture.width(160).height(160)" ])\n\t\t.build();\n\nvar request2:GraphAPIRequest = new GraphAPIRequestBuilder()\n\t\t.setPath(\'/me/friends\')\n\t\t.setMethod(\'GET\')\n\t\t.addParameter("limit", 200 )\n\t\t.addFields(["id","first_name","installed","picture.width(160).height(160)" ])\n\t\t.build();\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Then construct the ",(0,r.jsx)(t.code,{children:"GraphAPIRequestBatch"})," using a ",(0,r.jsx)(t.code,{children:"GraphAPIRequestBatchBuilder"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:"var batch:GraphAPIRequestBatch = new GraphAPIRequestBatchBuilder()\n\t.addRequest( request1 )\n\t.addRequest( request2 )\n\t.build();\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Then call ",(0,r.jsx)(t.code,{children:"makeBatchRequest()"})," with your ",(0,r.jsx)(t.code,{children:"GraphAPIRequestBatch"})," instance:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:"FacebookAPI.service.graphAPI.makeBatchRequest( batch );\n"})}),"\n",(0,r.jsx)(t.h3,{id:"events",children:"Events"}),"\n",(0,r.jsx)(t.p,{children:"You can add event listeners to the request objects to process the return data from each individual request, as you would for a single request:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:"request1.addEventListener( GraphAPIRequestEvent.COMPLETE, request1_completeHandler );\nrequest1.addEventListener( GraphAPIRequestEvent.ERROR, request1_errorHandler );\nrequest2.addEventListener( GraphAPIRequestEvent.COMPLETE, request2_completeHandler );\nrequest2.addEventListener( GraphAPIRequestEvent.ERROR, request2_errorHandler );\n\nfunction request1_completeHandler( event:GraphAPIRequestEvent ):void \n{\n\t// event.data will contain the Facebook response\n}\n\nfunction request1_errorHandler( event:GraphAPIRequestEvent ):void \n{\n\t// event.errorCode and event.errorMessage will contain details on the error\n}\n\nfunction request2_completeHandler( event:GraphAPIRequestEvent ):void \n{\n\t// event.data will contain the Facebook response\n}\n\nfunction request2_errorHandler( event:GraphAPIRequestEvent ):void \n{\n\t// event.errorCode and event.errorMessage will contain details on the error\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Additionally you can listen for a ",(0,r.jsx)(t.code,{children:"GraphAPIRequestEvent.BATCH_COMPLETE"})," event to be notified when all the requests have been completed."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:'batch.addEventListener( GraphAPIRequestEvent.BATCH_COMPLETE, batch_completeHandler );\n\t\t\t\t\nfunction batch_completeHandler( event:GraphAPIRequestEvent ):void\n{\n\ttrace( "batch complete" );\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["You should make sure to add these listeners before the call to ",(0,r.jsx)(t.code,{children:"makeBatchRequest()"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"callbacks",children:"Callbacks"}),"\n",(0,r.jsxs)(t.p,{children:["As an alternative to events, you can add callbacks to the requests as you do with a normal ",(0,r.jsx)(t.code,{children:"GraphAPIRequest"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:'var request1:GraphAPIRequest = new GraphAPIRequestBuilder()\n\t.setPath( "/me" )\n\t.setCompleteCallback(\n\t\t\tfunction( data:Object ):void \n\t\t\t{\n\t\t\t\tlog( "request complete: " + JSON.stringify(data) );\n\t\t\t}\n\t)\n\t.setErrorCallback(\n\t\t\tfunction( code:int, message:String ):void \n\t\t\t{\n\t\t\t\tlog( "request error: " + code + "::"+ message );\n\t\t\t}\n\t)\n\t.build();\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Additionally you can add a completion callback to the ",(0,r.jsx)(t.code,{children:"GraphAPIRequestBatch"})," object:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-actionscript",children:'var batch:GraphAPIRequestBatch = new GraphAPIRequestBatchBuilder()\n\t.addRequest( request1 )\n\t.addRequest( request2 )\n\t.addRequest( request3 )\n\t.setCompleteCallback(\n\t\t\tfunction():void\n\t\t\t{\n\t\t\t\tlog( "batch complete" );\n\t\t\t}\n\t)\n\t.build();\n'})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);