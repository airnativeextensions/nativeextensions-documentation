"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[67682],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var t=s(96540);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}},31493:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"scanner/scanning","title":"Scanning","description":"Once you have setup your application and gained permission to access the camera, then there are three approaches you can take to scan, 2 that utilise the camera directly and a third option to scan a provided image.","source":"@site/docs/scanner/scanning.md","sourceDirName":"scanner","slug":"/scanner/scanning","permalink":"/docs/scanner/scanning","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Scanning","sidebar_label":"Scanning"},"sidebar":"scanner","previous":{"title":"Requesting Access","permalink":"/docs/scanner/requesting-access"},"next":{"title":"Scanning Bitmap Data","permalink":"/docs/scanner/scanning-bitmap-data"}}');var i=s(74848),a=s(28453);const r={title:"Scanning",sidebar_label:"Scanning"},c=void 0,o={},l=[{value:"Scan Activity",id:"scan-activity",level:2},{value:"Scan in Viewport",id:"scan-in-viewport",level:2},{value:"Updating the Viewport",id:"updating-the-viewport",level:3},{value:"Stop Scanning",id:"stop-scanning",level:2},{value:"Events",id:"events",level:2},{value:"Options",id:"options",level:2},{value:"Scanner Options",id:"scanner-options",level:3},{value:"Camera Options",id:"camera-options",level:3},{value:"Viewport Options",id:"viewport-options",level:3},{value:"Activity Options",id:"activity-options",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Once you have setup your application and gained permission to access the camera, then there are three approaches you can take to scan, 2 that utilise the camera directly and a third option to scan a provided image."}),"\n",(0,i.jsx)(n.p,{children:"The first is using a fullscreen activity which will take over the fullscreen of your application, presenting a camera preview and some UI elements."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(34965).A+"",width:"700",height:"452"})}),"\n",(0,i.jsx)(n.p,{children:"The second is to show a preview contained within an area (viewport) of your application. This view will sit above any other elements however you can create a UI around the preview to control the scanner or present feedback to your user."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:s(41696).A+"",width:"700",height:"452"})}),"\n",(0,i.jsx)(n.p,{children:"The third is to scan an image directly by passing bitmap data to the extension."}),"\n",(0,i.jsxs)(n.p,{children:["Below we describe the methods using the camera. You can find information on bitmap data scanning ",(0,i.jsx)(n.a,{href:"/docs/scanner/scanning-bitmap-data",children:"here"}),"."]}),"\n",(0,i.jsx)(n.admonition,{title:"Authorisation",type:"info",children:(0,i.jsxs)(n.p,{children:["Ensure you have ",(0,i.jsx)(n.a,{href:"/docs/scanner/requesting-access",children:"requested authorisaton"})," to use the camera before attempting to use these methods."]})}),"\n",(0,i.jsx)(n.h2,{id:"scan-activity",children:"Scan Activity"}),"\n",(0,i.jsxs)(n.p,{children:["To start the fullscreen scan activity, call the ",(0,i.jsx)(n.code,{children:"startScanActivity()"})," method passing in the required options. This method takes several parameters:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#activity-options",children:(0,i.jsx)(n.code,{children:"ActivityOptions"})}),": instance describing the appearance of the fullscreen UI elements;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#scanner-options",children:(0,i.jsx)(n.code,{children:"ScannerOptions"})}),": describing the options for the scanning algorithm (eg symbologies);"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#camera-options",children:(0,i.jsx)(n.code,{children:"CameraOptions"})}),": options for configuring the camera such as whether to use the front or rear camera;"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can pass in ",(0,i.jsx)(n.code,{children:"null"})," (the default) for all the options to simply use the defaults."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"Scanner.service.startScanActivity();\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This function will return a ",(0,i.jsx)(n.code,{children:"Boolean"})," value indicating the success of the start request. If it returns ",(0,i.jsx)(n.code,{children:"false"})," there may be another scan in progress or there was an error."]}),"\n",(0,i.jsx)(n.p,{children:"To specify options:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:'var scanOptions:ScannerOptions = new ScannerOptions();\nscanOptions.symbologies = [];\n\nvar uiOptions:ActivityOptions = new ActivityOptions();\nuiOptions.singleResult = false;\nuiOptions.heading = "Scan a barcode";\nuiOptions.cancelLabel = "FINISH";\nuiOptions.colour = 0x4863A0;\nuiOptions.textColour = 0xFFFFFF;\n\nuiOptions.overlay = _overlay.bitmapData;\nuiOptions.overlayAutoScale = true;\n\nvar cameraOptions:CameraOptions = new CameraOptions();\ncameraOptions.refocusInterval = 0;\ncameraOptions.camera    = CameraOptions.CAMERA_REAR;\ncameraOptions.torchMode = CameraOptions.TORCH_AUTO;\n\nvar success:Boolean = Scanner.service.startScanActivity(\n\t\tscanOptions,\n\t\tuiOptions,\n\t\tcameraOptions\n);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"scan-in-viewport",children:"Scan in Viewport"}),"\n",(0,i.jsxs)(n.p,{children:["To start the scan in a viewport call the ",(0,i.jsx)(n.code,{children:"startScanInViewport()"})," method passing in the required options. This method takes several parameters:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#viewport-options",children:(0,i.jsx)(n.code,{children:"ViewportOptions"})}),": instance describing the viewport for the camera preview;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#scanner-options",children:(0,i.jsx)(n.code,{children:"ScannerOptions"})}),": describing the options for the scanning algorithm (eg symbologies);"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#camera-options",children:(0,i.jsx)(n.code,{children:"CameraOptions"})}),": options for configuring the camera such as whether to use the front or rear camera;"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can pass in ",(0,i.jsx)(n.code,{children:"null"})," (the default) for all the options to simply use the defaults, however we suggest you at least pass a valid ",(0,i.jsx)(n.code,{children:"ViewportOptions"})," instance to set the initial frame for the camera preview."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"var frame:Rectangle = ...;\n\nvar viewportOptions:ViewportOptions = new ViewportOptions()\n\t\t.setFrame( frame );\n\nScanner.service.startScanInViewport( viewportOptions );\n"})}),"\n",(0,i.jsx)(n.p,{children:"To specify all the options:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"var viewportOptions:ViewportOptions = new ViewportOptions()\n\t\t.setFrame( new Rectangle( 100, 100, 500, 300 ) );\n\nvar scanOptions:ScannerOptions = new ScannerOptions()\n\t\t.setSymbologies( [ Symbology.QRCODE ] );\n\nvar cameraOptions:CameraOptions = new CameraOptions()\n\t\t.setCamera( CameraOptions.CAMERA_REAR )\n\t\t.setTorchMode( CameraOptions.TORCH_AUTO );\n\nvar success:Boolean = Scanner.service.startScanInViewport(\n\t\tviewportOptions,\n\t\tscanOptions,\n\t\tcameraOptions\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"updating-the-viewport",children:"Updating the Viewport"}),"\n",(0,i.jsx)(n.p,{children:"You can change the viewport frame for the camera preview while scanning is in progress."}),"\n",(0,i.jsxs)(n.p,{children:["To change the viewport frame call the ",(0,i.jsx)(n.code,{children:"setScanViewport()"})," method passing the new frame:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"Scanner.service.setScanViewport(\n\tnew Rectangle( 50, 200, 600, 600 )\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"stop-scanning",children:"Stop Scanning"}),"\n",(0,i.jsxs)(n.p,{children:["To stop the scan process, call the ",(0,i.jsx)(n.code,{children:"stopScan()"})," method. This will stop the active scan process independent of the method you are using to scan (i.e. activity or viewport)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"Scanner.service.stopScan();\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will stop the scan process and release any camera resources."}),"\n",(0,i.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.p,{children:["There are several events dispatched at various points of the scanning process, these are defined by the ",(0,i.jsx)(n.code,{children:"ScannerEvent"})," and ",(0,i.jsx)(n.code,{children:"ScannerErrorEvent"})," classes."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ScannerEvent.CODE_FOUND"}),": Dispatched when a code was detected;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ScannerEvent.SCAN_START"}),": Dispatched when a scanning process was started;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ScannerEvent.SCAN_STOPPED"}),": Dispatched when a scanning process was stopped / terminated;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ScannerEvent.CANCELLED"}),": Dispatched when the user cancels the scan activity;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ScannerErrorEvent.ERROR"}),": Dispatched when an error occurred in the scan process;"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The most important is probably the ",(0,i.jsx)(n.code,{children:"CODE_FOUND"})," event that is dispatched with the scan result. This event has a ",(0,i.jsx)(n.code,{children:"result"})," property that contains information about the scan result as an instance of the ",(0,i.jsx)(n.code,{children:"ScanResult"})," class."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:'Scanner.service.addEventListener( ScannerEvent.CODE_FOUND, codeFoundHandler );\n\nfunction codeFoundHandler( event:ScannerEvent ):void\n{\n\tvar result:ScanResult = event.result;\n\n\ttrace( "code found: " + result.data  );\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,i.jsx)(n.p,{children:"When scanning there are some options that can be used."}),"\n",(0,i.jsx)(n.h3,{id:"scanner-options",children:"Scanner Options"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ScannerOptions"})," class represents any options relating to the scanning algorithm to use, such as the list of symbol types to enable. An instance of this can be passed to any of the scan methods."]}),"\n",(0,i.jsxs)(n.p,{children:["To create a ",(0,i.jsx)(n.code,{children:"ScannerOptions"})," you can use the properties on an instance of the class or use the builder methods."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"var scanOptions:ScannerOptions = new ScannerOptions();\nscanOptions.symbologies = [ Symbology.QRCODE ];\n"})}),"\n",(0,i.jsx)(n.p,{children:"or"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"var scanOptions:ScannerOptions = new ScannerOptions()\n\t.setSymbologies( [ Symbology.QRCODE ] );\n"})}),"\n",(0,i.jsx)(n.h3,{id:"camera-options",children:"Camera Options"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"CameraOptions"})," class represents any configuration options around the camera functionality, such as device position."]}),"\n",(0,i.jsxs)(n.p,{children:["To create a ",(0,i.jsx)(n.code,{children:"CameraOptions"})," you can use the properties on an instance of the class or use the builder methods."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"var cameraOptions:CameraOptions = new CameraOptions();\ncameraOptions.camera    = CameraOptions.CAMERA_REAR;\ncameraOptions.torchMode = CameraOptions.TORCH_AUTO;\n"})}),"\n",(0,i.jsx)(n.p,{children:"or"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"var cameraOptions:CameraOptions = new CameraOptions()\n\t.setCamera( CameraOptions.CAMERA_REAR )\n\t.setTorchMode( CameraOptions.TORCH_AUTO );\n"})}),"\n",(0,i.jsx)(n.h3,{id:"viewport-options",children:"Viewport Options"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ViewportOptions"})," class represents the options to define the area of the screen to use as the viewport for the ",(0,i.jsx)(n.code,{children:"startScanInViewport()"})," method."]}),"\n",(0,i.jsxs)(n.p,{children:["The most important option here is the ",(0,i.jsx)(n.code,{children:"frame"})," which defines the area of the screen to place the camera preview. It should be in native pixel coordinates."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-actionscript",children:"var viewportOptions:ViewportOptions = new ViewportOptions()\n\t\t.setFrame( new Rectangle( 100, 100, 500, 300 ) );\n"})}),"\n",(0,i.jsx)(n.h3,{id:"activity-options",children:"Activity Options"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ActivityOptions"})," class describes the appearance of the fullscreen UI elements for the ",(0,i.jsx)(n.code,{children:"startScanActivity()"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Options include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cancelLabel"}),": The label to place on the cancel button;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"singleResult"}),": If this option is true then the scanner will automatically stop and close the interface when a code is successfully scanned;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"colour"}),": The colour for the background of the interface elements;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"textColour"}),": The text colour for the text elements;"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For more details see the asdocs reference for the ",(0,i.jsx)(n.a,{href:"https://docs.airnativeextensions.com/asdocs/scanner/com/distriqt/extension/scanner/ActivityOptions.html",children:(0,i.jsx)(n.code,{children:"ActivityOptions"})})," class."]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},34965:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/scan_activity-cd20c271aab808965aa19f5d2a45e77a.png"},41696:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/scan_viewport-6a0c2b7067414c8567249fbab02a1488.png"}}]);