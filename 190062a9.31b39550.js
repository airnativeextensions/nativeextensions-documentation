(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{132:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return d}));var i=n(2),a=n(6),o=(n(0),n(853)),r={title:"Add the Extension",sidebar_label:"Add the Extension"},s={unversionedId:"nativewebview/add-the-extension",id:"nativewebview/add-the-extension",isDocsHomePage:!1,title:"Add the Extension",description:"First step is always to add the extension to your development environment.",source:"@site/docs/nativewebview/add-the-extension.md",slug:"/nativewebview/add-the-extension",permalink:"/docs/nativewebview/add-the-extension",version:"current",sidebar_label:"Add the Extension",sidebar:"nativewebview",previous:{title:"NativeWebView",permalink:"/docs/nativewebview/"},next:{title:"Initialise the Extension",permalink:"/docs/nativewebview/initialise-the-extension"}},l=[{value:"Dependencies",id:"dependencies",children:[{value:"Core",id:"core",children:[]},{value:"Android Support",id:"android-support",children:[]}]},{value:"Extension IDs",id:"extension-ids",children:[]},{value:"Android",id:"android",children:[{value:"Manifest Additions",id:"manifest-additions",children:[]}]},{value:"iOS",id:"ios",children:[{value:"Info Additions",id:"info-additions",children:[]}]},{value:"Windows",id:"windows",children:[{value:".Net Framework",id:"net-framework",children:[]},{value:"C++ Redistributable",id:"c-redistributable",children:[]},{value:"Creating an Installer",id:"creating-an-installer",children:[]},{value:"Packaging DLLs",id:"packaging-dlls",children:[]}]},{value:"MacOS",id:"macos",children:[]}],c={rightToc:l};function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(i.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"First step is always to add the extension to your development environment.\nTo do this use the tutorial located ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/tutorials/getting-started"}),"here"),"."),Object(o.b)("p",null,"Quick links:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/distriqt/ANE-NativeWebView/raw/master/lib/com.distriqt.NativeWebView.ane"}),Object(o.b)("inlineCode",{parentName:"a"},"com.distriqt.NativeWebView"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/distriqt/ANE-Core/raw/master/lib/com.distriqt.Core.ane"}),Object(o.b)("inlineCode",{parentName:"a"},"com.distriqt.Core"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.core.ane"}),Object(o.b)("inlineCode",{parentName:"a"},"androidx.core"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.browser.ane"}),Object(o.b)("inlineCode",{parentName:"a"},"androidx.browser")))),Object(o.b)("h2",{id:"dependencies"},"Dependencies"),Object(o.b)("p",null,"Many of our extensions use some common libraries, for example, the Android Support libraries."),Object(o.b)("p",null,"We have to separate these libraries into separate extensions in order to avoid multiple versions of the libraries being included in your application and causing packaging conflicts. This means that you need to include some additional extensions in your application along with the main extension file."),Object(o.b)("p",null,"You will add these extensions as you do with any other extension, and you need to ensure it is packaged with your application."),Object(o.b)("h3",{id:"core"},"Core"),Object(o.b)("p",null,"The Core ANE is required by this ANE. You must include and package this extension in your application."),Object(o.b)("p",null,"The Core ANE doesn't provide any functionality in itself but provides support libraries and frameworks used by our extensions.\nIt also includes some centralised code for some common actions that can cause issues if they are implemented in each individual extension."),Object(o.b)("p",null,"You can access this extension here: ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://github.com/distriqt/ANE-Core"}),"https://github.com/distriqt/ANE-Core"),"."),Object(o.b)("h3",{id:"android-support"},"Android Support"),Object(o.b)("p",null,"The Android Support libraries encompass the Android Support, Android X and common Google libraries. "),Object(o.b)("p",null,"These libraries are specific to Android. There are no issues including these on all platforms, they are just ",Object(o.b)("strong",{parentName:"p"},"required")," for Android."),Object(o.b)("p",null,"This extension requires the following extensions:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/distriqt/ANE-AndroidSupport/raw/master/lib/androidx.core.ane"}),Object(o.b)("inlineCode",{parentName:"a"},"androidx.core")))),Object(o.b)("p",null,"You can access these extensions here: ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://github.com/distriqt/ANE-AndroidSupport"}),"https://github.com/distriqt/ANE-AndroidSupport"),"."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note"),": if you have been using the older ",Object(o.b)("inlineCode",{parentName:"p"},"com.distriqt.androidsupport.*")," (Android Support) extensions you should remove these extensions and replace it with the ",Object(o.b)("inlineCode",{parentName:"p"},"androidx")," extensions listed above. This is the new version of the android support libraries and moving forward all our extensions will require AndroidX.")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," The Google Play Services and Android Support ANEs are only ",Object(o.b)("strong",{parentName:"p"},"required")," on Android devices.\nThere is no problem packaging these ANEs with all platforms as there are default implementations available which will allow your code to package without errors\nhowever if you are only building an iOS application feel free to remove the Google Play Services ANEs from your application.")),Object(o.b)("h2",{id:"extension-ids"},"Extension IDs"),Object(o.b)("p",null,"The following should be added to your ",Object(o.b)("inlineCode",{parentName:"p"},"extensions")," node in your application descriptor to identify all the required ANEs in your application:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),"<extensions>\n    <extensionID>com.distriqt.NativeWebView</extensionID>\n    <extensionID>com.distriqt.Core</extensionID>\n\n    \x3c!-- ANDROID --\x3e\n    <extensionID>androidx.browser</extensionID>\n    <extensionID>androidx.core</extensionID>\n\n</extensions>\n")),Object(o.b)("h2",{id:"android"},"Android"),Object(o.b)("h3",{id:"manifest-additions"},"Manifest Additions"),Object(o.b)("p",null,"The NativeWebView will require a small addition to the manifest to be able to browse for files.\nIf you are looking to play videos in your webpage on Android we highly recommend adding the\n",Object(o.b)("inlineCode",{parentName:"p"},'android:hardwareAccelerated="true"')," flag to your application. "),Object(o.b)("p",null,"You should make sure your manifest contains the following:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),'<manifest android:installLocation="auto">\n    <uses-permission android:name="android.permission.INTERNET"/>\n    \n    \x3c!-- android:hardwareAccelerated is highly recommended for video playback and scroll performance --\x3e\n    \x3c!-- android:windowSoftInputMode is used to push the content up when an input appears below the keyboard --\x3e\n    <application \n        android:hardwareAccelerated="true"\n        android:windowSoftInputMode="adjustResize">\n                    \n        <activity \n            android:name="com.distriqt.extension.nativewebview.activities.BrowseActivity" \n            android:theme="@android:style/Theme.Translucent.NoTitleBar" />\n\n    <activity \n      android:name="com.distriqt.extension.nativewebview.permissions.AuthorisationActivity" \n      android:theme="@android:style/Theme.Translucent.NoTitleBar" />\n\n    </application>\n</manifest>\n')),Object(o.b)("h2",{id:"ios"},"iOS"),Object(o.b)("h3",{id:"info-additions"},"Info Additions"),Object(o.b)("p",null,"Since iOS 9, Apple has introduced the concept of App Transport Security (ATS). is encouraging the use of HTTPS"),Object(o.b)("p",null,"App Transport Security (ATS) lets an app add a declaration to its Info.plist file that specifies\nthe domains with which it needs secure communication. ATS prevents accidental disclosure, provides\nsecure default behavior, and is easy to adopt. You should adopt ATS as soon as possible, regardless\nof whether you're creating a new app or updating an existing one. "),Object(o.b)("p",null,"If you're developing a new app, you should use HTTPS exclusively. If you have an existing app, you\nshould use HTTPS as much as you can right now, and create a plan for migrating the rest of your app\nas soon as possible."),Object(o.b)("p",null,"In simple terms, this means that if your application attempts to connect to any HTTP server\n(in this example, yourserver.com) that doesn\u2019t support the latest SSL technology (TLSv1.2),\nyour connections will fail with an error."),Object(o.b)("p",null,"Basically the repercussions mean that you'll need to add exceptions in for any non secure domain\nyou access. For example the following adds an exception for the ",Object(o.b)("inlineCode",{parentName:"p"},"yourserver.com")," domain and subdomains."),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),"<key>NSAppTransportSecurity</key>\n<dict>\n  <key>NSExceptionDomains</key>\n  <dict>\n    <key>yourserver.com</key>\n    <dict>\n      \x3c!--Include to allow subdomains--\x3e\n      <key>NSIncludesSubdomains</key>\n      <true/>\n      \x3c!--Include to allow HTTP requests--\x3e\n      <key>NSTemporaryExceptionAllowsInsecureHTTPLoads</key>\n      <true/>\n    </dict>\n  </dict>\n</dict>\n")),Object(o.b)("p",null,"To read more about this there is a great article ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://ste.vn/2015/06/10/configuring-app-transport-security-ios-9-osx-10-11/"}),"here")),Object(o.b)("h2",{id:"windows"},"Windows"),Object(o.b)("h3",{id:"net-framework"},".Net Framework"),Object(o.b)("p",null,"This extension requires v4.6 or higher of the .Net framework. This should come preinstalled on any Windows 10 or higher machine so if you are targetting those you should not have to do anything. If however you are targetting older versions of Windows you must ensure .Net v4.6 or higher is installed either manually or as part of an installer."),Object(o.b)("h3",{id:"c-redistributable"},"C++ Redistributable"),Object(o.b)("p",null,"The native code has a dependency on the Visual C++ 2017 Redistributable package. This package contains code that is required to run code developed using C++ in Visual Studio and is very common amongst Windows applications."),Object(o.b)("p",null,"There are two ways to ensure this is available to your application:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Create an installer that runs the redistributable installer;"),Object(o.b)("li",{parentName:"ul"},"Package the required DLL files from the redistributable with your application;")),Object(o.b)("p",null,"The first is the suggested method. Installing the redistributable via an installer allows it to be put into the windows update process, allowing bug fixes and security updates to be handled automatically."),Object(o.b)("p",null,"The second method is only advised if you need a complete standalone application, where you don't (or cannot) use an installation process. This requires you to package DLLs from the redistributable with your application. "),Object(o.b)("h3",{id:"creating-an-installer"},"Creating an Installer"),Object(o.b)("p",null,"There are many methods to create application installers and many tutorials available. We suggest you find a method suitable to your environment and application and utilise the tutorials online. "),Object(o.b)("p",null,"Some methods include:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"http://www.jrsoftware.org/isinfo.php"}),"Inno Setup")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"http://wixtoolset.org/"}),"Wix"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"http://wixedit.sourceforge.net"}),"WixEdit"))))),Object(o.b)("p",null,"Tutorials:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"http://www.adobe.com/devnet/air/articles/customize-setup-for-AIR-app-with-captive-runtime.html"}),"Generating a Windows installer"))),Object(o.b)("p",null,"You need to include the x86 c++ 2017 redistributable in the installer, there are many examples and documentation online to achieve this."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"The advantage of this method is that the libraries will be updated along with any system updates and will not require manual updating of the libraries and releasing of your application."))),Object(o.b)("h3",{id:"packaging-dlls"},"Packaging DLLs"),Object(o.b)("p",null,"Packaging the DLLs into your application involves copying the DLLs specified below into your application root and including in your application package."),Object(o.b)("p",null,"The best option is to install Visual Studio 2017 and locate the ",Object(o.b)("inlineCode",{parentName:"p"},"Program Files[ (x86)]\\Microsoft Visual Studio\\2017\\edition\\VC\\Redist\\MSVC\\lib-version")," folder, eg: ",Object(o.b)("inlineCode",{parentName:"p"},"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Redist\\MSVC\\14.16.27012\\x86\\Microsoft.VC141.CRT")),Object(o.b)("p",null,"Alternatively, download and install the x86 redistributable from the ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads"}),"Microsoft website"),". This should install the DLLs into ",Object(o.b)("inlineCode",{parentName:"p"},"C:\\Windows\\System32")," folder. "),Object(o.b)("p",null,"Open the folder and copy the following DLLs to your application:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"msvcp140.dll")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"vcruntime140.dll"))),Object(o.b)("p",null,"If you are having issues locating these files, feel free to contact us for help."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"You should ensure you are allowed to package these files as per the Microsoft Software License terms but generally these are safe to redistribute subject to the license terms. More information here: ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://docs.microsoft.com/en-us/cpp/windows/redistributing-visual-cpp-files"}),"Redistributing Visual C++ Files")),Object(o.b)("p",{parentName:"blockquote"},"You should get legal advice if you are unsure. ")),Object(o.b)("h2",{id:"macos"},"MacOS"),Object(o.b)("p",null,"No specific additions are required for macOS. "))}d.isMDXComponent=!0},853:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n(0),a=n.n(i);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),d=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=d(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,r=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(n),b=i,h=u["".concat(r,".").concat(b)]||u[b]||p[b]||o;return n?a.a.createElement(h,s(s({ref:t},c),{},{components:n})):a.a.createElement(h,s({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=b;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);