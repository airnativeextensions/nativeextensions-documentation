"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[65167],{21015:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"cloudstorage/key-value-storage","title":"Key-Value Storage","description":"The key-value storage system can be broken down into several main concepts:","source":"@site/docs/cloudstorage/key-value-storage.md","sourceDirName":"cloudstorage","slug":"/cloudstorage/key-value-storage","permalink":"/docs/cloudstorage/key-value-storage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Key-Value Storage","sidebar_label":"Key-Value Storage"},"sidebar":"cloudstorage","previous":{"title":"Unity","permalink":"/docs/cloudstorage/add-the-plugin"},"next":{"title":"Document Store","permalink":"/docs/cloudstorage/document-store"}}');var s=t(74848),l=t(28453);const r={title:"Key-Value Storage",sidebar_label:"Key-Value Storage"},i=void 0,c={},o=[{value:"Set Values",id:"set-values",level:3},{value:"Get Values",id:"get-values",level:3},{value:"Remove Value",id:"remove-value",level:3},{value:"Events",id:"events",level:3},{value:"Example",id:"example",level:2}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"The key-value storage system can be broken down into several main concepts:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"setting a value;"}),"\n",(0,s.jsx)(n.li,{children:"getting a value;"}),"\n",(0,s.jsx)(n.li,{children:"listen for changes;"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This represents all the functionality you will need to implement to be able to successfully\nstore values in the cloud."}),"\n",(0,s.jsx)(n.h3,{id:"set-values",children:"Set Values"}),"\n",(0,s.jsxs)(n.p,{children:["Firstly to set a value, you call ",(0,s.jsx)(n.code,{children:"setString"}),", which takes a ",(0,s.jsx)(n.code,{children:"key"})," and a ",(0,s.jsx)(n.code,{children:"value"})," as parameters."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",metastring:'title="AIR"',children:'CloudStorage.service.keyValueStore.setString( "KEY_FOR_VALUE", "some_value" );\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Unity"',children:'CloudStorage.Instance.SetString("KEY_FOR_VALUE", "some_value");\n'})}),"\n",(0,s.jsx)(n.p,{children:"or to set an integer value:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",metastring:'title="AIR"',children:'CloudStorage.service.keyValueStore.setInt( "KEY_FOR_VALUE", 5 );\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Unity"',children:'CloudStorage.Instance.SetInt("KEY_FOR_VALUE", 5);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"get-values",children:"Get Values"}),"\n",(0,s.jsxs)(n.p,{children:["You can then retrieve the value using ",(0,s.jsx)(n.code,{children:"getString"})," providing the same ",(0,s.jsx)(n.code,{children:"key"})," as\na parameter which will then return the value set previously."]}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",metastring:'title="AIR"',children:'var value:String = CloudStorage.service.keyValueStore.getString( "KEY_FOR_VALUE" );\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Unity"',children:'var value = CloudStorage.Instance.GetString("KEY_FOR_VALUE");\n'})}),"\n",(0,s.jsx)(n.h3,{id:"remove-value",children:"Remove Value"}),"\n",(0,s.jsxs)(n.p,{children:["To remove a value that you have previously set you can use the ",(0,s.jsx)(n.code,{children:"Remove"})," function:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",metastring:'title="AIR"',children:'CloudStorage.service.keyValueStore.remove("KEY_FOR_VALUE");\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Unity"',children:'CloudStorage.Instance.Remove("KEY_FOR_VALUE");\n'})}),"\n",(0,s.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,s.jsx)(n.p,{children:"The extension will dispatch events when the values are changed (on another device) and when\nother system events occur:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Changed: Indicates a value has changed and the event will contain an array of keys that changed","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["AIR: ",(0,s.jsx)(n.code,{children:"KeyValueStoreEvent.CHANGED"})]}),"\n",(0,s.jsxs)(n.li,{children:["Unity: ",(0,s.jsx)(n.code,{children:"OnChanged"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Over Quota: Your app's key-value store has exceeded its space quota on the server","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["AIR: ",(0,s.jsx)(n.code,{children:"KeyValueStoreEvent.OVER_QUOTA"})]}),"\n",(0,s.jsxs)(n.li,{children:["Unity: ",(0,s.jsx)(n.code,{children:"OnOverQuota"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Account Changed: The user's account was changed","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["AIR: ",(0,s.jsx)(n.code,{children:"KeyValueStoreEvent.ACCOUNT_CHANGED"})]}),"\n",(0,s.jsxs)(n.li,{children:["Unity: ",(0,s.jsx)(n.code,{children:"OnAccountChanged"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Initial Sync: The initial data synchronisation from the server was received","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["AIR: ",(0,s.jsx)(n.code,{children:"KeyValueStoreEvent.INITIAL_SYNC"})]}),"\n",(0,s.jsxs)(n.li,{children:["Unity: ",(0,s.jsx)(n.code,{children:"OnInitialSync"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["More information see the ",(0,s.jsx)(n.code,{children:"KeyValueStoreEvent"})," class documentation."]}),"\n",(0,s.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["The following example shows the core concepts, setting then retrieving a value and listening\nto the ",(0,s.jsx)(n.code,{children:"KeyValueStoreEvent.CHANGED"})," (",(0,s.jsx)(n.code,{children:"OnChanged"})," on Unity) event."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",metastring:'title="AIR"',children:'CloudStorage.service.keyValueStore.addEventListener( KeyValueStoreEvent.CHANGED, keyStore_changedHandler );\nCloudStorage.service.keyValueStore.synchronise();\n\n// Set a value\nCloudStorage.service.keyValueStore.setString( "KEY_FOR_VALUE", newValue );\n\n// Retrieve the value\nvar value:String = CloudStorage.service.keyValueStore.getString( "KEY_FOR_VALUE" );\n\n\nfunction keyStore_changedHandler( event:KeyValueStoreEvent ):void\n{\n\ttrace( "KeyStore CHANGED" );\n\t// event.changedKeys contains an array of changed keys\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Unity"',children:'CloudStorage.Instance.OnChanged += Instance_OnChanged;\nCloudStorage.Instance.Synchronise();\n\n// Set a value\nCloudStorage.Instance.SetString( "KEY_FOR_VALUE", "some_value" );\n\n// Retrieve the value\nstring value = CloudStorage.Instance.GetString( "KEY_FOR_VALUE" )\n\n\n\nprivate void Instance_OnChanged(KeyValueStoreEvent e)\n{\n\tDebug.Log("OnChanged");\n\t// e.changedKeys contains an array of changed keys\n\tforeach (string key in e.changedKeys)\n\t{\n\t\tDebug.Log("OnChanged: " + key);\n\t}\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var a=t(96540);const s={},l=a.createContext(s);function r(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);