"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[93674],{23950:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"adverts/migrating-from-version-4","title":"Migrating from version 4","description":"Version 5 completely changes the way adverts are displayed, including more control over the ad units that are displayed. Migration is simple as laid out below.","source":"@site/docs/adverts/migrating-from-version-4.md","sourceDirName":"adverts","slug":"/adverts/migrating-from-version-4","permalink":"/docs/adverts/migrating-from-version-4","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Migrating from version 4","sidebar_label":"Migrating from version 4"},"sidebar":"adverts","previous":{"title":"Migrating to version 10","permalink":"/docs/adverts/migrating-to-version-10"},"next":{"title":"Migrating to AndroidX","permalink":"/docs/adverts/migrating-to-androidx"}}');var s=i(74848),r=i(28453);const d={title:"Migrating from version 4",sidebar_label:"Migrating from version 4"},a="Banners",l={},o=[{value:"Initialise",id:"initialise",level:2},{value:"Displaying an Banner Advert",id:"displaying-an-banner-advert",level:2},{value:"Events",id:"events",level:2},{value:"Hiding an Advert",id:"hiding-an-advert",level:2},{value:"Refreshing/Updating an advert",id:"refreshingupdating-an-advert",level:2},{value:"Loading",id:"loading",level:2},{value:"Displaying an Interstitial",id:"displaying-an-interstitial",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Version 5 completely changes the way adverts are displayed, including more control over the ad units that are displayed. Migration is simple as laid out below."}),"\n",(0,s.jsxs)(n.p,{children:["The major difference is that you now will create an ",(0,s.jsx)(n.code,{children:"AdView"})," or an ",(0,s.jsx)(n.code,{children:"InterstitialAd"})," instance and use this to configure, load and display your adverts. Whereas you used to only have access to a single advert with one ad unit id, you can now create multiple and use as required. This means that you will need to hold onto an instance of your ",(0,s.jsx)(n.code,{children:"AdView"})," or ",(0,s.jsx)(n.code,{children:"InterstitialAd"})," to set properties, listen for events, load, and display your advert."]}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"banners",children:"Banners"})}),"\n",(0,s.jsx)(n.h2,{id:"initialise",children:"Initialise"}),"\n",(0,s.jsx)(n.p,{children:"With v5.0 you specify the unit id on the advert view. So you no longer have to set the unit id on the initialisePlatform functions."}),"\n",(0,s.jsx)(n.p,{children:"This means the follow version 4 code,"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"Adverts.service.initialisePlatform( AdvertPlatform.PLATFORM_ADMOB, AD_UNIT_ID );\n"})}),"\n",(0,s.jsx)(n.p,{children:"becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"Adverts.service.initialisePlatform( AdvertPlatform.PLATFORM_ADMOB );\n\nvar adView:AdView = Adverts.service.createAdView();\nadView.setAdSize( AdSize.SMART_BANNER );\nadView.setAdUnitId( AD_UNIT_ID );\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Note: You must set an AdSize and a unit id on an AdView before attempting to load or display the ad."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"displaying-an-banner-advert",children:"Displaying an Banner Advert"}),"\n",(0,s.jsx)(n.p,{children:"Previously to display an advert:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var position:AdvertPosition = new AdvertPosition();\nposition.verticalAlign   = AdvertPosition.ALIGN_BOTTOM;\nposition.horizontalAlign = AdvertPosition.ALIGN_CENTER;\n\nAdverts.service.showAdvert( position );\n"})}),"\n",(0,s.jsx)(n.p,{children:"This now becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var adView:AdView = Adverts.service.createAdView();\nadView.setAdUnitId( AD_UNIT_ID );\nadView.setAdSize( AdSize.SMART_BANNER );\nadView.setViewParams( new AdViewParamsBuilder()\n\t\t.setVerticalAlign( AdViewParams.ALIGN_BOTTOM )\n\t\t.setHorizontalAlign( AdViewParams.ALIGN_CENTER )\n\t\t.build()\n);\nadView.load( new AdRequestBuilder().build() );\nadView.show();\n"})}),"\n",(0,s.jsx)(n.p,{children:"There is a bit more to the code now, however we believe this gives you much more functionality to control the way adverts are displayed in your application."}),"\n",(0,s.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,s.jsx)(n.p,{children:"Listening for events is much more specified now. The following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:'Adverts.service.addEventListener( AdvertEvent.RECEIVED_AD, adverts_receivedAdHandler );\nprivate function adverts_receivedAdHandler( event:AdvertEvent ):void\n{\n\ttrace( "received an advertisement" );\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"adView.addEventListener( AdViewEvent.LOADED, loadedHandler );\n\nfunction loadedHandler( event:AdViewEvent ):void\n{\n\t// Ad loaded and ready to be displayed\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can listen for many more events on the ",(0,s.jsx)(n.code,{children:"AdView"})," now as well."]}),"\n",(0,s.jsx)(n.h2,{id:"hiding-an-advert",children:"Hiding an Advert"}),"\n",(0,s.jsx)(n.p,{children:"Hiding an advert is a simple change, the following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"Adverts.service.hideAdvert();\n"})}),"\n",(0,s.jsx)(n.p,{children:"becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"adView.hide();\n"})}),"\n",(0,s.jsx)(n.h2,{id:"refreshingupdating-an-advert",children:"Refreshing/Updating an advert"}),"\n",(0,s.jsx)(n.p,{children:"If you wish to manually refresh the advert you can call the refresh function.\nThis will make the advert update with a new ad request."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"Adverts.service.refresh();\n"})}),"\n",(0,s.jsx)(n.p,{children:"This now changes to a new load request:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"adView.load( new AdRequestBuilder().build() );\n"})}),"\n",(0,s.jsx)(n.h1,{id:"interstitials",children:"Interstitials"}),"\n",(0,s.jsxs)(n.p,{children:["Interstitials are still provided through the ",(0,s.jsx)(n.code,{children:"Adverts.service.interstitials"})," singleton, however the process is now similar to the ",(0,s.jsx)(n.code,{children:"AdView"})," process above."]}),"\n",(0,s.jsx)(n.h2,{id:"loading",children:"Loading"}),"\n",(0,s.jsxs)(n.p,{children:["Previously to load an interstitial you called ",(0,s.jsx)(n.code,{children:"load"})," on the ",(0,s.jsx)(n.code,{children:"Interstitials"})," class, however now you need to create an instance of an ",(0,s.jsx)(n.code,{children:"InterstitialAd"})," and then call ",(0,s.jsx)(n.code,{children:"load"})," on that instance."]}),"\n",(0,s.jsx)(n.p,{children:"So"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"Adverts.service.interstitials.addEventListener( InterstitialEvent.LOADED, loadedHandler );\nAdverts.service.interstitials.addEventListener( InterstitialEvent.ERROR, errorHandler );\n\nAdverts.service.interstitials.load( AD_UNIT_ID );\n"})}),"\n",(0,s.jsx)(n.p,{children:"becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var interstitial:InterstitialAd = Adverts.service.interstitials.createInterstitialAd();\n\ninterstitial.setAdUnitId( AD_UNIT_ID );\ninterstitial.addEventListener( InterstitialAdEvent.LOADED, loadedHandler );\ninterstitial.addEventListener( InterstitialAdEvent.ERROR, errorHandler );\ninterstitial.load( new AdRequestBuilder().build() );\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"interstitial"})," instance should be held onto and reused in your application."]}),"\n",(0,s.jsx)(n.h2,{id:"displaying-an-interstitial",children:"Displaying an Interstitial"}),"\n",(0,s.jsx)(n.p,{children:"Previously to display an interstitial:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"Adverts.service.interstitials.addEventListener( InterstitialEvent.DISMISSED, dismissedHandler );\n\nif (Adverts.service.interstitials.isReady())\n{\n\tAdverts.service.interstitials.show();\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"This now becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"interstitial.addEventListener( InterstitialAdEvent.CLOSED, closedHandler );\n\nif (interstitial.isLoaded())\n{\n\tinterstitial.show();\n}\n"})}),"\n",(0,s.jsx)(n.h1,{id:"advertising-identifier",children:"Advertising Identifier"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"uniqueId"})," function has been deprecated. If you need access to the device unique id (vendorForIdentifier etc)\nplease use the ",(0,s.jsx)(n.code,{children:"com.distriqt.Application"})," ANE."]}),"\n",(0,s.jsx)(n.p,{children:"This will now only return the advertisting identifier, however we have improved its functionality to retrieve more information about the advertising identifier."}),"\n",(0,s.jsx)(n.p,{children:"Previously:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var advertisingId:String = Adverts.service.uniqueId( Adverts.ADVERTISING );\n"})}),"\n",(0,s.jsx)(n.p,{children:"Becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"Adverts.service.addEventListener( AdvertisingIdEvent.ADVERTISING_ID, advertisingIdHandler );\nAdverts.service.getAdvertisingId();\n\nfunction advertisingIdHandler( event:AdvertisingIdEvent ):void\n{\n\tvar advertisingId:String = info.advertisingId;\n}\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"The asynchronous nature of the new implementation resolves issues with the previous implementation sometimes returning incorrect values."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function d(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);