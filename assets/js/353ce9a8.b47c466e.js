"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[46628],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return p}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=r.createContext({}),c=function(e){var n=r.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=c(e.components);return r.createElement(u.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),f=c(t),p=a,m=f["".concat(u,".").concat(p)]||f[p]||d[p]||i;return t?r.createElement(m,o(o({ref:n},s),{},{components:t})):r.createElement(m,o({ref:n},s))}));function p(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=f;var l={};for(var u in n)hasOwnProperty.call(n,u)&&(l[u]=n[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=t[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},85162:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(67294),a=t(86010),i="tabItem_Ymn6";function o(e){var n=e.children,t=e.hidden,o=e.className;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(i,o),hidden:t},n)}},74866:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(87462),a=t(67294),i=t(86010),o=t(12466),l=t(16550),u=t(91980),c=t(67392),s=t(50012);function d(e){return function(e){var n,t;return null!=(n=null==(t=a.Children.map(e,(function(e){if(!e||(0,a.isValidElement)(e)&&(n=e.props)&&"object"==typeof n&&"value"in n)return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}function f(e){var n=e.values,t=e.children;return(0,a.useMemo)((function(){var e=null!=n?n:d(t);return function(e){var n=(0,c.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function p(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function m(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId,i=(0,l.k6)(),o=function(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:r});return[(0,u._X)(o),(0,a.useCallback)((function(e){if(o){var n=new URLSearchParams(i.location.search);n.set(o,e),i.replace(Object.assign({},i.location,{search:n.toString()}))}}),[o,i])]}function v(e){var n,t,r,i,o=e.defaultValue,l=e.queryString,u=void 0!==l&&l,c=e.groupId,d=f(e),v=(0,a.useState)((function(){return function(e){var n,t=e.defaultValue,r=e.tabValues;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var a=null!=(n=r.find((function(e){return e.default})))?n:r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:o,tabValues:d})})),h=v[0],g=v[1],b=m({queryString:u,groupId:c}),y=b[0],I=b[1],O=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:c}.groupId),t=(0,s.Nk)(n),r=t[0],i=t[1],[r,(0,a.useCallback)((function(e){n&&i.set(e)}),[n,i])]),T=O[0],A=O[1],E=function(){var e=null!=y?y:T;return p({value:e,tabValues:d})?e:null}();return(0,a.useLayoutEffect)((function(){E&&g(E)}),[E]),{selectedValue:h,selectValue:(0,a.useCallback)((function(e){if(!p({value:e,tabValues:d}))throw new Error("Can't select invalid tab value="+e);g(e),I(e),A(e)}),[I,A,d]),tabValues:d}}var h=t(72389),g="tabList__CuJ",b="tabItem_LNqP";function y(e){var n=e.className,t=e.block,l=e.selectedValue,u=e.selectValue,c=e.tabValues,s=[],d=(0,o.o5)().blockElementScrollPositionUntilNextRender,f=function(e){var n=e.currentTarget,t=s.indexOf(n),r=c[t].value;r!==l&&(d(n),u(r))},p=function(e){var n,t=null;switch(e.key){case"Enter":f(e);break;case"ArrowRight":var r,a=s.indexOf(e.currentTarget)+1;t=null!=(r=s[a])?r:s[0];break;case"ArrowLeft":var i,o=s.indexOf(e.currentTarget)-1;t=null!=(i=s[o])?i:s[s.length-1]}null==(n=t)||n.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},n)},c.map((function(e){var n=e.value,t=e.label,o=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,key:n,ref:function(e){return s.push(e)},onKeyDown:p,onClick:f},o,{className:(0,i.Z)("tabs__item",b,null==o?void 0:o.className,{"tabs__item--active":l===n})}),null!=t?t:n)})))}function I(e){var n=e.lazy,t=e.children,r=e.selectedValue,i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var o=i.find((function(e){return e.props.value===r}));return o?(0,a.cloneElement)(o,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},i.map((function(e,n){return(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==r})})))}function O(e){var n=v(e);return a.createElement("div",{className:(0,i.Z)("tabs-container",g)},a.createElement(y,(0,r.Z)({},e,n)),a.createElement(I,(0,r.Z)({},e,n)))}function T(e){var n=(0,h.Z)();return a.createElement(O,(0,r.Z)({key:String(n)},e))}},60515:function(e,n,t){t.r(n),t.d(n,{assets:function(){return f},contentTitle:function(){return s},default:function(){return v},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return p}});var r=t(87462),a=t(63366),i=(t(67294),t(3905)),o=t(74866),l=t(85162),u=["components"],c={title:"Migrating to v6.3",sidebar_label:"Migrating to v6.3"},s=void 0,d={unversionedId:"notifications/migrating-to-6.3",id:"notifications/migrating-to-6.3",title:"Migrating to v6.3",description:"Android 31",source:"@site/docs/notifications/migrating-to-6.3.mdx",sourceDirName:"notifications",slug:"/notifications/migrating-to-6.3",permalink:"/docs/notifications/migrating-to-6.3",draft:!1,tags:[],version:"current",frontMatter:{title:"Migrating to v6.3",sidebar_label:"Migrating to v6.3"},sidebar:"notifications",previous:{title:"Migrating to v6.4",permalink:"/docs/notifications/migrating-to-6.4"},next:{title:"Migrating to AndroidX",permalink:"/docs/notifications/migrating-to-androidx"}},f={},p=[{value:"Android 31",id:"android-31",level:2}],m={toc:p};function v(e){var n=e.components,t=(0,a.Z)(e,u);return(0,i.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"android-31"},"Android 31"),(0,i.kt)("p",null,"When users interact with notifications, our extension responds to notification taps by launching an app component that eventually starts the AIR activity that the user finally sees and interacts with. This app component is known as a notification trampoline."),(0,i.kt)("p",null,"With Android 12 (API 31) the system prevents the activity from starting, and the following message appears in Logcat: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Indirect notification activity start (trampoline) from PACKAGE_NAME, \\\nthis should be avoided for performance reasons.\n")),(0,i.kt)("p",null,"More information ",(0,i.kt)("a",{parentName:"p",href:"https://developer.android.com/about/versions/12/behavior-changes-12#notification-trampolines"},"here")),(0,i.kt)("p",null,"To resolve this we have needed to completely redesign the notification system on Android 12. While this is a major refactor internally to the extension there are only a few things you need to manage. The API has not changed and you won't see any change to the events or order of the events. "),(0,i.kt)(o.Z,{groupId:"packagemanager",defaultValue:"apm",values:[{label:"APM",value:"apm"},{label:"Manual",value:"manual"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"apm",mdxType:"TabItem"},(0,i.kt)("p",null,"If you are using ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/airsdk/apm"},(0,i.kt)("inlineCode",{parentName:"a"},"apm"))," all you need to do is update to the latest build and regenerate your application descriptor. ",(0,i.kt)("inlineCode",{parentName:"p"},"apm")," will handle the rest."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"apm update \napm generate app-descriptor src/Main-app.xml\n"))),(0,i.kt)(l.Z,{value:"manual",mdxType:"TabItem"},(0,i.kt)("p",null,"If you are manually managing your application descriptor (and manifest additions) then you need to find the following in your manifest:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<receiver android:name="com.distriqt.extension.notifications.notifications.receivers.NotificationReceiver" android:exported="false">\n    <intent-filter>\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_SELECTED" />\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_DELETED" />\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_ACTION" />\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_DELAYED" />\n        <data android:scheme="dtn" />\n    </intent-filter>\n    <intent-filter>\n        <action android:name="android.intent.action.BOOT_COMPLETED" />\n        <action android:name="android.intent.action.QUICKBOOT_POWERON" />\n    </intent-filter>\n</receiver>\n')),(0,i.kt)("p",null,"And replace it with this (ensuring you replace ",(0,i.kt)("inlineCode",{parentName:"p"},"APPLICATION_PACKAGE")," with your application's package name):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<receiver android:name="com.distriqt.extension.notifications.notifications.receivers.NotificationReceiver" android:exported="false">\n    <intent-filter>\n        <action android:name="android.intent.action.BOOT_COMPLETED" />\n        <action android:name="android.intent.action.QUICKBOOT_POWERON" />\n    </intent-filter>\n</receiver>\n<activity android:name="com.distriqt.extension.notifications.notifications.NotificationActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar" android:exported="false">\n    <intent-filter>\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_SELECTED" />\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_DELETED" />\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_ACTION" />\n        <action android:name="APPLICATION_PACKAGE.NOTIFICATION_DELAYED" />\n        <data android:scheme="dtn" />\n    </intent-filter>\n</activity>\n')))))}v.isMDXComponent=!0}}]);