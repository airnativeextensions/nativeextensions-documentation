"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[90338],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return p}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=c(n),p=o,f=m["".concat(l,".").concat(p)]||m[p]||d[p]||a;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},94642:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return m}});var r=n(87462),o=n(63366),a=(n(67294),n(3905)),i=["components"],s={title:"Firestore - Get data",sidebar_label:"Get data"},l=void 0,c={unversionedId:"firebase/firestore/get-data",id:"firebase/firestore/get-data",title:"Firestore - Get data",description:"There are two ways to retrieve data stored in Cloud Firestore. Either of these methods can be used with documents, collections of documents, or the results of queries:",source:"@site/docs/firebase/firestore/get-data.md",sourceDirName:"firebase/firestore",slug:"/firebase/firestore/get-data",permalink:"/docs/firebase/firestore/get-data",tags:[],version:"current",frontMatter:{title:"Firestore - Get data",sidebar_label:"Get data"},sidebar:"firebase",previous:{title:"Delete data",permalink:"/docs/firebase/firestore/delete-data"},next:{title:"Get realtime updates",permalink:"/docs/firebase/firestore/get-realtime-updates"}},u=[{value:"Get a document",id:"get-a-document",children:[{value:"Using Success and Failure Listeners",id:"using-success-and-failure-listeners",children:[],level:4},{value:"Using Event Listeners",id:"using-event-listeners",children:[],level:4},{value:"Source Options",id:"source-options",children:[],level:3}],level:2},{value:"Get multiple documents from a collection",id:"get-multiple-documents-from-a-collection",children:[{value:"Using Success and Failure Listeners",id:"using-success-and-failure-listeners-1",children:[],level:4},{value:"Using Event Listeners",id:"using-event-listeners-1",children:[],level:4},{value:"Get all documents in a collection",id:"get-all-documents-in-a-collection",children:[],level:3}],level:2},{value:"List subcollections of a document",id:"list-subcollections-of-a-document",children:[],level:2}],d={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"There are two ways to retrieve data stored in Cloud Firestore. Either of these methods can be used with documents, collections of documents, or the results of queries:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Call a method to get the data."),(0,a.kt)("li",{parentName:"ul"},"Set a listener to receive data-change events.")),(0,a.kt)("p",null,"When you set a listener, Cloud Firestore sends your listener an initial snapshot of the data, and then another snapshot each time the document changes."),(0,a.kt)("h2",{id:"get-a-document"},"Get a document"),(0,a.kt)("p",null,"To retrieve the contents of a single doucment you call the ",(0,a.kt)("inlineCode",{parentName:"p"},"getDocument()")," function on a ",(0,a.kt)("inlineCode",{parentName:"p"},"DocumentReference"),"."),(0,a.kt)("p",null,"As with most of the functionality in this extension you can either use success and failure listeners or event listeners to handle the responses."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: If there is no document at the location referenced by the ",(0,a.kt)("inlineCode",{parentName:"p"},"DocumentReference"),", the resulting document will be empty and calling exists on it will return false.")),(0,a.kt)("h4",{id:"using-success-and-failure-listeners"},"Using Success and Failure Listeners"),(0,a.kt)("p",null,"The following example shows how to retrieve the contents of a single document using ",(0,a.kt)("inlineCode",{parentName:"p"},"getDocument()")," using success and failure listeners:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'FirebaseFirestore.service.document("path")\n        .getDocument()\n        .addOnSuccessListener( function( snapshot:DocumentSnapshot ):void\n        {\n            if (event.snapshot.exists())\n            {\n                trace( "Document data: " + JSON.stringify( event.snapshot.getData() ) );\n            }\n            else\n            {\n                trace( "Get Document: Does not exist" );\n            }\n        })\n        .addOnFailureListener( function( message:String ):void\n        {\n            trace( "get document :: failed :: " + message );\n        });\n')),(0,a.kt)("h4",{id:"using-event-listeners"},"Using Event Listeners"),(0,a.kt)("p",null,"The following example shows how to retrieve the contents of a single document using ",(0,a.kt)("inlineCode",{parentName:"p"},"getDocument()")," using event listeners:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'var document:DocumentReference = FirebaseFirestore.service.document( _testDocumentPath );\n            \ndocument.addEventListener( DocumentReferenceEvent.GET_SUCCESS, getDocumentSuccessHandler );\ndocument.addEventListener( DocumentReferenceEvent.GET_ERROR, getDocumentErrorHandler );\ndocument.getDocument();\n\nfunction getDocumentSuccessHandler( event:DocumentReferenceEvent ):void\n{\n    event.currentTarget.removeEventListener( DocumentReferenceEvent.GET_SUCCESS, getDocumentSuccessHandler );\n    event.currentTarget.removeEventListener( DocumentReferenceEvent.GET_ERROR, getDocumentErrorHandler );\n    \n    if (event.snapshot.exists())\n    {\n        trace( "Document data: " + JSON.stringify( event.snapshot.getData() ) );\n    }\n    else\n    {\n        trace( "Get Document: Does not exist" );\n    }\n}\n\nfunction getDocumentErrorHandler( event:DocumentReferenceEvent ):void\n{\n    event.currentTarget.removeEventListener( DocumentReferenceEvent.GET_SUCCESS, getDocumentSuccessHandler );\n    event.currentTarget.removeEventListener( DocumentReferenceEvent.GET_ERROR, getDocumentErrorHandler );\n    \n    trace( "Get Document Error: " + event.message );\n}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: You need to ensure you remove event listeners after the result in order to allow the references\nto get garbage collected at the appropriate time. Leaving event listeners attached to a query, collection\nor document will result in the object not being removed from memory.")),(0,a.kt)("h3",{id:"source-options"},"Source Options"),(0,a.kt)("p",null,"For platforms with offline support, you can set the source option to control how a get call uses the offline cache."),(0,a.kt)("p",null,"By default, a get call will attempt to fetch the latest document snapshot from your database. On platforms with offline support, the client library will use the offline cache if the network is unavailable or if the request times out."),(0,a.kt)("p",null,"You can specify the source option in a ",(0,a.kt)("inlineCode",{parentName:"p"},"getDocument()")," call to change the default behavior. You can fetch from only the database and ignore the offline cache, or you can fetch from only the offline cache. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'FirebaseFirestore.service.document("path")\n        .getDocument( Source.CACHE )\n        .addOnSuccessListener( function( snapshot:DocumentSnapshot ):void\n        {\n            // Document found in the offline cache and exists should be true\n            if (event.snapshot.exists())\n            {\n                trace( "Document data: " + JSON.stringify( event.snapshot.getData() ) );\n            }\n            else\n            {\n                trace( "Get Document: Does not exist" );\n            }\n        })\n        .addOnFailureListener( function( message:String ):void\n        {\n            trace( "get document :: failed :: " + message );\n        });\n')),(0,a.kt)("h2",{id:"get-multiple-documents-from-a-collection"},"Get multiple documents from a collection"),(0,a.kt)("p",null,"You can also retrieve multiple documents with one request by querying documents in a collection. For example, you can use ",(0,a.kt)("inlineCode",{parentName:"p"},"whereEqualTo()")," to query for all of the documents that meet a certain condition, then use ",(0,a.kt)("inlineCode",{parentName:"p"},"query()")," to retrieve the results."),(0,a.kt)("p",null,"As with most of the functionality in this extension you can either use success and failure listeners or event listeners to handle the responses."),(0,a.kt)("h4",{id:"using-success-and-failure-listeners-1"},"Using Success and Failure Listeners"),(0,a.kt)("p",null,"The following example shows how to retrieve the result of the query using success and failure listeners. The listeners should be added after the ",(0,a.kt)("inlineCode",{parentName:"p"},"query()")," call using the ",(0,a.kt)("inlineCode",{parentName:"p"},"addOnQuerySuccessHandler")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"addOnQueryFailureListener")," functions:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'FirebaseFirestore.service.collection("users")\n        .whereEqualTo( "born", 1980 )\n        .query()\n        .addOnQuerySuccessHandler( function( snapshot:QuerySnapshot ):void\n        {\n            trace( "addOnQuerySuccessHandler" );\n        })\n        .addOnQueryFailureListener( function( message:String ):void\n        {\n            trace( "addOnQueryFailureListener: " + message );\n        });\n')),(0,a.kt)("h4",{id:"using-event-listeners-1"},"Using Event Listeners"),(0,a.kt)("p",null,"The following example shows how to retrieve the result of the query using event listeners:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'var query:Query = FirebaseFirestore.service.collection("users")\n        .whereEqualTo( "born", 1980 );\n\nquery.addEventListener( QueryEvent.SUCCESS, querySuccessHandler );\nquery.addEventListener( QueryEvent.ERROR, queryErrorHandler );\n\nquery.query();\n\nfunction querySuccessHandler( event:QueryEvent ):void\n{\n    trace( "querySuccessHandler" );\n    event.currentTarget.removeEventListener( QueryEvent.SUCCESS, querySuccessHandler );\n    event.currentTarget.removeEventListener( QueryEvent.ERROR, queryErrorHandler );\n}\n\nfunction queryErrorHandler( event:QueryEvent ):void\n{\n    trace( "queryErrorHandler: " + event.message );\n    event.currentTarget.removeEventListener( QueryEvent.SUCCESS, querySuccessHandler );\n    event.currentTarget.removeEventListener( QueryEvent.ERROR, queryErrorHandler );\n}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: You need to ensure you remove event listeners after the result in order to allow the references\nto get garbage collected at the appropriate time. Leaving event listeners attached to a query, collection\nor document will result in the object not being removed from memory.")),(0,a.kt)("h3",{id:"get-all-documents-in-a-collection"},"Get all documents in a collection"),(0,a.kt)("p",null,"In addition, you can retrieve all documents in a collection by omitting the ",(0,a.kt)("inlineCode",{parentName:"p"},"whereEqualTo()")," filter entirely and just referencing the collection."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-actionscript"},'FirebaseFirestore.service.collection("users")\n    .query()\n    .addOnQuerySuccessHandler( function( snapshot:QuerySnapshot ):void\n    {\n        trace( "addOnQuerySuccessHandler" );\n    })\n    .addOnQueryFailureListener( function( message:String ):void\n    {\n        trace( "addOnQueryFailureListener: " + message );\n    });\n')),(0,a.kt)("h2",{id:"list-subcollections-of-a-document"},"List subcollections of a document"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"getCollections()")," method of the Cloud Firestore server client libraries lists all subcollections of a document reference."),(0,a.kt)("p",null,"Retrieving a list of collections is not possible with the mobile/web client libraries. You should only look up collection names as part of administrative tasks in trusted server environments. If you find that you need this capability in the mobile/web client libraries, consider restructuring your data so that subcollection names are predictable."))}m.isMDXComponent=!0}}]);