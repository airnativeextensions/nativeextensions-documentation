"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[25387],{28453:(e,n,o)=>{o.d(n,{R:()=>d,x:()=>i});var a=o(96540);const l={},s=a.createContext(l);function d(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),a.createElement(s.Provider,{value:n},e.children)}},68494:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>t,contentTitle:()=>i,default:()=>u,frontMatter:()=>d,metadata:()=>a,toc:()=>r});const a=JSON.parse('{"id":"mediaplayer/sound-pool","title":"Sound Pool","description":"A SoundPool is a collection of samples that can be loaded into memory. It allows you to play short sound effects and samples. The sounds are loaded into memory for low-latency playback.","source":"@site/docs/mediaplayer/sound-pool.md","sourceDirName":"mediaplayer","slug":"/mediaplayer/sound-pool","permalink":"/docs/mediaplayer/sound-pool","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Sound Pool","sidebar_label":"Sound Pool"},"sidebar":"mediaplayer","previous":{"title":"Audio Player - Background Audio","permalink":"/docs/mediaplayer/audio-player---background-audio"},"next":{"title":"Remote Command Center","permalink":"/docs/mediaplayer/remote-command-center"}}');var l=o(74848),s=o(28453);const d={title:"Sound Pool",sidebar_label:"Sound Pool"},i=void 0,t={},r=[{value:"Creating Sounds",id:"creating-sounds",level:2},{value:"Loading",id:"loading",level:2},{value:"Controlling Playback",id:"controlling-playback",level:2},{value:"Unloading",id:"unloading",level:2},{value:"Fallback",id:"fallback",level:2},{value:"Migrating from flash.media.Sound",id:"migrating-from-flashmediasound",level:2},{value:"Loading",id:"loading-1",level:3},{value:"Playback",id:"playback",level:3},{value:"Stopping",id:"stopping",level:3},{value:"Events",id:"events",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"A SoundPool is a collection of samples that can be loaded into memory. It allows you to play short sound effects and samples. The sounds are loaded into memory for low-latency playback."}),"\n",(0,l.jsxs)(n.p,{children:["This is well suited to short sound effects and playback where trigger time is important.\nIf you want to playback longer sounds and music look at the ",(0,l.jsx)(n.a,{href:"/docs/mediaplayer/audio-player",children:"AudioPlayer"})," class for a more complete audio playback solution.\nSounds played through the sound pool may not complete if they are too long."]}),"\n",(0,l.jsx)(n.h2,{id:"creating-sounds",children:"Creating Sounds"}),"\n",(0,l.jsxs)(n.p,{children:["When dealing with the sound pool you will use the ",(0,l.jsx)(n.code,{children:"SoundPool"})," functionality to create instances of a ",(0,l.jsx)(n.code,{children:"Sound"})," and use this to load and play sounds."]}),"\n",(0,l.jsxs)(n.p,{children:["To create a ",(0,l.jsx)(n.code,{children:"Sound"})," call ",(0,l.jsx)(n.code,{children:"createSound()"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"var sound:Sound = MediaPlayer.service.soundPool.createSound();\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["Note: This is the ",(0,l.jsx)(n.code,{children:"com.distriqt.extension.mediaplayer.sound.Sound"})," class and not ",(0,l.jsx)(n.code,{children:"flash.media.Sound"}),".\nWe have used the same name to be able to quickly replace sounds in your application with the native equivalent."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"loading",children:"Loading"}),"\n",(0,l.jsxs)(n.p,{children:["To load a sound you call the ",(0,l.jsx)(n.code,{children:"loadFile"})," function and pass a reference to a file on the device."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:'var soundFile:File = File.applicationDirectory.resolvePath("assets/explosion.mp3");\n\nsound.loadFile( soundFile );\n'})}),"\n",(0,l.jsx)(n.p,{children:"Loading a file will dispatch one of two events:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Event.COMPLETE"}),": If the load was completed successfully and the sound is now available in memory for playback;"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IOErrorEvent.IO_ERROR"}),": If the load failed either due to format or other issues with the file."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"loadFile"})," call may also throw an ",(0,l.jsx)(n.code,{children:"Error"})," if the file doesn't exist."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:'var soundFile:File = File.applicationDirectory.resolvePath("assets/explosion.mp3");\n\nsound.addEventListener( Event.COMPLETE, sound_completeHandler );\nsound.addEventListener( IOErrorEvent.IO_ERROR, sound_errorHandler );\nsound.loadFile( soundFile );\n\nfunction sound_completeHandler( event:Event ):void \n{\n    // Sound is loaded and ready for playback\n}\n\nfunction sound_errorHandler( event:IOErrorEvent ):void \n{\n    // An error occurred\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"controlling-playback",children:"Controlling Playback"}),"\n",(0,l.jsxs)(n.p,{children:["Once a sound is loaded you can call ",(0,l.jsx)(n.code,{children:"play()"})," to play the sound:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"sound.play();\n"})}),"\n",(0,l.jsxs)(n.p,{children:["To stop a sound call ",(0,l.jsx)(n.code,{children:"stop()"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"sound.stop();\n"})}),"\n",(0,l.jsx)(n.h2,{id:"unloading",children:"Unloading"}),"\n",(0,l.jsxs)(n.p,{children:["Once you have finished with a sound and never plan to use it again or if you wish to clear memory resources associated with a sound you can call ",(0,l.jsx)(n.code,{children:"unload()"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"sound.unload();\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Once a sound has been unloaded the ",(0,l.jsx)(n.code,{children:"Sound"})," instance is no longer valid. You will need to create a new sound and load a file again."]}),"\n",(0,l.jsx)(n.h2,{id:"fallback",children:"Fallback"}),"\n",(0,l.jsxs)(n.p,{children:["If the device doesn't support native sound pool implementation a fallback implementation will be used which uses the ",(0,l.jsx)(n.code,{children:"flash.media.Sound"})," implementation to playback sounds."]}),"\n",(0,l.jsxs)(n.p,{children:["You can check what implementation will be used by checking the ",(0,l.jsx)(n.code,{children:"isSupportedNatively"})," flag on the sound pool. If this is ",(0,l.jsx)(n.code,{children:"true"})," then the native implementation will be used and if it is ",(0,l.jsx)(n.code,{children:"false"})," then the ",(0,l.jsx)(n.code,{children:"flash.media.Sound"})," implementation will be used."]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Currently only Android has a native implementation"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"migrating-from-flashmediasound",children:"Migrating from flash.media.Sound"}),"\n",(0,l.jsx)(n.h3,{id:"loading-1",children:"Loading"}),"\n",(0,l.jsx)(n.p,{children:"Loading a sound using the flash.media.Sound class:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:'var effect:Sound = new Sound();\neffect.addEventListener( Event.COMPLETE, sound_loadCompleteHandler );\neffect.addEventListener( IOErrorEvent.IO_ERROR, sound_errorHandler );\neffect.load( new URLRequest( "sounds/effect.mp3" ));\n\nfunction sound_loadCompleteHandler( event:Event ):void \n{\n    effect.play();\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Becomes the following using the ",(0,l.jsx)(n.code,{children:"com.distriqt.extension.mediaplayer.sound.Sound"})," class:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:'var effect:Sound = MediaPlayer.service.soundPool.createSound();\neffect.addEventListener( Event.COMPLETE, sound_loadCompleteHandler );\neffect.addEventListener( IOErrorEvent.IO_ERROR, sound_loadErrorHandler );\neffect.loadFile( File.applicationDirectory.resolvePath("sounds/effect.mp3"));\n\nfunction sound_loadCompleteHandler( event:Event ):void \n{\n    effect.play();\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"playback",children:"Playback"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"var loops:int = 1;\nvar transform:SoundTransform = new SoundTransform();\n\nvar channel:SoundChannel = effect.play( 0, loops, transform );\n"})}),"\n",(0,l.jsx)(n.p,{children:"becomes (still using flash.media.SoundTransform):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"var loops:int = 1;\nvar transform:SoundTransform = new SoundTransform();\n\neffect.play( loops, transform );\n"})}),"\n",(0,l.jsx)(n.h3,{id:"stopping",children:"Stopping"}),"\n",(0,l.jsx)(n.p,{children:"Stopping a sound using flash requires the sound channel:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"channel.stop();\n"})}),"\n",(0,l.jsx)(n.p,{children:"This is simplified to using the sound instance:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-actionscript",children:"effect.stop();\n"})}),"\n",(0,l.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,l.jsx)(n.p,{children:"The Event.COMPLETE and IOErrorEvent.IO_ERROR are both dispatched from the sounds."}),"\n",(0,l.jsx)(n.p,{children:"There is no way to detect the end of playback with the sound pool."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);