"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[88780],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=i,g=d["".concat(c,".").concat(m)]||d[m]||p[m]||a;return n?o.createElement(g,r(r({ref:t},u),{},{components:n})):o.createElement(g,r({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var s=2;s<a;s++)r[s]=n[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},67245:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p}});var o=n(87462),i=n(63366),a=(n(67294),n(3905)),r=["components"],l={title:"iOS Location Simulation",sidebar_label:"iOS Location Simulation"},c=void 0,s={unversionedId:"location/ios-location-simulation",id:"location/ios-location-simulation",title:"iOS Location Simulation",description:"iOS Location Simulation",source:"@site/docs/location/ios-location-simulation.md",sourceDirName:"location",slug:"/location/ios-location-simulation",permalink:"/docs/location/ios-location-simulation",draft:!1,tags:[],version:"current",frontMatter:{title:"iOS Location Simulation",sidebar_label:"iOS Location Simulation"},sidebar:"location",previous:{title:"Location Utils - Distance",permalink:"/docs/location/location-utils---distance"},next:{title:"Migrating to AndroidX",permalink:"/docs/location/migrating-to-androidx"}},u={},p=[{value:"iOS Location Simulation",id:"ios-location-simulation",level:2},{value:"Create the Application",id:"create-the-application",level:2},{value:"Add code",id:"add-code",level:3},{value:"Add a GPX file",id:"add-a-gpx-file",level:3},{value:"Add Usage Descriptions",id:"add-usage-descriptions",level:3},{value:"Simulating the Location",id:"simulating-the-location",level:2}],d={toc:p};function m(e){var t=e.components,l=(0,i.Z)(e,r);return(0,a.kt)("wrapper",(0,o.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"ios-location-simulation"},"iOS Location Simulation"),(0,a.kt)("p",null,"In order to simulate a location on a real device you will need to create an iOS application\nusing Xcode, and run this application alongside your AIR application. The application will\nuse the Debug Location Simulation feature of Xcode to change the reported location of the\ndevice for all applications."),(0,a.kt)("h2",{id:"create-the-application"},"Create the Application"),(0,a.kt)("p",null,"To create a new iOS Xcode Application:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Open Xcode"),(0,a.kt)("li",{parentName:"ul"},"Create a new single view application "),(0,a.kt)("li",{parentName:"ul"},"Enter appropriate details, nothing is really important here, just name the application appropriately ")),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(42394).Z,width:"723",height:"386"})),(0,a.kt)("h3",{id:"add-code"},"Add code"),(0,a.kt)("p",null,"Here is some very basic code to request authorisation and to log the current location.\nThis code is for the ",(0,a.kt)("inlineCode",{parentName:"p"},"ViewController")," class that should have been automatically created\nfor you, just copy the following into the ",(0,a.kt)("inlineCode",{parentName:"p"},"ViewController.m")," file. "),(0,a.kt)("p",null,"This code is very rough and just thrown together for testing purposes."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-objc"},'#import "ViewController.h"\n#import <CoreLocation/CoreLocation.h>\n\n@interface ViewController () <CLLocationManagerDelegate>\n@end\n\n@implementation ViewController\n{\n    CLLocationManager* _locationManager;\n}\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n    \n    _locationManager = [[CLLocationManager alloc] init];\n    _locationManager.delegate = self;\n    _locationManager.pausesLocationUpdatesAutomatically = NO;\n    \n    if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusNotDetermined)\n    {\n        NSLog(@"Requesting authorisation" );\n        [_locationManager requestAlwaysAuthorization];\n    }\n    \n    [_locationManager startUpdatingLocation];\n\n}\n\n- (void)didReceiveMemoryWarning {\n    [super didReceiveMemoryWarning];\n    // Dispose of any resources that can be recreated.\n}\n\n#pragma mark CLLocationManagerDelegate\n\n-(void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status\n{\n    NSLog( @"didChangeAuthorizationStatus: %d", status );\n}\n\n- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations\n{\n    CLLocation* location = [locations lastObject];\n    NSLog( @"location: %f, %f", location.coordinate.latitude, location.coordinate.longitude );\n}\n\n@end\n')),(0,a.kt)("h3",{id:"add-a-gpx-file"},"Add a GPX file"),(0,a.kt)("p",null,"A GPX file allows you to set the location simulated on the device. This file can use\nwaypoints to change the reported location over time. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<gpx version="1.1" creator="Xcode">\n    \n    \x3c!--\n     Provide one or more waypoints containing a latitude/longitude pair. If you provide one\n     waypoint, Xcode will simulate that specific location. If you provide multiple waypoints,\n     Xcode will simulate a route visiting each waypoint.\n     --\x3e\n    <wpt lat="37.331705" lon="-122.030237">\n        <name>Cupertino</name>\n        \n        \x3c!--\n         Optionally provide a time element for each waypoint. Xcode will interpolate movement\n         at a rate of speed based on the time elapsed between each waypoint. If you do not provide\n         a time element, then Xcode will use a fixed rate of speed.\n         \n         Waypoints must be sorted by time in ascending order.\n         --\x3e\n        <time>2014-09-24T14:55:37Z</time>\n    </wpt>\n    \n</gpx>\n')),(0,a.kt)("p",null,"To add a GPX file, select ",(0,a.kt)("inlineCode",{parentName:"p"},"File / New / File ..."),", then under ",(0,a.kt)("inlineCode",{parentName:"p"},"Resources")," select the ",(0,a.kt)("inlineCode",{parentName:"p"},"GPX")," file and\nname it appropriately for your usage."),(0,a.kt)("h3",{id:"add-usage-descriptions"},"Add Usage Descriptions"),(0,a.kt)("p",null,"You will need to add the Usage Description strings similarly to how we do with the Info Additions\nin your AIR application."),(0,a.kt)("p",null,"Just open the ",(0,a.kt)("inlineCode",{parentName:"p"},"Info.plist")," file in a text editor and add the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"<key>NSLocationWhenInUseUsageDescription</key>\n<string>In Use Usage Description</string>\n<key>NSLocationAlwaysUsageDescription</key>\n<string>Always Usage Description</string>\n")),(0,a.kt)("p",null,"Or you can add them through Xcode:"),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(68694).Z,width:"1084",height:"40"})),(0,a.kt)("h2",{id:"simulating-the-location"},"Simulating the Location"),(0,a.kt)("p",null,"Now run the application on your device:"),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(45127).Z,width:"320",height:"33"})),(0,a.kt)("p",null,"It should start the application on your device showing a blank white screen.\nThe first run will ask you for permission to access location, make sure you select ",(0,a.kt)("strong",{parentName:"p"},"Allow"),"\nand relaunch the application. If you don't get the permission dialog on first launch\ncheck that you added the usage descriptions correctly."),(0,a.kt)("p",null,"Now once the application is running in debug mode on the device you can simulate\nthe location on the device. "),(0,a.kt)("p",null,"Go to: ",(0,a.kt)("inlineCode",{parentName:"p"},"Debug / Simulate Location")," and you can either select the GPX file you added or one\nof the predefined default locations. "),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(31455).Z,width:"513",height:"369"})),(0,a.kt)("p",null,"If you switch to your AIR application now you should find it reporting this new location."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: this may time out after a minute or so as we haven't set up the test application\nfor background operation, however we find this enough for testing most situations."),(0,a.kt)("p",{parentName:"blockquote"},"If it stops reporting, just switch back to the test application and select the debug\nlocation simlation again. ")))}m.isMDXComponent=!0},68694:function(e,t,n){t.Z=n.p+"assets/images/ios_location_simulation_info-usage-5bd26617b6476aadc40986d9925caa5b.png"},42394:function(e,t,n){t.Z=n.p+"assets/images/ios_location_simulation_new-project-4bc896e3bb6cc871ce6f814ce928701a.png"},45127:function(e,t,n){t.Z=n.p+"assets/images/ios_location_simulation_run-82eb4818a3c86cdb4e3490de9768b947.png"},31455:function(e,t,n){t.Z=n.p+"assets/images/ios_location_simulation_sim-location-a59d1d8644bca566812be7d2e10f19e9.png"}}]);