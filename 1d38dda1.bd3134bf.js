(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{145:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return i})),a.d(t,"rightToc",(function(){return l})),a.d(t,"default",(function(){return p}));var n=a(2),r=a(6),c=(a(0),a(869)),o={title:"Graph API - Batch",sidebar_label:"Graph API - Batch"},i={unversionedId:"facebookapi-legacy/graph-api---batch",id:"facebookapi-legacy/graph-api---batch",isDocsHomePage:!1,title:"Graph API - Batch",description:"This is the legacy extension documentation. Find the new documentation here",source:"@site/docs/facebookapi-legacy/graph-api---batch.md",slug:"/facebookapi-legacy/graph-api---batch",permalink:"/docs/facebookapi-legacy/graph-api---batch",version:"current",sidebar_label:"Graph API - Batch",sidebar:"facebookapi-legacy",previous:{title:"Graph API - Basics",permalink:"/docs/facebookapi-legacy/graph-api---basics"},next:{title:"Graph API - Examples",permalink:"/docs/facebookapi-legacy/graph-api---examples"}},l=[{value:"Graph API Batch",id:"graph-api-batch",children:[{value:"Events",id:"events",children:[]}]},{value:"Callbacks",id:"callbacks",children:[]}],s={rightToc:l};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(c.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"This is the legacy extension documentation. Find the new documentation ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"../facebookapi/"}),"here")))),Object(c.b)("h2",{id:"graph-api-batch"},"Graph API Batch"),Object(c.b)("p",null,"If you have several requests you wish to batch together you can use the ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatchBuilder")," to create a batch request."),Object(c.b)("p",null,"To create a batch, firstly create your ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequest")," instances as normal:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),'var request1:GraphAPIRequest = new GraphAPIRequestBuilder()\n        .setPath(\'/me\')\n        .setMethod(\'GET\')\n        .addFields(["first_name","gender","picture.width(160).height(160)" ])\n        .build();\n\nvar request2:GraphAPIRequest = new GraphAPIRequestBuilder()\n        .setPath(\'/me/friends\')\n        .setMethod(\'GET\')\n        .addParameter("limit", 200 )\n        .addFields(["id","first_name","installed","picture.width(160).height(160)" ])\n        .build();\n')),Object(c.b)("p",null,"Then construct the ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatch")," using a ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatchBuilder"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),"var batch:GraphAPIRequestBatch = new GraphAPIRequestBatchBuilder()\n    .addRequest( request1 )\n    .addRequest( request2 )\n    .build();\n")),Object(c.b)("p",null,"Then call ",Object(c.b)("inlineCode",{parentName:"p"},"makeBatchRequest()")," with your ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatch")," instance:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),"FacebookAPI.service.graphAPI.makeBatchRequest( batch );\n")),Object(c.b)("h3",{id:"events"},"Events"),Object(c.b)("p",null,"You can add event listeners to the request objects to process the return data from each individual request, as you would for a single request:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),"request1.addEventListener( GraphAPIRequestEvent.COMPLETE, request1_completeHandler );\nrequest1.addEventListener( GraphAPIRequestEvent.ERROR, request1_errorHandler );\nrequest2.addEventListener( GraphAPIRequestEvent.COMPLETE, request2_completeHandler );\nrequest2.addEventListener( GraphAPIRequestEvent.ERROR, request2_errorHandler );\n\nfunction request1_completeHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.data will contain the Facebook response\n}\n\nfunction request1_errorHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.errorCode and event.errorMessage will contain details on the error\n}\n\nfunction request2_completeHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.data will contain the Facebook response\n}\n\nfunction request2_errorHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.errorCode and event.errorMessage will contain details on the error\n}\n")),Object(c.b)("p",null,"Additionally you can listen for a ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestEvent.BATCH_COMPLETE")," event to be notified when all the requests have been completed."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),'batch.addEventListener( GraphAPIRequestEvent.BATCH_COMPLETE, batch_completeHandler );\n                \nfunction batch_completeHandler( event:GraphAPIRequestEvent ):void\n{\n    trace( "batch complete" );\n}\n')),Object(c.b)("p",null,"You should make sure to add these listeners before the call to ",Object(c.b)("inlineCode",{parentName:"p"},"makeBatchRequest()"),"."),Object(c.b)("h2",{id:"callbacks"},"Callbacks"),Object(c.b)("p",null,"As an alternative to events, you can add callbacks to the requests as you do with a normal ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequest"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),'var request1:GraphAPIRequest = new GraphAPIRequestBuilder()\n    .setPath( "/me" )\n    .setCompleteCallback(\n            function( data:Object ):void \n            {\n                log( "request complete: " + JSON.stringify(data) );\n            }\n    )\n    .setErrorCallback(\n            function( code:int, message:String ):void \n            {\n                log( "request error: " + code + "::"+ message );\n            }\n    )\n    .build();\n')),Object(c.b)("p",null,"Additionally you can add a completion callback to the ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatch")," object:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-actionscript"}),'var batch:GraphAPIRequestBatch = new GraphAPIRequestBatchBuilder()\n    .addRequest( request1 )\n    .addRequest( request2 )\n    .addRequest( request3 )\n    .setCompleteCallback(\n            function():void\n            {\n                log( "batch complete" );\n            }\n    )\n    .build();\n')))}p.isMDXComponent=!0},869:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return h}));var n=a(0),r=a.n(n);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,c=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(a),d=n,h=u["".concat(o,".").concat(d)]||u[d]||b[d]||c;return a?r.a.createElement(h,i(i({ref:t},s),{},{components:a})):r.a.createElement(h,i({ref:t},s))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=a.length,o=new Array(c);o[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var s=2;s<c;s++)o[s]=a[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);