"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[82366],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=u(n),m=i,g=c["".concat(l,".").concat(m)]||c[m]||d[m]||s;return n?a.createElement(g,r(r({ref:t},p),{},{components:n})):a.createElement(g,r({ref:t},p))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,r=new Array(s);r[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[c]="string"==typeof e?e:i,r[1]=o;for(var u=2;u<s;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85479:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>u});var a=n(87462),i=(n(67294),n(3905));const s={title:"Analytics",sidebar_label:"Analytics"},r=void 0,o={unversionedId:"braze/analytics",id:"braze/analytics",title:"Analytics",description:"Tracking Sessions",source:"@site/docs/braze/analytics.md",sourceDirName:"braze",slug:"/braze/analytics",permalink:"/docs/braze/analytics",draft:!1,tags:[],version:"current",frontMatter:{title:"Analytics",sidebar_label:"Analytics"}},l={},u=[{value:"Tracking Sessions",id:"tracking-sessions",level:2},{value:"Session lifecycle",id:"session-lifecycle",level:3},{value:"Customizing session timeout",id:"customizing-session-timeout",level:3},{value:"Subscribing to session updates",id:"subscribing-to-session-updates",level:3},{value:"Setting User IDs",id:"setting-user-ids",level:2},{value:"Assigning a user ID",id:"assigning-a-user-id",level:3},{value:"Aliasing users",id:"aliasing-users",level:3},{value:"Assigning User Attributes",id:"assigning-user-attributes",level:2},{value:"Standard user attributes",id:"standard-user-attributes",level:3},{value:"Setting custom attribute values",id:"setting-custom-attribute-values",level:3},{value:"Unsetting a custom attribute",id:"unsetting-a-custom-attribute",level:3},{value:"Setting up user subscriptions",id:"setting-up-user-subscriptions",level:3},{value:"Tracking custom events",id:"tracking-custom-events",level:2},{value:"Adding a custom event",id:"adding-a-custom-event",level:3},{value:"Adding properties",id:"adding-properties",level:3},{value:"Reserved keys",id:"reserved-keys",level:3},{value:"Logging Purchases",id:"logging-purchases",level:2},{value:"Adding properties",id:"adding-properties-1",level:3},{value:"Reserved keys",id:"reserved-keys-1",level:3},{value:"Disabling SDK Tracking",id:"disabling-sdk-tracking",level:2}],p={toc:u},c="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"tracking-sessions"},"Tracking Sessions"),(0,i.kt)("h3",{id:"session-lifecycle"},"Session lifecycle"),(0,i.kt)("p",null,"If you have integrated Braze using ",(0,i.kt)("inlineCode",{parentName:"p"},"BrazeConfig.setSessionHandlingEnabled(true)"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"openSession()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"closeSession()")," will be called automatically for your app."),(0,i.kt)("admonition",{title:"Android",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"By default, sessions on Android are opened upon the first call to openSession() and are closed after an app has been out of the foreground for longer than 10 seconds. Note that calling closeSession() does not close a session immediately. Rather, it closes a session in 10 seconds if the user doesn\u2019t call openSession() (e.g., by navigating to another activity) in the interim."),(0,i.kt)("p",{parentName:"admonition"},"An Android session times out after 10 seconds without any communication from the host application. This means if a user backgrounds the app and returns 9 seconds later, the same session will be continued. Note that if a session closes while the user has the app backgrounded, that data may not be flushed to the server until the app is opened again.")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"If you need to force a new session, you can do so by changing users.")),(0,i.kt)("h3",{id:"customizing-session-timeout"},"Customizing session timeout"),(0,i.kt)("p",null,"To customize the session timeout, call ",(0,i.kt)("inlineCode",{parentName:"p"},"setSessionTimeout()")," with the number of seconds on your ",(0,i.kt)("inlineCode",{parentName:"p"},"BrazeConfig")," instance."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var options:BrazeConfig = new BrazeConfig()\n        ...\n        .setSessionTimeout(100)\n;\n")),(0,i.kt)("h3",{id:"subscribing-to-session-updates"},"Subscribing to session updates"),(0,i.kt)("p",null,"To listen for session open and close updates add a listener for the ",(0,i.kt)("inlineCode",{parentName:"p"},"BrazeSessionEvent.SESSION_STARTED")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"BrazeSessionEvent.SESSION_ENDED")," events:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Braze.instance.addEventListener( BrazeSessionEvent.SESSION_STARTED, session_startedHandler );\nBraze.instance.addEventListener( BrazeSessionEvent.SESSION_ENDED, session_endedHandler );\n\nfunction session_startedHandler( event:BrazeSessionEvent ):void\n{\n    trace( "session_startedHandler: " + event.sessionId );\n}\n\nfunction session_endedHandler( event:BrazeSessionEvent ):void\n{\n    trace( "session_endedHandler: " + event.sessionId );\n}\n')),(0,i.kt)("h2",{id:"setting-user-ids"},"Setting User IDs"),(0,i.kt)("p",null,"User IDs should be set for each of your users. These should be unchanging and accessible when a user opens the app. Naming your user IDs correctly from the start is one of the most crucial steps when setting up user IDs. We strongly suggest using the Braze standard of UUIDs and GUIDs (detailed below). We also strongly recommend providing this identifier as it will allow you to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Track your users across devices and platforms, improving the quality of your behavioral and demographic data."),(0,i.kt)("li",{parentName:"ul"},"Import data about your users using our user data API."),(0,i.kt)("li",{parentName:"ul"},"Target specific users with our messaging API for both general and transactional messages.")),(0,i.kt)("h3",{id:"assigning-a-user-id"},"Assigning a user ID"),(0,i.kt)("p",null,"You should make the following call as soon as the user is identified (generally after logging in) in order to set the user ID:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"Braze.instance.changeUser( YOUR_USER_ID_STRING );\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Do not call ",(0,i.kt)("inlineCode",{parentName:"p"},"changeUser()")," when a user logs out. ",(0,i.kt)("inlineCode",{parentName:"p"},"changeUser()")," should only be called when the user logs into the application. Setting ",(0,i.kt)("inlineCode",{parentName:"p"},"changeUser()"),' to a static default value will associate ALL user activity with that default "user" until the user logs in again.')),(0,i.kt)("p",null,"Additionally, we recommend against changing the user ID when a user logs out, as it makes you unable to target the previously logged-in user with reengagement campaigns. If you anticipate multiple users on the same device, but only want to target one of them when your app is in a logged-out state, we recommend separately keeping track of the user ID you want to target while logged out and switching back to that user ID as part of your app\u2019s logout process."),(0,i.kt)("h3",{id:"aliasing-users"},"Aliasing users"),(0,i.kt)("p",null,"A user alias serves as an alternative unique user identifier. Use aliases to identify users along different dimensions than your core user ID:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Set a consistent identifier for analytics that will follow a given user both before and after they have logged in to a mobile app or website."),(0,i.kt)("li",{parentName:"ul"},"Add the identifiers used by a third-party vendor to your Braze users in order to more easily reconcile your data externally.")),(0,i.kt)("p",null,"Each alias consists of two parts: a name for the identifier itself, and a label indicating the type of alias. Users can have multiple aliases with different labels, but only one name per label."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"Braze.instance.getCurrentUser().addAlias( ALIAS_NAME, ALIAS_LABEL );\n")),(0,i.kt)("h2",{id:"assigning-user-attributes"},"Assigning User Attributes"),(0,i.kt)("p",null,"To assign attributes to your users, call the `getCurrentUser()`` method on your Braze instance to get a reference to the current user of your app. Once you have a reference to the current user, you can call methods to set predefined or custom attributes."),(0,i.kt)("h3",{id:"standard-user-attributes"},"Standard user attributes"),(0,i.kt)("p",null,"Braze provides predefined methods for setting the following user attributes within the ",(0,i.kt)("inlineCode",{parentName:"p"},"BrazeUser")," instance ."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"First name"),(0,i.kt)("li",{parentName:"ul"},"Last name"),(0,i.kt)("li",{parentName:"ul"},"Country"),(0,i.kt)("li",{parentName:"ul"},"Language"),(0,i.kt)("li",{parentName:"ul"},"Date of birth"),(0,i.kt)("li",{parentName:"ul"},"Email"),(0,i.kt)("li",{parentName:"ul"},"Gender"),(0,i.kt)("li",{parentName:"ul"},"Home city"),(0,i.kt)("li",{parentName:"ul"},"Phone number")),(0,i.kt)("p",null,"All string values such as first name, last name, country, and home city are limited to 255 characters."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'with (Braze.instance.getCurrentUser())\n{\n    setFirstName( "John" );\n    setLastName( "Smith" );\n    setLanguage( "en" );\n    setCountry( "COUNTRY" );\n    setEmail( "EMAIL@ADDRESS.COM" );\n    setGender( Gender.PREFER_NOT_TO_SAY );\n    addAlias( "ALIAS_NAME", "ALIAS_LABEL" );\n}\n')),(0,i.kt)("h3",{id:"setting-custom-attribute-values"},"Setting custom attribute values"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Braze.instance.getCurrentUser().setCustomUserAttribute( "your_attribute_key", "your_attribute_value" );\n')),(0,i.kt)("h3",{id:"unsetting-a-custom-attribute"},"Unsetting a custom attribute"),(0,i.kt)("p",null,"Custom attributes can also be unset using the following method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Braze.instance.getCurrentUser().unsetCustomUserAttribute( "your_attribute_key" );\n')),(0,i.kt)("h3",{id:"setting-up-user-subscriptions"},"Setting up user subscriptions"),(0,i.kt)("p",null,"To set up a subscription for your users (either email or push), call the functions ",(0,i.kt)("inlineCode",{parentName:"p"},"setEmailNotificationSubscriptionType()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"setPushNotificationSubscriptionType()"),", respectively. Both of these functions take the enum type NotificationSubscriptionType as arguments. This type has three different states:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"SUBSCRIPTION STATUS"),(0,i.kt)("th",{parentName:"tr",align:null},"DEFINITION"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NotificationSubscriptionType.OPTED_IN")),(0,i.kt)("td",{parentName:"tr",align:null},"Subscribed, and explicitly opted in")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NotificationSubscriptionType.SUBSCRIBED")),(0,i.kt)("td",{parentName:"tr",align:null},"Subscribed, but not explicitly opted in")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NotificationSubscriptionType.UNSUBSCRIBED")),(0,i.kt)("td",{parentName:"tr",align:null},"Unsubscribed and/or explicitly opted out")))),(0,i.kt)("admonition",{title:"Important",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"No explicit opt-in is required by Android to send users push notifications. When a user is registered for push, they are set to ",(0,i.kt)("inlineCode",{parentName:"p"},"SUBSCRIBED")," rather than ",(0,i.kt)("inlineCode",{parentName:"p"},"OPTED_IN")," by default. Refer to managing user subscriptions for more information on implementing subscriptions and explicit opt-ins.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript",metastring:'title="Setting email subscriptions"',title:'"Setting',email:!0,'subscriptions"':!0},"Braze.instance.getCurrentUser().setEmailNotificationSubscriptionType( NotificationSubscriptionType.SUBSCRIBED );\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript",metastring:'title="Setting push notification subscriptions"',title:'"Setting',push:!0,notification:!0,'subscriptions"':!0},"Braze.instance.getCurrentUser().setPushNotificationSubscriptionType( NotificationSubscriptionType.SUBSCRIBED );\n")),(0,i.kt)("h2",{id:"tracking-custom-events"},"Tracking custom events"),(0,i.kt)("p",null,"Before implementation, be sure to review examples of the segmentation options afforded by custom events, custom attributes, and purchase events in the ",(0,i.kt)("a",{parentName:"p",href:"https://www.braze.com/docs/developer_guide/platform_wide/analytics_overview/#user-data-collection"},"analytics overview"),", as well as the notes on ",(0,i.kt)("a",{parentName:"p",href:"https://www.braze.com/docs/user_guide/data_and_analytics/custom_data/event_naming_conventions/"},"event naming conventions"),"."),(0,i.kt)("h3",{id:"adding-a-custom-event"},"Adding a custom event"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"Braze.instance.logCustomEvent( YOUR_EVENT_NAME );\n")),(0,i.kt)("h3",{id:"adding-properties"},"Adding properties"),(0,i.kt)("p",null,"You can add metadata about custom events by passing a ",(0,i.kt)("inlineCode",{parentName:"p"},"BrazeProperties")," object with your custom event."),(0,i.kt)("p",null,"Properties are defined as key-value pairs."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Braze.instance.logCustomEvent(\n        YOUR_EVENT_NAME,\n        new BrazeProperties()\n                .addProperty( "test", "true" )\n                .addProperty( "source", "distriqt-test-app" )\n);\n')),(0,i.kt)("h3",{id:"reserved-keys"},"Reserved keys"),(0,i.kt)("p",null,"The following keys are reserved and cannot be used as custom event properties:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"time")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"event_name"))),(0,i.kt)("h2",{id:"logging-purchases"},"Logging Purchases"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Record in-app purchases so that you can track your revenue over time and across revenue sources, as well as segment your users by their lifetime value. This reference article shows how to track in-app purchases and revenue and assign purchase properties in your Android or FireOS application.")),(0,i.kt)("p",null,"Braze supports purchases in multiple currencies. Purchases that you report in a currency other than USD will be shown in the dashboard in USD based on the exchange rate at the date they were reported."),(0,i.kt)("p",null,"Before implementation, be sure to review examples of the segmentation options afforded by custom events, custom attributes, and purchase events in the ",(0,i.kt)("a",{parentName:"p",href:"https://www.braze.com/docs/developer_guide/platform_wide/analytics_overview/#user-data-collection"},"analytics overview"),"."),(0,i.kt)("p",null,"To use this feature, call ",(0,i.kt)("inlineCode",{parentName:"p"},"logPurchase()"),"  after a successful purchase in your app. If the product Identifier is empty, the purchase will not be logged to Braze."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Braze.instance.logPurchase(\n        "productId",\n        "currencyCode",\n        1.23, // price\n        1 // quantity\n);\n')),(0,i.kt)("admonition",{title:"Tip",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"If you pass in a value of 10 USD and a quantity of 3, that will log to the user\u2019s profile as three purchases of 10 dollars for a total of 30 dollars. Quantities must be less than or equal to 100. Values of purchases can be negative.")),(0,i.kt)("h3",{id:"adding-properties-1"},"Adding properties"),(0,i.kt)("p",null,"You can add metadata about purchases by either passing a ",(0,i.kt)("inlineCode",{parentName:"p"},"BrazeProperties")," object with your purchase information."),(0,i.kt)("p",null,"Properties are defined as key-value pairs. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'Braze.instance.logPurchase(\n        "productId",\n        "currencyCode",\n        1.23, // price\n        1, // quantity\n        new BrazeProperties()\n            .addProperty( "key", "value" )\n);\n')),(0,i.kt)("h3",{id:"reserved-keys-1"},"Reserved keys"),(0,i.kt)("p",null,"The following keys are reserved and cannot be used as purchase properties:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"time")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"product_id")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"quantity")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"event_name")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"price")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"currency"))),(0,i.kt)("h2",{id:"disabling-sdk-tracking"},"Disabling SDK Tracking"),(0,i.kt)("p",null,"In order to comply with data privacy regulations, data tracking activity on the SDK can be stopped entirely using the method ",(0,i.kt)("inlineCode",{parentName:"p"},"disableSDK()")," . This method will cause all network connections to be canceled, and the Braze SDK will not pass any data to Braze\u2019s servers. If you wish to resume data collection at a later point in time, you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"enableSDK()"),"  method in the future to resume data collection."),(0,i.kt)("p",null,"Additionally, you can use the method ",(0,i.kt)("inlineCode",{parentName:"p"},"wipeData()"),"  to fully clear all client-side data stored on the device."))}d.isMDXComponent=!0}}]);