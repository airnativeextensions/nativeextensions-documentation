"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[73434],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(r),d=i,f=c["".concat(s,".").concat(d)]||c[d]||m[d]||a;return r?n.createElement(f,o(o({ref:t},p),{},{components:r})):n.createElement(f,o({ref:t},p))}));function f(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,o[1]=l;for(var u=2;u<a;u++)o[u]=r[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},96206:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var n=r(87462),i=(r(67294),r(3905));const a={title:"Firestore - Perform simple and compound queries",sidebar_label:"Perform simple and compound queries"},o=void 0,l={unversionedId:"firebase/firestore/perform-simple-and-compound-queries",id:"firebase/firestore/perform-simple-and-compound-queries",title:"Firestore - Perform simple and compound queries",description:"Cloud Firestore provides powerful query functionality for specifying which documents you want to retrieve from a collection. These queries can also be used with either query() or addSnapshotListener(), as described in Get Data and Get Realtime Updates.",source:"@site/docs/firebase/firestore/perform-simple-and-compound-queries.md",sourceDirName:"firebase/firestore",slug:"/firebase/firestore/perform-simple-and-compound-queries",permalink:"/docs/firebase/firestore/perform-simple-and-compound-queries",draft:!1,tags:[],version:"current",frontMatter:{title:"Firestore - Perform simple and compound queries",sidebar_label:"Perform simple and compound queries"},sidebar:"firebase",previous:{title:"Get realtime updates",permalink:"/docs/firebase/firestore/get-realtime-updates"},next:{title:"Order and limit data",permalink:"/docs/firebase/firestore/order-and-limit-data"}},s={},u=[{value:"Simple queries",id:"simple-queries",level:2},{value:"Compound queries",id:"compound-queries",level:2},{value:"OR queries",id:"or-queries",level:2},{value:"Limitations",id:"limitations",level:3},{value:"Query limitations",id:"query-limitations",level:2}],p={toc:u},c="wrapper";function m(e){let{components:t,...r}=e;return(0,i.kt)(c,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Cloud Firestore provides powerful query functionality for specifying which documents you want to retrieve from a collection. These queries can also be used with either ",(0,i.kt)("inlineCode",{parentName:"p"},"query()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"addSnapshotListener()"),", as described in ",(0,i.kt)("a",{parentName:"p",href:"/docs/firebase/firestore/get-data"},"Get Data")," and ",(0,i.kt)("a",{parentName:"p",href:"/docs/firebase/firestore/get-realtime-updates"},"Get Realtime Updates"),"."),(0,i.kt)("h2",{id:"simple-queries"},"Simple queries"),(0,i.kt)("p",null,"The following query returns all cities with state ",(0,i.kt)("inlineCode",{parentName:"p"},"CA"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'// Create a reference to the cities collection\nvar citiesRef:CollectionReference = FirebaseFirestore.service.collection("cities");\n\n// Create a query against the collection.\nvar query:Query = citiesRef.whereEqualTo("state", "CA");\n')),(0,i.kt)("p",null,"The following query returns all the capital cities:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var query:Query = FirebaseFirestore.service.collection("cities").whereEqualTo("capital", true);\n')),(0,i.kt)("p",null,"There are several variants of the ",(0,i.kt)("inlineCode",{parentName:"p"},"where...")," method each take two parameters, a field to filter on and a value."),(0,i.kt)("p",null,"Some example filters:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'citiesRef.whereEqualTo("state", "CA");\ncitiesRef.whereLessThan("population", 100000);\ncitiesRef.whereGreaterThanOrEqualTo("name", "San Francisco");\n')),(0,i.kt)("h2",{id:"compound-queries"},"Compound queries"),(0,i.kt)("p",null,"You can also chain multiple ",(0,i.kt)("inlineCode",{parentName:"p"},"where...")," methods to create more specific queries (logical AND). However, to combine the equality operator (==) with a range or array-contains clause (<, <=, >, >=, or array_contains), make sure to create a ",(0,i.kt)("a",{parentName:"p",href:"https://firebase.google.com/docs/firestore/query-data/indexing"},"composite index"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'citiesRef.whereEqualTo("state", "CO").whereEqualTo("name", "Denver");\ncitiesRef.whereEqualTo("state", "CA").whereLessThan("population", 1000000);\n')),(0,i.kt)("p",null,"You can only perform range comparisons (<, <=, >, >=) on a single field."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Valid"),": Range filters on only one field"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'citiesRef.whereGreaterThanOrEqualTo("state", "CA")\n        .whereLessThanOrEqualTo("state", "IN");\ncitiesRef.whereEqualTo("state", "CA")\n        .whereGreaterThan("population", 1000000);\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Invalid"),": Range filters on different fields:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'citiesRef.whereGreaterThanOrEqualTo("state", "CA").whereGreaterThan("population", 100000);\n')),(0,i.kt)("h2",{id:"or-queries"},"OR queries"),(0,i.kt)("p",null,"You can combine constraints with a logical OR. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var query:Query = collection.where(\n        Filter.or(\n                Filter.equalTo( "capital", true),\n                Filter.greaterThanOrEqualTo("population", 1000000)\n));\n')),(0,i.kt)("p",null,"Firestore uses your composite indexes to serve OR queries. If your indexes do not support the query, Firestore suggests additional indexes for your database."),(0,i.kt)("p",null,"You can combine OR queries with compound queries to filter on combinations of OR and AND operations. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var query:Query = collection.where(\n        Filter.and(\n                Filter.equalTo("state", "CA"),\n                Filter.or(\n                        Filter.equalTo("capital", true),\n                        Filter.greaterThanOrEqualTo("population", 1000000)\n                )\n        )\n);\n')),(0,i.kt)("h3",{id:"limitations"},"Limitations"),(0,i.kt)("p",null,"Note the following limitations for OR queries:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Firestore limits a query to a maximum of 30 disjunctions based on the query's disjunctive normal form. You are more likely to reach this limit when performing an AND of multiple OR groups."),(0,i.kt)("li",{parentName:"ul"},"You can't combine not-in with in, array-contains-any, or or in the same query.")),(0,i.kt)("h2",{id:"query-limitations"},"Query limitations"),(0,i.kt)("p",null,"The following list summarizes Firestore query limitations:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Firestore provides support for logical OR queries through the or, in, and array-contains-any operators. These queries are limited to 30 disjunctions based on the query's disjunctive normal form."),(0,i.kt)("li",{parentName:"ul"},"You can use at most one ",(0,i.kt)("inlineCode",{parentName:"li"},"array-contains")," clause per disjunction (",(0,i.kt)("inlineCode",{parentName:"li"},"or")," group). You can't combine ",(0,i.kt)("inlineCode",{parentName:"li"},"array-contains")," with ",(0,i.kt)("inlineCode",{parentName:"li"},"array-contains-any")," in the same disjunction."),(0,i.kt)("li",{parentName:"ul"},"You can't combine ",(0,i.kt)("inlineCode",{parentName:"li"},"not-in")," with ",(0,i.kt)("inlineCode",{parentName:"li"},"in"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"array-contains-any"),", or ",(0,i.kt)("inlineCode",{parentName:"li"},"or")," in the same query."),(0,i.kt)("li",{parentName:"ul"},"Only a single ",(0,i.kt)("inlineCode",{parentName:"li"},"not-in")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"!=")," is allowed per query."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"not-in")," supports up to 10 comparison values."),(0,i.kt)("li",{parentName:"ul"},"The sum of filters, sort orders, and parent document path (1 for a subcollection, 0 for a root collection) in a query cannot exceed 100. This is calculated based on the disjunctive normal form of the query.\nA query with an inequality filter on a field implies ordering by that field and filters for existence of that field.")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For a full description of limitations, see ",(0,i.kt)("a",{parentName:"li",href:"https://cloud.google.com/firestore/docs/query-data/queries#query_limitations"},"Query limitations"),".")))}m.isMDXComponent=!0}}]);