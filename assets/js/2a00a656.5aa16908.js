"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[39093],{3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return f}});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(r),f=a,m=d["".concat(l,".").concat(f)]||d[f]||p[f]||i;return r?n.createElement(m,o(o({ref:t},c),{},{components:r})):n.createElement(m,o({ref:t},c))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var u=2;u<i;u++)o[u]=r[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},34549:function(e,t,r){r.r(t),r.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return f},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var n=r(87462),a=r(63366),i=(r(67294),r(3905)),o=["components"],s={title:"Firestore - Paginate data with query cursors",sidebar_label:"Paginate data with query cursors"},l=void 0,u={unversionedId:"firebase/firestore/paginate-data-with-query-cursors",id:"firebase/firestore/paginate-data-with-query-cursors",title:"Firestore - Paginate data with query cursors",description:"With query cursors in Cloud Firestore, you can split data returned by a query into batches according to the parameters you define in your query.",source:"@site/docs/firebase/firestore/paginate-data-with-query-cursors.md",sourceDirName:"firebase/firestore",slug:"/firebase/firestore/paginate-data-with-query-cursors",permalink:"/docs/firebase/firestore/paginate-data-with-query-cursors",draft:!1,tags:[],version:"current",frontMatter:{title:"Firestore - Paginate data with query cursors",sidebar_label:"Paginate data with query cursors"},sidebar:"firebase",previous:{title:"Order and limit data",permalink:"/docs/firebase/firestore/order-and-limit-data"},next:{title:"Enable offline data",permalink:"/docs/firebase/firestore/enable-offline-data"}},c={},p=[{value:"Add a simple cursor to a query",id:"add-a-simple-cursor-to-a-query",level:2},{value:"Paginate a query",id:"paginate-a-query",level:2},{value:"Set multiple cursor conditions",id:"set-multiple-cursor-conditions",level:2}],d={toc:p};function f(e){var t=e.components,r=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"With query cursors in Cloud Firestore, you can split data returned by a query into batches according to the parameters you define in your query."),(0,i.kt)("p",null,"Query cursors define the start and end points for a query, allowing you to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Return a subset of the data."),(0,i.kt)("li",{parentName:"ul"},"Paginate query results.")),(0,i.kt)("p",null,"However, to define a specific range for a query, you should use the where() method described in ",(0,i.kt)("a",{parentName:"p",href:"/docs/firebase/firestore/perform-simple-and-compound-queries"},"Simple Queries"),"."),(0,i.kt)("h2",{id:"add-a-simple-cursor-to-a-query"},"Add a simple cursor to a query"),(0,i.kt)("p",null,"Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"startAt()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"startAfter()")," methods to define the start point for a query. The ",(0,i.kt)("inlineCode",{parentName:"p"},"startAt()")," method includes the start point, while the ",(0,i.kt)("inlineCode",{parentName:"p"},"startAfter()")," method excludes it."),(0,i.kt)("p",null,"For example, if you use ",(0,i.kt)("inlineCode",{parentName:"p"},"startAt(A)")," in a query, it returns the entire alphabet. If you use ",(0,i.kt)("inlineCode",{parentName:"p"},"startAfter(A)")," instead, it returns B-Z."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'// Get all cities with a population >= 1,000,000, ordered by population,\ndb.collection("cities")\n        .orderBy("population")\n        .startAt(1000000);\n')),(0,i.kt)("p",null,"Similarly, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"endAt()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"endBefore()")," methods to define an end point for your query results."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'// Get all cities with a population <= 1,000,000, ordered by population,\ndb.collection("cities")\n        .orderBy("population")\n        .endAt(1000000);\n')),(0,i.kt)("h2",{id:"paginate-a-query"},"Paginate a query"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"NOT YET AVAILABLE")," Coming soon")),(0,i.kt)("p",null,"Paginate queries by combining query cursors with the ",(0,i.kt)("inlineCode",{parentName:"p"},"limit()")," method. For example, use the last document in a batch as the start of a cursor for the next batch."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var first:Query = FirebaseFirestore.service.collection("users")\n        .orderBy("born")\n        .limit(5);\n\nfirst.query()\n        .addOnQuerySuccessHandler( function( snapshot:QuerySnapshot ):void\n        {\n            // Get the last visible document\n            var lastVisible:DocumentSnapshot = snapshot.getDocuments()[ snapshot.size - 1 ];\n            \n            var next:Query = FirebaseFirestore.service.collection("users")\n                    .orderBy("born")\n                    .startAtSnapshot(lastVisible)\n                    .limit(5);\n            \n            // Use the query for pagination\n            // ...\n        });\n')),(0,i.kt)("h2",{id:"set-multiple-cursor-conditions"},"Set multiple cursor conditions"),(0,i.kt)("p",null,"To add more granularity to your cursor's start or end point, you can specify multiple conditions in the cursor clause. This is particularly useful if your data set includes fields where the first condition in a cursor clause would return multiple results. Use multiple conditions to further specify the start or end point and reduce ambiguity."),(0,i.kt)("p",null,'For example, in a data set containing all the cities named "Springfield" in the United States, there would be multiple start points for a query set to start at "Springfield":'),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Cities"),(0,i.kt)("th",{parentName:"tr",align:null}))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Name"),(0,i.kt)("td",{parentName:"tr",align:null},"State")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Springfield"),(0,i.kt)("td",{parentName:"tr",align:null},"Massachusetts")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Springfield"),(0,i.kt)("td",{parentName:"tr",align:null},"Missouri")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Springfield"),(0,i.kt)("td",{parentName:"tr",align:null},"Wisconsin")))),(0,i.kt)("p",null,"To start at a specific Springfield, you could add the state as a secondary condition in your cursor clause."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'// Will return all Springfields\nFirebaseFirestore.service.collection("cities")\n        .orderBy("name")\n        .orderBy("state")\n        .startAt("Springfield");\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'// Will return "Springfield, Missouri" and "Springfield, Wisconsin"\nFirebaseFirestore.service.collection("cities")\n        .orderBy("name")\n        .orderBy("state")\n        .startAt("Springfield", "Missouri");\n')))}f.isMDXComponent=!0}}]);