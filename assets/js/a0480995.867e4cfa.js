"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[48803],{20506:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"revenuecat/user-information","title":"Checking Subscription Status","description":"Get User Information","source":"@site/docs/revenuecat/user-information.md","sourceDirName":"revenuecat","slug":"/revenuecat/user-information","permalink":"/docs/revenuecat/user-information","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Checking Subscription Status"},"sidebar":"revenuecat","previous":{"title":"Making Purchases","permalink":"/docs/revenuecat/making-purchases"},"next":{"title":"Restoring Purchases","permalink":"/docs/revenuecat/restoring-purchases"}}');var r=t(74848),s=t(28453);const i={title:"Checking Subscription Status"},a=void 0,c={},u=[{value:"Get User Information",id:"get-user-information",level:2},{value:"Get Entitlement Information",id:"get-entitlement-information",level:2},{value:"Listening For CustomerInfo Updates",id:"listening-for-customerinfo-updates",level:2}];function l(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"get-user-information",children:"Get User Information"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"CustomerInfo"})," object contains all of the purchase and subscription data available about the user. This object is updated whenever a purchase or restore occurs and periodically throughout the lifecycle of your app. The latest information can always be retrieved by calling ",(0,r.jsx)(n.code,{children:"getCustomerInfo()"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"RevenueCat.instance.getCustomerInfo(\n        function ( customerInfo:CustomerInfo ):void\n        {\n            // access latest customerInfo\n        },\n        function ( error:PurchasesError ):void\n        {\n            // handle error\n        }\n);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["It's safe to call ",(0,r.jsx)(n.code,{children:"getCustomerInfo()"})," frequently throughout your app. Since the SDK updates and caches the latest ",(0,r.jsx)(n.code,{children:"CustomerInfo"})," when the app becomes active, the completion block won't need to make a network request in most cases."]}),"\n",(0,r.jsx)(n.h2,{id:"get-entitlement-information",children:"Get Entitlement Information"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"EntitlementInfo"})," object gives you access to all of the information about the status of a user's entitlements."]}),"\n",(0,r.jsxs)(n.p,{children:["To list all the active entitlements use the ",(0,r.jsx)(n.code,{children:"active"})," dictionary:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"for each (var entitlement:EntitlementInfo in customerInfo.entitlements.active)\n{\n    // \n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"listening-for-customerinfo-updates",children:"Listening For CustomerInfo Updates"}),"\n",(0,r.jsxs)(n.p,{children:["A user's CustomerInfo may change from a variety of sources. You can respond to any changes in ",(0,r.jsx)(n.code,{children:"CustomerInfo"})," by listening to the ",(0,r.jsx)(n.code,{children:"PurchaseEvent.CUSTOMER_INFO_UPDATED"})," event.\nThis will fire whenever we receive a change in ",(0,r.jsx)(n.code,{children:"CustomerInfo"})," on the current device and you should expect it to be called at launch and throughout the life of the app."]}),"\n",(0,r.jsx)(n.p,{children:"CustomerInfo updates are not pushed to your app from the RevenueCat backend, updates can only happen from an outbound network request to RevenueCat."}),"\n",(0,r.jsxs)(n.p,{children:["Depending on your app, it may be sufficient to ignore the delegate and simply handle changes to customer information the next time your app is launched. Or throughout your app as you request new ",(0,r.jsx)(n.code,{children:"CustomerInfo"})," objects."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-actionscript",children:"RevenueCat.instance.addEventListener( PurchaseEvent.CUSTOMER_INFO_UPDATED, customerInfoUpdatedHandler );\n\nfunction customerInfoUpdatedHandler( event:PurchaseEvent ):void\n{\n    // event.customerInfo contains the updated customer information\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(96540);const r={},s=o.createContext(r);function i(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);