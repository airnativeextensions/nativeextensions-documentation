(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[28217],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return l},kt:function(){return k}});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,l=d(e,["components","mdxType","originalType","parentName"]),p=s(n),k=i,m=p["".concat(c,".").concat(k)]||p[k]||u[k]||r;return n?o.createElement(m,a(a({ref:t},l),{},{components:n})):o.createElement(m,a({ref:t},l))}));function k(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=p;var d={};for(var c in t)hasOwnProperty.call(t,c)&&(d[c]=t[c]);d.originalType=e,d.mdxType="string"==typeof e?e:i,a[1]=d;for(var s=2;s<r;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},36450:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return a},metadata:function(){return d},toc:function(){return c},default:function(){return l}});var o=n(22122),i=n(19756),r=(n(67294),n(3905)),a={title:"Mediation - Facebook Audience",sidebar_label:"Facebook Audience"},d={unversionedId:"ironsource/mediation/facebook-audience",id:"ironsource/mediation/facebook-audience",isDocsHomePage:!1,title:"Mediation - Facebook Audience",description:"This guide shows how to add mediation through Facebook Audience to your IronSource integration.",source:"@site/docs/ironsource/mediation/facebook-audience.md",sourceDirName:"ironsource/mediation",slug:"/ironsource/mediation/facebook-audience",permalink:"/docs/ironsource/mediation/facebook-audience",version:"current",sidebar_label:"Facebook Audience",frontMatter:{title:"Mediation - Facebook Audience",sidebar_label:"Facebook Audience"},sidebar:"ironsource",previous:{title:"Mediation - Chartboost",permalink:"/docs/ironsource/mediation/chartboost"},next:{title:"Mediation - Tapjoy",permalink:"/docs/ironsource/mediation/tapjoy"}},c=[{value:"Step 1: Set up Facebook Audience Network",id:"step-1-set-up-facebook-audience-network",children:[]},{value:"Step 2: Configure mediation settings in IronSource",id:"step-2-configure-mediation-settings-in-ironsource",children:[]},{value:"Step 3: Import the Facebook Audience Network SDK and adapter ANE",id:"step-3-import-the-facebook-audience-network-sdk-and-adapter-ane",children:[]},{value:"Step 4: Additional code required",id:"step-4-additional-code-required",children:[{value:"Android",id:"android",children:[]},{value:"iOS",id:"ios",children:[]}]}],s={toc:c};function l(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This guide shows how to add mediation through Facebook Audience to your IronSource integration."),(0,r.kt)("h2",{id:"step-1-set-up-facebook-audience-network"},"Step 1: Set up Facebook Audience Network"),(0,r.kt)("p",null,"Setup Facebook Audience network:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developers.ironsrc.com/ironsource-mobile/air/facebook-mediation-guide/#step-1"},"https://developers.ironsrc.com/ironsource-mobile/air/facebook-mediation-guide/#step-1")),(0,r.kt)("h2",{id:"step-2-configure-mediation-settings-in-ironsource"},"Step 2: Configure mediation settings in IronSource"),(0,r.kt)("p",null,"There are 3 pieces of Data from the Facebook Audience Network account which need to be inserted into your ironSource Network Setup Module in order for Facebook Audience Network to work correctly in connection with ironSource. See the IronSource guide for more information:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developers.ironsrc.com/ironsource-mobile/air/facebook-mediation-guide/#step-7"},"https://developers.ironsrc.com/ironsource-mobile/air/facebook-mediation-guide/#step-7")),(0,r.kt)("h2",{id:"step-3-import-the-facebook-audience-network-sdk-and-adapter-ane"},"Step 3: Import the Facebook Audience Network SDK and adapter ANE"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"com.distriqt.ironsource.FacebookAudience")," ANE includes the Facebook Audience SDK and the IronSource Facebook mediation adapter. This is everything you need to get Facebook mediation working in your application."),(0,r.kt)("p",null,"To add the ANE download it from the repository and add it to your application:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/distriqt/ANE-IronSource/raw/master/lib/facebookaudience/com.distriqt.ironsource.FacebookAudience.ane"},"com.distriqt.ironsource.FacebookAudience.ane"))),(0,r.kt)("p",null,"Add the extension id to your application descriptor:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<extensions>\n    <extensionID>com.distriqt.Core</extensionID>\n    <extensionID>com.distriqt.IronSource</extensionID>\n\n    <extensionID>com.distriqt.ironsource.FacebookAudience</extensionID>\n\n    <extensionID>com.distriqt.playservices.Base</extensionID>\n    <extensionID>com.distriqt.playservices.Ads</extensionID>\n\n    <extensionID>androidx.core</extensionID>\n</extensions>\n")),(0,r.kt)("p",null,"More information on adding ANEs in this ",(0,r.kt)("a",{parentName:"p",href:"/docs/tutorials/getting-started"},"tutorial")),(0,r.kt)("h2",{id:"step-4-additional-code-required"},"Step 4: Additional code required"),(0,r.kt)("p",null,"There is no additional code required just a few additional configuration options and files that need to be packaged with your application."),(0,r.kt)("h3",{id:"android"},"Android"),(0,r.kt)("p",null,"Add the ",(0,r.kt)("inlineCode",{parentName:"p"},"audience_network.dex")," file to the root of your application package. (This file is located in the repository, this must be the same version as the extension)."),(0,r.kt)("p",null,"Add the following to your manifest additions inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"application")," tag. "),(0,r.kt)("p",null,"You must replace ",(0,r.kt)("inlineCode",{parentName:"p"},"APPLICATION_PACKAGE")," with your AIR application's Java package name, something like ",(0,r.kt)("inlineCode",{parentName:"p"},"air.com.distriqt.test"),".\nGenerally this is your AIR application id prefixed by ",(0,r.kt)("inlineCode",{parentName:"p"},"air.")," unless you have specified no air flair in your build options."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- Facebook --\x3e\n<activity\n        android:name="com.facebook.ads.InterstitialAdActivity"\n        android:hardwareAccelerated="true"\n        android:configChanges="keyboardHidden|orientation|screenSize" />\n<activity\n        android:name="com.facebook.ads.AudienceNetworkActivity"\n        android:hardwareAccelerated="true"\n        android:configChanges="keyboardHidden|orientation|screenSize" />\n<provider\n    android:name="com.facebook.ads.AudienceNetworkContentProvider"\n    android:authorities="APPLICATION_PACKAGE.AudienceNetworkContentProvider"\n    android:exported="false" />\n')),(0,r.kt)("h3",{id:"ios"},"iOS"),(0,r.kt)("p",null,"Add the following to your ",(0,r.kt)("inlineCode",{parentName:"p"},"InfoAdditions")," node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- iOS 14 AdNetwork --\x3e\n<key>SKAdNetworkItems</key>\n<array>\n    <dict>\n        \x3c!-- IronSource --\x3e\n        <key>SKAdNetworkIdentifier</key>\n        <string>SU67R6K2V3.skadnetwork</string> \n    </dict>\n    <dict>\n        \x3c!-- Facebook --\x3e\n        <key>SKAdNetworkIdentifier</key>\n        <string>v9wttpbfk9.skadnetwork</string>\n    </dict>\n    <dict>\n        \x3c!-- Facebook --\x3e\n        <key>SKAdNetworkIdentifier</key>\n        <string>n38lu8286q.skadnetwork</string>\n    </dict>\n</array>\n")),(0,r.kt)("p",null,"Add the ",(0,r.kt)("inlineCode",{parentName:"p"},"Frameworks")," folder to your application package, ensuring the dynamic ",(0,r.kt)("inlineCode",{parentName:"p"},"FBAudienceNetwork.framework")," is included along with any swift libraries (",(0,r.kt)("inlineCode",{parentName:"p"},"dylib")," files)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"You will need to resign your application following the guide below otherwise your build will likely fail signing validation.")),(0,r.kt)("h1",{id:"signing-your-ios-application"},"Signing your iOS application"),(0,r.kt)("p",null,"With AIR 27 Adobe partially added the ability to use dynamic frameworks in your iOS application, which works fine with frameworks you control however still has issues with third party frameworks."),(0,r.kt)("p",null,"Everything will work up to a point, however AIR will incorrectly sign your IPA and it will fail AppStore submission with an error from the Application Loader tool and installing development builds with a signature validation error."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Please vote to resolve this issue here: ",(0,r.kt)("a",{parentName:"strong",href:"https://tracker.adobe.com/#/view/AIR-4198407"},"https://tracker.adobe.com/#/view/AIR-4198407"))),(0,r.kt)("p",null,"To get around this, before you upload or install your application you will need to run a script to resign your IPA.\nThis script is available in the repository alongside the ANE in the ",(0,r.kt)("inlineCode",{parentName:"p"},"scripts")," directory."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"This script will only work on a macOS machine with Xcode installed and your certificate installed in Keychain"))),(0,r.kt)("p",null,"Copy this script to a directory in your development environment."),(0,r.kt)("p",null,"Firstly edit the script to change the details of the IPA, provisioning profile and signing identity for your application. These details are located at the top of the script."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'#####################################\n## CONFIG\n\n# You need to set the values below for your application\n# We suggest they are full paths to the files. \n\n# The path to the ipa generated from your AIR application packaging\nIPA="/path/to/yourApp.ipa"\n\n# The distribution provisioning profile for your application\nPROVISIONING_PROFILE="/path/to/profile.mobileprovision"\n\n# The name of the signing identity. You get this by running the following in a terminal \n# and selecting the name of your distribution certificate:\n# \n# security find-identity -v -p codesigning\nSIGNING_IDENTITY="iPhone Distribution: XXXXXXXXX (XXXXX)"\n')),(0,r.kt)("p",null,"Now open a Terminal at the script location. ",(0,r.kt)("em",{parentName:"p"},"You will need to run the script from this directory.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./resign\n")),(0,r.kt)("p",null,"This should output a few informational items to the console and then once complete you should have a new IPA file in the directory named: ",(0,r.kt)("inlineCode",{parentName:"p"},"yourApp_resigned.ipa"),". If there were any errors or warnings displayed, make sure the information above is all correct."),(0,r.kt)("p",null,"This resigned IPA is the file you should use."))}l.isMDXComponent=!0}}]);