(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{201:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return l}));var i=t(2),a=t(6),o=(t(0),t(824)),r={title:"DynamicLinks - Add the extension",sidebar_label:"Add the extension"},s={unversionedId:"firebase/dynamiclinks/add-the-extension",id:"firebase/dynamiclinks/add-the-extension",isDocsHomePage:!1,title:"DynamicLinks - Add the extension",description:"Required Extensions",source:"@site/docs/firebase/dynamiclinks/add-the-extension.md",slug:"/firebase/dynamiclinks/add-the-extension",permalink:"/docs/firebase/dynamiclinks/add-the-extension",version:"current",sidebar_label:"Add the extension",sidebar:"firebase",previous:{title:"DynamicLinks - Introduction",permalink:"/docs/firebase/dynamiclinks/introduction"},next:{title:"DynamicLinks - Initialise",permalink:"/docs/firebase/dynamiclinks/initialise"}},c=[{value:"Required Extensions",id:"required-extensions",children:[{value:"Firebase Dynamic Links",id:"firebase-dynamic-links",children:[]}]},{value:"Extension IDs",id:"extension-ids",children:[]},{value:"Android",id:"android",children:[{value:"Manifest Additions",id:"manifest-additions",children:[]}]},{value:"iOS",id:"ios",children:[{value:"Developer Console",id:"developer-console",children:[]},{value:"Info Additions and Entitlements",id:"info-additions-and-entitlements",children:[]},{value:"iOS Example",id:"ios-example",children:[]}]}],d={rightToc:c};function l(e){var n=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(i.a)({},d,r,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"required-extensions"},"Required Extensions"),Object(o.b)("p",null,"You should have been through the setup of the Firebase Core before attempting to proceed with Dynamic Links."),Object(o.b)("p",null,"Make sure you have added all the extensions required for the Firebase Core extension as outlined ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"../core/add-the-extensions"}),"here"),"."),Object(o.b)("h3",{id:"firebase-dynamic-links"},"Firebase Dynamic Links"),Object(o.b)("p",null,"The only required additional ANE is the Dynamic Links ANE located in this repository:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/distriqt/ANE-Firebase/raw/master/lib/com.distriqt.firebase.DynamicLinks.ane"}),Object(o.b)("inlineCode",{parentName:"a"},"com.distriqt.firebase.DynamicLinks")))),Object(o.b)("p",null,"This ANE contains all the required libraries for the main Firebase Dynamic Links functionality."),Object(o.b)("h2",{id:"extension-ids"},"Extension IDs"),Object(o.b)("p",null,"The following should be added to your ",Object(o.b)("inlineCode",{parentName:"p"},"extensions")," node in your application descriptor to identify all the required ANEs in your application:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),"<extensions>\n    <extensionID>com.distriqt.Firebase</extensionID>\n    <extensionID>com.distriqt.firebase.DynamicLinks</extensionID>\n\n    <extensionID>com.distriqt.Core</extensionID>\n\n    <extensionID>com.distriqt.playservices.Base</extensionID>\n    <extensionID>com.distriqt.playservices.AdsIdentifier</extensionID>\n\n    <extensionID>com.google.protobuflite</extensionID>\n    <extensionID>com.google.firebase.core</extensionID>\n\n    <extensionID>androidx.core</extensionID>\n\n    <extensionID>com.distriqt.CustomResources</extensionID>\n</extensions>\n")),Object(o.b)("hr",null),Object(o.b)("h2",{id:"android"},"Android"),Object(o.b)("h3",{id:"manifest-additions"},"Manifest Additions"),Object(o.b)("p",null,"Locate the ",Object(o.b)("inlineCode",{parentName:"p"},"ComponentDiscoveryService")," service you added as part of the core Firebase manfiest additions and add the following meta data tag:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),'<meta-data\n    android:name="com.google.firebase.components:com.google.firebase.dynamiclinks.internal.FirebaseDynamicLinkRegistrar"\n    android:value="com.google.firebase.components.ComponentRegistrar" />\n')),Object(o.b)("p",null,"It should now appear like the following at a minimum (it may have other meta-data tags from other components):"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),'<service android:name="com.google.firebase.components.ComponentDiscoveryService" \n        android:directBootAware="true"\n        android:exported="false">\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.dynamiclinks.internal.FirebaseDynamicLinkRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.analytics.connector.internal.AnalyticsConnectorRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.installations.FirebaseInstallationsRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n    <meta-data\n        android:name="com.google.firebase.components:com.google.firebase.dynamicloading.DynamicLoadingRegistrar"\n        android:value="com.google.firebase.components.ComponentRegistrar" />\n</service>\n')),Object(o.b)("p",null,"As with plain deep links, you must add an intent filter to the activity that handles deep links for your app.\nThe intent filter should catch deep links of your domain, since the Dynamic Link will redirect to your domain\nif your app is installed. This is required for your app to receive the Dynamic Link data after it is installed\nfrom the Play Store. In AndroidManifest.xml:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),'<intent-filter>\n    <action android:name="android.intent.action.VIEW"/>\n    <category android:name="android.intent.category.DEFAULT"/>\n    <category android:name="android.intent.category.BROWSABLE"/>\n\n    <data android:host="airnativeextensions.com" android:scheme="http"/>\n    <data android:host="airnativeextensions.com" android:scheme="https"/>\n</intent-filter>\n')),Object(o.b)("p",null,"This intent filter should be added directly after the ",Object(o.b)("inlineCode",{parentName:"p"},"<application>")," tag in your manifest additions.\n(Note: This is not the main ",Object(o.b)("inlineCode",{parentName:"p"},"<application>")," tag in your AIR application descriptor but the one inside\nyour manifest additions!) "),Object(o.b)("p",null,"For example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),'<android>\n    <manifestAdditions><![CDATA[\n        <manifest android:installLocation="auto">\n            <uses-permission android:name="android.permission.INTERNET"/>\n            \n            \x3c!-- OTHER PERMISSIONS / REQUIREMENTS --\x3e\n\n            <application>\n\n                <intent-filter>\n                    <action android:name="android.intent.action.VIEW"/>\n                    <category android:name="android.intent.category.DEFAULT"/>\n                    <category android:name="android.intent.category.BROWSABLE"/>\n\n                    <data android:host="airnativeextensions.com" android:scheme="http"/>\n                    <data android:host="airnativeextensions.com" android:scheme="https"/>\n                </intent-filter>\n            \n                \x3c!-- OTHER ADDITIONS --\x3e\n\n            </application>\n        </manifest>\n    ]]></manifestAdditions>\n</android>\n')),Object(o.b)("p",null,"When users open a link to the scheme and host you specify, your app will start an activity to handle the link."),Object(o.b)("p",null,"For more details on these fields and how to handle other types of App Links you can\nread the official Android documentation on ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://developer.android.com/training/app-links/index.html"}),"Handling App Links")),Object(o.b)("h2",{id:"ios"},"iOS"),Object(o.b)("p",null,"Ensure that your app's App Store ID and your Apple Developer Team ID is specified in your app's settings. To view and edit your app's settings, go to your Firebase project's Settings page and select your iOS app."),Object(o.b)("p",null,"You can confirm that your Firebase project is properly configured to use Dynamic Links in your iOS app by opening the following URL (replacing ",Object(o.b)("inlineCode",{parentName:"p"},"app_code")," with your app code):"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{}),"https://app_code.app.goo.gl/apple-app-site-association\n")),Object(o.b)("p",null,"If your app is connected, the apple-app-site-association file contains a reference to your app's App Store ID and bundle ID. For example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{}),'{"applinks":{"apps":[],"details":[{"appID":"1234567890.com.example.ios","paths":["/*"]}]}}\n')),Object(o.b)("p",null,"If the details field is empty, double-check that you specified your Team ID."),Object(o.b)("h3",{id:"developer-console"},"Developer Console"),Object(o.b)("p",null,'Ensure your application identifier in the iOS developer member center has enabled "Associated Domains".\nEnabling Associated Domains allows an app to be associated with a specified domain for specified services\nsuch as accessing Safari saved passwords and activity continuation.'),Object(o.b)("p",null,"To do this, log into the member center and open your ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://developer.apple.com/account/ios/identifier/bundle"}),"App IDs")),Object(o.b)("p",null,'Select your App ID and select "Edit". You need to enable the "Associated Domains" service as below:'),Object(o.b)("p",null,Object(o.b)("img",{src:t(962).default})),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Note: You will need to regenerate and download your provisioning profiles after making this change. ")),Object(o.b)("h3",{id:"info-additions-and-entitlements"},"Info Additions and Entitlements"),Object(o.b)("p",null,"You will firstly need to add any custom url scheme to your info additions, by adding\nthe following and replacing ",Object(o.b)("inlineCode",{parentName:"p"},"APP_SCHEME")," with your applications custom url scheme:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),"<key>CFBundleURLTypes</key>\n<array>\n    <dict>\n        <key>CFBundleURLSchemes</key>\n        <array>\n            <string>APP_SCHEME</string>\n        </array>\n    </dict>\n</array>\n")),Object(o.b)("p",null,"You need to add the associated domain to your iOS Entitlements section, replacing\n",Object(o.b)("inlineCode",{parentName:"p"},"APP_CODE")," below with your Dynamic Links domain."),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),"<key>com.apple.developer.associated-domains</key>\n<array>\n    <string>applinks:APP_CODE.app.goo.gl</string>\n</array>\n")),Object(o.b)("p",null,"If you want to receive Dynamic Links with a fully-custom domain you will need to add the ",Object(o.b)("inlineCode",{parentName:"p"},"FirebaseDynamicLinksCustomDomains")," key to your info additions and specify your app's Dynamic Links URL prefixes:"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),"<key>FirebaseDynamicLinksCustomDomains</key>\n<array>\n    <string>https://example.com/link</string>\n    <string>https://example.com/promos</string>\n</array>\n")),Object(o.b)("h3",{id:"ios-example"},"iOS Example"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-xml"}),"<iPhone>\n    <InfoAdditions><![CDATA[\n\n        <key>CFBundleURLTypes</key>\n        <array>\n            <dict>\n                <key>CFBundleURLSchemes</key>\n                <array>\n                    <string>distriqt</string>\n                </array>\n            </dict>\n        </array>\n\n        <key>FirebaseDynamicLinksCustomDomains</key>\n        <array>\n            <string>https://example.com/link</string>\n            <string>https://example.com/promos</string>\n        </array>\n\n    ]]></InfoAdditions>\n    <requestedDisplayResolution>high</requestedDisplayResolution>\n    <Entitlements><![CDATA[\n        \n        <key>com.apple.developer.associated-domains</key>\n        <array>\n            <string>applinks:abc123.app.goo.gl</string>\n        </array>\n\n    ]]></Entitlements>\n</iPhone>\n")))}l.isMDXComponent=!0},824:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return u}));var i=t(0),a=t.n(i);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=a.a.createContext({}),l=function(e){var n=a.a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=l(e.components);return a.a.createElement(d.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=a.a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,r=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),p=l(t),b=i,u=p["".concat(r,".").concat(b)]||p[b]||m[b]||o;return t?a.a.createElement(u,s(s({ref:n},d),{},{components:t})):a.a.createElement(u,s({ref:n},d))}));function u(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,r=new Array(o);r[0]=b;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var d=2;d<o;d++)r[d]=t[d];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"},962:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/dynamiclinks-ios-associateddomains-d9ef0710131e5506f4a91e17beafc36f.png"}}]);