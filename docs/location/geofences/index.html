<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="air native extensions Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="air native extensions Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-188619114-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="air native extensions" href="/opensearch.xml"><title data-react-helmet="true">Geofences | air native extensions</title><meta data-react-helmet="true" property="og:url" content="https://docs.airnativeextensions.com/docs/location/geofences"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Geofences | air native extensions"><meta data-react-helmet="true" name="description" content="Authorisation"><meta data-react-helmet="true" property="og:description" content="Authorisation"><meta data-react-helmet="true" property="og:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.airnativeextensions.com/img/ane-icon-black.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.airnativeextensions.com/docs/location/geofences"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/location/geofences" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.airnativeextensions.com/docs/location/geofences" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.95805f25.css">
<link rel="preload" href="/assets/js/runtime~main.b7925af8.js" as="script">
<link rel="preload" href="/assets/js/main.1a1ed455.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AIR Native Extensions</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT"> </span></div><div class="react-toggle-track-x"><span class="toggle_71bT"> </span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/ane-icon-black.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ane-icon-white.png" alt="AIR Native Extensions" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">AIR Native Extensions</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/news/">News</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/location/">Location</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/location/add-the-extension">Add the Extension</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/location/initialise-the-extension">Initialise the Extension</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Usage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/location/request-authorisation">Request Authorisation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/location/device-location-settings">Device Location Settings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/location/location-monitoring">Location Monitoring</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/location/geofences">Geofences</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/location/geocoding">Geocoding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/location/location-utils---distance">Location Utils - Distance</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/location/ios-location-simulation">iOS Location Simulation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Help</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/location/migrating-to-androidx">Migrating to AndroidX</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/localauth/changelog">changelog</a></li><li class="menu__list-item"><a href="https://docs.airnativeextensions.com/asdocs/localauth/" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">asdocs</a></li><li class="menu__list-item"><a href="http://github.com/distriqt/ANE-LocalAuth/issues/new" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Contact Support</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Geofences</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="authorisation"></a>Authorisation<a class="hash-link" href="#authorisation" title="Direct link to heading">#</a></h2><p>In order to use Geofences you should request the <code>ALWAYS</code> authorisation. Apps with geofencing capabilities should use Always authorization due to the need to monitor geofences even when the app isn’t running in the foreground.</p><p>Additionally you need to have added the location <code>UIBackgroundModes</code> on iOS. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="start-monitoring-a-geofence-region"></a>Start Monitoring a Geofence Region<a class="hash-link" href="#start-monitoring-a-geofence-region" title="Direct link to heading">#</a></h2><p>To start monitoring a region you create a <code>Region</code> instance representing the Geofenced region.
This object has a location (latitude and longitude) and a radius to specify the location and size of the region, and you should also assign a region a unique identifier so you can later identify the region that was entered/exited. </p><p>The radius represents the distance in <strong>meters</strong> from the specified location, at which the system will trigger the notification.</p><p>Once you have defined your region you start monitoring by calling <code>startMonitoringRegion</code>.
You can call this multiple times if you wish to monitor several regions.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.addEventListener( RegionEvent.START_MONITORING, startMonitoringHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.addEventListener( RegionEvent.ENTER, enterHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.addEventListener( RegionEvent.EXIT, exitHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var region:Region = new Region();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">region.identifier   = &quot;some-unique-id&quot;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">region.latitude     = 14.123456;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">region.longitude    = 12.345678;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">region.radius       = 100;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var success:Boolean = Location.service.geofences.startMonitoringRegion( region );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">function startMonitoringHandler( event:RegionEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;start monitor: &quot;+event.region.identifier );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">function enterHandler( event:RegionEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;region enter: &quot;+event.region.identifier );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">function exitHandler( event:RegionEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;region exit: &quot;+event.region.identifier );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="android"></a>Android<a class="hash-link" href="#android" title="Direct link to heading">#</a></h3><p>On Android you can trigger your application to start if it is not running by setting the <code>startApplicationOnEnter</code> flag on the region. If you set this flag to <code>true</code> then when the device enters the region your application will be automatically started.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">var region:Region = new Region();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">region.startApplicationOnEnter = true;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The default is <code>false</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stop-monitoring-a-geofence-region"></a>Stop Monitoring a Geofence Region<a class="hash-link" href="#stop-monitoring-a-geofence-region" title="Direct link to heading">#</a></h2><p>Stopping location updates is simply a matter of calling <code>stopMonitoringRegion</code> and passing the same <code>Region</code> used to start monitoring the region. This will dispatch a <code>RegionEvent.STOP_MONITORING</code> event when successful. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.addEventListener( RegionEvent.STOP_MONITORING, stopMonitoringHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">var success:Boolean = Location.service.geofences.stopMonitoringRegion( region );</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">function stopMonitoringHandler( event:RegionEvent ):void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    trace( &quot;stop monitor: &quot;+event.region.identifier );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If you have finished listening to geofences you should also remove any <code>RegionEvent</code> listeners you may have been using.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly actionscript"><div tabindex="0" class="prism-code language-actionscript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.removeEventListener( RegionEvent.START_MONITORING, startMonitoringHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.removeEventListener( RegionEvent.STOP_MONITORING, stopMonitoringHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.removeEventListener( RegionEvent.ENTER, enterHandler );</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Location.service.geofences.removeEventListener( RegionEvent.EXIT, exitHandler );</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="operation-notes-and-caveats"></a>Operation Notes and Caveats<a class="hash-link" href="#operation-notes-and-caveats" title="Direct link to heading">#</a></h2><p>The entry and exit events are generated whenever the OS determines that a region is entered or exited. The conditions for this vary on the operating systems and can vary from a few seconds to a few minutes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ios"></a>iOS<a class="hash-link" href="#ios" title="Direct link to heading">#</a></h3><p>An app can register up to 20 regions at a time. In order to report region changes in a timely manner, the region monitoring service requires network connectivity.</p><p>To work around this limit, consider registering only those regions in the user’s immediate vicinity. As the user’s location changes, you can remove regions that are now farther way and add regions coming up on the user’s path. </p><p>Regions with a radius between 1 and 400 meters work better on iPhone 4S or later devices. On these devices, an app can expect to receive the appropriate region entered or region exited notification within 3 to 5 minutes on average, if not sooner.</p><p>The system doesn’t report boundary crossings until the boundary plus a system-defined cushion distance is exceeded. This cushion value prevents the system from generating numerous entered and exited events in quick succession while the user is traveling close the edge of the boundary.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="android-1"></a>Android<a class="hash-link" href="#android-1" title="Direct link to heading">#</a></h3><p>Android entry/exit events are dispatched somewhat faster than on iOS.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/location/location-monitoring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Location Monitoring</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/location/geocoding"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Geocoding »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#authorisation" class="table-of-contents__link">Authorisation</a></li><li><a href="#start-monitoring-a-geofence-region" class="table-of-contents__link">Start Monitoring a Geofence Region</a><ul><li><a href="#android" class="table-of-contents__link">Android</a></li></ul></li><li><a href="#stop-monitoring-a-geofence-region" class="table-of-contents__link">Stop Monitoring a Geofence Region</a></li><li><a href="#operation-notes-and-caveats" class="table-of-contents__link">Operation Notes and Caveats</a><ul><li><a href="#ios" class="table-of-contents__link">iOS</a></li><li><a href="#android-1" class="table-of-contents__link">Android</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/">tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">twitter</a></li><li class="footer__item"><a href="https://github.com/Gamua/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">AIR discussions</a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">starling</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/distriqt" target="_blank" rel="noopener noreferrer" class="footer__link-item">stack overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">news</a></li><li class="footer__item"><a href="https://airnativeextensions.com/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">privacy</a></li><li class="footer__item"><a href="https://airnativeextensions.com/license" target="_blank" rel="noopener noreferrer" class="footer__link-item">license</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br><a href="https://airnativeextensions.com">airnativeextensions.com</a> copyright © 2021 <br><br><a href="https://distriqt.com"><img src="/img/logo.png" alt="distriqt"></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.b7925af8.js"></script>
<script src="/assets/js/main.1a1ed455.js"></script>
</body>
</html>