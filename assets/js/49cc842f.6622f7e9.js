"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[46424],{28453:(e,t,i)=>{i.d(t,{R:()=>c,x:()=>a});var n=i(96540);const s={},o=n.createContext(s);function c(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(o.Provider,{value:t},e.children)}},42096:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/settings_android-c36bf92b11f3e26067b9cbcb1e297e82.png"},65015:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/settings_android_checkLocationSettings-03abbab2887536164ec934f0d5605c30.png"},76450:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/settings_ios-8cf6a87db45a910fae9d4aa297cc3cf4.png"},90641:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"location/device-location-settings","title":"Device Location Settings","description":"Device settings are separate from authorisation. While your application may be authorised to access the user\'s location they may have disabled their devices GPS or WiFi making receiving location updates difficult or impossible.","source":"@site/docs/location/device-location-settings.md","sourceDirName":"location","slug":"/location/device-location-settings","permalink":"/docs/location/device-location-settings","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Device Location Settings","sidebar_label":"Device Location Settings"},"sidebar":"location","previous":{"title":"Request Authorisation","permalink":"/docs/location/request-authorisation"},"next":{"title":"Location Monitoring","permalink":"/docs/location/location-monitoring"}}');var s=i(74848),o=i(28453);const c={title:"Device Location Settings",sidebar_label:"Device Location Settings"},a=void 0,r={},l=[{value:"Is Available",id:"is-available",level:2},{value:"Display Settings",id:"display-settings",level:2},{value:"Change Settings",id:"change-settings",level:2}];function d(e){const t={blockquote:"blockquote",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Device settings are separate from authorisation. While your application may be authorised to access the user's location they may have disabled their devices GPS or WiFi making receiving location updates difficult or impossible."}),"\n",(0,s.jsx)(t.p,{children:"There are several utility functions in this extension to aid in this process."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"isAvailable"}),": Checks to see if the GPS / WiFi services are enabled"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"displayLocationSettings"}),": Redirects the user to the location settings"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"checkLocationSettings"}),": Android utility to enable services directly from your application"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"is-available",children:"Is Available"}),"\n",(0,s.jsx)(t.p,{children:"The available flag will check whether the location services are enabled on the device."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["iOS: This checks the ",(0,s.jsx)(t.code,{children:"CLLocationManager locationServicesEnabled"})," flag. The user can enable or disable location services from the Settings app by toggling the Location Services switch in General."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Android: This checks if GPS and WiFi are enabled and the state of the airplane mode on the device."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"var available:Boolean = Location.service.isAvailable();\n"})}),"\n",(0,s.jsx)(t.h2,{id:"display-settings",children:"Display Settings"}),"\n",(0,s.jsxs)(t.p,{children:["If the services aren't available you can ask your user to enable them and then use the ",(0,s.jsx)(t.code,{children:"displayLocationSettings"})," function to redirect them to the appropriate place in the settings."]}),"\n",(0,s.jsx)(t.p,{children:"For example if the services aren't available:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"if (!Location.service.isAvailable()) \n{\n    Location.service.displayLocationSettings(); \n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"This will redirect them to the following screens:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Android"}),(0,s.jsx)(t.th,{children:"iOS"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.img,{src:i(42096).A+"",width:"375",height:"667"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.img,{src:i(76450).A+"",width:"375",height:"667"})})]})})]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"Note: From iOS 11 you can only get redirected to the application settings screen not the location settings"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"change-settings",children:"Change Settings"}),"\n",(0,s.jsx)(t.p,{children:"On Android you have the ability to ask the user to change the location services directly from your application."}),"\n",(0,s.jsxs)(t.p,{children:["Calling ",(0,s.jsx)(t.code,{children:"checkLocationSettings"})," with your ",(0,s.jsx)(t.code,{children:"LocationRequest"})," will check if the device currently has the correct services enabled to support the location request.\nThe major factor here is the priority of the request which specifies which services will need to be enabled."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"var request:LocationRequest = new LocationRequest();\nrequest.priority = LocationRequest.PRIORITY_HIGH_ACCURACY;\n\t\t\t\t \nvar success:Boolean = Location.service.checkLocationSettings( request );\n"})}),"\n",(0,s.jsx)(t.p,{children:"The return value of this function indicates whether the current device platform and version supports the settings check. If it returns false you should not expect any changes to the settings automatically and you'll need to open the device settings as above."}),"\n",(0,s.jsx)(t.p,{children:"If it returns true then you can expect one of two events:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"LocationSettingsEvent.SUCCESS"})," : Location settings are now valid for the specified location request"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"LocationSettingsEvent.FAILED"})," : location settings check failed for the specified location request. The user probably denied enabling the services."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"During this process there may be a dialog presented to the user to ask to enable the required services, if they currently are disabled:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:i(65015).A+"",width:"375",height:"667"})}),"\n",(0,s.jsx)(t.p,{children:"For example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-actionscript",children:"var request:LocationRequest = new LocationRequest();\nrequest.priority = LocationRequest.PRIORITY_HIGH_ACCURACY;\n\nLocation.service.addEventListener( LocationSettingsEvent.SUCCESS, checkLocationSettingsHandler );\nLocation.service.addEventListener( LocationSettingsEvent.FAILED, checkLocationSettingsHandler );\n\nvar success:Boolean = Location.service.checkLocationSettings( request );\nif (!success)\n{\n    Location.service.displayLocationSettings();\n}\n\nfunction checkLocationSettingsHandler( event:LocationSettingsEvent ):void\n{\n    trace( event.type );\n}\n"})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);