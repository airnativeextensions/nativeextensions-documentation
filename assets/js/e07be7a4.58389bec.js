"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[34648],{10112:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"firebase/storage/download-files","title":"Storage - Download Files","description":"Download Files","source":"@site/docs/firebase/storage/download-files.md","sourceDirName":"firebase/storage","slug":"/firebase/storage/download-files","permalink":"/docs/firebase/storage/download-files","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Storage - Download Files","sidebar_label":"Download Files"},"sidebar":"firebase","previous":{"title":"Upload Files","permalink":"/docs/firebase/storage/upload-files"},"next":{"title":"File Metadata","permalink":"/docs/firebase/storage/file-metadata"}}');var s=o(74848),t=o(28453);const l={title:"Storage - Download Files",sidebar_label:"Download Files"},d=void 0,r={},i=[{value:"Download Files",id:"download-files",level:2},{value:"Download Files",id:"download-files-1",level:2},{value:"Download in memory",id:"download-in-memory",level:2},{value:"Download to a local file",id:"download-to-a-local-file",level:2},{value:"Monitor Download Progress",id:"monitor-download-progress",level:2},{value:"Manage Downloads",id:"manage-downloads",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"download-files",children:"Download Files"}),"\n",(0,s.jsx)(n.p,{children:"To download a file, first create a Firebase Storage reference to the file you want to download."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:'var reference:StorageReference = FirebaseStorage.service.getReference().child( "downloads/example.png" );\n'})}),"\n",(0,s.jsx)(n.h2,{id:"download-files-1",children:"Download Files"}),"\n",(0,s.jsxs)(n.p,{children:["Once you have a reference, you can download files from Firebase Storage by calling\nthe ",(0,s.jsx)(n.code,{children:"getBytes()"})," or ",(0,s.jsx)(n.code,{children:"getFile()"}),". You can also download the file directly from the URL\nusing a standard AS3 loader."]}),"\n",(0,s.jsx)(n.h2,{id:"download-in-memory",children:"Download in memory"}),"\n",(0,s.jsxs)(n.p,{children:["Download the file to a ",(0,s.jsx)(n.code,{children:"ByteArray"})," with the ",(0,s.jsx)(n.code,{children:"getBytes()"})," method. This is the easiest way\nto download a file, but it must load the entire contents of your file into memory."]}),"\n",(0,s.jsxs)(n.p,{children:["If you request a file larger than your app's available memory, your app will crash.\nTo protect against memory issues, ",(0,s.jsx)(n.code,{children:"getBytes()"})," takes a maximum amount of bytes to\ndownload. Set the maximum size to something you know your app can handle, or use\nanother download method."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"var task:DownloadTask = reference.getBytes( 1024*1024 );\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Note: ",(0,s.jsx)(n.code,{children:"DownloadTask"})," retrieved from ",(0,s.jsx)(n.code,{children:"getBytes"})," cannot be paused or canceled and\nwill not dispatch the equivalent progress or paused events."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["To get access to the byte data you should listen for the ",(0,s.jsx)(n.code,{children:"SUCCESS"})," event:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"task.addEventListener( DownloadTaskEvent.SUCCESS, downloadSuccessHandler );\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In your handler you will have access to the byte data via the ",(0,s.jsx)(n.code,{children:"taskSnapshot"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"private function downloadSuccessHandler( event:DownloadTaskEvent ):void \n{\n\tvar data:ByteArray = event.taskSnapshot.bytes; \n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"download-to-a-local-file",children:"Download to a local file"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"getFile()"})," method downloads a file directly to a local device."]}),"\n",(0,s.jsxs)(n.p,{children:["Use this if your users want to have access to the file while offline or to share\nthe file in a different app. ",(0,s.jsx)(n.code,{children:"getFile()"})," returns a ",(0,s.jsx)(n.code,{children:"DownloadTask"})," which you can use\nto manage your download and monitor the status of the download."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:'var file:File = File.applicationStorageDirectory.resolvePath( "downloads/test.png" );\n\nvar task:DownloadTask = reference.getFile( file );\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"DownloadTask"})," from ",(0,s.jsx)(n.code,{children:"getFile"})," will have access to all the functionality defined\nincluding progress and paused events."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"monitor-download-progress",children:"Monitor Download Progress"}),"\n",(0,s.jsxs)(n.p,{children:["A download task dispatches ",(0,s.jsx)(n.code,{children:"DownloadTaskEvent"}),"s to indicate completion, progress, and errors:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"task.addEventListener( DownloadTaskEvent.SUCCESS, downloadSuccessHandler );\ntask.addEventListener( DownloadTaskEvent.ERROR, downloadErrorHandler );\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Events are dispatched with a ",(0,s.jsx)(n.code,{children:"DownloadTaskSnapshot"})," object.\nThis object is an immutable view of the task at the time the event occurred."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"private function downloadSuccessHandler( event:DownloadTaskEvent ):void \n{\n\t// event.taskSnapshot contains details about the completed download\n}\n\nprivate function downloadErrorHandler( event:DownloadTaskEvent ):void \n{\n\t// Handle unsuccessful download\n\t// event.errorMessage contains the reason for the error\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"manage-downloads",children:"Manage Downloads"}),"\n",(0,s.jsxs)(n.p,{children:["In addition to starting downloads, you can pause, resume, and cancel uploads\nusing the ",(0,s.jsx)(n.code,{children:"pause()"}),", ",(0,s.jsx)(n.code,{children:"resume()"}),", and ",(0,s.jsx)(n.code,{children:"cancel()"})," methods. Pause and resume\nevents raise pause and progress state changes respectively. Canceling a\ndownload causes the download to fail with an error indicating that the download\nwas canceled."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-actionscript",children:"// Pause the download\ntask.pause();\n\n// Resume the download\ntask.resume();\n\n// Cancel the download\ntask.cancel();\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>l,x:()=>d});var a=o(96540);const s={},t=a.createContext(s);function l(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);