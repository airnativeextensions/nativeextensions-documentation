"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[9636],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,p=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),g=l(n),d=i,m=g["".concat(p,".").concat(d)]||g[d]||u[d]||s;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,r=new Array(s);r[0]=g;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var l=2;l<s;l++)r[l]=n[l];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},95235:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return c},default:function(){return g}});var a=n(87462),i=n(63366),s=(n(67294),n(3905)),r=["components"],o={title:"InApp Messaging",sidebar_label:"InApp Messaging"},p=void 0,l={unversionedId:"pushnotifications/inapp-messaging",id:"pushnotifications/inapp-messaging",title:"InApp Messaging",description:"In-App Messaging helps you engage your app's active users by sending them targeted, contextual messages that encourage them to use key app features.",source:"@site/docs/pushnotifications/inapp-messaging.md",sourceDirName:"pushnotifications",slug:"/pushnotifications/inapp-messaging",permalink:"/docs/pushnotifications/inapp-messaging",tags:[],version:"current",frontMatter:{title:"InApp Messaging",sidebar_label:"InApp Messaging"},sidebar:"pushnotifications",previous:{title:"User Consent",permalink:"/docs/pushnotifications/user-consent"},next:{title:"Receiving notifications",permalink:"/docs/pushnotifications/receiving-notifications"}},c=[{value:"Setup",id:"setup",children:[],level:2},{value:"Support",id:"support",children:[],level:2},{value:"Handle User Interaction",id:"handle-user-interaction",children:[],level:2},{value:"Trigger in-app messages programmatically",id:"trigger-in-app-messages-programmatically",children:[],level:2},{value:"Temporarily disable in-app messages",id:"temporarily-disable-in-app-messages",children:[],level:2},{value:"Enable opt-out message delivery",id:"enable-opt-out-message-delivery",children:[],level:2}],u={toc:c};function g(e){var t=e.components,n=(0,i.Z)(e,r);return(0,s.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"In-App Messaging helps you engage your app's active users by sending them targeted, contextual messages that encourage them to use key app features."),(0,s.kt)("p",null,"This messaging approach doesn't push notifications to the device, instead they are displayed at certain contextual moments in your application. "),(0,s.kt)("p",null,"They generally are highly customisable and importantly they ",(0,s.kt)("strong",{parentName:"p"},"don't rely on push notification authorisation")," so you can send these messages to devices that have denied push notifications. "),(0,s.kt)("p",null,"The In-App Messaging functionality is provided through the ",(0,s.kt)("inlineCode",{parentName:"p"},"InAppMessaging")," singleton accessed via ",(0,s.kt)("inlineCode",{parentName:"p"},"PushNotifications.service.inAppMessaging"),"."),(0,s.kt)("h2",{id:"setup"},"Setup"),(0,s.kt)("p",null,"You must ",(0,s.kt)("a",{parentName:"p",href:"/docs/pushnotifications/setup-your-service"},"setup your service")," before attempting to access In-App Messaging. Any attempts to access it before calling setup will fail."),(0,s.kt)("h2",{id:"support"},"Support"),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Note: Only some services support In-App Messaging and generally require additional setup to the main push notification service. Check the documentation for the services to confirm that this is supported and that you have performed any additional integration steps.")),(0,s.kt)("p",null,"You can check whether the current service supports InApp Messaging by checking the ",(0,s.kt)("inlineCode",{parentName:"p"},"isSupported")," flag:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (PushNotifications.service.inAppMessaging.isSupported)\n{\n    // Current service supports In-App Messaging\n}\n")),(0,s.kt)("h2",{id:"handle-user-interaction"},"Handle User Interaction"),(0,s.kt)("p",null,"The most important step is listening to the ",(0,s.kt)("inlineCode",{parentName:"p"},"InAppMessagingEvent.SELECTED")," event that is dispatched whenever a user interacts with an In-App Message."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"PushNotifications.service.inAppMessaging.addEventListener( \n    InAppMessagingEvent.SELECTED, \n    selectedHandler \n);\n")),(0,s.kt)("p",null,"This event will contain details about the In-App Message that the user interacted with. We suggest you add this event listener early in your application, immediately after setting up your application."),(0,s.kt)("p",null,"There are two main pieces of data attached to this event:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"action"),": A ",(0,s.kt)("inlineCode",{parentName:"li"},"InAppMessageAction")," instance containing common In-App Message information representing the user's action (eg the button they clicked). In-App Message services generally include a ",(0,s.kt)("inlineCode",{parentName:"li"},"name")," for the action (this can be the text on the button or a name associated with the action) and a ",(0,s.kt)("inlineCode",{parentName:"li"},"url")," as a payload for the action. "),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"data"),": An ",(0,s.kt)("inlineCode",{parentName:"li"},"Object")," instance containing service specific data associated with the message. The content here depends on the service but will contain any additional information that the service provides. For example, with Firebase In-App Messaging this will contain the campaign name, campaign information and message type. ")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'function inappmessaging_selectedHandler( event:InAppMessagingEvent ):void\n{\n    trace( "inappmessage selected" );\n    trace( "    action: " + event.action.name + ":" + event.action.url );\n    trace( "    data: " + event.data == null ? "null" : JSON.stringify(event.data) );\n}\n')),(0,s.kt)("h2",{id:"trigger-in-app-messages-programmatically"},"Trigger in-app messages programmatically"),(0,s.kt)("p",null,"Some services will allow you to trigger events programmatically when certain events occur in your application."),(0,s.kt)("p",null,"You trigger these events in your application by calling the ",(0,s.kt)("inlineCode",{parentName:"p"},"addTrigger()")," method and passing the appropriate event name for your service defined trigger and a ",(0,s.kt)("inlineCode",{parentName:"p"},"value")," string (if applicable)."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'PushNotifications.service.inAppMessaging\n    .addTrigger( "exampleTrigger", "optional value" );\n')),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Note: Services that don't support this process with return ",(0,s.kt)("inlineCode",{parentName:"p"},"false")," "),(0,s.kt)("pre",{parentName:"blockquote"},(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},'var success:Boolean = PushNotifications.service.inAppMessaging.addTrigger( "exampleTrigger" );\nif (!success)\n{ \n   // manual event triggering not supported\n}\n\n'))),(0,s.kt)("h2",{id:"temporarily-disable-in-app-messages"},"Temporarily disable in-app messages"),(0,s.kt)("p",null,"By default, In-App Messaging renders messages whenever a triggering condition is satisfied, regardless of an app's current state. If you'd like to suppress message displays for any reason, for example to avoid interrupting a sequence of payment processing screens, you can do that with the SDK's ",(0,s.kt)("inlineCode",{parentName:"p"},"messageDisplaySuppressed()")," method:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-actionscript"},"PushNotifications.service.inAppMessaging.messageDisplaySuppressed( true );\n")),(0,s.kt)("p",null,"Passing ",(0,s.kt)("inlineCode",{parentName:"p"},"true")," to the method prevents In-App Messaging from displaying messages, while ",(0,s.kt)("inlineCode",{parentName:"p"},"false")," reenables message display. "),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Note: Services that don't support this process with return ",(0,s.kt)("inlineCode",{parentName:"p"},"false")," ")),(0,s.kt)("h2",{id:"enable-opt-out-message-delivery"},"Enable opt-out message delivery"))}g.isMDXComponent=!0}}]);