"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[73288],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return p}});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),d=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return i.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(n),p=a,h=u["".concat(l,".").concat(p)]||u[p]||m[p]||r;return n?i.createElement(h,o(o({ref:t},c),{},{components:n})):i.createElement(h,o({ref:t},c))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var d=2;d<r;d++)o[d]=n[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},49293:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return p},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return m}});var i=n(87462),a=n(63366),r=(n(67294),n(3905)),o=["components"],s={title:"Migrating from Message",sidebar_label:"Migrating from Message"},l=void 0,d={unversionedId:"share/migrating-from-message",id:"share/migrating-from-message",title:"Migrating from Message",description:"From version 5.0, we have added all of the Message ANE functionality to this ANE and will eventually be deprecating the Message ANE in favour of this Share ANE.",source:"@site/docs/share/migrating-from-message.md",sourceDirName:"share",slug:"/share/migrating-from-message",permalink:"/docs/share/migrating-from-message",draft:!1,tags:[],version:"current",frontMatter:{title:"Migrating from Message",sidebar_label:"Migrating from Message"},sidebar:"share",previous:{title:"AppExtension - Share Extension",permalink:"/docs/share/appextension---share-extension"},next:{title:"Migrating to AndroidX",permalink:"/docs/share/migrating-to-androidx"}},c={},m=[{value:"Email functionality",id:"email-functionality",level:2},{value:"SMS Functionality",id:"sms-functionality",level:2},{value:"Share Functionality",id:"share-functionality",level:2},{value:"iOS",id:"ios",level:2},{value:"Android",id:"android",level:2}],u={toc:m};function p(e){var t=e.components,n=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"From version 5.0, we have added all of the Message ANE functionality to this ANE and will eventually be deprecating the Message ANE in favour of this Share ANE."),(0,r.kt)("p",null,"The functionality between the Message and Share ANEs seemed to overlap too much so we decided to reduce overheads involved for developers and combine the two ANEs into the Share ANE."),(0,r.kt)("p",null,"In order to migrate from the Message ANE to the Share ANE you'll need to update the email and sms functionality separately. This guide is assuming you will be removing the Message ANE, in favour of the functionality in the Share ANE. "),(0,r.kt)("p",null,"Firstly, remove the Message ANE from your build."),(0,r.kt)("h2",{id:"email-functionality"},"Email functionality"),(0,r.kt)("p",null,"Email functionality in the Share ANE is accessed through the ",(0,r.kt)("inlineCode",{parentName:"p"},"Share.service.email")," accessor, so:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Message.isMailSupported)\n{\n    Message.service.sendMail( ... );\n}\n")),(0,r.kt)("p",null,"becomes:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Share.service.email.isMailSupported)\n{\n    Share.service.email.sendMail( ... );\n}\n")),(0,r.kt)("p",null,"Similarly for ",(0,r.kt)("inlineCode",{parentName:"p"},"sendMailWithOptions()"),"."),(0,r.kt)("p",null,"Some refactoring has also been done on the associated classes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Attachments: ",(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.message.MessageAttachment")," -> ",(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.share.email.Attachment")),(0,r.kt)("li",{parentName:"ul"},"Events: ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.message.events.MessageEvent")," -> ",(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.share.events.EmailEvent"))))),(0,r.kt)("h2",{id:"sms-functionality"},"SMS Functionality"),(0,r.kt)("p",null,"SMS functionality in the Share ANE is accessed through the ",(0,r.kt)("inlineCode",{parentName:"p"},"Share.service.sms")," accessor, so:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Message.service.smsManager.isSMSSupported)\n{\n    Message.service.smsManager.sendSMS( ... );\n}\n")),(0,r.kt)("p",null,"becomes:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Share.service.sms.isSMSSupported)\n{\n    Share.service.sms.sendSMS( ... );\n}\n")),(0,r.kt)("p",null,"Similarly for ",(0,r.kt)("inlineCode",{parentName:"p"},"sendSMSWithUI()"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"getSubscriptions()"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"authorisationStatus()"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"requestAuthorisation()"),"."),(0,r.kt)("p",null,"Some refactoring has also been done on the associated classes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"SMS Object: ",(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.message.objects.SMS")," -> ",(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.share.sms.SMS")),(0,r.kt)("li",{parentName:"ul"},"Events: ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.message.events.MessageSMSEvent")," -> ",(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.share.events.SMSEvent")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.message.events.AuthorisationEvent")," -> ",(0,r.kt)("inlineCode",{parentName:"li"},"com.distriqt.extension.share.events.AuthorisationEvent"))))),(0,r.kt)("h2",{id:"share-functionality"},"Share Functionality"),(0,r.kt)("p",null,"The share functionality from the Message ANE has been removed completely as it already existed in the Share ANE."),(0,r.kt)("h2",{id:"ios"},"iOS"),(0,r.kt)("p",null,"No changes to the info additions are required."),(0,r.kt)("h2",{id:"android"},"Android"),(0,r.kt)("p",null,"Remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"MessageFileProvider")," (the ",(0,r.kt)("inlineCode",{parentName:"p"},"ShareFileProvider")," will be used instead now):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<provider\n    android:name="com.distriqt.extension.message.content.MessageFileProvider"\n    android:authorities="APPLICATION_ID.messagefileprovider"\n    android:grantUriPermissions="true"\n    android:exported="false">\n    <meta-data\n        android:name="android.support.FILE_PROVIDER_PATHS"\n        android:resource="@xml/distriqt_message_paths" />\n</provider>\n')),(0,r.kt)("p",null,"Change the package name of the ",(0,r.kt)("inlineCode",{parentName:"p"},"AuthorisationActivity")," as below (",(0,r.kt)("inlineCode",{parentName:"p"},"message")," > ",(0,r.kt)("inlineCode",{parentName:"p"},"share"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<activity android:name="com.distriqt.extension.share.permissions.AuthorisationActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar" />\n')),(0,r.kt)("p",null,"If you are using SMS receiver functionality, remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"MessageSMSReceiver")," and add the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<receiver android:name="com.distriqt.extension.share.receivers.SMSReceiver" android:exported="true" > \n    <intent-filter android:priority="1000"> \n        <action android:name="android.provider.Telephony.SMS_RECEIVED" />\n    </intent-filter> \n</receiver>\n')))}p.isMDXComponent=!0}}]);