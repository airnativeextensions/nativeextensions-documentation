"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[27787],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(h,o(o({ref:t},s),{},{components:a})):n.createElement(h,o({ref:t},s))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[d]="string"==typeof e?e:r,o[1]=p;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},50102:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const i={title:"Create a Map",sidebar_label:"Create a Map"},o=void 0,p={unversionedId:"nativemaps/create-a-map",id:"nativemaps/create-a-map",title:"Create a Map",description:"Preparing the view on Android",source:"@site/docs/nativemaps/create-a-map.md",sourceDirName:"nativemaps",slug:"/nativemaps/create-a-map",permalink:"/docs/nativemaps/create-a-map",draft:!1,tags:[],version:"current",frontMatter:{title:"Create a Map",sidebar_label:"Create a Map"},sidebar:"nativemaps",previous:{title:"Request Authorisation",permalink:"/docs/nativemaps/request-authorisation"},next:{title:"Controlling the View",permalink:"/docs/nativemaps/controlling-the-view"}},l={},c=[{value:"Preparing the view on Android",id:"preparing-the-view-on-android",level:2},{value:"Create the Map",id:"create-the-map",level:2},{value:"Set the map centre",id:"set-the-map-centre",level:3},{value:"Timing",id:"timing",level:3}],s={toc:c},d="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"preparing-the-view-on-android"},"Preparing the view on Android"),(0,r.kt)("p",null,"Due to the way AIR applications are rendered on Android, the native map view layer can behave strangely with regard to z-ordering."),(0,r.kt)("p",null,"To work around this issue, the extension has a method called ",(0,r.kt)("inlineCode",{parentName:"p"},"prepareViewOrder")," which will modify\nthe application's view in order to allow the map layer to be rendered consistently. "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This method must be called before you create a map.")),(0,r.kt)("p",null,"Using this method will cause a short flash of a black screen while the view order is modified. Unfortunately there is no way to avoid this currently. However, since you can do this at any time after your application has started (once the main class is added to the stage), you can choose an appropriate time in your application's life cycle, before you create a map, where it will be least noticeable by the user."),(0,r.kt)("p",null,"If you do not call this method before creating a map, it will be called automatically."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (NativeMaps.isSupported)\n{\n    NativeMaps.service.prepareViewOrder();\n}\n")),(0,r.kt)("h2",{id:"create-the-map"},"Create the Map"),(0,r.kt)("p",null,"Creating a map is a simple process of calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"createMap")," function, passing the required viewport (width, height, x and y) and the map type."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"var viewport:Rectangle = new Rectangle( 0, 0, 500, 800 );\nNativeMaps.service.createMap( viewport, MapType.MAP_TYPE_HYBRID );\n")),(0,r.kt)("p",null,"There are also some events around the creation of a map that allow you to be notified when the map is created and ready to be used."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},'var viewport:Rectangle = new Rectangle( 0, 0, 500, 800 );\n\nNativeMaps.service.addEventListener( NativeMapEvent.MAP_CREATED, mapCreatedHandler );\n\nvar success:Boolean = NativeMaps.service.createMap( viewport, MapType.MAP_TYPE_HYBRID );\nif (success)\n{\n    trace( "Map creation started successfully" );\n}\nelse \n{\n    trace( "Map creation failed - most likely a map has already been created" );\n}\n\n...\n\nprivate function mapCreatedHandler( event:NativeMapEvent ):void\n{\n    trace( "Map created" );\n}\n')),(0,r.kt)("h3",{id:"set-the-map-centre"},"Set the map centre"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"createMap")," function also takes some additional parameters to set the initial location\nand zoom of the map"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-actionscript"},"var viewport:Rectangle = new Rectangle( 0, 0, 500, 800 );\nvar centre:LatLng = new LatLng( -27.0, 155 );\nvar zoom:Number = 3;\n\nNativeMaps.service.createMap( viewport, MapType.MAP_TYPE_HYBRID, centre, zoom );\n")),(0,r.kt)("h3",{id:"timing"},"Timing"),(0,r.kt)("p",null,"Some crashes or problems can be caused by trying to initialise and create a map too quickly when your app starts up.\nFor example, a lot of developers add all their code to init, create and set up a map in the addedToStage handler of the main class."),(0,r.kt)("p",null,"This can be problematic, because the extension needs to perform some view reordering and modification to fix the z-indexing problem. We strongly suggest:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Wait a short time after your app starts to work with the map objects, a preloader or something similar is enough;"),(0,r.kt)("li",{parentName:"ul"},"Ensure the ",(0,r.kt)("inlineCode",{parentName:"li"},"NativeMapEvent.MAP_CREATED")," event has been received before attempting to perform other actions on your map.")))}u.isMDXComponent=!0}}]);