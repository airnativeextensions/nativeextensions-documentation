"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[73101],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),c=s(n),m=i,f=c["".concat(p,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(f,l(l({ref:t},u),{},{components:n})):a.createElement(f,l({ref:t},u))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,l=new Array(o);l[0]=m;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[c]="string"==typeof e?e:i,l[1]=r;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},81100:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>s});var a=n(87462),i=(n(67294),n(3905));const o={title:"FCM-GCM Payload",sidebar_label:"FCM-GCM Payload"},l=void 0,r={unversionedId:"pushnotifications/firebase/fcm-gcm-payload",id:"pushnotifications/firebase/fcm-gcm-payload",title:"FCM-GCM Payload",description:"As Android notifications have many more features there are more fields available in",source:"@site/docs/pushnotifications/firebase/fcm-gcm-payload.md",sourceDirName:"pushnotifications/firebase",slug:"/pushnotifications/firebase/fcm-gcm-payload",permalink:"/docs/pushnotifications/firebase/fcm-gcm-payload",draft:!1,tags:[],version:"current",frontMatter:{title:"FCM-GCM Payload",sidebar_label:"FCM-GCM Payload"},sidebar:"pushnotifications",previous:{title:"iOS APNS Payload",permalink:"/docs/pushnotifications/apple/ios-apns-payload"},next:{title:"Windows WNS Payload",permalink:"/docs/pushnotifications/windows/windows-wns-payload"}},p={},s=[{value:"Background Image",id:"background-image",level:3},{value:"Example",id:"example",level:4}],u={toc:s},c="wrapper";function d(e){let{components:t,...o}=e;return(0,i.kt)(c,(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"As Android notifications have many more features there are more fields available in\nthe payload of the notification."),(0,i.kt)("p",null,"The GCM and FCM payload is made up of several root fields including:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"data")," : Custom user data object, (this is where all our fields will be placed)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"notification")," : Default notifications (this should only be used for very simple notifications, see the platform docs for more)")),(0,i.kt)("p",null,"The default ",(0,i.kt)("inlineCode",{parentName:"p"},"notification")," field is implemented by the google play services internals\nand only displays a very simple notification (alert/title/body) and doesn't use our\nnotifications implementation. "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"This notification can only be processed when the application is in the foreground.")," "),(0,i.kt)("p",null,"This notification is the notification sent from the FCM console."),(0,i.kt)("p",null,"Our notifications implementation uses the ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," field, within which you can either\nuse a flat object or place our custom notification object within it.\nAll our payloads in the documentation where meant to be placed in this part of the payload"),(0,i.kt)("p",null,"Similar to APNS, the simplest notification is an alert."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "notification" : {\n            "alert" : "You have a notification",\n            "title" : "You have a notification",\n            "body"  : "The body of the notification",\n            "sound" : "default"\n        }\n    }\n}\n')),(0,i.kt)("p",null,"Additional fields include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"icon"),": An Android resource name included in a custom resources extension")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"alert"),": The alert text displayed in ticker locations")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"title"),": The title text for the notification")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"body"),": The body text for the notification")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"sound"),": A custom sound path to use for the notification or ",(0,i.kt)("inlineCode",{parentName:"p"},"'default'")," to use the default notification sound. This can be a path to an asset or a mp3 resource name.  ",(0,i.kt)("em",{parentName:"p"},"Note: Sounds on individual notifications were deprecated in Android O (API 26). You now have to set them on a ",(0,i.kt)("a",{parentName:"em",href:"../setup-your-service#channels"},"channel"),". This will be ignored on API v26+."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"vibrate"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"largeIcon"),": The path to a packaged image asset or a url to a public image")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"priority"),": This should be one of the priority values from ",(0,i.kt)("inlineCode",{parentName:"p"},"-2")," (low) to ",(0,i.kt)("inlineCode",{parentName:"p"},"2")," (max). The default is ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),". ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"badge"),": If the device supports custom badge count icons this value will be used to set the badge count.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"colour"),": The colour to apply to the notification (generally affects icon and title text colour). Should be of the form ",(0,i.kt)("inlineCode",{parentName:"p"},"#RRGGBB")," ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"channel"),": From Android 8.0 you need to specify a channel for a notification. This is the channel id. If you omit this field the notification will be assigned to your first notification channel.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"backgroundImage")," : either a path to a local asset packaged with your application or a url to a public image")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"backgroundImageTextColour")," : use to specify the text colour when a background image is specified. Colour supported formats are:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'"#RRGGBB"')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'"#AARRGGBB"')))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"style"),": An object specifying the expanded view details:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"type"),": The type of the expanded view, either text, inbox or image"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"text"),": The summary text for inbox and image types or the large text for the text type"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"lines"),": For the inbox type, this array contains the individual lines to display"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"image"),": For the image type, this specifies the url of the image"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"groupIcon"),": An Android resource name to use as the icon for the group")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"groupKey"),": Notifications with the same group key are grouped together")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"groupTitle"),": The title for the group notification (you can use %d to insert the number of ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"groupSummary"),": Summary text for the group notification")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"category"),": The action category, indicates the actions to display along with this notification "))),(0,i.kt)("p",null,"The following shows a complete json payload utilising all the features:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data" : {\n        "notification" : {\n            "icon"   : "ic_stat_distriqt_default",\n            "alert"  : "You have a notification",\n            "title"  : "You have a notification",\n            "body"   : "The body of the notification",\n            "sound"  : "default",\n            "vibrate": "true",\n            "largeIcon": "assets/notifications/icons/largeIcon.png",\n            "priority": "0",\n            "badge": 2,\n            "colour": "#FF0000",\n\n            "channel" : "channel_id",\n\n            "backgroundImage" : "assets/notifications/background.png",\n            "backgroundImageTextColour" : "#FFFFFF",\n\n            "style": {\n                "type": "text", \n                "text": "Some longer and larger content that will be used for a text style big view.\\n\\nThe body content will be shown in the normal view, but this content will be shown in the expanded view. ",\n                "lines": [\n                    "Inbox message line 1",\n                    "Inbox message line 2"\n                ],\n                "image":"http://example.com/path/to/image.png"\n            },\n            \n            "groupIcon": "ic_stat_distriqt_default",\n            "groupKey" : "groupKey",\n            "groupTitle": "You have %d notifications",\n            "groupSummary": "Message displayed at bottom of notifications",\n            \n            "category": "INVITE_CATEGORY"\n        },\n        \n        "user_custom": "some-custom-value"\n    }\n}\n')),(0,i.kt)("h3",{id:"background-image"},"Background Image"),(0,i.kt)("p",null,"On Android v5.0 + you can use an image as the background of the notification."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(63149).Z,width:"370",height:"57"})),(0,i.kt)("p",null,"As part of your payload add the ",(0,i.kt)("inlineCode",{parentName:"p"},"backgroundImage")," field which is either a path to a local asset packaged with your application or a url to a public image. URL's are discouraged due to the network access and download required."),(0,i.kt)("p",null,"In order to cover all notification sizes this image should be sized ",(0,i.kt)("inlineCode",{parentName:"p"},"2600x256")," (91.4:9) and this will be aligned top left."),(0,i.kt)("p",null,"You can also add the ",(0,i.kt)("inlineCode",{parentName:"p"},"backgroundImageTextColour")," field which you can use to specify the text colour. This allows you to match the colour of the text to your image. "),(0,i.kt)("p",null,"Colour supported formats are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'"#RRGGBB"'),(0,i.kt)("li",{parentName:"ul"},'"#AARRGGBB"')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: Setting the background image of a notification will remove the notification icon and large icon. If you need to display these you should add them to your image.")),(0,i.kt)("p",null,"The following names are also accepted: red, blue, green, black, white, gray, cyan, magenta, yellow, lightgray, darkgray, grey, lightgrey, darkgrey, aqua, fuchsia, lime, maroon, navy, olive, purple, silver, and teal."),(0,i.kt)("h4",{id:"example"},"Example"),(0,i.kt)("p",null,"The following example uses an asset as the background packaged with the application located at ",(0,i.kt)("inlineCode",{parentName:"p"},"'assets/notifications/background.png'"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "data": {\n        "notification" : {\n            "alert" : "You have a notification",\n            "title" : "You have a notification",\n            "body"  : "The body of the notification",\n            "sound" : "default",\n            "backgroundImage" : "assets/notifications/background.png",\n            "backgroundImageTextColour" : "#FFFFFF"\n        }\n    }\n}\n')))}d.isMDXComponent=!0},63149:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/android-backgroundimage-bdfb3f4e8747ebcd2385038400e5634a.png"}}]);