"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[22801],{9663:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"application/auto-start","title":"Auto Start","description":"This is an Android only feature.","source":"@site/docs/application/auto-start.md","sourceDirName":"application","slug":"/application/auto-start","permalink":"/docs/application/auto-start","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Auto Start","sidebar_label":"Auto Start"},"sidebar":"application","previous":{"title":"Alarm Manager","permalink":"/docs/application/alarm-manager"},"next":{"title":"Application State Events","permalink":"/docs/application/application-state-events"}}');var a=n(74848),s=n(28453);const o={title:"Auto Start",sidebar_label:"Auto Start"},r=void 0,c={},d=[{value:"Auto Start",id:"auto-start",level:2},{value:"State",id:"state",level:3},{value:"Was Auto Started",id:"was-auto-started",level:3},{value:"Manifest Additions",id:"manifest-additions",level:3},{value:"Android 30",id:"android-30",level:3}];function l(e){const t={admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"This is an Android only feature."})}),"\n",(0,a.jsx)(t.h2,{id:"auto-start",children:"Auto Start"}),"\n",(0,a.jsx)(t.p,{children:"This process allows your application to automatically start when the device is booted or turned on."}),"\n",(0,a.jsxs)(t.p,{children:["You must run your application at least once before automatic starting can be initialised. You enable\nit by calling the ",(0,a.jsx)(t.code,{children:"setAutoStart"})," function as below:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"Application.service.setAutoStart( true );\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If you wish to disable auto start at a later point you can pass ",(0,a.jsx)(t.code,{children:"false"})," to this same function:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"Application.service.setAutoStart( false );\n"})}),"\n",(0,a.jsx)(t.h3,{id:"state",children:"State"}),"\n",(0,a.jsxs)(t.p,{children:["You can check if auto start is enabled by checking the ",(0,a.jsx)(t.code,{children:"isAutoStartEnabled()"})," flag."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"if (Application.service.isAutoStartEnabled())\n{\n\t//\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"was-auto-started",children:"Was Auto Started"}),"\n",(0,a.jsxs)(t.p,{children:["You can check if your application was launched using the auto start mechanism using the ",(0,a.jsx)(t.code,{children:"wasAutoStarted()"})," flag."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"if (Application.service.wasAutoStarted())\n{\n\t// This launch was from an auto start\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"manifest-additions",children:"Manifest Additions"}),"\n",(0,a.jsx)(t.p,{children:"You must make sure you have added the following receiver and permission to your application descriptors\nmanifest additions."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />\n\x3c!-- Required for Android 30 --\x3e\n<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>\n\n<application>\n\t<receiver android:enabled="true" android:name="com.distriqt.extension.application.receivers.ApplicationStartupReceiver" android:permission="android.permission.RECEIVE_BOOT_COMPLETED">\n\t\t<intent-filter>\n\t\t\t<action android:name="android.intent.action.BOOT_COMPLETED" />\n\t\t\t<action android:name="android.intent.action.QUICKBOOT_POWERON" />\n\t\t\t<action android:name="com.htc.intent.action.QUICKBOOT_POWERON" />\n\t\t\t<category android:name="android.intent.category.DEFAULT" />\n\t\t</intent-filter>\n\t</receiver>\n</application>\n'})}),"\n",(0,a.jsx)(t.h3,{id:"android-30",children:"Android 30"}),"\n",(0,a.jsx)(t.p,{children:"With Android 30, the approach that was used in previous versions of Android to auto-launch your application has been removed meaning that we can no longer directly launch your application on boot."}),"\n",(0,a.jsx)(t.p,{children:'The new approach requires a system permission from the user to "Display over other apps". With this permission we can still launch your application on launch using an updated approach.'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(60425).A+"",width:"400",height:"822"})}),"\n",(0,a.jsxs)(t.p,{children:["To check if the user has granted this permission you can call the ",(0,a.jsx)(t.code,{children:"hasAutoStartPermission()"})," method:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"var hasPermission:Boolean = Application.service.hasAutoStartPermission();\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If the user hasn't granted it you can open the system settings via the ",(0,a.jsx)(t.code,{children:"requestAutoStartPermission()"})," method:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"if (!Application.service.hasAutoStartPermission())\n{\n\tApplication.service.requestAutoStartPermission();\n}\n"})}),"\n",(0,a.jsx)(t.p,{children:"Unfortunately there is no feedback from this process but you should be able to use the application state events to handle an activation of your application after calling this."}),"\n",(0,a.jsx)(t.p,{children:"Once you have this permission, then auto start will work as above."}),"\n",(0,a.jsxs)(t.admonition,{type:"note",children:[(0,a.jsx)(t.p,{children:"Some Android TV devices don't support this permission request. We have added an additional function to check if the auto start permission request is available:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-actionscript",children:"if (Application.service.canRequestAutoStartPermission())\n{\n\tApplication.service.requestAutoStartPermission();\n}\n"})}),(0,a.jsxs)(t.p,{children:["Also the ",(0,a.jsx)(t.code,{children:"requestAutoStartPermission()"})," method will return false if the permission request isn't supported or not required"]})]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(96540);const a={},s=i.createContext(a);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:t},e.children)}},60425:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/android_autostart_permission-e601fe31ee5bb47c3ae198465519c5c8.png"}}]);