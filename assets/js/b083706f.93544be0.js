"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[81599],{22230:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"pushnotifications/apple/ios-apns-message","title":"iOS APNS Message","description":"There are many ways to send notifications to your devices.","source":"@site/docs/pushnotifications/apple/ios-apns-message.md","sourceDirName":"pushnotifications/apple","slug":"/pushnotifications/apple/ios-apns-message","permalink":"/docs/pushnotifications/apple/ios-apns-message","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"iOS APNS Message","sidebar_label":"iOS APNS Message"},"sidebar":"pushnotifications","previous":{"title":"Pushy Payload","permalink":"/docs/pushnotifications/pushy/pushy-payload"},"next":{"title":"Firebase Cloud Message","permalink":"/docs/pushnotifications/firebase/firebase-cloud-message"}}');var o=s(74848),a=s(28453);const i={title:"iOS APNS Message",sidebar_label:"iOS APNS Message"},r=void 0,c={},p=[{value:"PHP Example",id:"php-example",level:3}];function l(e){const n={code:"code",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"There are many ways to send notifications to your devices."}),"\n",(0,o.jsx)(n.p,{children:"The basic procedure is once your application has sent the device token (registration id) to your server,\nyour server will send a message to the appropriate service (APNS/GCM) which will deliver the notification\nto the registered device."}),"\n",(0,o.jsx)(n.h3,{id:"php-example",children:"PHP Example"}),"\n",(0,o.jsx)(n.p,{children:"The following is a very basic PHP example, sending a message to a single device."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"<?php\n// Put your device token here (without spaces):\n$deviceToken = 'DEVICE_TOKEN';\n\n// Put your private key's passphrase here:\n$passphrase = 'passphrase';\n$pemfilename = 'ck.pem';\n\n// SIMPLE PUSH \n$body['aps'] = array(\n\t'alert' => array(\n\t\t'title' => \"You have a notification\",\n\t\t'body' => \"Body of the message\",\n\t),\n\t'badge' => 1,\n\t'sound' => 'default',\n\t); // Create the payload body\n\n////////////////////////////////////////////////////////////////////////////////\n\n$ctx = stream_context_create();\nstream_context_set_option($ctx, 'ssl', 'local_cert', $pemfilename);\nstream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);\n\n$fp = stream_socket_client(\n\t'ssl://gateway.sandbox.push.apple.com:2195', $err,\n\t$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx); // Open a connection to the APNS server\nif (!$fp)\n\texit(\"Failed to connect: $err $errstr\" . PHP_EOL);\necho 'Connected to APNS' . PHP_EOL;\n$payload = json_encode($body); // Encode the payload as JSON\n$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload; // Build the binary notification\n$result = fwrite($fp, $msg, strlen($msg)); // Send it to the server\nif (!$result)\n\techo 'Message not delivered' . PHP_EOL;\nelse\n\techo 'Message successfully delivered' . PHP_EOL;\nfclose($fp); // Close the connection to the server\n"})}),"\n",(0,o.jsx)(n.p,{children:"You run these scripts using php:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"php script.php\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>r});var t=s(96540);const o={},a=t.createContext(o);function i(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);