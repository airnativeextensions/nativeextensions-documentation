(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{779:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var a=n(0),r=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,o=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(n),d=a,h=u["".concat(o,".").concat(d)]||u[d]||b[d]||c;return n?r.a.createElement(h,i(i({ref:t},s),{},{components:n})):r.a.createElement(h,i({ref:t},s))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,o=new Array(c);o[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var s=2;s<c;s++)o[s]=n[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},83:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(6),c=(n(0),n(779)),o={title:"Graph API - Batch",sidebar_label:"Graph API - Batch"},i={unversionedId:"facebookapi/graph-api---batch",id:"facebookapi/graph-api---batch",isDocsHomePage:!1,title:"Graph API - Batch",description:"Graph API Batch",source:"@site/docs/facebookapi/graph-api---batch.md",slug:"/facebookapi/graph-api---batch",permalink:"/docs/facebookapi/graph-api---batch",version:"current",sidebar_label:"Graph API - Batch",sidebar:"facebookapi",previous:{title:"Graph API - Basics",permalink:"/docs/facebookapi/graph-api---basics"},next:{title:"Graph API - Examples",permalink:"/docs/facebookapi/graph-api---examples"}},l=[{value:"Graph API Batch",id:"graph-api-batch",children:[{value:"Events",id:"events",children:[]}]},{value:"Callbacks",id:"callbacks",children:[]}],s={rightToc:l};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"graph-api-batch"},"Graph API Batch"),Object(c.b)("p",null,"If you have several requests you wish to batch together you can use the ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatchBuilder")," to create a batch request."),Object(c.b)("p",null,"To create a batch, firstly create your ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequest")," instances as normal:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-actionscript"}),'var request1:GraphAPIRequest = new GraphAPIRequestBuilder()\n        .setPath(\'/me\')\n        .setMethod(\'GET\')\n        .addFields(["first_name","gender","picture.width(160).height(160)" ])\n        .build();\n\nvar request2:GraphAPIRequest = new GraphAPIRequestBuilder()\n        .setPath(\'/me/friends\')\n        .setMethod(\'GET\')\n        .addParameter("limit", 200 )\n        .addFields(["id","first_name","installed","picture.width(160).height(160)" ])\n        .build();\n')),Object(c.b)("p",null,"Then construct the ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatch")," using a ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatchBuilder"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-actionscript"}),"var batch:GraphAPIRequestBatch = new GraphAPIRequestBatchBuilder()\n    .addRequest( request1 )\n    .addRequest( request2 )\n    .build();\n")),Object(c.b)("p",null,"Then call ",Object(c.b)("inlineCode",{parentName:"p"},"makeBatchRequest()")," with your ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatch")," instance:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-actionscript"}),"FacebookAPI.service.graphAPI.makeBatchRequest( batch );\n")),Object(c.b)("h3",{id:"events"},"Events"),Object(c.b)("p",null,"You can add event listeners to the request objects to process the return data from each individual request, as you would for a single request:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-actionscript"}),"request1.addEventListener( GraphAPIRequestEvent.COMPLETE, request1_completeHandler );\nrequest1.addEventListener( GraphAPIRequestEvent.ERROR, request1_errorHandler );\nrequest2.addEventListener( GraphAPIRequestEvent.COMPLETE, request2_completeHandler );\nrequest2.addEventListener( GraphAPIRequestEvent.ERROR, request2_errorHandler );\n\nfunction request1_completeHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.data will contain the Facebook response\n}\n\nfunction request1_errorHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.errorCode and event.errorMessage will contain details on the error\n}\n\nfunction request2_completeHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.data will contain the Facebook response\n}\n\nfunction request2_errorHandler( event:GraphAPIRequestEvent ):void \n{\n    // event.errorCode and event.errorMessage will contain details on the error\n}\n")),Object(c.b)("p",null,"Additionally you can listen for a ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestEvent.BATCH_COMPLETE")," event to be notified when all the requests have been completed."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-actionscript"}),'batch.addEventListener( GraphAPIRequestEvent.BATCH_COMPLETE, batch_completeHandler );\n                \nfunction batch_completeHandler( event:GraphAPIRequestEvent ):void\n{\n    trace( "batch complete" );\n}\n')),Object(c.b)("p",null,"You should make sure to add these listeners before the call to ",Object(c.b)("inlineCode",{parentName:"p"},"makeBatchRequest()"),"."),Object(c.b)("h2",{id:"callbacks"},"Callbacks"),Object(c.b)("p",null,"As an alternative to events, you can add callbacks to the requests as you do with a normal ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequest"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-actionscript"}),'var request1:GraphAPIRequest = new GraphAPIRequestBuilder()\n    .setPath( "/me" )\n    .setCompleteCallback(\n            function( data:Object ):void \n            {\n                log( "request complete: " + JSON.stringify(data) );\n            }\n    )\n    .setErrorCallback(\n            function( code:int, message:String ):void \n            {\n                log( "request error: " + code + "::"+ message );\n            }\n    )\n    .build();\n')),Object(c.b)("p",null,"Additionally you can add a completion callback to the ",Object(c.b)("inlineCode",{parentName:"p"},"GraphAPIRequestBatch")," object:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-actionscript"}),'var batch:GraphAPIRequestBatch = new GraphAPIRequestBatchBuilder()\n    .addRequest( request1 )\n    .addRequest( request2 )\n    .addRequest( request3 )\n    .setCompleteCallback(\n            function():void\n            {\n                log( "batch complete" );\n            }\n    )\n    .build();\n')))}p.isMDXComponent=!0}}]);