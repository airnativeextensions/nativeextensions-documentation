"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[2447],{3905:function(e,n,a){a.d(n,{Zo:function(){return p},kt:function(){return m}});var t=a(67294);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function l(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function r(e,n){if(null==e)return{};var a,t,o=function(e,n){if(null==e)return{};var a,t,o={},l=Object.keys(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||(o[a]=e[a]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)a=l[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var d=t.createContext({}),s=function(e){var n=t.useContext(d),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},p=function(e){var n=s(e.components);return t.createElement(d.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,o=e.mdxType,l=e.originalType,d=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),u=s(a),m=o,h=u["".concat(d,".").concat(m)]||u[m]||c[m]||l;return a?t.createElement(h,i(i({ref:n},p),{},{components:a})):t.createElement(h,i({ref:n},p))}));function m(e,n){var a=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=a.length,i=new Array(l);i[0]=u;var r={};for(var d in n)hasOwnProperty.call(n,d)&&(r[d]=n[d]);r.originalType=e,r.mdxType="string"==typeof e?e:o,i[1]=r;for(var s=2;s<l;s++)i[s]=a[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},72468:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return r},contentTitle:function(){return d},metadata:function(){return s},toc:function(){return p},default:function(){return u}});var t=a(87462),o=a(63366),l=(a(67294),a(3905)),i=["components"],r={title:"Sound Pool",sidebar_label:"Sound Pool"},d=void 0,s={unversionedId:"mediaplayer/sound-pool",id:"mediaplayer/sound-pool",title:"Sound Pool",description:"A SoundPool is a collection of samples that can be loaded into memory. It allows you to play short sound effects and samples. The sounds are loaded into memory for low-latency playback.",source:"@site/docs/mediaplayer/sound-pool.md",sourceDirName:"mediaplayer",slug:"/mediaplayer/sound-pool",permalink:"/docs/mediaplayer/sound-pool",tags:[],version:"current",frontMatter:{title:"Sound Pool",sidebar_label:"Sound Pool"},sidebar:"mediaplayer",previous:{title:"Background Audio",permalink:"/docs/mediaplayer/audio-player---background-audio"},next:{title:"Remote Command Center",permalink:"/docs/mediaplayer/remote-command-center"}},p=[{value:"Creating Sounds",id:"creating-sounds",children:[],level:2},{value:"Loading",id:"loading",children:[],level:2},{value:"Playback",id:"playback",children:[],level:2},{value:"Unloading",id:"unloading",children:[],level:2},{value:"Fallback",id:"fallback",children:[],level:2},{value:"Migrating from <code>flash.media.Sound</code>",id:"migrating-from-flashmediasound",children:[{value:"Loading",id:"loading-1",children:[],level:3},{value:"Playback",id:"playback-1",children:[],level:3},{value:"Stopping",id:"stopping",children:[],level:3}],level:2}],c={toc:p};function u(e){var n=e.components,a=(0,o.Z)(e,i);return(0,l.kt)("wrapper",(0,t.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"A SoundPool is a collection of samples that can be loaded into memory. It allows you to play short sound effects and samples. The sounds are loaded into memory for low-latency playback."),(0,l.kt)("p",null,"This is well suited to short sound effects and playback where trigger time is important.\nIf you want to playback longer sounds and music look at the ",(0,l.kt)("a",{parentName:"p",href:"/docs/mediaplayer/audio-player"},"AudioPlayer")," class for a more complete audio playback solution."),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Sound Size")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Soundpool sounds are expected to be short as they are predecoded into memory. Each decoded sound is internally limited to one megabyte storage, which represents approximately 5.6 seconds at 44.1kHz stereo (the duration is proportionally longer at lower sample rates or a channel mask of mono)."),(0,l.kt)("p",{parentName:"div"},"Sounds played through the sound pool may not complete if they are too long. "))),(0,l.kt)("h2",{id:"creating-sounds"},"Creating Sounds"),(0,l.kt)("p",null,"When dealing with the sound pool you will use the ",(0,l.kt)("inlineCode",{parentName:"p"},"SoundPool")," functionality to create instances of a ",(0,l.kt)("inlineCode",{parentName:"p"},"Sound")," and use this to load and play sounds."),(0,l.kt)("p",null,"To create a ",(0,l.kt)("inlineCode",{parentName:"p"},"Sound")," call ",(0,l.kt)("inlineCode",{parentName:"p"},"createSound()"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"var sound:Sound = MediaPlayer.service.soundPool.createSound();\n")),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"This is the ",(0,l.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.mediaplayer.sound.Sound")," class and not ",(0,l.kt)("inlineCode",{parentName:"p"},"flash.media.Sound"),".\nWe have used the same name to be able to quickly replace sounds in your application with the native equivalent."))),(0,l.kt)("h2",{id:"loading"},"Loading"),(0,l.kt)("p",null,"To load a sound you call the ",(0,l.kt)("inlineCode",{parentName:"p"},"loadFile")," function and pass a reference to a file on the device."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},'var soundFile:File = File.applicationDirectory.resolvePath("assets/explosion.mp3");\n\nsound.loadFile( soundFile );\n')),(0,l.kt)("p",null,"Loading a file will dispatch one of two events:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Event.COMPLETE"),": If the load was completed successfully and the sound is now available in memory for playback;"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"IOErrorEvent.IO_ERROR"),": If the load failed either due to format or other issues with the file.")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"loadFile")," call may also throw an ",(0,l.kt)("inlineCode",{parentName:"p"},"Error")," if the file doesn't exist."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},'var soundFile:File = File.applicationDirectory.resolvePath("assets/explosion.mp3");\n\nsound.addEventListener( Event.COMPLETE, sound_completeHandler );\nsound.addEventListener( IOErrorEvent.IO_ERROR, sound_errorHandler );\nsound.loadFile( soundFile );\n\nfunction sound_completeHandler( event:Event ):void \n{\n    // Sound is loaded and ready for playback\n}\n\nfunction sound_errorHandler( event:IOErrorEvent ):void \n{\n    // An error occurred\n}\n')),(0,l.kt)("h2",{id:"playback"},"Playback"),(0,l.kt)("p",null,"Once a sound is loaded you can call ",(0,l.kt)("inlineCode",{parentName:"p"},"play()")," to play the sound. This will return a ",(0,l.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.mediaplayer.sound.SoundChannel")," instance that you can use to stop and get completion events for the playback:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"var channel:SoundChannel = sound.play();\n")),(0,l.kt)("p",null,"To stop playback call ",(0,l.kt)("inlineCode",{parentName:"p"},"stop()")," on the channel:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"channel.stop();\n")),(0,l.kt)("p",null,"A ",(0,l.kt)("inlineCode",{parentName:"p"},"Event.SOUND_COMPLETE")," event will be dispatched from a ",(0,l.kt)("inlineCode",{parentName:"p"},"SoundChannel")," when the sound completes playback. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"channel.addEventListener( Event.SOUND_COMPLETE, channel_completeHandler );\n\nfunction channel_completeHandler( event:Event ):void\n{\n    // Sound channel completed playback\n    event.currentTarget.removeEventListener( event.type, channel_completeHandler );\n}\n")),(0,l.kt)("p",null,"(Note: this event is not super precise but should be adequate for the majority of use cases)."),(0,l.kt)("h2",{id:"unloading"},"Unloading"),(0,l.kt)("p",null,"Once you have finished with a sound and never plan to use it again or if you wish to clear memory resources associated with a sound you can call ",(0,l.kt)("inlineCode",{parentName:"p"},"unload()"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"sound.unload();\n")),(0,l.kt)("p",null,"Once a sound has been unloaded the ",(0,l.kt)("inlineCode",{parentName:"p"},"Sound")," instance is no longer valid. You will need to create a new sound and load a file again."),(0,l.kt)("h2",{id:"fallback"},"Fallback"),(0,l.kt)("p",null,"If the device doesn't support native sound pool implementation a fallback implementation will be used which uses the ",(0,l.kt)("inlineCode",{parentName:"p"},"flash.media.Sound")," implementation to playback sounds."),(0,l.kt)("p",null,"You can check what implementation will be used by checking the ",(0,l.kt)("inlineCode",{parentName:"p"},"isSupportedNatively")," flag on the sound pool. If this is ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," then the native implementation will be used and if it is ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," then the ",(0,l.kt)("inlineCode",{parentName:"p"},"flash.media.Sound")," implementation will be used. "),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Native Support")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Currently only Android has a native implementation "))),(0,l.kt)("h2",{id:"migrating-from-flashmediasound"},"Migrating from ",(0,l.kt)("inlineCode",{parentName:"h2"},"flash.media.Sound")),(0,l.kt)("h3",{id:"loading-1"},"Loading"),(0,l.kt)("p",null,"Loading a sound using the ",(0,l.kt)("inlineCode",{parentName:"p"},"flash.media.Sound")," class:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},'var effect:Sound = new Sound();\neffect.addEventListener( Event.COMPLETE, sound_loadCompleteHandler );\neffect.addEventListener( IOErrorEvent.IO_ERROR, sound_errorHandler );\neffect.load( new URLRequest( "sounds/effect.mp3" ));\n\nfunction sound_loadCompleteHandler( event:Event ):void \n{\n    effect.play();\n}\n')),(0,l.kt)("p",null,"Becomes the following using the ",(0,l.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.mediaplayer.sound.Sound")," class:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},'var effect:Sound = MediaPlayer.service.soundPool.createSound();\neffect.addEventListener( Event.COMPLETE, sound_loadCompleteHandler );\neffect.addEventListener( IOErrorEvent.IO_ERROR, sound_loadErrorHandler );\neffect.loadFile( File.applicationDirectory.resolvePath("sounds/effect.mp3") );\n\nfunction sound_loadCompleteHandler( event:Event ):void \n{\n    effect.play();\n}\n')),(0,l.kt)("h3",{id:"playback-1"},"Playback"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"var loops:int = 1;\nvar transform:SoundTransform = new SoundTransform();\n\nvar channel:SoundChannel = effect.play( 0, loops, transform );\n")),(0,l.kt)("p",null,"becomes:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"var loops:int = 1;\nvar transform:SoundTransform = new SoundTransform();\n\nvar channel:SoundChannel = effect.play( loops, transform );\n")),(0,l.kt)("p",null,"(still using ",(0,l.kt)("inlineCode",{parentName:"p"},"flash.media.SoundTransform")," but the ",(0,l.kt)("inlineCode",{parentName:"p"},"com.distriqt.extension.mediaplayer.sound.SoundChannel")," class)"),(0,l.kt)("h3",{id:"stopping"},"Stopping"),(0,l.kt)("p",null,"Stopping a sound using flash requires the sound channel:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"channel.stop();\n")),(0,l.kt)("p",null,"Similarly here we use the same process:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-actionscript"},"channel.stop();\n")))}u.isMDXComponent=!0}}]);