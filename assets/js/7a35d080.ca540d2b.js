"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[20044],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=i.createContext({}),l=function(e){var t=i.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=l(e.components);return i.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=l(n),d=a,m=h["".concat(u,".").concat(d)]||h[d]||p[d]||o;return n?i.createElement(m,r(r({ref:t},c),{},{components:n})):i.createElement(m,r({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=h;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<o;l++)r[l]=n[l];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},93129:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return p}});var i=n(87462),a=n(63366),o=(n(67294),n(3905)),r=["components"],s={title:"Authorisation",sidebar_label:"Authorisation"},u=void 0,l={unversionedId:"image/request-authorisation",id:"image/request-authorisation",title:"Authorisation",description:"When you are going to be accessing the user's media you must check that your application has been allowed access.",source:"@site/docs/image/request-authorisation.md",sourceDirName:"image",slug:"/image/request-authorisation",permalink:"/docs/image/request-authorisation",draft:!1,tags:[],version:"current",frontMatter:{title:"Authorisation",sidebar_label:"Authorisation"},sidebar:"image",previous:{title:"Add the Extension",permalink:"/docs/image/add-the-extension"},next:{title:"Saving BitmapData to File",permalink:"/docs/image/saving-bitmapdata-to-file"}},c={},p=[{value:"Usage Description",id:"usage-description",level:2},{value:"Authorisation Status",id:"authorisation-status",level:2},{value:"Request Authorisation",id:"request-authorisation",level:2},{value:"Example",id:"example",level:2}],h={toc:p};function d(e){var t=e.components,s=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"When you are going to be accessing the user's media you must check that your application has been allowed access.\nTo this end the extension provides several helpers to check and request access to the camera roll. "),(0,o.kt)("p",null,"On Android these permissions are listed through the manifest additions.\nOn older versions of Android these permissions are accepted when the user installs the application.\nMore modern versions (Marshmallow 6 ","[v23]","+) require that you request the permissions similar to iOS.\nYou will still need to list them in your manifest and then follow the same code below as for iOS,\nexcept that on Android you will be able to ask multiple times.\nYou should respect the ",(0,o.kt)("inlineCode",{parentName:"p"},"SHOULD_EXPLAIN")," status by displaying additional information to your user\nabout why you require this functionality."),(0,o.kt)("p",null,"On iOS the user must be asked at runtime, which you only get one chance to ask,\nafter which you must direct the user to manually change the permissions in the settings."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"On iOS < 10 you will not need to request permissions for this extension.\nThis is due to iOS not requiring user permission to save image data to the camera roll."),(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"This changed in iOS 10 and you are now required to request permissions."))),(0,o.kt)("h2",{id:"usage-description"},"Usage Description"),(0,o.kt)("p",null,"You can customise the usage description messages as you see fit to suit your application. These messages are displayed in the main body area of the iOS authorisation dialog with the title and buttons being standard (and not customisable)."),(0,o.kt)("p",null,"The image below is an example of the authorisation dialog. The content ",(0,o.kt)("em",{parentName:"p"},'"This app would like to access your photos"')," is the usage description message you can set."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(33552).Z,width:"300",height:"209"})),(0,o.kt)("p",null,"You set these values through adding the usage description keys to your info additions or simply by setting up your configuration options in your ",(0,o.kt)("inlineCode",{parentName:"p"},"apm")," project. (See ",(0,o.kt)("a",{parentName:"p",href:"/docs/image/add-the-extension"},"Add the Extension")," for details on setting these values)."),(0,o.kt)("h2",{id:"authorisation-status"},"Authorisation Status"),(0,o.kt)("p",null,"To get the current status call the ",(0,o.kt)("inlineCode",{parentName:"p"},"authorisationStatus()")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"var status:String = Image.service.authorisationStatus();\n")),(0,o.kt)("p",null,"The returned value will be one of the values defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"AuthorisationStatus")," class:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AuthorisationStatus.SHOULD_EXPLAIN")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AuthorisationStatus.NOT_DETERMINED")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AuthorisationStatus.DENIED")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AuthorisationStatus.UNKNOWN")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AuthorisationStatus.RESTRICTED")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AuthorisationStatus.AUTHORISED"))),(0,o.kt)("h2",{id:"request-authorisation"},"Request Authorisation"),(0,o.kt)("p",null,"To request authorisation call the ",(0,o.kt)("inlineCode",{parentName:"p"},"requestAuthorisation()")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"Image.service.requestAuthorisation();\n")),(0,o.kt)("p",null,"This will present the authorisation dialog (if possible)."),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"The following code will work across both platforms:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-actionscript"},"Image.service.addEventListener( AuthorisationEvent.CHANGED, authorisationChangedHandler );\ncheckAuthorisation();\n\nfunction checkAuthorisation():void \n{\n    switch (Image.service.authorisationStatus())\n    {\n        case AuthorisationStatus.SHOULD_EXPLAIN:\n            // You should further explain the usage here \n            // before calling requestAuthorisation again\n\n        case AuthorisationStatus.NOT_DETERMINED:\n            // REQUEST AUTHORISATION: This will display the permission dialog\n            Image.service.requestAuthorisation();\n            return;\n        \n        case AuthorisationStatus.DENIED:\n        case AuthorisationStatus.UNKNOWN:\n        case AuthorisationStatus.RESTRICTED:\n            // ACCESS DENIED: You should inform your user appropriately\n            return;\n            \n        case AuthorisationStatus.AUTHORISED:\n            // AUTHORISED: Saving to camera roll will be available\n            break;                      \n    }\n}\n\nfunction authorisationChangedHandler( event:AuthorisationEvent ):void\n{\n    // You should perform the above check again\n    checkAuthorisation();\n}\n")))}d.isMDXComponent=!0},33552:function(e,t,n){t.Z=n.p+"assets/images/ios-permission-dialog-ecb65e5a967ba94e0c5d02f886b944a6.png"}}]);