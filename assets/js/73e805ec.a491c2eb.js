"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[98719],{1507:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"facebookapi/migrating-to-version-8","title":"Migrating to v8","description":"Version 8 of the FacebookAPI brings a complete rewrite and restructure of the API to bring it inline with the latest Facebook SDK and to remove a series of API elements that Facebook have deprecated and removed over time.","source":"@site/docs/facebookapi/migrating-to-version-8.md","sourceDirName":"facebookapi","slug":"/facebookapi/migrating-to-version-8","permalink":"/docs/facebookapi/migrating-to-version-8","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Migrating to v8"},"sidebar":"facebookapi","previous":{"title":"Migrating to v9","permalink":"/docs/facebookapi/migrating-to-version-9"},"next":{"title":"Migrating to AndroidX","permalink":"/docs/facebookapi/migrating-to-androidx"}}');var s=o(74848),a=o(28453);const r={title:"Migrating to v8"},t=void 0,c={},l=[{value:"Change extensions",id:"change-extensions",level:2},{value:"Application Descriptor",id:"application-descriptor",level:2},{value:"Imports",id:"imports",level:2},{value:"Initialisation",id:"initialisation",level:2},{value:"App Events",id:"app-events",level:2},{value:"Graph API",id:"graph-api",level:2},{value:"Login",id:"login",level:2},{value:"Share Dialog",id:"share-dialog",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Version 8 of the FacebookAPI brings a complete rewrite and restructure of the API to bring it inline with the latest Facebook SDK and to remove a series of API elements that Facebook have deprecated and removed over time."}),"\n",(0,s.jsx)(n.p,{children:"During this redevelopment we have broken the extension up into several extensions each representing a component of the Facebook SDK."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Core: contains the base SDK including analytics, events, app links and the graph API;"}),"\n",(0,s.jsx)(n.li,{children:"Login: contains the login SDK allowing you to sign in users using their Facebook credentials;"}),"\n",(0,s.jsx)(n.li,{children:"Share: contains the share SDK allowing your users to share content;"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This allows you to only add the components that you require in your application allowing you to reduce the size of your application."}),"\n",(0,s.jsx)(n.p,{children:"Migrating from a previous version of the ANE will involve some major changes to your code. Below we will outline some of the major changes and how to address them."}),"\n",(0,s.jsx)(n.p,{children:"While this guide covers the key points on migrating, we do highly recommend considering re-implementing the extensions from the start, due to the number of changes."}),"\n",(0,s.jsx)(n.h2,{id:"change-extensions",children:"Change extensions"}),"\n",(0,s.jsxs)(n.p,{children:["Firstly you should remove the ",(0,s.jsx)(n.code,{children:"com.distriqt.FacebookAPI"})," extension from your application."]}),"\n",(0,s.jsx)(n.p,{children:"Then add the 3 new Facebook extensions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"com.distriqt.facebook.Core"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"com.distriqt.facebook.Login"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"com.distriqt.facebook.Share"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Your extensions node should now contain:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<extensions>\n    <extensionID>com.distriqt.facebook.Core</extensionID>\n    <extensionID>com.distriqt.facebook.Login</extensionID>\n    <extensionID>com.distriqt.facebook.Share</extensionID>\n\n    <extensionID>com.distriqt.Core</extensionID>\n    <extensionID>com.distriqt.Bolts</extensionID>\n\n    <extensionID>androidx.core</extensionID>\n    <extensionID>androidx.appcompat</extensionID>\n    <extensionID>androidx.browser</extensionID>\n    <extensionID>androidx.cardview</extensionID>\n    <extensionID>androidx.vectordrawable</extensionID>\n    <extensionID>com.android.installreferrer</extensionID>\n</extensions>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"application-descriptor",children:"Application Descriptor"}),"\n",(0,s.jsxs)(n.p,{children:["We suggest removing all your manifest additions and info additions and checking the ",(0,s.jsx)(n.a,{href:"core/add-the-extension",children:"add the extension"})," guide to ensure you have the latest."]}),"\n",(0,s.jsxs)(n.p,{children:["Note there is a small additional manifest entry for the Share extension ",(0,s.jsx)(n.a,{href:"share/add-the-extension#manifest-additions",children:"here"})]}),"\n",(0,s.jsx)(n.h2,{id:"imports",children:"Imports"}),"\n",(0,s.jsxs)(n.p,{children:["Remove any imports from the ",(0,s.jsx)(n.code,{children:"com.distriqt.extension.facebookapi"})," package. All the imports now are in the ",(0,s.jsx)(n.code,{children:"com.distriqt.extension.facebook"})," package, eg:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:"import com.distriqt.extension.facebook.core.Facebook;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"initialisation",children:"Initialisation"}),"\n",(0,s.jsxs)(n.p,{children:["Previously you would have called ",(0,s.jsx)(n.code,{children:"initialiseApp()"})," as below:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'FacebookAPI.service.initialiseApp( "YOUR_FACEBOOK_APP_ID" );\n'})}),"\n",(0,s.jsx)(n.p,{children:"Change this to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:"Facebook.instance.initialise();\n"})}),"\n",(0,s.jsxs)(n.p,{children:["More on initialisation ",(0,s.jsx)(n.a,{href:"core/initialise-the-extension",children:"here"})]}),"\n",(0,s.jsx)(n.h2,{id:"app-events",children:"App Events"}),"\n",(0,s.jsx)(n.p,{children:"Key points:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Class rename: ",(0,s.jsx)(n.code,{children:"FacebookAppEvent"})," -> ",(0,s.jsx)(n.code,{children:"AppEvent"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"FacebookAPI.service.appEvents.logEvent()"})," -> ",(0,s.jsx)(n.code,{children:"Facebook.instance.appEventsLogger.logEvent()"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For example the following legacy code:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'var event:FacebookAppEvent = new FacebookAppEvent( AppEventsConstants.EVENT_NAME_ADDED_TO_CART );\nevent.valueToSum = 54.23;\n\nevent.setParameter( AppEventsConstants.EVENT_PARAM_CURRENCY, "USD" );\nevent.setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_TYPE, "product" );\nevent.setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_ID, "HDFU-8452" );\n\n\nFacebookAPI.service.appEvents.logEvent( event );\n'})}),"\n",(0,s.jsx)(n.p,{children:"becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'var event:AppEvent = \n    new AppEvent()\n        .setEventName( AppEventsConstants.EVENT_NAME_ADDED_TO_CART )\n        .setValueToSum( 54.23 )\n        .setParameter( AppEventsConstants.EVENT_PARAM_CURRENCY, "USD" )\n        .setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_TYPE, "product" )\n        .setParameter( AppEventsConstants.EVENT_PARAM_CONTENT_ID, "HDFU-8452" )\n    ;\n\nFacebook.instance.appEventsLogger.logEvent( event );\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More on app events ",(0,s.jsx)(n.a,{href:"core/app-events/overview",children:"here"})]}),"\n",(0,s.jsx)(n.h2,{id:"graph-api",children:"Graph API"}),"\n",(0,s.jsx)(n.p,{children:"The graph API remains fairly similar:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Package move: ",(0,s.jsx)(n.code,{children:"com.distriqt.extension.facebookapi.graphapi"})," -> ",(0,s.jsx)(n.code,{children:"com.distriqt.extension.facebook.graphapi"})]}),"\n",(0,s.jsxs)(n.li,{children:["Class rename: ",(0,s.jsx)(n.code,{children:"GraphAPIRequest"})," -> ",(0,s.jsx)(n.code,{children:"GraphRequest"})]}),"\n",(0,s.jsxs)(n.li,{children:["Class rename: ",(0,s.jsx)(n.code,{children:"GraphAPIRequestBuilder"})," -> ",(0,s.jsx)(n.code,{children:"GraphRequestBuilder"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"FacebookAPI.service.graphAPI.makeRequest()"})," -> ",(0,s.jsx)(n.code,{children:"Facebook.instance.graphAPI.makeRequest()"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For example the following legacy code:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'var request:GraphAPIRequest = new GraphAPIRequestBuilder()\n    .setPath( "/me" )\n    .build();\n\nFacebookAPI.service.graphAPI.makeRequest( request );\n'})}),"\n",(0,s.jsx)(n.p,{children:"becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'var request:GraphRequest = new GraphRequestBuilder()\n    .setPath( "/me" )\n    .build();\n\nFacebook.instance.graphAPI.makeRequest( request );\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More on the graph API ",(0,s.jsx)(n.a,{href:"core/graph-api/overview",children:"here"})]}),"\n",(0,s.jsx)(n.h2,{id:"login",children:"Login"}),"\n",(0,s.jsxs)(n.p,{children:["To login you would have called ",(0,s.jsx)(n.code,{children:"createSession()"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'FacebookAPI.service.createSession( [ "public_profile", "email" ], true );\n'})}),"\n",(0,s.jsx)(n.p,{children:"This becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'FacebookLogin.instance.logInWithReadPermissions( [ "public_profile", "email" ] );\n'})}),"\n",(0,s.jsxs)(n.p,{children:["There are no longer a series of session events to handle, so you can remove any code handling ",(0,s.jsx)(n.code,{children:"FacebookAPISessionEvent"}),"s and replace with a couple of simple ",(0,s.jsx)(n.code,{children:"FacebookLoginEvent"}),"/",(0,s.jsx)(n.code,{children:"FacebookLoginErrorEvent"})," events:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:'FacebookLogin.instance.addEventListener( FacebookLoginEvent.SUCCESS, successHandler );\nFacebookLogin.instance.addEventListener( FacebookLoginEvent.CANCEL, cancelHandler );\nFacebookLogin.instance.addEventListener( FacebookLoginErrorEvent.ERROR, errorHandler );\n\nFacebookLogin.instance.logInWithReadPermissions( [ "public_profile", "email" ] );\n\n\nfunction successHandler( event:FacebookLoginEvent ):void\n{\n    trace( "successHandler()" );\n    // You can now access the user\n}\n\nfunction cancelHandler( event:FacebookLoginEvent ):void\n{\n    trace( "cancelHandler()" );\n}\n\nfunction errorHandler( event:FacebookLoginErrorEvent ):void\n{\n    trace( "errorHandler() code :    " + event.errorID  );\n    trace( "errorHandler() message : " + event.text  );\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More on the login process ",(0,s.jsx)(n.a,{href:"login/facebook-login",children:"here"})]}),"\n",(0,s.jsx)(n.h2,{id:"share-dialog",children:"Share Dialog"}),"\n",(0,s.jsx)(n.p,{children:"Sharing through the Facebook SDK has changed dramatically over the past few years."}),"\n",(0,s.jsx)(n.p,{children:"You basically only have access to the Share dialog now and a smaller set of content builders (with open graph stories being removed)."}),"\n",(0,s.jsx)(n.p,{children:"The share dialog show has moved, so:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:"FacebookAPI.service.shareDialog.show( builder.build() );\n"})}),"\n",(0,s.jsx)(n.p,{children:"becomes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-as3",children:"FacebookShare.instance.shareDialog.show( builder.build() );\n"})}),"\n",(0,s.jsxs)(n.p,{children:["More on the share dialog ",(0,s.jsx)(n.a,{href:"share/share-dialog",children:"here"})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>t});var i=o(96540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);