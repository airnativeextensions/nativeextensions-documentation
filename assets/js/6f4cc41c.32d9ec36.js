"use strict";(self.webpackChunknativeextensions_documentation=self.webpackChunknativeextensions_documentation||[]).push([[808],{3905:(t,e,n)=>{n.d(e,{Zo:()=>c,kt:()=>h});var a=n(67294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var l=a.createContext({}),p=function(t){var e=a.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},c=function(t){var e=p(t.components);return a.createElement(l.Provider,{value:e},t.children)},u="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,r=t.originalType,l=t.parentName,c=s(t,["components","mdxType","originalType","parentName"]),u=p(n),m=i,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(h,o(o({ref:e},c),{},{components:n})):a.createElement(h,o({ref:e},c))}));function h(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var r=n.length,o=new Array(r);o[0]=m;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[u]="string"==typeof t?t:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},73635:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const r={title:"Auto Start",sidebar_label:"Auto Start"},o=void 0,s={unversionedId:"application/auto-start",id:"application/auto-start",title:"Auto Start",description:"This is an Android only feature.",source:"@site/docs/application/auto-start.md",sourceDirName:"application",slug:"/application/auto-start",permalink:"/docs/application/auto-start",draft:!1,tags:[],version:"current",frontMatter:{title:"Auto Start",sidebar_label:"Auto Start"},sidebar:"application",previous:{title:"Alarm Manager",permalink:"/docs/application/alarm-manager"},next:{title:"Application State Events",permalink:"/docs/application/application-state-events"}},l={},p=[{value:"Auto Start",id:"auto-start",level:2},{value:"State",id:"state",level:3},{value:"Was Auto Started",id:"was-auto-started",level:3},{value:"Manifest Additions",id:"manifest-additions",level:3},{value:"Android 30",id:"android-30",level:3}],c={toc:p},u="wrapper";function d(t){let{components:e,...r}=t;return(0,i.kt)(u,(0,a.Z)({},c,r,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"This is an Android only feature.")),(0,i.kt)("h2",{id:"auto-start"},"Auto Start"),(0,i.kt)("p",null,"This process allows your application to automatically start when the device is booted or turned on."),(0,i.kt)("p",null,"You must run your application at least once before automatic starting can be initialised. You enable\nit by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"setAutoStart")," function as below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"Application.service.setAutoStart( true );\n")),(0,i.kt)("p",null,"If you wish to disable auto start at a later point you can pass ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," to this same function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"Application.service.setAutoStart( false );\n")),(0,i.kt)("h3",{id:"state"},"State"),(0,i.kt)("p",null,"You can check if auto start is enabled by checking the ",(0,i.kt)("inlineCode",{parentName:"p"},"isAutoStartEnabled()")," flag."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Application.service.isAutoStartEnabled())\n{\n    //\n}\n")),(0,i.kt)("h3",{id:"was-auto-started"},"Was Auto Started"),(0,i.kt)("p",null,"You can check if your application was launched using the auto start mechanism using the ",(0,i.kt)("inlineCode",{parentName:"p"},"wasAutoStarted()")," flag."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Application.service.wasAutoStarted())\n{\n    // This launch was from an auto start\n}\n")),(0,i.kt)("h3",{id:"manifest-additions"},"Manifest Additions"),(0,i.kt)("p",null,"You must make sure you have added the following receiver and permission to your application descriptors\nmanifest additions."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />\n\x3c!-- Required for Android 30 --\x3e\n<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>\n\n<application>\n    <receiver android:enabled="true" android:name="com.distriqt.extension.application.receivers.ApplicationStartupReceiver" android:permission="android.permission.RECEIVE_BOOT_COMPLETED">\n        <intent-filter>\n            <action android:name="android.intent.action.BOOT_COMPLETED" />\n            <action android:name="android.intent.action.QUICKBOOT_POWERON" />\n            <action android:name="com.htc.intent.action.QUICKBOOT_POWERON" />\n            <category android:name="android.intent.category.DEFAULT" />\n        </intent-filter>\n    </receiver>\n</application>\n')),(0,i.kt)("h3",{id:"android-30"},"Android 30"),(0,i.kt)("p",null,"With Android 30, the approach that was used in previous versions of Android to auto-launch your application has been removed meaning that we can no longer directly launch your application on boot."),(0,i.kt)("p",null,'The new approach requires a system permission from the user to "Display over other apps". With this permission we can still launch your application on launch using an updated approach.'),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(79925).Z,width:"400",height:"822"})),(0,i.kt)("p",null,"To check if the user has granted this permission you can call the ",(0,i.kt)("inlineCode",{parentName:"p"},"hasAutoStartPermission()")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var hasPermission:Boolean = Application.service.hasAutoStartPermission();\n")),(0,i.kt)("p",null,"If the user hasn't granted it you can open the system settings via the ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAutoStartPermission()")," method:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (!Application.service.hasAutoStartPermission())\n{\n    Application.service.requestAutoStartPermission();\n}\n")),(0,i.kt)("p",null,"Unfortunately there is no feedback from this process but you should be able to use the application state events to handle an activation of your application after calling this."),(0,i.kt)("p",null,"Once you have this permission, then auto start will work as above."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Some Android TV devices don't support this permission request. We have added an additional function to check if the auto start permission request is available:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"if (Application.service.canRequestAutoStartPermission())\n{\n    Application.service.requestAutoStartPermission();\n}\n")),(0,i.kt)("p",{parentName:"admonition"},"Also the ",(0,i.kt)("inlineCode",{parentName:"p"},"requestAutoStartPermission()")," method will return false if the permission request isn't supported or not required")))}d.isMDXComponent=!0},79925:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/android_autostart_permission-e601fe31ee5bb47c3ae198465519c5c8.png"}}]);